<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RDBMS Complete Interview Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #0ea5e9;
            --secondary-color: #3b82f6;
            --accent-color: #06b6d4;
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --border-subtle: #475569;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --purple-color: #a855f7;
            --pink-color: #ec4899;
            --code-bg: #0d1117;
            --sidebar-width: 320px;
            --header-height: 70px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            z-index: 1000;
            display: flex;
            align-items: center;
            padding: 0 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1800px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .logo:hover {
            opacity: 0.8;
        }

        .logo i {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 25px;
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            color: var(--text-primary);
            width: 300px;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .search-box i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .progress-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--card-bg);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .progress-bar-mini {
            width: 100px;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            left: 0;
            top: var(--header-height);
            bottom: 0;
            width: var(--sidebar-width);
            background: rgba(30, 41, 59, 0.98);
            backdrop-filter: blur(10px);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            z-index: 999;
            transition: transform 0.3s ease;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }

        .difficulty-section {
            margin: 1rem 0;
        }

        .difficulty-header {
            padding: 1rem 1.5rem;
            background: var(--card-bg);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .difficulty-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            transition: width 0.3s ease;
        }

        .difficulty-header:hover::before {
            width: 100%;
            opacity: 0.1;
        }

        .difficulty-header:hover {
            background: rgba(14, 165, 233, 0.05);
        }

        .difficulty-header.active {
            background: rgba(14, 165, 233, 0.1);
            border-left-color: var(--primary-color);
        }

        .difficulty-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
            font-size: 0.95rem;
            position: relative;
            z-index: 1;
            color: var(--text-primary);
        }

        .difficulty-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-foundation {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success-color);
        }

        .badge-basic {
            background: rgba(14, 165, 233, 0.2);
            color: var(--primary-color);
        }

        .badge-intermediate {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning-color);
        }

        .badge-advanced {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error-color);
        }

        .difficulty-header i {
            transition: transform 0.3s ease;
            position: relative;
            z-index: 1;
            color: var(--text-secondary);
        }

        .difficulty-header.active i {
            transform: rotate(180deg);
        }

        .question-list {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .question-list.active {
            max-height: 3000px;
        }

        .question-item {
            padding: 0.75rem 1.5rem 0.75rem 2.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .question-item:hover {
            background: rgba(14, 165, 233, 0.05);
            border-left-color: var(--primary-color);
            padding-left: 2.75rem;
            color: var(--text-primary);
        }

        .question-item.active {
            background: rgba(14, 165, 233, 0.15);
            border-left-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: 500;
        }

        .question-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--border-color);
            font-size: 0.75rem;
            font-weight: 600;
            flex-shrink: 0;
            color: var(--text-secondary);
        }

        .question-item.active .question-number {
            background: var(--primary-color);
            color: var(--dark-bg);
        }

        .question-item.completed .question-number {
            background: var(--success-color);
            color: white;
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            padding: 2rem;
            min-height: calc(100vh - var(--header-height));
        }

        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
        }

        .question-content {
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        .question-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-header {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .question-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
        }

        .question-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .question-meta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .meta-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--card-bg);
            border-radius: 8px;
            font-size: 0.85rem;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .content-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .content-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 8px 16px rgba(14, 165, 233, 0.1);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--primary-color);
        }

        .section-title i {
            font-size: 1.75rem;
        }

        .definition-box {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.05) 0%, rgba(6, 182, 212, 0.05) 100%);
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .definition-box p {
            font-size: 1.05rem;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .definition-box strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        .keyword-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin: 1.5rem 0;
        }

        .keyword-tag {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.2) 0%, rgba(6, 182, 212, 0.2) 100%);
            color: var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            border: 1px solid rgba(14, 165, 233, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .keyword-tag:hover {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.3) 0%, rgba(6, 182, 212, 0.3) 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(14, 165, 233, 0.2);
        }

        .example-box {
            background: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
        }

        .example-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .example-title {
            font-weight: 600;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .copy-btn {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        pre {
            margin: 0;
            overflow-x: auto;
        }

        code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #e0e0e0;
        }

        .cross-questions {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(251, 191, 36, 0.05) 100%);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .cross-question-item {
            padding: 1rem;
            margin: 0.75rem 0;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 8px;
            border-left: 3px solid var(--warning-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cross-question-item:hover {
            background: rgba(30, 41, 59, 0.8);
            transform: translateX(5px);
        }

        .cross-question-text {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            color: var(--text-primary);
        }

        .cross-question-text i {
            color: var(--warning-color);
            margin-top: 0.2rem;
        }

        .cross-question-text strong {
            color: var(--text-primary);
        }

        .cross-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            margin-top: 0.75rem;
            padding-left: 1.5rem;
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.7;
        }

        .cross-question-item.active .cross-answer {
            max-height: 1000px;
            margin-top: 1rem;
        }

        .cross-answer strong {
            color: var(--text-primary);
        }

        .scenario-box {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.05) 0%, rgba(217, 70, 239, 0.05) 100%);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .scenario-title {
            color: var(--purple-color);
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .scenario-box p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 0.5rem;
        }

        .scenario-box strong {
            color: var(--text-primary);
        }

        .scenario-box ul {
            margin-left: 1.5rem;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .image-container {
            text-align: center;
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .image-container svg {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .image-caption {
            margin-top: 1rem;
            color: var(--text-muted);
            font-size: 0.9rem;
            font-style: italic;
        }

        .highlight-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
            border-left: 4px solid var(--success-color);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .highlight-box strong {
            color: var(--success-color);
        }

        .highlight-box p {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }

        th {
            background: rgba(14, 165, 233, 0.1);
            color: var(--primary-color);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 1rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        td strong {
            color: var(--text-primary);
        }

        tr:hover td {
            background: rgba(14, 165, 233, 0.05);
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .comparison-card {
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .comparison-card h4 {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-primary);
        }

        .comparison-card p {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .comparison-card ul {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-left: 1.5rem;
        }

        .comparison-card strong {
            color: var(--text-primary);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            gap: 1rem;
        }

        .nav-btn {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 250px;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--primary-color);
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn.next {
            margin-left: auto;
        }

        /* Mobile Toggle */
        .mobile-toggle {
            display: none;
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4);
        }

        .mobile-toggle i {
            font-size: 1.5rem;
            color: white;
        }

        /* Scroll to Top */
        .scroll-top {
            position: fixed;
            bottom: 2rem;
            right: 5rem;
            width: 50px;
            height: 50px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 999;
        }

        .scroll-top:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
            transform: translateY(-5px);
        }

        .scroll-top.visible {
            display: flex;
        }

        .scroll-top i {
            color: var(--text-primary);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .mobile-toggle {
                display: flex;
            }

            .search-box input {
                width: 200px;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 0 1rem;
            }

            .logo {
                font-size: 1.2rem;
            }

            .search-box {
                display: none;
            }

            .main-content {
                padding: 1rem;
            }

            .question-title {
                font-size: 1.5rem;
            }

            .navigation-buttons {
                flex-direction: column;
            }

            .nav-btn {
                max-width: 100%;
            }

            .nav-btn.next {
                margin-left: 0;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo" onclick="scrollToTop()">
                <i class="fas fa-database"></i>
                <span>RDBMS Complete Interview Guide</span>
            </div>
            
            <div class="header-actions">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search questions...">
                    <i class="fas fa-search"></i>
                </div>
                
                <div class="progress-indicator">
                    <span id="progressText">Q 1 of 5</span>
                    <div class="progress-bar-mini">
                        <div class="progress-fill" id="progressBarFill" style="width: 20%"></div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <!-- Foundation -->
        <div class="difficulty-section">
            <div class="difficulty-header active" data-section="foundation">
                <div class="difficulty-title">
                    <span class="difficulty-badge badge-foundation">Foundation</span>
                    <span>Core Concepts</span>
                </div>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="question-list active">
                <div class="question-item active" data-question="q1">
                    <span class="question-number"></span>
                    <span>What is a Database?</span>
                </div>
                <div class="question-item" data-question="q2">
                    <span class="question-number"></span>
                    <span>What is Data?</span>
                </div>
                <div class="question-item" data-question="q3">
                    <span class="question-number"></span>
                    <span>What is a DBMS?</span>
                </div>
                <div class="question-item" data-question="q4">
                    <span class="question-number"></span>
                    <span>What is an RDBMS?</span>
                </div>
                <div class="question-item" data-question="q5">
                    <span class="question-number"></span>
                    <span>What is a Table?</span>
                </div>
                <div class="question-item" data-question="q6">
                    <span class="question-number"></span>
                    <span>What is a Record?</span>
                </div>
                <div class="question-item" data-question="q7">
                    <span class="question-number"></span>
                    <span>What is a Field or Column?</span>
                </div>
                <div class="question-item" data-question="q8">
                    <span class="question-number"></span>
                    <span>What is SQL?</span>
                </div>
                <div class="question-item" data-question="q9">
                    <span class="question-number"></span>
                    <span>What is a Query?</span>
                </div>
                <div class="question-item" data-question="q10">
                    <span class="question-number"></span>
                    <span>What is "Relational" in RDBMS?</span>
                </div>
                <div class="question-item" data-question="q11">
                    <span class="question-number"></span>
                    <span>What is Data Redundancy?</span>
                </div>
                <div class="question-item" data-question="q12">
                    <span class="question-number"></span>
                    <span>What is Data Integrity?</span>
                </div>
                
                <div class="question-item" data-question="q13">
                    <span class="question-number"></span>
                    <span>What is Referential Integrity?</span>
                </div>
                
                 <div class="question-item" data-question="q14">
                    <span class="question-number"></span>
                    <span>Data and What is a Database</span>
                </div>
            </div>
        </div>

        <!-- Part A: EF CODD -->
        <div class="difficulty-section">
            <div class="difficulty-header active" data-section="codd-rules">
                <div class="difficulty-title">
                    <span class="difficulty-badge badge-expert">Expert Level</span>
                    <span>E.F. Codd & Relational Model</span>
                </div>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="question-list active">
                <div class="question-item active" data-question="q30">
                    <span class="question-number"></span>
                    <span>Who is E.F. Codd?</span>
                </div>
                <div class="question-item" data-question="q31">
                    <span class="question-number"></span>
                    <span>What is the Relational Model?</span>
                </div>
                <div class="question-item" data-question="q32">
                    <span class="question-number"></span>
                    <span>Components of Relational Model</span>
                </div>
                <div class="question-item" data-question="q33">
                    <span class="question-number"></span>
                    <span>How Many Codd's Rules?</span>
                </div>
                <div class="question-item" data-question="q34">
                    <span class="question-number"></span>
                    <span>Rule 0: Foundation Rule</span>
                </div>
                <div class="question-item" data-question="q35">
                    <span class="question-number"></span>
                    <span>Rule 1: Information Rule</span>
                </div>
                <div class="question-item" data-question="q36">
                    <span class="question-number"></span>
                    <span>Rule 2: Guaranteed Access Rule</span>
                </div>
                <div class="question-item" data-question="q37">
                    <span class="question-number"></span>
                    <span>Rule 3: Null Values Treatment</span>
                </div>
                <div class="question-item" data-question="q38">
                    <span class="question-number"></span>
                    <span>Rule 4: Active Online Catalog</span>
                </div>
                <div class="question-item" data-question="q39">
                    <span class="question-number"></span>
                    <span>Rule 5: Comprehensive Data Sub-language</span>
                </div>
                <div class="question-item" data-question="q40">
                    <span class="question-number"></span>
                    <span>Rule 6: View Updating Rule</span>
                </div>
                <div class="question-item" data-question="q41">
                    <span class="question-number"></span>
                    <span>Rule 7: High-Level Operations</span>
                </div>
                <div class="question-item" data-question="q42">
                    <span class="question-number"></span>
                    <span>Rule 8: Physical Data Independence</span>
                </div>
                <div class="question-item" data-question="q43">
                    <span class="question-number"></span>
                    <span>Rule 9: Logical Data Independence</span>
                </div>
                <div class="question-item" data-question="q44">
                    <span class="question-number"></span>
                    <span>Rule 10: Integrity Independence</span>
                </div>
                <div class="question-item" data-question="q45">
                    <span class="question-number"></span>
                    <span>Rule 11: Distribution Independence</span>
                </div>
                <div class="question-item" data-question="q46">
                    <span class="question-number"></span>
                    <span>Rule 12: Non-subversion Rule</span>
                </div>
                <div class="question-item" data-question="q47">
                    <span class="question-number"></span>
                    <span>Relevance of Codd's Rules Today</span>
                </div>
                <div class="question-item" data-question="q48">
                    <span class="question-number"></span>
                    <span>Modern RDBMS & Codd's Rules</span>
                </div>
                <div class="question-item" data-question="q49">
                    <span class="question-number"></span>
                    <span>Practical Importance of Relational Model</span>
                </div>
            </div>
        </div>

        <!-- Part B: ACID Properties -->
        <div class="difficulty-section">
            <div class="difficulty-header" data-section="acid-properties">
                <div class="difficulty-title">
                    <span class="difficulty-badge badge-expert">Expert Level</span>
                    <span>ACID Properties</span>
                </div>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="question-list">
                <div class="question-item" data-question="q70">
                    <span class="question-number"></span>
                    <span>What is ACID?</span>
                </div>
                <div class="question-item" data-question="q71">
                    <span class="question-number"></span>
                    <span>ACID Properties</span>
                </div>
                <div class="question-item" data-question="q72">
                    <span class="question-number"></span>
                    <span>ACID Properties Explained</span>
                </div>
                <div class="question-item" data-question="q73">
                    <span class="question-number"></span>
                    <span>Why ACID is Important?</span>
                </div>                
                <div class="question-item" data-question="q74">
                    <span class="question-number"></span>
                    <span>Atomicity Explained</span>
                </div>
                <div class="question-item" data-question="q75">
                    <span class="question-number"></span>
                    <span>Consistency Explained</span>
                </div>
                <div class="question-item" data-question="q76">
                    <span class="question-number"></span>
                    <span>Isolation Explained</span>
                </div>
                <div class="question-item" data-question="q77">
                    <span class="question-number"></span>
                    <span>Durability Explained</span>
                </div>
                <div class="question-item" data-question="q78">
                    <span class="question-number"></span>
                    <span>Durability Mechanisms</span>
                </div>
                <div class="question-item" data-question="q79">
                    <span class="question-number"></span>
                    <span>Deadlock</span>
                </div>
                <div class="question-item" data-question="q80">
                    <span class="question-number"></span>
                    <span>Isolation Levels</span>
                </div>
                <div class="question-item" data-question="q81">
                    <span class="question-number"></span>
                    <span>Locking in RDBMS</span>
                </div>
                <div class="question-item" data-question="q82">
                    <span class="question-number"></span>
                    <span>Read Phenomena in Database</span>
                </div>
                <div class="question-item" data-question="q83">
                    <span class="question-number"></span>
                    <span>Transaction</span>
                </div>
                <div class="question-item" data-question="q84">
                    <span class="question-number"></span>
                    <span>Transaction States in DBMS</span>
                </div>
                <div class="question-item" data-question="q85">
                    <span class="question-number"></span>
                    <span>Savepoints in Transactions</span>
                </div>
                <div class="question-item" data-question="q86">
                    <span class="question-number"></span>
                    <span>Transaction Log Role</span>
                </div>
                <div class="question-item" data-question="q87">
                    <span class="question-number"></span>
                    <span>Concurrency Control</span>
                </div>                                               
                <div class="question-item" data-question="q88">
                    <span class="question-number"></span>
                    <span>Ensuring Atomicity</span>
                </div>
                <div class="question-item" data-question="q89">
                    <span class="question-number"></span>
                    <span>COMMIT vs ROLLBACK</span>
                </div>  
                <div class="question-item" data-question="q90">
                    <span class="question-number"></span>
                    <span>Commit & Rollback Mechanism</span>
                </div>
                <div class="question-item" data-question="q91">
                    <span class="question-number"></span>
                    <span>Real-world ACID Implementation Scenarios</span>
                </div>                                
                <div class="question-item" data-question="q92">
                    <span class="question-number"></span>
                    <span>ACID in Distributed Systems</span>
                </div>
                <div class="question-item" data-question="q93">
                    <span class="question-number"></span>
                    <span>Limitations of ACID</span>
                </div>
                <div class="question-item" data-question="q94">
                    <span class="question-number"></span>
                    <span>Difference Between ACID and BASE</span>
                </div>
                
            </div>
        </div>

        <!-- Part C: CAP Theorem -->
        <div class="difficulty-section">
            <div class="difficulty-header" data-section="cap-theorem">
                <div class="difficulty-title">
                    <span class="difficulty-badge badge-expert">Expert Level</span>
                    <span>CAP Theorem</span>
                </div>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="question-list">
                <div class="question-item" data-question="q167">
                    <span class="question-number"></span>
                    <span>What is CAP Theorem?</span>
                </div>
                <div class="question-item" data-question="q168">
                    <span class="question-number"></span>
                    <span>C, A, P Components</span>
                </div>
                <div class="question-item" data-question="q169">
                    <span class="question-number"></span>
                    <span>Why Not All Three?</span>
                </div>
                <div class="question-item" data-question="q170">
                    <span class="question-number"></span>
                    <span>Consistency vs Availability</span>
                </div>
                <div class="question-item" data-question="q171">
                    <span class="question-number"></span>
                    <span>Network Partitioning</span>
                </div>
                <div class="question-item" data-question="q172">
                    <span class="question-number"></span>
                    <span>CA, CP, AP Systems</span>
                </div>
                <div class="question-item" data-question="q173">
                    <span class="question-number"></span>
                    <span>RDBMS in CAP Terms</span>
                </div>
                <div class="question-item" data-question="q174">
                    <span class="question-number"></span>
                    <span>Modern Distributed SQL & CAP</span>
                </div>
                <div class="question-item" data-question="q175">
                    <span class="question-number"></span>
                    <span>Eventual Consistency</span>
                </div>
                <div class="question-item" data-question="q176">
                    <span class="question-number"></span>
                    <span>CAP & BASE Properties</span>
                </div>
            </div>
        </div>

    </nav>
    
    <!-- Main Content -->
    <main class="main-content">
        <div class="content-wrapper">
            
            <!-- Question 1: What is a Database? -->
            <div class="question-content active" id="q1">
                <div class="question-header">
                    <h1 class="question-title">What is a Database?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 5 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>Well, to put it simply, a <strong>Database</strong> is basically an organized collection of data that's stored electronically in a computer system. You can think of it as a digital filing cabinet where information is systematically arranged, making it really easy to store, retrieve, manage, and update data whenever needed.</p>
                        <p style="margin-top: 1rem;">What makes databases so powerful is that they're managed by what we call Database Management Systems, or DBMS for short. These systems provide a clean interface between the actual data and the users or applications that need to access it. It's like having a really efficient librarian who knows exactly where every piece of information is stored.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Data Storage</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Organization</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Retrieval</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Management System</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Structured Data</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Example
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-university"></i> University Student Database
                        </div>
                        <p><strong>Scenario:</strong> Let me give you a practical example. Imagine a university that needs to manage information for about 50,000 students - we're talking personal details, course enrollments, grades, attendance records, fee payments, and more.</p>
                        <p style="margin-top: 1rem;"><strong>Without a Database:</strong></p>
                        <ul>
                            <li>All that information would be stored in paper files or maybe separate Excel sheets scattered across different departments</li>
                            <li>Finding a specific student's information? That could take hours of manual searching</li>
                            <li>There's a huge risk of losing data or having duplicate entries everywhere</li>
                            <li>Generating reports or analyzing trends would be a nightmare, if not impossible</li>
                            <li>Forget about multiple people accessing the same data simultaneously - that's just asking for trouble</li>
                        </ul>
                        <p style="margin-top: 1rem;"><strong>With a Database:</strong></p>
                        <ul>
                            <li>Everything is centralized in one system - single source of truth</li>
                            <li>You can find any student's information in literally seconds using queries</li>
                            <li>Automatic backups mean you'll never lose important data</li>
                            <li>Generating reports, analytics, and insights becomes incredibly easy</li>
                            <li>Multiple administrators can access and work with the data simultaneously without any conflicts</li>
                            <li>You can enforce rules like "a student can't register for more than 6 courses" automatically</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Visual Understanding
                    </div>
                    <div class="image-container">
                        <svg width="800" height="500" viewBox="0 0 800 500">
                            <!-- Background -->
                            <rect width="800" height="500" fill="#1e293b"/>
                            
                            <!-- Title -->
                            <text x="400" y="35" font-size="24" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Database: Organized Data Storage</text>
                            
                            <!-- Traditional Storage (Left) -->
                            <rect x="50" y="80" width="300" height="350" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="2" rx="12"/>
                            <text x="200" y="110" font-size="18" fill="#ef4444" text-anchor="middle" font-weight="bold">‚ùå Without Database</text>
                            
                            <!-- File Cabinet -->
                            <rect x="80" y="130" width="80" height="100" fill="#334155" stroke="#ef4444" stroke-width="2" rx="4"/>
                            <text x="120" y="185" font-size="32" text-anchor="middle">üìÅ</text>
                            <text x="120" y="250" font-size="12" fill="#cbd5e1" text-anchor="middle">Paper Files</text>
                            
                            <!-- Excel -->
                            <rect x="180" y="130" width="80" height="100" fill="#334155" stroke="#ef4444" stroke-width="2" rx="4"/>
                            <text x="220" y="185" font-size="32" text-anchor="middle">üìä</text>
                            <text x="220" y="250" font-size="12" fill="#cbd5e1" text-anchor="middle">Excel Sheets</text>
                            
                            <!-- Problems -->
                            <text x="200" y="290" font-size="13" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Problems:</text>
                            <text x="200" y="315" font-size="11" fill="#94a3b8" text-anchor="middle">üîç Slow Search</text>
                            <text x="200" y="340" font-size="11" fill="#94a3b8" text-anchor="middle">üìë Data Duplication</text>
                            <text x="200" y="365" font-size="11" fill="#94a3b8" text-anchor="middle">‚ùå Data Loss Risk</text>
                            <text x="200" y="390" font-size="11" fill="#94a3b8" text-anchor="middle">üë• No Multi-User</text>
                            <text x="200" y="415" font-size="11" fill="#94a3b8" text-anchor="middle">üìâ Hard to Analyze</text>
                            
                            <!-- Arrow -->
                            <path d="M 360 255 L 430 255" stroke="#10b981" stroke-width="4" marker-end="url(#arrowgreen)"/>
                            <text x="395" y="245" font-size="14" fill="#10b981" text-anchor="middle" font-weight="bold">Better Solution</text>
                            
                            <!-- Database (Right) -->
                            <rect x="440" y="80" width="310" height="350" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="2" rx="12"/>
                            <text x="595" y="110" font-size="18" fill="#10b981" text-anchor="middle" font-weight="bold">‚úÖ With Database</text>
                            
                            <!-- Database Icon -->
                            <g>
                                <!-- Database cylinder -->
                                <ellipse cx="595" cy="160" rx="60" ry="15" fill="#0ea5e9" opacity="0.3"/>
                                <rect x="535" y="160" width="120" height="50" fill="#0ea5e9" opacity="0.3"/>
                                <ellipse cx="595" cy="210" rx="60" ry="15" fill="#0ea5e9" opacity="0.5"/>
                                
                                <ellipse cx="595" cy="160" rx="60" ry="15" fill="none" stroke="#0ea5e9" stroke-width="2"/>
                                <line x1="535" y1="160" x2="535" y2="210" stroke="#0ea5e9" stroke-width="2"/>
                                <line x1="655" y1="160" x2="655" y2="210" stroke="#0ea5e9" stroke-width="2"/>
                                <ellipse cx="595" cy="210" rx="60" ry="15" fill="none" stroke="#0ea5e9" stroke-width="2"/>
                                
                                <text x="595" y="190" font-size="28" text-anchor="middle">üíæ</text>
                            </g>
                            
                            <text x="595" y="250" font-size="12" fill="#cbd5e1" text-anchor="middle">Centralized Database</text>
                            
                            <!-- Benefits -->
                            <text x="595" y="285" font-size="13" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Benefits:</text>
                            <text x="595" y="310" font-size="11" fill="#94a3b8" text-anchor="middle">‚ö° Instant Search & Retrieval</text>
                            <text x="595" y="335" font-size="11" fill="#94a3b8" text-anchor="middle">‚ú® No Duplication</text>
                            <text x="595" y="360" font-size="11" fill="#94a3b8" text-anchor="middle">üîí Secure with Backups</text>
                            <text x="595" y="385" font-size="11" fill="#94a3b8" text-anchor="middle">üë• Multi-User Access</text>
                            <text x="595" y="410" font-size="11" fill="#94a3b8" text-anchor="middle">üìä Easy Analytics</text>
                            
                            <!-- Bottom Info -->
                            <rect x="50" y="450" width="700" height="40" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="2" rx="8"/>
                            <text x="400" y="475" font-size="13" fill="#0ea5e9" text-anchor="middle" font-weight="bold">A Database = Organized + Efficient + Secure Data Management</text>
                            
                            <defs>
                                <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
                                </marker>
                            </defs>
                        </svg>
                        <p class="image-caption">Database provides organized, efficient, and secure data management compared to traditional methods</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Practical Example
                    </div>
                    
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-shopping-cart"></i> E-commerce Website Database
                        </div>
                        <p><strong>Let me tell you about Amazon's Database System:</strong></p>
                        <p style="margin-top: 0.5rem;">If you think about it, Amazon is probably one of the best examples of database usage at massive scale. They've got:</p>
                        <ul>
                            <li><strong>Products Database:</strong> Millions of products with all their details - descriptions, prices, images, customer reviews, specifications</li>
                            <li><strong>Users Database:</strong> Customer profiles, multiple delivery addresses, saved payment methods, complete order history, wishlists</li>
                            <li><strong>Orders Database:</strong> Every single transaction, current shipping status, real-time delivery tracking, return information</li>
                            <li><strong>Inventory Database:</strong> Stock levels across multiple warehouses, supplier information, reorder points</li>
                        </ul>
                        <p style="margin-top: 1rem;"><strong>Operations they perform every second:</strong></p>
                        <ul>
                            <li>Handle millions of product searches simultaneously</li>
                            <li>Track orders in real-time across the globe</li>
                            <li>Update inventory automatically after each purchase</li>
                            <li>Generate personalized recommendations based on your browsing and purchase history</li>
                            <li>Process millions of transactions concurrently without any conflicts</li>
                            <li>Maintain consistent pricing and availability across all users</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you give a real-life example of a database?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Absolutely! Let me tell you about banking systems.</strong></p>
                                <p>Your bank uses a database to store everything about all its customers - account details, transaction history, loan information, credit card data, everything. When you check your balance at an ATM or through your mobile banking app, the database is being queried in real-time to fetch your current account information.</p>
                                <p><strong>Other common examples include:</strong></p>
                                <ul>
                                    <li><strong>Hospital Systems:</strong> Patient records, medical history, appointment scheduling, prescriptions</li>
                                    <li><strong>Airlines:</strong> Reservation systems, flight schedules, passenger information</li>
                                    <li><strong>Libraries:</strong> Book catalogs, member information, borrowing history</li>
                                    <li><strong>Social Media:</strong> Facebook and Instagram store user profiles, posts, comments, likes, friend connections</li>
                                </ul>
                                <p>Basically, any digital service you interact with daily is powered by databases running behind the scenes.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How is a database different from an Excel sheet?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Great question! There are some major differences:</strong></p>
                                <p><strong>1. Size & Performance:</strong> Excel can handle maybe a few thousand rows efficiently, but databases can handle millions or even billions of records without breaking a sweat.</p>
                                <p><strong>2. Multi-User Access:</strong> If multiple people try to edit the same Excel file, you'll run into conflicts and "locked file" issues. Databases, on the other hand, are designed for thousands of concurrent users working simultaneously.</p>
                                <p><strong>3. Data Relationships:</strong> Excel is essentially flat - it stores data in a single sheet. Databases can link related data across multiple tables. For example, you can connect customers to their orders to specific products.</p>
                                <p><strong>4. Data Integrity:</strong> Databases enforce rules and constraints automatically. You can't accidentally enter a text value where a number should be, or violate business rules. Excel doesn't prevent these kinds of errors.</p>
                                <p><strong>5. Security:</strong> Databases have sophisticated user-level permissions - you can control exactly who can view, edit, or delete which data. Excel has pretty limited security options.</p>
                                <p><strong>6. Automation:</strong> Databases can trigger automatic actions, send alerts, and maintain data consistency through triggers and stored procedures. Excel requires manual operations or complex macros.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What kind of data can be stored in a database?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Databases are incredibly versatile! They can store:</strong></p>
                                <p><strong>1. Text Data:</strong> Names, addresses, descriptions, emails, any kind of text content</p>
                                <p><strong>2. Numeric Data:</strong> Prices, quantities, ages, phone numbers, measurements</p>
                                <p><strong>3. Date/Time Data:</strong> Birth dates, timestamps, deadlines, appointment times</p>
                                <p><strong>4. Binary Data:</strong> Images, videos, audio files, PDF documents, Word files - basically any file can be stored</p>
                                <p><strong>5. Boolean Data:</strong> True/false values like is_active, is_verified, is_premium_member</p>
                                <p><strong>6. Structured Documents:</strong> JSON or XML data with nested information</p>
                                <p>Modern databases can handle virtually any type of digital information, whether it's structured (organized in tables) or unstructured (like documents and media files). That's what makes them so powerful!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Who uses databases in daily life?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Honestly, everyone uses databases every day, even if they don't realize it!</strong></p>
                                <p><strong>Students:</strong> University portals for grades and attendance, online learning platforms like Coursera or Udemy</p>
                                <p><strong>Professionals:</strong> Employee management systems, project tracking tools, CRM systems</p>
                                <p><strong>Consumers:</strong> Online shopping (Amazon, Flipkart), banking apps, social media, streaming services (Netflix, Spotify)</p>
                                <p><strong>Travelers:</strong> Flight booking systems, hotel reservations, ride-sharing apps like Uber or Ola</p>
                                <p><strong>Healthcare:</strong> Patient record systems, appointment scheduling, prescription management</p>
                                <p><strong>Government:</strong> Citizen databases, tax records, license and registration systems</p>
                                <p>The reality is, virtually every digital service you interact with is powered by databases running in the background. You might not see them, but they're there!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if there is no database in an organization?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>That would be a complete disaster! Let me explain why:</strong></p>
                                <p><strong>1. Data Chaos:</strong> Information would be scattered across files, emails, paper documents, and different computers. Finding anything would be nearly impossible.</p>
                                <p><strong>2. Massive Duplication:</strong> The same customer information might be entered multiple times by different departments, leading to inconsistencies. Which phone number is correct? Which address is current? Nobody knows.</p>
                                <p><strong>3. No Real-Time Access:</strong> You can't get instant information. Want to know current inventory? You'd have to manually search through spreadsheets or call someone.</p>
                                <p><strong>4. Data Loss Nightmare:</strong> Without proper backups, one computer crash could destroy all records. Imagine losing all your customer data!</p>
                                <p><strong>5. Terrible Decision Making:</strong> You can't analyze trends, generate reports, or get insights from your data. Business decisions would be based on gut feeling rather than facts.</p>
                                <p><strong>6. Security Risks:</strong> No access control means anyone can view or modify sensitive data. Privacy? What privacy?</p>
                                <p><strong>7. Scalability Issues:</strong> As your organization grows, managing data becomes exponentially harder and eventually impossible.</p>
                                <p><strong>Real Example:</strong> Imagine a hospital without a database. Doctors can't quickly access patient history, appointments get double-booked, billing is full of errors, and in an emergency, critical medical information isn't available when it's needed most. It's just not sustainable.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Key Characteristics of a Database
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Characteristic</th>
                                    <th>Description</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Organized</strong></td>
                                    <td>Data is structured in tables, rows, and columns with clear relationships</td>
                                    <td>Student table with ID, Name, Age columns</td>
                                </tr>
                                <tr>
                                    <td><strong>Persistent</strong></td>
                                    <td>Data remains stored permanently even after the program closes</td>
                                    <td>Your bank balance is saved and available 24/7</td>
                                </tr>
                                <tr>
                                    <td><strong>Shareable</strong></td>
                                    <td>Multiple users can access the same data simultaneously</td>
                                    <td>Many employees accessing the HR database at once</td>
                                </tr>
                                <tr>
                                    <td><strong>Secure</strong></td>
                                    <td>Access controls and permissions protect sensitive data</td>
                                    <td>Only managers can view salary information</td>
                                </tr>
                                <tr>
                                    <td><strong>Integrated</strong></td>
                                    <td>Data from different sources combined in one centralized location</td>
                                    <td>Customer data linked to orders and payment history</td>
                                </tr>
                                <tr>
                                    <td><strong>Minimal Redundancy</strong></td>
                                    <td>Avoids storing duplicate information unnecessarily</td>
                                    <td>Customer address stored once, referenced by all orders</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')" disabled>
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 2: What is Data? -->
            <div class="question-content" id="q2">
                <div class="question-header">
                    <h1 class="question-title">What is Data?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 6 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>So, <strong>Data</strong> is basically raw, unprocessed facts or values that, on their own, don't really mean much. It's like having puzzle pieces scattered on a table - individually, they don't tell you the full story. Data only becomes meaningful when we process it, organize it, and put it in the right context. That's when it transforms into <strong>Information</strong>.</p>
                        <p style="margin-top: 1rem;">Think of it this way - "25" is just data. But when I tell you "John is 25 years old," that same number now has context and meaning. That's the difference between data and information. Data needs processing and context to be useful.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Raw Facts</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Unprocessed</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Context</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Value</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Information</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Data vs Information - Visual Understanding
                    </div>
                    <div class="image-container">
                        <svg width="800" height="450" viewBox="0 0 800 450">
                            <rect width="800" height="450" fill="#1e293b"/>
                            
                            <text x="400" y="35" font-size="24" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Data ‚Üí Processing ‚Üí Information</text>
                            
                            <!-- Data Section -->
                            <rect x="50" y="70" width="200" height="300" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="2" rx="12"/>
                            <text x="150" y="100" font-size="18" fill="#ef4444" text-anchor="middle" font-weight="bold">üìä Raw Data</text>
                            
                            <text x="150" y="140" font-size="13" fill="#cbd5e1" text-anchor="middle">"25"</text>
                            <text x="150" y="170" font-size="13" fill="#cbd5e1" text-anchor="middle">"John"</text>
                            <text x="150" y="200" font-size="13" fill="#cbd5e1" text-anchor="middle">"New York"</text>
                            <text x="150" y="230" font-size="13" fill="#cbd5e1" text-anchor="middle">"85000"</text>
                            <text x="150" y="260" font-size="13" fill="#cbd5e1" text-anchor="middle">"2024-01-15"</text>
                            
                            <text x="150" y="300" font-size="11" fill="#94a3b8" text-anchor="middle" font-style="italic">Individual facts</text>
                            <text x="150" y="320" font-size="11" fill="#94a3b8" text-anchor="middle" font-style="italic">No context</text>
                            <text x="150" y="340" font-size="11" fill="#94a3b8" text-anchor="middle" font-style="italic">No meaning</text>
                            
                            <!-- Processing Arrow -->
                            <path d="M 260 220 L 320 220" stroke="#f59e0b" stroke-width="4" marker-end="url(#arroworange)"/>
                            <text x="290" y="200" font-size="12" fill="#f59e0b" text-anchor="middle" font-weight="bold">Process</text>
                            <text x="290" y="215" font-size="10" fill="#f59e0b" text-anchor="middle">Organize</text>
                            <text x="290" y="240" font-size="10" fill="#f59e0b" text-anchor="middle">Analyze</text>
                            <text x="290" y="255" font-size="10" fill="#f59e0b" text-anchor="middle">Context</text>
                            
                            <!-- Information Section -->
                            <rect x="330" y="70" width="420" height="300" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="2" rx="12"/>
                            <text x="540" y="100" font-size="18" fill="#10b981" text-anchor="middle" font-weight="bold">üí° Information (Meaningful)</text>
                            
                            <rect x="350" y="120" width="380" height="220" fill="#334155" rx="8"/>
                            <text x="540" y="150" font-size="14" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Employee Profile</text>
                            
                            <text x="380" y="180" font-size="12" fill="#cbd5e1" text-anchor="start">üë§ Name: John</text>
                            <text x="380" y="205" font-size="12" fill="#cbd5e1" text-anchor="start">üéÇ Age: 25 years old</text>
                            <text x="380" y="230" font-size="12" fill="#cbd5e1" text-anchor="start">üìç Location: New York</text>
                            <text x="380" y="255" font-size="12" fill="#cbd5e1" text-anchor="start">üí∞ Salary: $85,000 per year</text>
                            <text x="380" y="280" font-size="12" fill="#cbd5e1" text-anchor="start">üìÖ Join Date: January 15, 2024</text>
                            
                            <text x="540" y="315" font-size="11" fill="#10b981" text-anchor="middle" font-style="italic">‚úÖ Organized with context</text>
                            <text x="540" y="335" font-size="11" fill="#10b981" text-anchor="middle" font-style="italic">‚úÖ Meaningful for decision making</text>
                            
                            <!-- Bottom Summary -->
                            <rect x="50" y="390" width="700" height="50" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="2" rx="8"/>
                            <text x="400" y="415" font-size="13" fill="#cbd5e1" text-anchor="middle"><tspan font-weight="bold" fill="#0ea5e9">Data</tspan> = Raw facts (meaningless alone)</text>
                            <text x="400" y="432" font-size="13" fill="#cbd5e1" text-anchor="middle"><tspan font-weight="bold" fill="#10b981">Information</tspan> = Processed data (meaningful for decisions)</text>
                            
                            <defs>
                                <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#f59e0b"/>
                                </marker>
                            </defs>
                        </svg>
                        <p class="image-caption">Data becomes Information when organized and given context</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Types of Data
                    </div>

                    <div class="comparison-grid">
                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border-left: 4px solid var(--success-color);">
                            <h4 style="color: var(--success-color);"><i class="fas fa-table"></i> 1. Structured Data</h4>
                            <p style="margin-bottom: 0.75rem;">This is highly organized data that fits neatly into tables with rows and columns. It's super easy to search, query, and analyze because everything has a predefined format.</p>
                            <p style="margin-bottom: 0.5rem;"><strong>Examples:</strong></p>
                            <ul>
                                <li>Database tables in SQL databases</li>
                                <li>Excel spreadsheets</li>
                                <li>CSV files</li>
                                <li>Bank transaction records</li>
                                <li>Employee records</li>
                            </ul>
                            <p style="margin-top: 0.75rem;"><strong>Best Handled By:</strong> RDBMS like MySQL, PostgreSQL, Oracle</p>
                        </div>

                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(251, 191, 36, 0.05) 100%); border-left: 4px solid var(--warning-color);">
                            <h4 style="color: var(--warning-color);"><i class="fas fa-code"></i> 2. Semi-Structured Data</h4>
                            <p style="margin-bottom: 0.75rem;">This type has some organizational properties but doesn't fit into rigid table structures. It uses tags or markers to separate different elements, giving it flexibility.</p>
                            <p style="margin-bottom: 0.5rem;"><strong>Examples:</strong></p>
                            <ul>
                                <li>JSON files (commonly used in APIs)</li>
                                <li>XML documents</li>
                                <li>Email (has fields like To, From, Subject)</li>
                                <li>Log files from applications</li>
                                <li>Configuration files</li>
                            </ul>
                            <p style="margin-top: 0.75rem;"><strong>Best Handled By:</strong> NoSQL databases like MongoDB, Document stores</p>
                        </div>

                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(220, 38, 38, 0.05) 100%); border-left: 4px solid var(--error-color);">
                            <h4 style="color: var(--error-color);"><i class="fas fa-file-alt"></i> 3. Unstructured Data</h4>
                            <p style="margin-bottom: 0.75rem;">This has no predefined format or organization. It's the most difficult to search and analyze because there's no standard structure. Think of it as free-form content.</p>
                            <p style="margin-bottom: 0.5rem;"><strong>Examples:</strong></p>
                            <ul>
                                <li>Text documents (Word, PDFs)</li>
                                <li>Images and videos</li>
                                <li>Social media posts</li>
                                <li>Audio recordings</li>
                                <li>Full email content</li>
                            </ul>
                            <p style="margin-top: 0.75rem;"><strong>Best Handled By:</strong> NoSQL databases, Data Lakes, AI/ML tools for analysis</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Scenario
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-hospital"></i> Hospital Data Management Example
                        </div>
                        <p><strong>Let me explain with a hospital scenario:</strong></p>
                        <p style="margin-top: 0.5rem;"><strong>Structured Data:</strong> Patient ID, Name, Age, Blood Group, Admission Date - all stored in neat database tables</p>
                        <p><strong>Semi-Structured Data:</strong> Medical records in XML format containing nested information about symptoms, diagnosis, medications</p>
                        <p><strong>Unstructured Data:</strong> X-ray images, doctor's handwritten notes, patient voice recordings describing symptoms</p>
                        <p style="margin-top: 1rem;">The hospital needs all three types! Structured data for quick lookups, semi-structured for flexible medical records, and unstructured for comprehensive patient documentation.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the difference between data and information?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Let me break this down clearly:</strong></p>
                                <p><strong>Data</strong> is raw, unorganized facts without any context. It's like individual ingredients sitting on your kitchen counter - flour, eggs, sugar. They're just... there.</p>
                                <p><strong>Information</strong> is processed data that has meaning and context. It's like taking those ingredients and following a recipe to bake a cake. Now you have something useful!</p>
                                <p style="margin-top: 1rem;"><strong>Simple Formula:</strong> Data + Context + Processing = Information</p>
                                <p style="margin-top: 1rem;"><strong>Example:</strong> "37.5¬∞C" is just data - a number. But "Patient has a fever of 37.5¬∞C, which is above the normal body temperature of 37¬∞C" is information that a doctor can actually act upon.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can data exist without context?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Absolutely, yes! That's actually what makes it "raw data."</strong></p>
                                <p>For example, the number "100" exists as data on its own, but without context, you have no idea what it represents. It could be:</p>
                                <ul>
                                    <li>Temperature (100¬∞C - water's boiling point)</li>
                                    <li>Money (‚Çπ100 or $100)</li>
                                    <li>Age (100 years old)</li>
                                    <li>Speed (100 km/h)</li>
                                    <li>Exam score (100 marks out of 100)</li>
                                    <li>Distance (100 meters)</li>
                                </ul>
                                <p style="margin-top: 1rem;">The same raw data can mean completely different things depending on the context you apply to it. That's why data is often collected first and context is added during processing.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Give an example of raw data and processed information.</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Sure! Let me give you a sales example:</strong></p>
                                <p><strong>Raw Data (what's collected):</strong></p>
                                <ul>
                                    <li>15000, 18000, 12000, 20000, 16000</li>
                                    <li>Product codes: P001, P002, P003, P004, P005</li>
                                    <li>Dates: 2024-01-15, 2024-01-16, 2024-01-17, 2024-01-18, 2024-01-19</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Processed Information (after analysis):</strong></p>
                                <ul>
                                    <li>"Total sales for January 15-19: ‚Çπ81,000"</li>
                                    <li>"Average daily sales: ‚Çπ16,200"</li>
                                    <li>"Best selling product: P004 with revenue of ‚Çπ20,000"</li>
                                    <li>"Sales increased by 15% compared to previous week"</li>
                                    <li>"Peak sales day: January 18th"</li>
                                </ul>
                                <p style="margin-top: 1rem;">See the difference? The raw numbers alone don't tell you anything useful, but when you process and analyze them, you get actionable business insights that help make decisions!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does data become information?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>It's a step-by-step process:</strong></p>
                                <p><strong>1. Collection:</strong> First, you gather raw data from various sources - sensors, user inputs, files, whatever.</p>
                                <p><strong>2. Organization:</strong> You structure the data in a systematic way, maybe put it in tables or categories.</p>
                                <p><strong>3. Processing:</strong> Clean it up - remove duplicates, fix errors, validate that the data makes sense.</p>
                                <p><strong>4. Analysis:</strong> Apply calculations, comparisons, or algorithms. Look for patterns, trends, relationships.</p>
                                <p><strong>5. Interpretation:</strong> Add context and meaning. This is where you answer "So what does this actually mean?"</p>
                                <p><strong>6. Presentation:</strong> Display it in an understandable format - charts, reports, dashboards.</p>
                                <p style="margin-top: 1rem;"><strong>Example:</strong> Student exam scores (data) ‚Üí Calculate class average, identify top performers, compare with previous year, identify struggling students ‚Üí Generate a performance report showing trends and insights (information) that teachers can use to improve their teaching methods.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Is "123" data or information?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>"123" is definitely data - raw, contextless data.</strong></p>
                                <p>It's just a number sitting there with no meaning attached to it. It becomes information only when you add context:</p>
                                <ul>
                                    <li>"Room number 123" (location information)</li>
                                    <li>"Price: ‚Çπ123" (financial information)</li>
                                    <li>"Weight: 123 kg" (measurement information)</li>
                                    <li>"Score: 123/200" (performance information - also tells you the student scored 61.5%!)</li>
                                    <li>"Employee ID: 123" (identification information)</li>
                                    <li>"Page 123" (location in a document)</li>
                                </ul>
                                <p style="margin-top: 1rem;">The interesting thing is, the same piece of data - "123" - can become many different types of information depending on what context you apply. That's the power of information processing!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why is unstructured data more difficult to analyze?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Great question! There are several challenges:</strong></p>
                                <p><strong>1. No Standard Format:</strong> Each piece of unstructured data might be organized completely differently. One document might be formatted one way, another completely different. There's no consistency.</p>
                                <p><strong>2. Hard to Query:</strong> You can't use simple SQL queries like "SELECT all customers from London" when you're dealing with unstructured text or images.</p>
                                <p><strong>3. Requires Advanced Tools:</strong> You need AI and machine learning for pattern recognition, natural language processing for text, computer vision for images. It's much more complex.</p>
                                <p><strong>4. Storage Challenges:</strong> Unstructured data typically takes up way more space and needs specialized storage systems.</p>
                                <p><strong>5. Processing Time:</strong> Extracting meaningful insights takes much longer compared to querying a structured database.</p>
                                <p><strong>6. Manual Effort:</strong> Often requires human interpretation and validation of results.</p>
                                <p style="margin-top: 1rem;"><strong>Example:</strong> Imagine analyzing 1000 customer feedback emails (unstructured) versus analyzing 1000 rows of ratings in a database (structured). For the emails, you'd need text analysis tools to extract sentiment, identify common complaints, categorize issues - it's a huge task! For the ratings, you just run a simple SQL query to get averages and distributions. Massive difference!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 3: What is a DBMS? -->
            <div class="question-content" id="q3">
                <div class="question-header">
                    <h1 class="question-title">What is a DBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 7 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>DBMS</strong> stands for Database Management System. It's essentially software that acts as an interface between the database and its users or applications. Think of it as a smart manager that handles all the complex operations of storing, retrieving, and managing data while keeping everything organized and secure.</p>
                        <p style="margin-top: 1rem;">Without a DBMS, we'd have to write low-level code to directly interact with files on disk, handle concurrency issues, manage security, and ensure data integrity - it would be a nightmare! The DBMS takes care of all these complexities for us. It provides a systematic way to create, retrieve, update, and delete data - what we call <strong>CRUD operations</strong>.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Software</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Data Management</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> CRUD Operations</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Data Integrity</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Interface</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Visual Understanding
                    </div>
                    <div class="image-container">
                        <svg width="800" height="500" viewBox="0 0 800 500">
                            <rect width="800" height="500" fill="#1e293b"/>
                            
                            <text x="400" y="35" font-size="24" fill="#0ea5e9" text-anchor="middle" font-weight="bold">DBMS Architecture</text>
                            
                            <!-- Users/Applications Layer -->
                            <rect x="150" y="70" width="500" height="80" fill="rgba(168, 85, 247, 0.1)" stroke="#a855f7" stroke-width="2" rx="12"/>
                            <text x="400" y="100" font-size="16" fill="#a855f7" text-anchor="middle" font-weight="bold">Users & Applications</text>
                            
                            <rect x="180" y="115" width="100" height="25" fill="#334155" rx="4"/>
                            <text x="230" y="132" font-size="11" fill="#cbd5e1" text-anchor="middle">Web Apps</text>
                            
                            <rect x="300" y="115" width="100" height="25" fill="#334155" rx="4"/>
                            <text x="350" y="132" font-size="11" fill="#cbd5e1" text-anchor="middle">Analysts</text>
                            
                            <rect x="420" y="115" width="100" height="25" fill="#334155" rx="4"/>
                            <text x="470" y="132" font-size="11" fill="#cbd5e1" text-anchor="middle">Developers</text>
                            
                            <rect x="540" y="115" width="100" height="25" fill="#334155" rx="4"/>
                            <text x="590" y="132" font-size="11" fill="#cbd5e1" text-anchor="middle">End Users</text>
                            
                            <!-- Arrow Down -->
                            <path d="M 400 155 L 400 180" stroke="#10b981" stroke-width="3" marker-end="url(#arrowgreen2)"/>
                            
                            <!-- DBMS Layer (Main) -->
                            <rect x="100" y="185" width="600" height="180" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="3" rx="12"/>
                            <text x="400" y="210" font-size="18" fill="#0ea5e9" text-anchor="middle" font-weight="bold">üîß DATABASE MANAGEMENT SYSTEM (DBMS)</text>
                            
                            <!-- DBMS Components -->
                            <rect x="120" y="230" width="155" height="120" fill="#334155" rx="8"/>
                            <text x="197" y="255" font-size="13" fill="#10b981" text-anchor="middle" font-weight="bold">Query Processor</text>
                            <text x="197" y="275" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Parse Queries</text>
                            <text x="197" y="295" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Optimize</text>
                            <text x="197" y="315" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Execute</text>
                            <text x="197" y="335" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Return Results</text>
                            
                            <rect x="290" y="230" width="155" height="120" fill="#334155" rx="8"/>
                            <text x="367" y="255" font-size="13" fill="#f59e0b" text-anchor="middle" font-weight="bold">Transaction Mgmt</text>
                            <text x="367" y="275" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ ACID Properties</text>
                            <text x="367" y="295" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Concurrency</text>
                            <text x="367" y="315" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Recovery</text>
                            <text x="367" y="335" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Locking</text>
                            
                            <rect x="460" y="230" width="155" height="120" fill="#334155" rx="8"/>
                            <text x="537" y="255" font-size="13" fill="#ec4899" text-anchor="middle" font-weight="bold">Security Manager</text>
                            <text x="537" y="275" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Authentication</text>
                            <text x="537" y="295" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Authorization</text>
                            <text x="537" y="315" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Access Control</text>
                            <text x="537" y="335" font-size="10" fill="#cbd5e1" text-anchor="middle">‚Ä¢ Audit Logs</text>
                            
                            <!-- Arrow Down -->
                            <path d="M 400 370 L 400 395" stroke="#10b981" stroke-width="3" marker-end="url(#arrowgreen2)"/>
                            
                            <!-- Database Layer -->
                            <rect x="150" y="400" width="500" height="80" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="2" rx="12"/>
                            <text x="400" y="430" font-size="16" fill="#10b981" text-anchor="middle" font-weight="bold">üìä Physical Database (Data Files)</text>
                            <text x="400" y="455" font-size="12" fill="#94a3b8" text-anchor="middle">Actual data stored on disk: Tables, Indexes, Logs</text>
                            
                            <defs>
                                <marker id="arrowgreen2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
                                </marker>
                            </defs>
                        </svg>
                        <p class="image-caption">DBMS acts as an interface between users/applications and the physical database</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Analogy
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-building"></i> Library Management System
                        </div>
                        <p><strong>Think of a DBMS like a library system:</strong></p>
                        <p style="margin-top: 0.5rem;"><strong>The Library (Database):</strong> Contains thousands of books, magazines, and resources</p>
                        <p><strong>The Librarian (DBMS):</strong> Manages everything - knows where each book is, handles checkouts and returns, maintains records, enforces rules (like late fees), and helps people find what they need</p>
                        <p><strong>Library Users (Applications/Users):</strong> Students, researchers, readers who want to access books</p>
                        <p style="margin-top: 1rem;"><strong>What the Librarian (DBMS) does:</strong></p>
                        <ul>
                            <li>Helps you search for books quickly (Query Processing)</li>
                            <li>Ensures only authorized people can access restricted sections (Security)</li>
                            <li>Prevents two people from checking out the same book simultaneously (Concurrency Control)</li>
                            <li>Keeps records of all transactions (Logging)</li>
                            <li>Maintains the catalog and organizes books (Data Organization)</li>
                        </ul>
                        <p style="margin-top: 1rem;">Without the librarian, you'd have to search through thousands of books manually, there'd be chaos with checkouts, and no one would know what's available!</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Functions of DBMS
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Function</th>
                                    <th>What It Does</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Data Storage</strong></td>
                                    <td>Efficiently stores data on physical storage devices</td>
                                    <td>Organizing millions of records on disk</td>
                                </tr>
                                <tr>
                                    <td><strong>Data Retrieval</strong></td>
                                    <td>Quickly fetches data based on queries</td>
                                    <td>SELECT * FROM Students WHERE age > 20</td>
                                </tr>
                                <tr>
                                    <td><strong>Data Manipulation</strong></td>
                                    <td>Insert, update, delete operations on data</td>
                                    <td>Updating a student's grade</td>
                                </tr>
                                <tr>
                                    <td><strong>Security Management</strong></td>
                                    <td>Controls who can access what data</td>
                                    <td>Only HR can view salary data</td>
                                </tr>
                                <tr>
                                    <td><strong>Backup & Recovery</strong></td>
                                    <td>Protects data from loss</td>
                                    <td>Automatic daily backups</td>
                                </tr>
                                <tr>
                                    <td><strong>Concurrency Control</strong></td>
                                    <td>Manages multiple users accessing data simultaneously</td>
                                    <td>100 users querying database at once</td>
                                </tr>
                                <tr>
                                    <td><strong>Data Integrity</strong></td>
                                    <td>Ensures accuracy and consistency</td>
                                    <td>Email must be unique, age can't be negative</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What does a DBMS do?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>A DBMS does a lot! Let me break it down:</strong></p>
                                <p><strong>1. Data Storage Management:</strong> It organizes how data is physically stored on disks, making sure it's stored efficiently</p>
                                <p><strong>2. Query Processing:</strong> When you write a SQL query, the DBMS parses it, optimizes it, and executes it to get you results</p>
                                <p><strong>3. Transaction Management:</strong> It ensures that transactions follow ACID properties - if something fails midway, it rolls back all changes</p>
                                <p><strong>4. Security & Access Control:</strong> Controls who can do what with the data - read, write, delete permissions</p>
                                <p><strong>5. Backup & Recovery:</strong> Regularly backs up data and can restore it if something goes wrong</p>
                                <p><strong>6. Concurrency Control:</strong> Manages multiple users accessing the same data simultaneously without conflicts</p>
                                <p><strong>7. Data Integrity:</strong> Enforces rules and constraints to keep data accurate and consistent</p>
                                <p>Basically, it handles all the complex stuff so developers can focus on building applications rather than managing data!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How is DBMS different from a database?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is a common confusion! Let me clarify:</strong></p>
                                <p><strong>Database:</strong> It's the actual collection of data - the information itself. Think of it as the content, the books in a library.</p>
                                <p><strong>DBMS:</strong> It's the software/system that manages that database. Think of it as the librarian who organizes, maintains, and helps you access those books.</p>
                                <p style="margin-top: 1rem;"><strong>Simple Analogy:</strong></p>
                                <ul>
                                    <li><strong>Database</strong> = The data (like a warehouse full of products)</li>
                                    <li><strong>DBMS</strong> = The warehouse management system (the software and processes that manage that warehouse)</li>
                                </ul>
                                <p style="margin-top: 1rem;">You can't interact with a database directly without a DBMS. The DBMS provides the tools, interface, and functionality to work with that database.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you name a few popular DBMS software?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Sure! Here are the most popular ones:</strong></p>
                                <p><strong>Relational DBMS (RDBMS):</strong></p>
                                <ul>
                                    <li><strong>MySQL:</strong> Very popular, open-source, used by Facebook, Twitter, YouTube</li>
                                    <li><strong>PostgreSQL:</strong> Advanced open-source DBMS with powerful features</li>
                                    <li><strong>Oracle Database:</strong> Enterprise-level, used by large corporations, very powerful but expensive</li>
                                    <li><strong>Microsoft SQL Server:</strong> Popular in Windows environments, well integrated with Microsoft ecosystem</li>
                                    <li><strong>SQLite:</strong> Lightweight, embedded in mobile apps, no server required</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>NoSQL DBMS:</strong></p>
                                <ul>
                                    <li><strong>MongoDB:</strong> Document-based, stores data as JSON-like documents</li>
                                    <li><strong>Redis:</strong> In-memory database, super fast for caching</li>
                                    <li><strong>Cassandra:</strong> Distributed database, handles massive amounts of data</li>
                                </ul>
                                <p style="margin-top: 1rem;">Each has its strengths - MySQL is great for web applications, Oracle for enterprises, MongoDB for flexible schema requirements!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What problem does a DBMS solve compared to manual record-keeping?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>DBMS solves massive problems! Let me show you with an example:</strong></p>
                                <p><strong>Manual System (Files/Excel) Problems:</strong></p>
                                <p><strong>1. Data Redundancy:</strong> Same customer info stored in sales file, shipping file, billing file - lots of duplication</p>
                                <p><strong>2. Data Inconsistency:</strong> Customer changes address - now you have to update it in 10 different files! Miss one, and you have inconsistent data</p>
                                <p><strong>3. Difficulty in Accessing Data:</strong> Want to find "all customers from Mumbai who bought products worth more than ‚Çπ10,000 in last month"? Good luck with manual files!</p>
                                <p><strong>4. Security Issues:</strong> Anyone with file access can see everything. No fine-grained permissions</p>
                                <p><strong>5. Concurrent Access Problems:</strong> If two people try to edit the same Excel file? Disaster!</p>
                                <p><strong>6. No Integrity Constraints:</strong> Someone could accidentally enter age as -25 or duplicate the same customer ID</p>
                                <p><strong>7. Atomicity Problems:</strong> Transferring money - deduct from one account, add to another. If system crashes in between? Money vanishes!</p>
                                <p style="margin-top: 1rem;"><strong>DBMS Solution:</strong> Handles ALL these problems automatically - maintains integrity, ensures consistency, provides security, enables concurrent access, guarantees atomicity. It's a complete game-changer!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What are the main components of DBMS?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>A DBMS has several key components working together:</strong></p>
                                <p><strong>1. Database Engine:</strong> The core component that handles data storage, retrieval, and updates. It's like the heart of the system</p>
                                <p><strong>2. Query Processor:</strong> Interprets and optimizes SQL queries, then executes them. It's like a translator and optimizer</p>
                                <p><strong>3. Transaction Manager:</strong> Ensures ACID properties are maintained, handles commits and rollbacks</p>
                                <p><strong>4. Storage Manager:</strong> Manages how data is physically stored on disk - files, pages, blocks</p>
                                <p><strong>5. Buffer Manager:</strong> Manages memory cache to reduce disk I/O operations</p>
                                <p><strong>6. Metadata Catalog:</strong> Stores information about the database structure - table definitions, relationships, constraints (also called Data Dictionary)</p>
                                <p><strong>7. Security Manager:</strong> Handles authentication, authorization, and access control</p>
                                <p><strong>8. Backup and Recovery Manager:</strong> Creates backups and restores data when needed</p>
                                <p style="margin-top: 1rem;">All these components work together seamlessly to provide a robust, efficient database system. When you run a query, multiple components are working behind the scenes!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 4: What is an RDBMS? -->
            <div class="question-content" id="q4">
                <div class="question-header">
                    <h1 class="question-title">What is an RDBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>RDBMS</strong> stands for Relational Database Management System. The key word here is "Relational" - it's a type of DBMS that organizes data into <strong>tables</strong> (also called relations) and establishes <strong>relationships</strong> between these tables.</p>
                        <p style="margin-top: 1rem;">In an RDBMS, data is structured in rows and columns, just like spreadsheets, but with much more power. The "relational" aspect means that tables can be connected to each other through common columns, allowing us to link related data together. For example, a Students table can be related to a Courses table to show which student is enrolled in which course.</p>
                        <p style="margin-top: 1rem;">RDBMS uses <strong>SQL</strong> (Structured Query Language) as the standard language for interacting with the database. It follows specific rules defined by <strong>Dr. E.F. Codd</strong> who introduced the relational model in 1970.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Relational</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Tables</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Relationships</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> SQL</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Schema</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Constraints</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Relational Model Visualization
                    </div>
                    <div class="image-container">
                        <svg width="800" height="550" viewBox="0 0 800 550">
                            <rect width="800" height="550" fill="#1e293b"/>
                            
                            <text x="400" y="35" font-size="24" fill="#0ea5e9" text-anchor="middle" font-weight="bold">RDBMS: Tables with Relationships</text>
                            
                            <!-- Students Table -->
                            <rect x="50" y="70" width="320" height="200" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="2" rx="8"/>
                            <rect x="50" y="70" width="320" height="35" fill="#0ea5e9" rx="8"/>
                            <text x="210" y="92" font-size="14" fill="white" text-anchor="middle" font-weight="bold">üë®‚Äçüéì STUDENTS TABLE</text>
                            
                            <!-- Students Table Header -->
                            <rect x="60" y="115" width="90" height="25" fill="#334155" rx="4"/>
                            <text x="105" y="132" font-size="11" fill="#10b981" text-anchor="middle" font-weight="bold">StudentID (PK)</text>
                            
                            <rect x="160" y="115" width="90" height="25" fill="#334155" rx="4"/>
                            <text x="205" y="132" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Name</text>
                            
                            <rect x="260" y="115" width="100" height="25" fill="#334155" rx="4"/>
                            <text x="310" y="132" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Email</text>
                            
                            <!-- Students Data -->
                            <text x="105" y="165" font-size="10" fill="#0ea5e9" text-anchor="middle">1001</text>
                            <text x="205" y="165" font-size="10" fill="#cbd5e1" text-anchor="middle">John Smith</text>
                            <text x="310" y="165" font-size="10" fill="#cbd5e1" text-anchor="middle">john@edu.com</text>
                            
                            <text x="105" y="190" font-size="10" fill="#0ea5e9" text-anchor="middle">1002</text>
                            <text x="205" y="190" font-size="10" fill="#cbd5e1" text-anchor="middle">Sarah Johnson</text>
                            <text x="310" y="190" font-size="10" fill="#cbd5e1" text-anchor="middle">sarah@edu.com</text>
                            
                            <text x="105" y="215" font-size="10" fill="#0ea5e9" text-anchor="middle">1003</text>
                            <text x="205" y="215" font-size="10" fill="#cbd5e1" text-anchor="middle">Mike Chen</text>
                            <text x="310" y="215" font-size="10" fill="#cbd5e1" text-anchor="middle">mike@edu.com</text>
                            
                            <text x="105" y="245" font-size="9" fill="#10b981" text-anchor="middle" font-style="italic">Primary Key</text>
                            
                            <!-- Enrollments Table (Middle) -->
                            <rect x="240" y="310" width="320" height="200" fill="rgba(168, 85, 247, 0.1)" stroke="#a855f7" stroke-width="2" rx="8"/>
                            <rect x="240" y="310" width="320" height="35" fill="#a855f7" rx="8"/>
                            <text x="400" y="332" font-size="14" fill="white" text-anchor="middle" font-weight="bold">üìù ENROLLMENTS TABLE</text>
                            
                            <!-- Enrollments Header -->
                            <rect x="250" y="355" width="90" height="25" fill="#334155" rx="4"/>
                            <text x="295" y="372" font-size="11" fill="#f59e0b" text-anchor="middle" font-weight="bold">StudentID (FK)</text>
                            
                            <rect x="350" y="355" width="90" height="25" fill="#334155" rx="4"/>
                            <text x="395" y="372" font-size="11" fill="#f59e0b" text-anchor="middle" font-weight="bold">CourseID (FK)</text>
                            
                            <rect x="450" y="355" width="100" height="25" fill="#334155" rx="4"/>
                            <text x="500" y="372" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Grade</text>
                            
                            <!-- Enrollments Data -->
                            <text x="295" y="405" font-size="10" fill="#0ea5e9" text-anchor="middle">1001</text>
                            <text x="395" y="405" font-size="10" fill="#10b981" text-anchor="middle">C101</text>
                            <text x="500" y="405" font-size="10" fill="#cbd5e1" text-anchor="middle">A</text>
                            
                            <text x="295" y="430" font-size="10" fill="#0ea5e9" text-anchor="middle">1002</text>
                            <text x="395" y="430" font-size="10" fill="#10b981" text-anchor="middle">C101</text>
                            <text x="500" y="430" font-size="10" fill="#cbd5e1" text-anchor="middle">B+</text>
                            
                            <text x="295" y="455" font-size="10" fill="#0ea5e9" text-anchor="middle">1001</text>
                            <text x="395" y="455" font-size="10" fill="#10b981" text-anchor="middle">C102</text>
                            <text x="500" y="455" font-size="10" fill="#cbd5e1" text-anchor="middle">A-</text>
                            
                            <text x="400" y="490" font-size="9" fill="#f59e0b" text-anchor="middle" font-style="italic">Foreign Keys - Link to other tables</text>
                            
                            <!-- Courses Table -->
                            <rect x="430" y="70" width="320" height="200" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="2" rx="8"/>
                            <rect x="430" y="70" width="320" height="35" fill="#10b981" rx="8"/>
                            <text x="590" y="92" font-size="14" fill="white" text-anchor="middle" font-weight="bold">üìö COURSES TABLE</text>
                            
                            <!-- Courses Header -->
                            <rect x="440" y="115" width="90" height="25" fill="#334155" rx="4"/>
                            <text x="485" y="132" font-size="11" fill="#10b981" text-anchor="middle" font-weight="bold">CourseID (PK)</text>
                            
                            <rect x="540" y="115" width="90" height="25" fill="#334155" rx="4"/>
                            <text x="585" y="132" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">CourseName</text>
                            
                            <rect x="640" y="115" width="100" height="25" fill="#334155" rx="4"/>
                            <text x="690" y="132" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Credits</text>
                            
                            <!-- Courses Data -->
                            <text x="485" y="165" font-size="10" fill="#10b981" text-anchor="middle">C101</text>
                            <text x="585" y="165" font-size="10" fill="#cbd5e1" text-anchor="middle">Database Systems</text>
                            <text x="690" y="165" font-size="10" fill="#cbd5e1" text-anchor="middle">4</text>
                            
                            <text x="485" y="190" font-size="10" fill="#10b981" text-anchor="middle">C102</text>
                            <text x="585" y="190" font-size="10" fill="#cbd5e1" text-anchor="middle">Data Structures</text>
                            <text x="690" y="190" font-size="10" fill="#cbd5e1" text-anchor="middle">3</text>
                            
                            <text x="485" y="215" font-size="10" fill="#10b981" text-anchor="middle">C103</text>
                            <text x="585" y="215" font-size="10" fill="#cbd5e1" text-anchor="middle">Web Development</text>
                            <text x="690" y="215" font-size="10" fill="#cbd5e1" text-anchor="middle">3</text>
                            
                            <text x="485" y="245" font-size="9" fill="#10b981" text-anchor="middle" font-style="italic">Primary Key</text>
                            
                            <!-- Relationship Lines -->
                            <!-- Students to Enrollments -->
                            <path d="M 210 270 L 295 310" stroke="#f59e0b" stroke-width="2" stroke-dasharray="5,5"/>
                            <text x="240" y="295" font-size="10" fill="#f59e0b" text-anchor="middle">1:N</text>
                            
                            <!-- Courses to Enrollments -->
                            <path d="M 590 270 L 450 310" stroke="#f59e0b" stroke-width="2" stroke-dasharray="5,5"/>
                            <text x="530" y="295" font-size="10" fill="#f59e0b" text-anchor="middle">1:N</text>
                            
                            <!-- Legend -->
                            <rect x="50" y="520" width="700" height="20" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="1" rx="4"/>
                            <text x="400" y="534" font-size="11" fill="#cbd5e1" text-anchor="middle">
                                PK = Primary Key (Unique Identifier) | FK = Foreign Key (Links to another table) | 1:N = One-to-Many Relationship
                            </text>
                        </svg>
                        <p class="image-caption">RDBMS stores data in related tables connected through Primary and Foreign Keys</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Example
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-shopping-bag"></i> Online Shopping System (E-commerce)
                        </div>
                        <p><strong>Let me explain RDBMS with an e-commerce example:</strong></p>
                        <p style="margin-top: 0.5rem;"><strong>Tables in the system:</strong></p>
                        <ul>
                            <li><strong>CUSTOMERS Table:</strong> CustomerID (PK), Name, Email, Phone, Address</li>
                            <li><strong>PRODUCTS Table:</strong> ProductID (PK), ProductName, Price, Stock, Category</li>
                            <li><strong>ORDERS Table:</strong> OrderID (PK), CustomerID (FK), OrderDate, TotalAmount</li>
                            <li><strong>ORDER_DETAILS Table:</strong> OrderID (FK), ProductID (FK), Quantity, Price</li>
                        </ul>
                        <p style="margin-top: 1rem;"><strong>How Relationships Work:</strong></p>
                        <ul>
                            <li>One Customer can place many Orders (1:N relationship)</li>
                            <li>One Order can contain many Products (M:N relationship through ORDER_DETAILS)</li>
                            <li>Each Product can appear in many Orders</li>
                        </ul>
                        <p style="margin-top: 1rem;"><strong>Benefits of this structure:</strong></p>
                        <ul>
                            <li>Customer details stored once, referenced by all their orders</li>
                            <li>Easy to find all orders of a specific customer</li>
                            <li>Easy to find all customers who bought a specific product</li>
                            <li>No data duplication - customer name doesn't repeat in every order</li>
                            <li>If customer changes email, update one place - automatically reflects everywhere</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Key Features of RDBMS
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Description</th>
                                    <th>Benefit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Table-based Structure</strong></td>
                                    <td>Data organized in rows and columns</td>
                                    <td>Easy to understand and visualize</td>
                                </tr>
                                <tr>
                                    <td><strong>Primary Keys</strong></td>
                                    <td>Unique identifier for each row</td>
                                    <td>Ensures no duplicate records</td>
                                </tr>
                                <tr>
                                    <td><strong>Foreign Keys</strong></td>
                                    <td>Links tables together</td>
                                    <td>Maintains data relationships</td>
                                </tr>
                                <tr>
                                    <td><strong>SQL Support</strong></td>
                                    <td>Standard query language</td>
                                    <td>Easy to learn and portable across systems</td>
                                </tr>
                                <tr>
                                    <td><strong>Data Integrity</strong></td>
                                    <td>Enforces rules and constraints</td>
                                    <td>Maintains data accuracy</td>
                                </tr>
                                <tr>
                                    <td><strong>ACID Compliance</strong></td>
                                    <td>Transaction reliability</td>
                                    <td>Data consistency guaranteed</td>
                                </tr>
                                <tr>
                                    <td><strong>Normalization</strong></td>
                                    <td>Reduces data redundancy</td>
                                    <td>Efficient storage and maintenance</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What does the "R" stand for in RDBMS?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The "R" stands for Relational!</strong></p>
                                <p>It's called "relational" because of two main reasons:</p>
                                <p><strong>1. Table Structure:</strong> Data is organized into tables (also called relations in mathematical terms). Each table is a relation.</p>
                                <p><strong>2. Relationships Between Tables:</strong> More importantly, these tables can be related to each other through common columns. We establish connections between data in different tables.</p>
                                <p style="margin-top: 1rem;">For example, a Students table is <em>related</em> to an Enrollments table, which is <em>related</em> to a Courses table. These relationships are what make RDBMS so powerful - you can link and query data across multiple tables effortlessly.</p>
                                <p>The relational model was introduced by Dr. E.F. Codd at IBM in 1970, and it revolutionized database management!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How is RDBMS different from DBMS?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>RDBMS is a specific type of DBMS. Let me explain the differences:</strong></p>
                                <p><strong>DBMS (General):</strong></p>
                                <ul>
                                    <li>Can organize data in various ways - files, hierarchical, network, etc.</li>
                                    <li>May not support relationships between data</li>
                                    <li>May not enforce integrity constraints</li>
                                    <li>Examples: File systems, XML databases</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>RDBMS (Specific type):</strong></p>
                                <ul>
                                    <li>Specifically organizes data in tables (relations)</li>
                                    <li>Supports relationships through Primary and Foreign Keys</li>
                                    <li>Enforces data integrity through constraints</li>
                                    <li>Uses SQL as standard query language</li>
                                    <li>Follows ACID properties for transactions</li>
                                    <li>Supports normalization to reduce redundancy</li>
                                    <li>Examples: MySQL, PostgreSQL, Oracle</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Simple way to remember:</strong> All RDBMSs are DBMSs, but not all DBMSs are RDBMSs. It's like saying all cars are vehicles, but not all vehicles are cars!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why are tables used in RDBMS?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Tables are the foundation of RDBMS for several important reasons:</strong></p>
                                <p><strong>1. Structured Organization:</strong> Tables provide a clear, structured way to organize data - rows represent records, columns represent attributes. It's intuitive and easy to understand.</p>
                                <p><strong>2. Easy Visualization:</strong> Humans can easily visualize and understand data in tabular format - it's like a spreadsheet</p>
                                <p><strong>3. Reduces Redundancy:</strong> Instead of repeating customer info in every order, you store customers in one table and reference them. This is called normalization.</p>
                                <p><strong>4. Relationships:</strong> Tables can be linked through common columns (keys), allowing complex data relationships</p>
                                <p><strong>5. Querying Efficiency:</strong> SQL is optimized for table-based operations. You can easily filter, join, aggregate data from tables</p>
                                <p><strong>6. Data Integrity:</strong> Tables support constraints (PRIMARY KEY, FOREIGN KEY, UNIQUE, NOT NULL) that enforce data quality</p>
                                <p><strong>7. Scalability:</strong> Can handle millions of rows efficiently with proper indexing</p>
                                <p style="margin-top: 1rem;"><strong>Example:</strong> Imagine storing employee data. A table makes it easy to add new employees (new rows), add new attributes (new columns), find specific employees (queries), and maintain data consistency (constraints).</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Give a few examples of RDBMS software.</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Here are the most popular RDBMS systems:</strong></p>
                                <p><strong>1. MySQL:</strong></p>
                                <ul>
                                    <li>Most popular open-source RDBMS</li>
                                    <li>Used by Facebook, Twitter, YouTube, Wikipedia</li>
                                    <li>Great for web applications</li>
                                    <li>Free and easy to use</li>
                                </ul>
                                <p><strong>2. PostgreSQL:</strong></p>
                                <ul>
                                    <li>Advanced open-source RDBMS</li>
                                    <li>Known for reliability and feature robustness</li>
                                    <li>Supports complex queries and data types</li>
                                    <li>Used by Instagram, Reddit</li>
                                </ul>
                                <p><strong>3. Oracle Database:</strong></p>
                                <ul>
                                    <li>Enterprise-level, powerful and expensive</li>
                                    <li>Used by large corporations and banks</li>
                                    <li>Excellent for handling massive data</li>
                                    <li>Advanced security features</li>
                                </ul>
                                <p><strong>4. Microsoft SQL Server:</strong></p>
                                <ul>
                                    <li>Popular in Windows environments</li>
                                    <li>Integrates well with Microsoft ecosystem</li>
                                    <li>Good for enterprise applications</li>
                                </ul>
                                <p><strong>5. SQLite:</strong></p>
                                <ul>
                                    <li>Lightweight, embedded RDBMS</li>
                                    <li>No separate server needed</li>
                                    <li>Used in mobile apps (Android, iOS)</li>
                                    <li>Perfect for small to medium applications</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you store images or videos in an RDBMS?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, you CAN store images and videos in RDBMS, but whether you SHOULD is a different question!</strong></p>
                                <p><strong>How to store:</strong></p>
                                <p>Most RDBMS systems provide BLOB (Binary Large Object) data types to store binary data like images, videos, audio, PDFs, etc.</p>
                                <ul>
                                    <li>MySQL: BLOB, MEDIUMBLOB, LONGBLOB</li>
                                    <li>PostgreSQL: BYTEA</li>
                                    <li>Oracle: BLOB, BFILE</li>
                                    <li>SQL Server: VARBINARY(MAX)</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>But there are problems:</strong></p>
                                <ul>
                                    <li><strong>Database bloat:</strong> Images/videos are large - your database becomes huge</li>
                                    <li><strong>Performance:</strong> Slow to retrieve large binary data</li>
                                    <li><strong>Backup challenges:</strong> Backing up becomes slower and requires more storage</li>
                                    <li><strong>Memory usage:</strong> Loading images into memory can exhaust resources</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Better Approach:</strong></p>
                                <p>Store files on file system or cloud storage (AWS S3, Azure Blob), and store only the file path/URL in the database.</p>
                                <p>Example: Instead of storing the actual image, store: "/uploads/profile-pics/user123.jpg" or "https://s3.aws.com/bucket/image.jpg"</p>
                                <p style="margin-top: 0.5rem;">This way, the database stays fast and lean, while still maintaining references to all your media files!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 5: What is a Table? -->
            <div class="question-content" id="q5">
                <div class="question-header">
                    <h1 class="question-title">What is a Table?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 6 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>A <strong>Table</strong> (also called a <strong>Relation</strong>) is the fundamental structure in RDBMS where data is actually stored. Think of it as a well-organized spreadsheet with rows and columns. Each table represents a specific entity - like Students, Products, Orders, or Employees.</p>
                        <p style="margin-top: 1rem;">A table consists of:</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem; color: var(--text-secondary);">
                            <li><strong>Rows (Records/Tuples):</strong> Each row represents a single entry or record. For example, one student's complete information</li>
                            <li><strong>Columns (Fields/Attributes):</strong> Each column represents a specific property or attribute. For example, Name, Age, Email</li>
                        </ul>
                        <p style="margin-top: 1rem;">Every table has a defined <strong>schema</strong> which specifies the structure - what columns exist, their data types, and any constraints or rules that apply to the data.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Relation</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Structure</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Rows</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Columns</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Records</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Attributes</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Table Structure Visualization
                    </div>
                    <div class="image-container">
                        <svg width="800" height="450" viewBox="0 0 800 450">
                            <rect width="800" height="450" fill="#1e293b"/>
                            
                            <text x="400" y="35" font-size="24" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Table Structure: Rows & Columns</text>
                            
                            <!-- Table Container -->
                            <rect x="100" y="70" width="600" height="320" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="2" rx="12"/>
                            
                            <!-- Table Header -->
                            <rect x="100" y="70" width="600" height="40" fill="#0ea5e9" rx="12"/>
                            <text x="400" y="95" font-size="16" fill="white" text-anchor="middle" font-weight="bold">STUDENTS TABLE</text>
                            
                            <!-- Column Headers -->
                            <rect x="110" y="120" width="130" height="35" fill="#334155" rx="4"/>
                            <text x="175" y="143" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">StudentID (PK)</text>
                            
                            <rect x="250" y="120" width="130" height="35" fill="#334155" rx="4"/>
                            <text x="315" y="143" font-size="12" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Name</text>
                            
                            <rect x="390" y="120" width="130" height="35" fill="#334155" rx="4"/>
                            <text x="455" y="143" font-size="12" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Age</text>
                            
                            <rect x="530" y="120" width="160" height="35" fill="#334155" rx="4"/>
                            <text x="610" y="143" font-size="12" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Email</text>
                            
                            <!-- Column Labels -->
                            <text x="50" y="140" font-size="11" fill="#a855f7" text-anchor="middle" font-weight="bold">COLUMNS</text>
                            <text x="50" y="155" font-size="9" fill="#94a3b8" text-anchor="middle">(Attributes)</text>
                            <path d="M 60 140 L 100 140" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowpurple)"/>
                            
                            <!-- Row 1 -->
                            <rect x="110" y="165" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="175" y="185" font-size="11" fill="#0ea5e9" text-anchor="middle">1001</text>
                            
                            <rect x="250" y="165" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="315" y="185" font-size="11" fill="#cbd5e1" text-anchor="middle">John Smith</text>
                            
                            <rect x="390" y="165" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="455" y="185" font-size="11" fill="#cbd5e1" text-anchor="middle">22</text>
                            
                            <rect x="530" y="165" width="160" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="610" y="185" font-size="11" fill="#cbd5e1" text-anchor="middle">john@university.edu</text>
                            
                            <!-- Row label -->
                            <text x="740" y="180" font-size="9" fill="#f59e0b" text-anchor="start">‚Üê ROW 1</text>
                            <text x="740" y="195" font-size="8" fill="#94a3b8" text-anchor="start">(Record/Tuple)</text>
                            
                            <!-- Row 2 -->
                            <rect x="110" y="205" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="175" y="225" font-size="11" fill="#0ea5e9" text-anchor="middle">1002</text>
                            
                            <rect x="250" y="205" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="315" y="225" font-size="11" fill="#cbd5e1" text-anchor="middle">Sarah Johnson</text>
                            
                            <rect x="390" y="205" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="455" y="225" font-size="11" fill="#cbd5e1" text-anchor="middle">21</text>
                            
                            <rect x="530" y="205" width="160" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="610" y="225" font-size="11" fill="#cbd5e1" text-anchor="middle">sarah@university.edu</text>
                            
                            <text x="740" y="220" font-size="9" fill="#f59e0b" text-anchor="start">‚Üê ROW 2</text>
                            
                            <!-- Row 3 -->
                            <rect x="110" y="245" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="175" y="265" font-size="11" fill="#0ea5e9" text-anchor="middle">1003</text>
                            
                            <rect x="250" y="245" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="315" y="265" font-size="11" fill="#cbd5e1" text-anchor="middle">Mike Chen</text>
                            
                            <rect x="390" y="245" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="455" y="265" font-size="11" fill="#cbd5e1" text-anchor="middle">23</text>
                            
                            <rect x="530" y="245" width="160" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="610" y="265" font-size="11" fill="#cbd5e1" text-anchor="middle">mike@university.edu</text>
                            
                            <text x="740" y="260" font-size="9" fill="#f59e0b" text-anchor="start">‚Üê ROW 3</text>
                            
                            <!-- Row 4 -->
                            <rect x="110" y="285" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="175" y="305" font-size="11" fill="#0ea5e9" text-anchor="middle">1004</text>
                            
                            <rect x="250" y="285" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="315" y="305" font-size="11" fill="#cbd5e1" text-anchor="middle">Lisa Wang</text>
                            
                            <rect x="390" y="285" width="130" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="455" y="305" font-size="11" fill="#cbd5e1" text-anchor="middle">20</text>
                            
                            <rect x="530" y="285" width="160" height="30" fill="rgba(14, 165, 233, 0.1)" rx="4"/>
                            <text x="610" y="305" font-size="11" fill="#cbd5e1" text-anchor="middle">lisa@university.edu</text>
                            
                            <text x="740" y="300" font-size="9" fill="#f59e0b" text-anchor="start">‚Üê ROW 4</text>
                            
                            <!-- Dots for more rows -->
                            <text x="400" y="345" font-size="18" fill="#94a3b8" text-anchor="middle">...</text>
                            <text x="400" y="365" font-size="10" fill="#94a3b8" text-anchor="middle" font-style="italic">(Can contain millions of rows)</text>
                            
                            <!-- Bottom Info Box -->
                            <rect x="50" y="405" width="700" height="35" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="2" rx="8"/>
                            <text x="400" y="425" font-size="12" fill="#cbd5e1" text-anchor="middle">
                                <tspan fill="#0ea5e9" font-weight="bold">Table</tspan> = Collection of Rows and Columns | 
                                <tspan fill="#f59e0b" font-weight="bold">Row</tspan> = One complete record | 
                                <tspan fill="#a855f7" font-weight="bold">Column</tspan> = One attribute/property
                            </text>
                            
                            <defs>
                                <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#a855f7"/>
                                </marker>
                            </defs>
                        </svg>
                        <p class="image-caption">A table organizes data in rows (records) and columns (attributes)</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Table Components Explained
                    </div>
                    <div class="comparison-grid">
                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(14, 165, 233, 0.05) 0%, rgba(6, 182, 212, 0.05) 100%); border-left: 4px solid var(--primary-color);">
                            <h4 style="color: var(--primary-color);"><i class="fas fa-table"></i> Table Name</h4>
                            <p>The identifier for the table, representing what entity it stores.</p>
                            <p style="margin-top: 0.5rem;"><strong>Examples:</strong></p>
                            <ul>
                                <li>STUDENTS</li>
                                <li>PRODUCTS</li>
                                <li>EMPLOYEES</li>
                                <li>ORDERS</li>
                            </ul>
                            <p style="margin-top: 0.5rem;"><strong>Best Practice:</strong> Use plural nouns, uppercase or CamelCase</p>
                        </div>

                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(251, 191, 36, 0.05) 100%); border-left: 4px solid var(--warning-color);">
                            <h4 style="color: var(--warning-color);"><i class="fas fa-grip-lines"></i> Rows (Records/Tuples)</h4>
                            <p>Each row contains complete information about one instance of the entity.</p>
                            <p style="margin-top: 0.5rem;"><strong>Example - One Student Record:</strong></p>
                            <p style="margin-left: 1rem; color: var(--text-secondary);">ID: 1001, Name: John, Age: 22, Email: john@edu.com</p>
                            <p style="margin-top: 0.5rem;"><strong>Characteristic:</strong> Each row must be unique (enforced by primary key)</p>
                        </div>

                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.05) 0%, rgba(147, 51, 234, 0.05) 100%); border-left: 4px solid var(--purple-color);">
                            <h4 style="color: var(--purple-color);"><i class="fas fa-grip-vertical"></i> Columns (Fields/Attributes)</h4>
                            <p>Each column represents a specific property with a defined data type.</p>
                            <p style="margin-top: 0.5rem;"><strong>Example - Student Table Columns:</strong></p>
                            <ul>
                                <li>StudentID (INT)</li>
                                <li>Name (VARCHAR)</li>
                                <li>Age (INT)</li>
                                <li>Email (VARCHAR)</li>
                            </ul>
                            <p style="margin-top: 0.5rem;"><strong>Note:</strong> All rows must have the same columns</p>
                        </div>

                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border-left: 4px solid var(--success-color);">
                            <h4 style="color: var(--success-color);"><i class="fas fa-key"></i> Primary Key</h4>
                            <p>A special column that uniquely identifies each row in the table.</p>
                            <p style="margin-top: 0.5rem;"><strong>Example:</strong></p>
                            <p style="margin-left: 1rem; color: var(--text-secondary);">StudentID is the primary key - no two students can have the same ID</p>
                            <p style="margin-top: 0.5rem;"><strong>Rules:</strong> Must be unique, cannot be NULL</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Example
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-book-open"></i> College Registration System
                        </div>
                        <p><strong>Let me explain with a practical college example:</strong></p>
                        <p style="margin-top: 0.5rem;">When you register for college, they create a table called STUDENTS. Here's how your information is stored:</p>
                        <div class="example-box" style="margin-top: 1rem;">
                            <div class="example-header">
                                <span class="example-title"><i class="fas fa-table"></i> STUDENTS Table Structure</span>
                            </div>
                            <pre><code>CREATE TABLE STUDENTS (
    StudentID    INT PRIMARY KEY,
    FirstName    VARCHAR(50) NOT NULL,
    LastName     VARCHAR(50) NOT NULL,
    DateOfBirth  DATE,
    Email        VARCHAR(100) UNIQUE,
    Phone        VARCHAR(15),
    Major        VARCHAR(50),
    EnrollmentDate DATE DEFAULT CURRENT_DATE
);</code></pre>
                        </div>
                        <p style="margin-top: 1rem;"><strong>What this means:</strong></p>
                        <ul>
                            <li><strong>Each student</strong> = One row in the table</li>
                            <li><strong>Each student attribute</strong> (name, email, etc.) = One column</li>
                            <li><strong>StudentID</strong> = Primary Key (unique for each student)</li>
                            <li><strong>Email</strong> = Must be UNIQUE (no two students can have same email)</li>
                            <li><strong>FirstName, LastName</strong> = Cannot be NULL (required fields)</li>
                        </ul>
                        <p style="margin-top: 1rem;">When you update your phone number, they update just your row. When a new student joins, they add a new row. The table structure remains the same!</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What are rows and columns in a table?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Let me explain with a simple analogy:</strong></p>
                                <p><strong>Columns (Vertical - Fields/Attributes):</strong></p>
                                <p>Think of columns as the questions on a form. They represent the properties or attributes that every entry must have. For example, in a Students table:</p>
                                <ul>
                                    <li>StudentID column - stores student IDs</li>
                                    <li>Name column - stores student names</li>
                                    <li>Age column - stores ages</li>
                                    <li>Email column - stores email addresses</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Rows (Horizontal - Records/Tuples):</strong></p>
                                <p>Think of rows as filled-out forms. Each row contains all the answers for one specific person/thing. One row = One complete record.</p>
                                <p>Example row: {StudentID: 1001, Name: "John", Age: 22, Email: "john@edu.com"}</p>
                                <p style="margin-top: 1rem;"><strong>Key Difference:</strong> Columns define the structure (what data we store), Rows contain the actual data (specific values).</p>
                                <p>All rows in a table have the same columns, but different values!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you give an example of a table in your college database?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Sure! Here's a COURSES table from my college database:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem; background: #0d1117;">
                                    <pre style="color: #e0e0e0;"><code>Table: COURSES

CourseID  | CourseName            | Credits | Instructor      | Room  | Semester
----------|----------------------|---------|-----------------|-------|----------
CS101     | Intro to Programming | 4       | Dr. Smith       | A301  | Fall 2024
CS102     | Data Structures      | 4       | Dr. Johnson     | B205  | Fall 2024
DB201     | Database Systems     | 3       | Prof. Williams  | C102  | Spring 2025
WD301     | Web Development      | 3       | Ms. Brown       | Lab-1 | Spring 2025</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Table Breakdown:</strong></p>
                                <ul>
                                    <li><strong>Table Name:</strong> COURSES</li>
                                    <li><strong>Columns (6):</strong> CourseID, CourseName, Credits, Instructor, Room, Semester</li>
                                    <li><strong>Rows (4):</strong> Each row represents one course offered</li>
                                    <li><strong>Primary Key:</strong> CourseID (uniquely identifies each course)</li>
                                </ul>
                                <p style="margin-top: 1rem;">This table helps students see available courses, check instructors, find room locations, and plan their semester!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can a table exist without data?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Absolutely, yes! This is very common.</strong></p>
                                <p>A table can exist with just its structure (schema) defined but no actual data rows. Think of it like an empty form template - the form exists with all its fields, but nobody has filled it out yet.</p>
                                <p style="margin-top: 1rem;"><strong>Example scenario:</strong></p>
                                <p>When you create a new database for a startup company, you might create an EMPLOYEES table first:</p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>CREATE TABLE EMPLOYEES (
    EmployeeID INT PRIMARY KEY,
    Name VARCHAR(100),
    Email VARCHAR(100),
    Department VARCHAR(50)
);</code></pre>
                                </div>
                                <p style="margin-top: 0.5rem;">At this point, the table exists with its structure, but there are 0 rows because no employees have been hired yet!</p>
                                <p style="margin-top: 1rem;"><strong>This is called an "empty table."</strong> It's perfectly valid and quite common during initial system setup, development, or after data deletion.</p>
                                <p>You can verify: <code>SELECT COUNT(*) FROM EMPLOYEES;</code> would return 0.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is another term for a row?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>A row has several alternative names - they're used interchangeably:</strong></p>
                                <p><strong>1. Record:</strong> Most common term, especially in practical/business contexts</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: "Add a new record to the customer table"</p>
                                <p><strong>2. Tuple:</strong> Mathematical/formal term used in relational theory</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: "A relation consists of a set of tuples"</p>
                                <p><strong>3. Entry:</strong> Informal term</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: "We have 1000 entries in the database"</p>
                                <p style="margin-top: 1rem;"><strong>All mean the same thing!</strong> In interviews or technical discussions, you might hear any of these terms. "Record" and "Row" are most commonly used in real-world development, while "Tuple" is more academic.</p>
                                <p style="margin-top: 1rem;"><strong>Quick Memory Tip:</strong></p>
                                <ul>
                                    <li><strong>Row</strong> = Physical term (how it looks)</li>
                                    <li><strong>Record</strong> = Practical term (what it represents)</li>
                                    <li><strong>Tuple</strong> = Mathematical term (formal definition)</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How many tables can a database have?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Technically, there's no strict universal limit - it depends on the DBMS!</strong></p>
                                <p><strong>Practical limits for popular RDBMS:</strong></p>
                                <ul>
                                    <li><strong>MySQL:</strong> No specific limit (depends on OS file system limits - could be thousands)</li>
                                    <li><strong>PostgreSQL:</strong> Maximum of 1,600 tables per database (though you can create multiple databases)</li>
                                    <li><strong>Oracle:</strong> Essentially unlimited (limited only by storage and resources)</li>
                                    <li><strong>SQL Server:</strong> Maximum of 2,147,483,647 objects per database (includes tables, views, etc.)</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Real-World Perspective:</strong></p>
                                <p>Most applications use somewhere between 10 to 100 tables. Large enterprise systems like Amazon or Facebook might have thousands of tables, but that's distributed across many databases.</p>
                                <p style="margin-top: 1rem;"><strong>Example - E-commerce Application:</strong></p>
                                <ul>
                                    <li>CUSTOMERS</li>
                                    <li>PRODUCTS</li>
                                    <li>ORDERS</li>
                                    <li>ORDER_DETAILS</li>
                                    <li>CATEGORIES</li>
                                    <li>PAYMENTS</li>
                                    <li>REVIEWS</li>
                                    <li>SHIPPING</li>
                                </ul>
                                <p style="margin-top: 0.5rem;">That's just 8 tables for a functional e-commerce system!</p>
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Design with as many tables as you need, but not more. Too many tables can make the database complex and hard to maintain. Use normalization principles to find the right balance!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 6: What is a Record? -->
            <div class="question-content" id="q6">
                <div class="question-header">
                    <h1 class="question-title">What is a Record?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 5 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>A <strong>Record</strong>, also known as a <strong>Row</strong> or <strong>Tuple</strong>, is a single, complete entry in a database table. Think of it as one filled-out form containing all the information about one specific entity - like one student, one product, or one customer.</p>
                        <p style="margin-top: 1rem;">Each record is a horizontal set of data that spans across all columns in a table. For example, in a Students table, one record would contain everything about one student - their ID, name, age, email, address, all in one row. It's like having one person's complete profile card.</p>
                        <p style="margin-top: 1rem;">What makes a record unique is that it represents a distinct instance of whatever the table is storing. In a properly designed database, each record should be uniquely identifiable, usually through a <strong>Primary Key</strong>.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Tuple</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Row</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Entry</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Data Instance</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Record Structure Visualization
                    </div>
                    <div class="image-container">
                        <svg width="800" height="400" viewBox="0 0 800 400">
                            <rect width="800" height="400" fill="#1e293b"/>
                            
                            <text x="400" y="35" font-size="24" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Understanding Records (Rows) in a Table</text>
                            
                            <!-- Table -->
                            <rect x="80" y="70" width="640" height="280" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="2" rx="12"/>
                            
                            <!-- Table Header -->
                            <rect x="80" y="70" width="640" height="40" fill="#0ea5e9" rx="12"/>
                            <text x="400" y="95" font-size="16" fill="white" text-anchor="middle" font-weight="bold">EMPLOYEES TABLE</text>
                            
                            <!-- Column Headers -->
                            <rect x="90" y="120" width="110" height="30" fill="#334155" rx="4"/>
                            <text x="145" y="140" font-size="11" fill="#10b981" text-anchor="middle" font-weight="bold">EmployeeID</text>
                            
                            <rect x="210" y="120" width="150" height="30" fill="#334155" rx="4"/>
                            <text x="285" y="140" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Name</text>
                            
                            <rect x="370" y="120" width="120" height="30" fill="#334155" rx="4"/>
                            <text x="430" y="140" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Department</text>
                            
                            <rect x="500" y="120" width="110" height="30" fill="#334155" rx="4"/>
                            <text x="555" y="140" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Salary</text>
                            
                            <rect x="620" y="120" width="90" height="30" fill="#334155" rx="4"/>
                            <text x="665" y="140" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">City</text>
                            
                            <!-- Record 1 - Highlighted -->
                            <rect x="90" y="160" width="620" height="35" fill="rgba(245, 158, 11, 0.2)" stroke="#f59e0b" stroke-width="3" rx="4"/>
                            
                            <rect x="90" y="160" width="110" height="35" fill="rgba(245, 158, 11, 0.15)" rx="4"/>
                            <text x="145" y="182" font-size="11" fill="#0ea5e9" text-anchor="middle" font-weight="bold">E001</text>
                            
                            <rect x="210" y="160" width="150" height="35" fill="rgba(245, 158, 11, 0.15)" rx="4"/>
                            <text x="285" y="182" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">John Smith</text>
                            
                            <rect x="370" y="160" width="120" height="35" fill="rgba(245, 158, 11, 0.15)" rx="4"/>
                            <text x="430" y="182" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Engineering</text>
                            
                            <rect x="500" y="160" width="110" height="35" fill="rgba(245, 158, 11, 0.15)" rx="4"/>
                            <text x="555" y="182" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">$75,000</text>
                            
                            <rect x="620" y="160" width="90" height="35" fill="rgba(245, 158, 11, 0.15)" rx="4"/>
                            <text x="665" y="182" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Boston</text>
                            
                            <!-- Label for Record 1 -->
                            <text x="740" y="178" font-size="13" fill="#f59e0b" text-anchor="start" font-weight="bold">‚Üê RECORD 1</text>
                            <text x="740" y="192" font-size="9" fill="#94a3b8" text-anchor="start">(Complete info</text>
                            <text x="740" y="203" font-size="9" fill="#94a3b8" text-anchor="start">about 1 employee)</text>
                            
                            <!-- Record 2 -->
                            <rect x="90" y="205" width="110" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="145" y="225" font-size="11" fill="#0ea5e9" text-anchor="middle">E002</text>
                            
                            <rect x="210" y="205" width="150" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="285" y="225" font-size="11" fill="#cbd5e1" text-anchor="middle">Sarah Johnson</text>
                            
                            <rect x="370" y="205" width="120" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="430" y="225" font-size="11" fill="#cbd5e1" text-anchor="middle">Marketing</text>
                            
                            <rect x="500" y="205" width="110" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="555" y="225" font-size="11" fill="#cbd5e1" text-anchor="middle">$68,000</text>
                            
                            <rect x="620" y="205" width="90" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="665" y="225" font-size="11" fill="#cbd5e1" text-anchor="middle">New York</text>
                            
                            <!-- Record 3 -->
                            <rect x="90" y="245" width="110" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="145" y="265" font-size="11" fill="#0ea5e9" text-anchor="middle">E003</text>
                            
                            <rect x="210" y="245" width="150" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="285" y="265" font-size="11" fill="#cbd5e1" text-anchor="middle">Mike Chen</text>
                            
                            <rect x="370" y="245" width="120" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="430" y="265" font-size="11" fill="#cbd5e1" text-anchor="middle">Engineering</text>
                            
                            <rect x="500" y="245" width="110" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="555" y="265" font-size="11" fill="#cbd5e1" text-anchor="middle">$82,000</text>
                            
                            <rect x="620" y="245" width="90" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="665" y="265" font-size="11" fill="#cbd5e1" text-anchor="middle">Boston</text>
                            
                            <!-- Record 4 -->
                            <rect x="90" y="285" width="110" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="145" y="305" font-size="11" fill="#0ea5e9" text-anchor="middle">E004</text>
                            
                            <rect x="210" y="285" width="150" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="285" y="305" font-size="11" fill="#cbd5e1" text-anchor="middle">Lisa Wang</text>
                            
                            <rect x="370" y="285" width="120" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="430" y="305" font-size="11" fill="#cbd5e1" text-anchor="middle">HR</text>
                            
                            <rect x="500" y="285" width="110" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="555" y="305" font-size="11" fill="#cbd5e1" text-anchor="middle">$71,000</text>
                            
                            <rect x="620" y="285" width="90" height="30" fill="rgba(14, 165, 233, 0.08)" rx="4"/>
                            <text x="665" y="305" font-size="11" fill="#cbd5e1" text-anchor="middle">Chicago</text>
                            
                            <!-- Dots -->
                            <text x="400" y="335" font-size="16" fill="#94a3b8" text-anchor="middle">...</text>
                            
                            <!-- Bottom Info -->
                            <rect x="80" y="360" width="640" height="30" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="2" rx="8"/>
                            <text x="400" y="380" font-size="11" fill="#cbd5e1" text-anchor="middle">
                                Each <tspan fill="#f59e0b" font-weight="bold">RECORD</tspan> = One complete horizontal row = All information about ONE entity
                            </text>
                        </svg>
                        <p class="image-caption">A record is a complete horizontal row containing all data about one entity</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Example
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-hospital"></i> Patient Record in Hospital Database
                        </div>
                        <p><strong>Imagine you visit a hospital. They create a record for you:</strong></p>
                        <div class="example-box" style="margin-top: 1rem;">
                            <div class="example-header">
                                <span class="example-title"><i class="fas fa-user-injured"></i> One Patient Record</span>
                            </div>
                            <pre><code>PatientID: P12345
Name: John Doe
Age: 35
Blood Group: O+
Phone: +1-555-0123
Address: 123 Main St, Boston, MA
Admission Date: 2024-11-04
Doctor Assigned: Dr. Smith
Room Number: 302</code></pre>
                        </div>
                        <p style="margin-top: 1rem;">This entire set of information is <strong>ONE RECORD</strong>. It's a complete snapshot of everything the hospital needs to know about you as a patient. Each field (PatientID, Name, Age, etc.) is a column, and all these values together form one complete record.</p>
                        <p style="margin-top: 1rem;"><strong>Why records matter:</strong></p>
                        <ul>
                            <li>Easy to locate specific patient information using PatientID</li>
                            <li>Can update your record if phone number changes</li>
                            <li>Can delete your record after discharge (if policy allows)</li>
                            <li>Each patient gets their own unique record - no confusion</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is another name for a record?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>A record has several names that are used interchangeably in databases:</strong></p>
                                <p><strong>1. Row:</strong> This is the most common term in practical usage. When you look at a table visually, records appear as horizontal rows.</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: "Let me add a new row to the customer table"</p>
                                <p><strong>2. Tuple:</strong> This is the formal mathematical term used in relational database theory. It comes from set theory and is more academic.</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: "A relation is a set of tuples"</p>
                                <p><strong>3. Entry:</strong> A casual, informal term often used in conversation.</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: "We need to add a new entry for this customer"</p>
                                <p><strong>4. Data Instance:</strong> Sometimes used to emphasize that the record represents one specific instance of an entity.</p>
                                <p style="margin-top: 1rem;">In day-to-day work, developers and DBAs mostly use "row" and "record" interchangeably. "Tuple" is what you'll see in academic papers and database theory books. But they all mean the exact same thing!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can two records be exactly the same?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Great question! Technically yes, but practically, it should never happen in a well-designed database.</strong></p>
                                <p><strong>Why it shouldn't happen:</strong></p>
                                <p>In a properly designed table, each record must be uniquely identifiable using a <strong>Primary Key</strong>. This ensures no two records are completely identical.</p>
                                <p style="margin-top: 1rem;"><strong>Example - Bad Design (No Primary Key):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>Name      | Age | City
----------|-----|--------
John Doe  | 25  | Boston
John Doe  | 25  | Boston  ‚Üê Duplicate! Which John?</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Example - Good Design (With Primary Key):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>StudentID | Name      | Age | City
----------|-----------|-----|--------
S001      | John Doe  | 25  | Boston
S002      | John Doe  | 25  | Boston  ‚Üê Same name/age/city but DIFFERENT person!</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Key Point:</strong> While other fields might have identical values (like two people named "John Doe" of the same age), the Primary Key (StudentID) makes each record unique and identifiable.</p>
                                <p style="margin-top: 1rem;">Some databases allow duplicate records if you don't define a primary key, but this is poor database design and should be avoided!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does a record differ from a field?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Let me break down this fundamental difference clearly:</strong></p>
                                <p><strong>Record (Row):</strong></p>
                                <ul>
                                    <li><strong>What it is:</strong> A complete set of related data about ONE entity</li>
                                    <li><strong>Direction:</strong> Horizontal (spans across all columns)</li>
                                    <li><strong>Contains:</strong> Multiple fields/values</li>
                                    <li><strong>Represents:</strong> One complete "thing" - one student, one product, one order</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Field (Column):</strong></p>
                                <ul>
                                    <li><strong>What it is:</strong> A single piece of information (one attribute)</li>
                                    <li><strong>Direction:</strong> Vertical (goes down through all records)</li>
                                    <li><strong>Contains:</strong> One type of data for all records</li>
                                    <li><strong>Represents:</strong> One specific property - like "Name" or "Age"</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Simple Analogy:</strong></p>
                                <p>Think of a class attendance sheet:</p>
                                <ul>
                                    <li><strong>Field/Column:</strong> The column header like "Name", "Roll No", "Present/Absent"</li>
                                    <li><strong>Record/Row:</strong> One student's complete attendance line - their name, roll number, and status</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Example:</strong></p>
                                <p style="margin-left: 1rem;">Field "Name" contains: John, Sarah, Mike (all names)</p>
                                <p style="margin-left: 1rem;">Record for John contains: {ID: 101, Name: John, Age: 22, Email: john@edu.com} (all John's info)</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Give an example of a student record.</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Sure! Here's a complete student record from a university database:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <div class="example-header">
                                        <span class="example-title"><i class="fas fa-graduation-cap"></i> Student Record</span>
                                    </div>
                                    <pre><code>Table: STUDENTS

StudentID:        STU2024001
FirstName:        Sarah
LastName:         Johnson
DateOfBirth:      2002-05-15
Age:              22
Gender:           Female
Email:            sarah.johnson@university.edu
Phone:            +1-555-9876
Address:          456 College Ave, Apt 3B
City:             Cambridge
State:            MA
ZipCode:          02138
Major:            Computer Science
Minor:            Mathematics
GPA:              3.75
Credits_Earned:   90
Year:             Senior
Enrollment_Date:  2020-08-25
Advisor:          Dr. Robert Smith
Status:           Active</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>What this record tells us:</strong></p>
                                <p>This single record contains EVERYTHING the university knows about Sarah Johnson. It's her complete academic profile in the system.</p>
                                <p style="margin-top: 1rem;"><strong>How it's used:</strong></p>
                                <ul>
                                    <li>Registration office uses it to verify her enrollment status</li>
                                    <li>Academic advisor uses it to track her progress</li>
                                    <li>Financial aid office references it for scholarship eligibility</li>
                                    <li>Library system links to it for borrowing privileges</li>
                                    <li>Email system uses it for institutional email</li>
                                </ul>
                                <p style="margin-top: 1rem;">When Sarah graduates, this record might be updated (Status changes to "Graduated") or archived, but it remains as one complete, unified record of her time at the university.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can we delete a record from a table?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Absolutely yes! Deleting records is a fundamental database operation.</strong></p>
                                <p><strong>How to delete a record:</strong></p>
                                <p>We use the SQL DELETE command:</p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Delete a specific student record
DELETE FROM STUDENTS 
WHERE StudentID = 'STU2024001';

-- Delete all students from Boston
DELETE FROM STUDENTS 
WHERE City = 'Boston';

-- Delete ALL records (dangerous!)
DELETE FROM STUDENTS;</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Important Considerations:</strong></p>
                                <p><strong>1. Foreign Key Constraints:</strong></p>
                                <p>If other tables reference this record, you might not be able to delete it directly.</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: Can't delete a student if they have active course enrollments</p>
                                <p style="margin-top: 0.5rem;"><strong>2. Cascading Deletes:</strong></p>
                                <p>You can configure the database to automatically delete related records</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: Deleting a customer also deletes all their orders</p>
                                <p style="margin-top: 0.5rem;"><strong>3. Soft Delete vs Hard Delete:</strong></p>
                                <ul>
                                    <li><strong>Hard Delete:</strong> Permanently removes the record (can't undo)</li>
                                    <li><strong>Soft Delete:</strong> Just marks the record as "inactive" or "deleted" but keeps the data</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong></p>
                                <p>Many applications use soft deletes for important data. Instead of actually deleting:</p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>UPDATE STUDENTS 
SET Status = 'Deleted', DeletedDate = CURRENT_DATE
WHERE StudentID = 'STU2024001';</code></pre>
                                </div>
                                <p style="margin-top: 0.5rem;">This way, you can always recover the data if needed!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 7: What is a Field or Column? -->
            <div class="question-content" id="q7">
                <div class="question-header">
                    <h1 class="question-title">What is a Field or Column?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 6 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>A <strong>Field</strong> or <strong>Column</strong> (also called an <strong>Attribute</strong>) is a vertical division in a table that represents a specific characteristic or property of the entity being stored. Think of it as one question on a form, or one category of information.</p>
                        <p style="margin-top: 1rem;">Each column has a defined <strong>name</strong> and <strong>data type</strong> that determines what kind of information it can store. For example, a "Name" column stores text, an "Age" column stores numbers, and a "DateOfBirth" column stores dates. Every record in the table must have a value (or NULL) for each defined column.</p>
                        <p style="margin-top: 1rem;">Columns are defined when you create the table and form the <strong>schema</strong> or structure of your data. They're like the blueprint that tells the database what information to collect for each entity.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Attribute</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Datatype</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Schema</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Constraint</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Common Data Types for Columns
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Data Type</th>
                                    <th>Stores</th>
                                    <th>Example Column</th>
                                    <th>Sample Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>INT / INTEGER</strong></td>
                                    <td>Whole numbers</td>
                                    <td>Age, Quantity, EmployeeID</td>
                                    <td>25, 100, 1001</td>
                                </tr>
                                <tr>
                                    <td><strong>VARCHAR(n)</strong></td>
                                    <td>Variable-length text</td>
                                    <td>Name, Email, Address</td>
                                    <td>'John Smith'</td>
                                </tr>
                                <tr>
                                    <td><strong>DECIMAL(p,s)</strong></td>
                                    <td>Precise decimal numbers</td>
                                    <td>Price, Salary, GPA</td>
                                    <td>99.99, 75000.00</td>
                                </tr>
                                <tr>
                                    <td><strong>DATE</strong></td>
                                    <td>Calendar dates</td>
                                    <td>BirthDate, OrderDate</td>
                                    <td>2024-11-04</td>
                                </tr>
                                <tr>
                                    <td><strong>DATETIME</strong></td>
                                    <td>Date and time</td>
                                    <td>CreatedAt, LastLogin</td>
                                    <td>2024-11-04 14:30:00</td>
                                </tr>
                                <tr>
                                    <td><strong>BOOLEAN</strong></td>
                                    <td>True/False values</td>
                                    <td>IsActive, IsVerified</td>
                                    <td>TRUE, FALSE</td>
                                </tr>
                                <tr>
                                    <td><strong>TEXT</strong></td>
                                    <td>Long text</td>
                                    <td>Description, Comments</td>
                                    <td>'This is a long...'</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What kind of information does a field hold?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>A field holds one specific type of information for all records in the table.</strong></p>
                                <p>Each field is designed to store a particular attribute or characteristic. The type of information is defined by the column's purpose and data type.</p>
                                <p style="margin-top: 1rem;"><strong>Examples:</strong></p>
                                <ul>
                                    <li><strong>Name field:</strong> Stores text representing people's names (VARCHAR)</li>
                                    <li><strong>Age field:</strong> Stores numeric age values (INT)</li>
                                    <li><strong>Email field:</strong> Stores email addresses in text format (VARCHAR)</li>
                                    <li><strong>DateOfBirth field:</strong> Stores calendar dates (DATE)</li>
                                    <li><strong>Salary field:</strong> Stores monetary amounts with decimals (DECIMAL)</li>
                                    <li><strong>IsActive field:</strong> Stores yes/no or true/false values (BOOLEAN)</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Key Point:</strong> The field holds the SAME TYPE of information for every single record. All values in the "Age" column are ages, all values in "Email" column are email addresses, and so on. This consistency is what makes databases so powerful and queryable!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the datatype of a field?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The datatype defines what KIND of values can be stored in that field and how the database should treat them.</strong></p>
                                <p>When you create a column, you must specify its datatype. This tells the database:</p>
                                <ul>
                                    <li>What kind of data is allowed (numbers, text, dates, etc.)</li>
                                    <li>How much storage space to allocate</li>
                                    <li>What operations can be performed on it</li>
                                    <li>How to validate the data</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>Example Column Definitions:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>CREATE TABLE EMPLOYEES (
    EmployeeID    INT,              -- Integer (whole numbers)
    Name          VARCHAR(100),      -- Text up to 100 characters
    Salary        DECIMAL(10, 2),    -- Decimal with 10 digits, 2 after point
    HireDate      DATE,              -- Calendar date (YYYY-MM-DD)
    IsActive      BOOLEAN,           -- True or False
    Bio           TEXT               -- Long text, unlimited length
);</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Why datatypes matter:</strong></p>
                                <ul>
                                    <li><strong>Validation:</strong> Can't store "abc" in an INT field</li>
                                    <li><strong>Storage Efficiency:</strong> INT takes less space than TEXT</li>
                                    <li><strong>Operations:</strong> Can do math on INT/DECIMAL, can't on VARCHAR</li>
                                    <li><strong>Sorting:</strong> Numbers sort differently than text</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can a column have duplicate values?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, absolutely! In fact, duplicate values in columns are very common and often expected.</strong></p>
                                <p><strong>Example - EMPLOYEES Table:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>EmployeeID | Name       | Department  | City
-----------|------------|-------------|--------
E001       | John Doe   | Engineering | Boston
E002       | Jane Smith | Engineering | Boston    ‚Üê Same Dept & City
E003       | Mike Lee   | Engineering | Boston    ‚Üê Same Dept & City
E004       | Sarah Wu   | Marketing   | New York</code></pre>
                                </div>
                                <p style="margin-top: 1rem;">Notice that "Engineering" and "Boston" appear multiple times - that's perfectly fine!</p>
                                <p style="margin-top: 1rem;"><strong>Exceptions - When duplicates are NOT allowed:</strong></p>
                                <p><strong>1. Primary Key Column:</strong></p>
                                <p style="margin-left: 1rem;">Must be unique. EmployeeID can't repeat.</p>
                                <p><strong>2. UNIQUE Constraint:</strong></p>
                                <p style="margin-left: 1rem;">If you define a column as UNIQUE (like Email), no duplicates allowed</p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>CREATE TABLE USERS (
    UserID   INT PRIMARY KEY,        -- No duplicates
    Email    VARCHAR(100) UNIQUE,    -- No duplicates
    City     VARCHAR(50)             -- Duplicates OK!
);</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Real-world scenario:</strong> In a school database, many students might have the same age, grade, city, or major, but each needs a unique StudentID!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can two columns have the same name?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No, not within the same table. Each column in a table must have a unique name.</strong></p>
                                <p><strong>Why not?</strong> The database wouldn't know which column you're referring to!</p>
                                <p style="margin-top: 1rem;"><strong>However, DIFFERENT tables can have columns with the same name:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- STUDENTS table has a "Name" column
CREATE TABLE STUDENTS (
    StudentID INT PRIMARY KEY,
    Name VARCHAR(100)     ‚Üê "Name" column
);

-- TEACHERS table also has a "Name" column (perfectly fine!)
CREATE TABLE TEACHERS (
    TeacherID INT PRIMARY KEY,
    Name VARCHAR(100)     ‚Üê Also "Name" column
);</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>When joining tables:</strong> If both tables have columns with the same name, specify which table's column you mean using <code>TableName.ColumnName</code> syntax to eliminate ambiguity!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How do you identify a specific field in a table?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>You identify a field by its column name, and optionally by the table name if there's ambiguity.</strong></p>
                                <p><strong>Method 1: Just the Column Name</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>SELECT Email FROM STUDENTS;</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Method 2: Table.Column Syntax (for clarity)</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>SELECT STUDENTS.Name, STUDENTS.Email FROM STUDENTS;</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Method 3: Using Table Aliases</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>SELECT s.StudentID, s.Name, s.Email
FROM STUDENTS s;</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <!-- Question 8: What is SQL? -->
             <div class="question-content" id="q8">
    <div class="question-header">
        <h1 class="question-title">What is SQL?</h1>
        <div class="question-meta">
            <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
            <span class="meta-tag"><i class="fas fa-clock"></i> 7 min read</span>
            <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
        </div>
    </div>

    <div class="content-card">
        <div class="section-title">
            <i class="fas fa-book"></i>
            Definition
        </div>
        <div class="definition-box">
            <p><strong>SQL</strong> stands for Structured Query Language. It's the standard programming language used to communicate with relational databases. Think of SQL as the universal language that lets you talk to databases - asking them to retrieve, insert, update, or delete data.</p>
            <p style="margin-top: 1rem;">SQL is like the English language for databases. Just as you use English to ask someone for information, you use SQL to ask the database for data. It's designed to be readable and relatively easy to learn, with commands that often read like plain English sentences.</p>
            <p style="margin-top: 1rem;">The beauty of SQL is that it's <strong>standardized</strong> - once you learn SQL, you can work with MySQL, PostgreSQL, Oracle, SQL Server, and most other relational databases with minimal adjustments.</p>
        </div>

        <div class="keyword-tags">
            <span class="keyword-tag"><i class="fas fa-tag"></i> Structured Query Language</span>
            <span class="keyword-tag"><i class="fas fa-tag"></i> Queries</span>
            <span class="keyword-tag"><i class="fas fa-tag"></i> Database Interaction</span>
            <span class="keyword-tag"><i class="fas fa-tag"></i> DDL</span>
            <span class="keyword-tag"><i class="fas fa-tag"></i> DML</span>
            <span class="keyword-tag"><i class="fas fa-tag"></i> DQL</span>
        </div>
    </div>

    <div class="content-card">
        <div class="section-title">
            <i class="fas fa-code"></i>
            SQL Categories
        </div>
        <div class="comparison-grid">
            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(14, 165, 233, 0.05) 0%, rgba(6, 182, 212, 0.05) 100%); border-left: 4px solid var(--primary-color);">
                <h4 style="color: var(--primary-color);"><i class="fas fa-wrench"></i> DDL - Data Definition</h4>
                <p>Defines database structure</p>
                <p style="margin-top: 0.5rem;"><strong>Commands:</strong></p>
                <ul>
                    <li><strong>CREATE</strong> - Create tables</li>
                    <li><strong>ALTER</strong> - Modify structure</li>
                    <li><strong>DROP</strong> - Delete tables</li>
                    <li><strong>TRUNCATE</strong> - Remove all data</li>
                </ul>
            </div>

            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(79, 70, 229, 0.05) 100%); border-left: 4px solid #6366f1;">
                <h4 style="color: #6366f1;"><i class="fas fa-search"></i> DQL - Data Query</h4>
                <p>Retrieves data from database</p>
                <p style="margin-top: 0.5rem;"><strong>Commands:</strong></p>
                <ul>
                    <li><strong>SELECT</strong> - Query and retrieve data</li>
                </ul>
                <p style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--text-secondary);">Most commonly used SQL command!</p>
            </div>

            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border-left: 4px solid var(--success-color);">
                <h4 style="color: var(--success-color);"><i class="fas fa-database"></i> DML - Data Manipulation</h4>
                <p>Manipulates data in tables</p>
                <p style="margin-top: 0.5rem;"><strong>Commands:</strong></p>
                <ul>
                    <li><strong>INSERT</strong> - Add new data</li>
                    <li><strong>UPDATE</strong> - Modify existing data</li>
                    <li><strong>DELETE</strong> - Remove data</li>
                </ul>
            </div>

            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(251, 191, 36, 0.05) 100%); border-left: 4px solid var(--warning-color);">
                <h4 style="color: var(--warning-color);"><i class="fas fa-shield-alt"></i> DCL - Data Control</h4>
                <p>Controls access permissions</p>
                <p style="margin-top: 0.5rem;"><strong>Commands:</strong></p>
                <ul>
                    <li><strong>GRANT</strong> - Give permissions</li>
                    <li><strong>REVOKE</strong> - Remove permissions</li>
                </ul>
            </div>

            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.05) 0%, rgba(147, 51, 234, 0.05) 100%); border-left: 4px solid var(--purple-color);">
                <h4 style="color: var(--purple-color);"><i class="fas fa-exchange-alt"></i> TCL - Transaction Control</h4>
                <p>Manages transactions</p>
                <p style="margin-top: 0.5rem;"><strong>Commands:</strong></p>
                <ul>
                    <li><strong>COMMIT</strong> - Save changes</li>
                    <li><strong>ROLLBACK</strong> - Undo changes</li>
                    <li><strong>SAVEPOINT</strong> - Set checkpoint</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="content-card">
        <div class="section-title">
            <i class="fas fa-lightbulb"></i>
            SQL Examples
        </div>
        <div class="example-box">
            <div class="example-header">
                <span class="example-title"><i class="fas fa-code"></i> Common SQL Commands</span>
            </div>
            <pre><code>-- DQL: SELECT - Query/Retrieve data
SELECT Name, Age, Email 
FROM STUDENTS 
WHERE Age > 20;

-- SELECT with JOIN (DQL)
SELECT s.Name, c.CourseName
FROM STUDENTS s
JOIN ENROLLMENTS e ON s.StudentID = e.StudentID
JOIN COURSES c ON e.CourseID = c.CourseID;

-- DML: INSERT - Add new record
INSERT INTO STUDENTS (StudentID, Name, Age, Email)
VALUES (1001, 'John Smith', 22, 'john@university.edu');

-- DML: UPDATE - Modify existing data
UPDATE STUDENTS 
SET Email = 'newemail@university.edu'
WHERE StudentID = 1001;

-- DML: DELETE - Remove records
DELETE FROM STUDENTS 
WHERE StudentID = 1001;

-- DDL: CREATE - Define table structure
CREATE TABLE STUDENTS (
    StudentID INT PRIMARY KEY,
    Name VARCHAR(100) NOT NULL,
    Age INT,
    Email VARCHAR(100) UNIQUE
);

-- TCL: Transaction Management
BEGIN TRANSACTION;
UPDATE STUDENTS SET Age = 23 WHERE StudentID = 1001;
COMMIT;  -- Save the changes

-- DCL: Access Control
GRANT SELECT, INSERT ON STUDENTS TO 'analyst_user';
REVOKE DELETE ON STUDENTS FROM 'analyst_user';</code></pre>
        </div>
    </div>

    <div class="content-card">
        <div class="section-title">
            <i class="fas fa-info-circle"></i>
            DQL vs DML: What's the Difference?
        </div>
        <div class="comparison-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(79, 70, 229, 0.05) 100%); border-left: 4px solid #6366f1;">
                <h4 style="color: #6366f1;"><i class="fas fa-search"></i> DQL (Data Query Language)</h4>
                <ul>
                    <li><strong>Purpose:</strong> Read/Query data only</li>
                    <li><strong>Effect:</strong> Does NOT modify data</li>
                    <li><strong>Command:</strong> SELECT</li>
                    <li><strong>Safety:</strong> Safe to run (read-only)</li>
                    <li><strong>Usage:</strong> Most frequently used!</li>
                </ul>
            </div>
            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border-left: 4px solid var(--success-color);">
                <h4 style="color: var(--success-color);"><i class="fas fa-edit"></i> DML (Data Manipulation Language)</h4>
                <ul>
                    <li><strong>Purpose:</strong> Modify data</li>
                    <li><strong>Effect:</strong> Changes database content</li>
                    <li><strong>Commands:</strong> INSERT, UPDATE, DELETE</li>
                    <li><strong>Safety:</strong> Can alter/delete data permanently</li>
                    <li><strong>Usage:</strong> Use with caution!</li>
                </ul>
            </div>
        </div>
        <p style="margin-top: 1rem; padding: 1rem; background: rgba(99, 102, 241, 0.05); border-radius: 8px;">
            <strong>üìù Note:</strong> Some sources classify SELECT as part of DML, while others separate it as DQL. Both classifications are valid! The key distinction is that SELECT only <em>reads</em> data, while INSERT/UPDATE/DELETE <em>modify</em> it.
        </p>
    </div>

    <div class="content-card">
        <div class="section-title">
            <i class="fas fa-question-circle"></i>
            Cross Questions
        </div>
        <div class="cross-questions">
            <div class="cross-question-item">
                <div class="cross-question-text">
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>What does SQL stand for?</strong></span>
                </div>
                <div class="cross-answer">
                    <p><strong>SQL stands for Structured Query Language.</strong></p>
                    <p>Let me break down what each word means:</p>
                    <p><strong>Structured:</strong> SQL works with structured data organized in tables with defined relationships</p>
                    <p><strong>Query:</strong> The primary purpose is to query (ask questions of) the database to retrieve information</p>
                    <p><strong>Language:</strong> It's a standardized language with syntax and grammar for communicating with databases</p>
                    <p style="margin-top: 1rem;">Pronounced as either "S-Q-L" (ess-cue-ell) or "sequel" - both are correct, though "sequel" is the original pronunciation from IBM!</p>
                </div>
            </div>

            <div class="cross-question-item">
                <div class="cross-question-text">
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>Is SQL a programming language?</strong></span>
                </div>
                <div class="cross-answer">
                    <p><strong>SQL is a query language, not a full programming language in the traditional sense.</strong></p>
                    <p><strong>Why it's different from programming languages:</strong></p>
                    <ul>
                        <li><strong>Domain-Specific:</strong> SQL is specifically designed for database operations, not general-purpose programming</li>
                        <li><strong>Declarative:</strong> You tell it WHAT you want, not HOW to get it (unlike Python/Java where you write step-by-step instructions)</li>
                        <li><strong>No Complex Logic:</strong> Basic SQL doesn't have loops, complex conditionals, or advanced data structures</li>
                    </ul>
                    <p style="margin-top: 1rem;"><strong>Example of Declarative Nature:</strong></p>
                    <p>SQL: <code>SELECT * FROM STUDENTS WHERE Age > 20;</code></p>
                    <p style="margin-left: 1rem; color: var(--text-secondary);">You just say "give me students over 20" - the database figures out HOW to find them</p>
                    <p style="margin-top: 1rem;"><strong>However:</strong> Modern SQL has been extended with procedural features (PL/SQL in Oracle, T-SQL in SQL Server) that add programming capabilities like variables, loops, and functions, making it more programming-like!</p>
                </div>
            </div>

            <div class="cross-question-item">
                <div class="cross-question-text">
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>Can SQL be used with all databases?</strong></span>
                </div>
                <div class="cross-answer">
                    <p><strong>SQL can be used with all RELATIONAL databases, but not with all database types.</strong></p>
                    <p><strong>Works with (RDBMS):</strong></p>
                    <ul>
                        <li>MySQL, PostgreSQL, Oracle, SQL Server, SQLite</li>
                        <li>MariaDB, IBM DB2, SAP HANA</li>
                    </ul>
                    <p style="margin-top: 1rem;"><strong>Doesn't work with (NoSQL databases):</strong></p>
                    <ul>
                        <li>MongoDB (uses MongoDB Query Language)</li>
                        <li>Redis (uses Redis commands)</li>
                        <li>Cassandra (uses CQL, Cassandra Query Language)</li>
                    </ul>
                    <p style="margin-top: 1rem;"><strong>Important Note:</strong> While SQL is standardized (ANSI SQL), each RDBMS has its own "dialect" with slight differences:</p>
                    <ul>
                        <li><strong>MySQL:</strong> Uses LIMIT for pagination</li>
                        <li><strong>SQL Server:</strong> Uses TOP instead</li>
                        <li><strong>Oracle:</strong> Uses ROWNUM</li>
                    </ul>
                    <p>But the core SQL (SELECT, INSERT, UPDATE, DELETE, JOIN) works across all relational databases!</p>
                </div>
            </div>

            <div class="cross-question-item">
                <div class="cross-question-text">
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>What kind of tasks can you perform using SQL?</strong></span>
                </div>
                <div class="cross-answer">
                    <p><strong>SQL lets you perform virtually any database operation!</strong></p>
                    <p><strong>1. Data Retrieval (Querying - DQL):</strong></p>
                    <ul>
                        <li>Search for specific records</li>
                        <li>Filter data based on conditions</li>
                        <li>Sort and organize results</li>
                        <li>Combine data from multiple tables (JOIN)</li>
                        <li>Calculate aggregates (SUM, AVG, COUNT)</li>
                    </ul>
                    <p><strong>2. Data Manipulation (DML):</strong></p>
                    <ul>
                        <li>Insert new records</li>
                        <li>Update existing data</li>
                        <li>Delete unwanted records</li>
                    </ul>
                    <p><strong>3. Database Structure (DDL):</strong></p>
                    <ul>
                        <li>Create new tables</li>
                        <li>Modify table structures (add/remove columns)</li>
                        <li>Define relationships between tables</li>
                        <li>Set up constraints and rules</li>
                    </ul>
                    <p><strong>4. Access Control (DCL):</strong></p>
                    <ul>
                        <li>Create user accounts</li>
                        <li>Grant or revoke permissions</li>
                        <li>Control who can access what data</li>
                    </ul>
                    <p><strong>5. Transaction Management (TCL):</strong></p>
                    <ul>
                        <li>Start transactions</li>
                        <li>Commit changes permanently</li>
                        <li>Rollback if something goes wrong</li>
                    </ul>
                    <p style="margin-top: 1rem;">Basically, if it involves data in a relational database, SQL can do it!</p>
                </div>
            </div>

            <div class="cross-question-item">
                <div class="cross-question-text">
                    <i class="fas fa-arrow-right"></i>
                    <span><strong>Who uses SQL in an organization?</strong></span>
                </div>
                <div class="cross-answer">
                    <p><strong>SQL is one of the most in-demand skills! Here's who uses it:</strong></p>
                    <p><strong>1. Database Administrators (DBAs):</strong></p>
                    <p style="margin-left: 1rem;">Manage databases, optimize performance, handle backups, security</p>
                    <p><strong>2. Backend Developers:</strong></p>
                    <p style="margin-left: 1rem;">Write SQL queries in their applications to store and retrieve data</p>
                    <p><strong>3. Data Analysts:</strong></p>
                    <p style="margin-left: 1rem;">Query databases to extract insights, generate reports, analyze trends</p>
                    <p><strong>4. Data Scientists:</strong></p>
                    <p style="margin-left: 1rem;">Retrieve datasets for machine learning and statistical analysis</p>
                    <p><strong>5. Business Intelligence (BI) Professionals:</strong></p>
                    <p style="margin-left: 1rem;">Create dashboards and reports by querying data warehouses</p>
                    <p><strong>6. Quality Assurance (QA) Testers:</strong></p>
                    <p style="margin-left: 1rem;">Verify data integrity, check if data is correctly stored/updated</p>
                    <p><strong>7. DevOps Engineers:</strong></p>
                    <p style="margin-left: 1rem;">Manage database deployments, migrations, monitoring</p>
                    <p><strong>8. Product Managers:</strong></p>
                    <p style="margin-left: 1rem;">Sometimes write simple queries to check product metrics and user behavior</p>
                    <p style="margin-top: 1rem;"><strong>Real World:</strong> In most tech companies, knowing SQL is almost as fundamental as knowing how to use email. It's that essential!</p>
                </div>
            </div>
        </div>
    </div>

    <div class="navigation-buttons">
        <button class="nav-btn prev" onclick="navigateQuestion('prev')">
            <i class="fas fa-arrow-left"></i> Previous
        </button>
        <button class="nav-btn next" onclick="navigateQuestion('next')">
            Next <i class="fas fa-arrow-right"></i>
        </button>
    </div>
            </div>

            <!-- Question 9: What is a Query? -->
            <div class="question-content" id="q9">
                <div class="question-header">
                    <h1 class="question-title">What is a Query?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 5 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>A <strong>Query</strong> is a request or question you ask the database to perform a specific action - like retrieving data, updating records, or deleting information. It's literally asking the database "Can you give me all students older than 20?" or "Update John's email address."</p>
                        <p style="margin-top: 1rem;">Think of a query as a command or instruction written in SQL that tells the database exactly what you want it to do. When you "run" or "execute" a query, the database processes your request and returns results or performs the action you specified.</p>
                        <p style="margin-top: 1rem;">Queries range from simple (selecting all records) to complex (joining multiple tables with conditions, aggregations, and subqueries).</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> SQL Statement</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Command</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Execution</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Result Set</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Query Examples
                    </div>
                    
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-search"></i> Simple Query
                        </div>
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Retrieve all students
            SELECT * FROM STUDENTS;</code></pre>
                        </div>
                        <p style="margin-top: 0.5rem;"><strong>What it does:</strong> Asks database to return ALL columns and ALL rows from STUDENTS table</p>
                    </div>

                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-filter"></i> Query with Condition
                        </div>
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Find students from Boston
            SELECT Name, Email FROM STUDENTS WHERE City = 'Boston';</code></pre>
                        </div>
                        <p style="margin-top: 0.5rem;"><strong>What it does:</strong> Returns only Name and Email of students who live in Boston</p>
                    </div>

                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-chart-line"></i> Aggregate Query
                        </div>
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Count total students
            SELECT COUNT(*) AS TotalStudents FROM STUDENTS;</code></pre>
                        </div>
                        <p style="margin-top: 0.5rem;"><strong>What it does:</strong> Counts and returns the total number of students</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What do you mean by running a query?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>"Running" or "Executing" a query means sending your SQL command to the database for processing.</strong></p>
                                <p><strong>What happens when you run a query:</strong></p>
                                <p><strong>1. Parsing:</strong> Database checks if your SQL syntax is correct</p>
                                <p><strong>2. Optimization:</strong> Database figures out the most efficient way to execute your query</p>
                                <p><strong>3. Execution:</strong> Database actually performs the operation</p>
                                <p><strong>4. Return Results:</strong> Database sends back the results or confirmation</p>
                                <p style="margin-top: 1rem;"><strong>Example in real life:</strong></p>
                                <p>When you search for students in a database interface:</p>
                                <ul>
                                    <li>You write: <code>SELECT * FROM STUDENTS WHERE Age > 20;</code></li>
                                    <li>You click "Execute" or "Run" button (or press F5)</li>
                                    <li>Database processes it in milliseconds</li>
                                    <li>You see results displayed - list of students over 20</li>
                                </ul>
                                <p style="margin-top: 1rem;">In applications, queries run automatically when users interact with the UI - like clicking "Search" or loading a page!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can a query be used to delete data?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Absolutely yes! DELETE is a type of query.</strong></p>
                                <p>Queries aren't just for retrieving data - they can modify or delete data too!</p>
                                <p style="margin-top: 1rem;"><strong>DELETE Query Examples:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Delete a specific student
            DELETE FROM STUDENTS WHERE StudentID = 1001;

            -- Delete all students from Boston
            DELETE FROM STUDENTS WHERE City = 'Boston';

            -- Delete all inactive users
            DELETE FROM USERS WHERE Status = 'Inactive';</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>‚ö†Ô∏è Warning - Be careful with DELETE!</strong></p>
                                <p>If you forget the WHERE clause, ALL records will be deleted:</p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>DELETE FROM STUDENTS;  -- Deletes EVERYTHING!</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Always test your WHERE clause with SELECT first:</p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- First, check what you're about to delete
            SELECT * FROM STUDENTS WHERE City = 'Boston';

            -- If results look correct, then delete
            DELETE FROM STUDENTS WHERE City = 'Boston';</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the output of a SELECT query?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The output of a SELECT query is called a Result Set or Result Table.</strong></p>
                                <p>It's a temporary table containing all the rows and columns that match your query criteria.</p>
                                <p style="margin-top: 1rem;"><strong>Example Query:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>SELECT Name, Age, City FROM STUDENTS WHERE Age > 20;</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Result Set (Output):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>Name          | Age | City
            --------------|-----|----------
            John Smith    | 22  | Boston
            Sarah Johnson | 21  | New York
            Mike Chen     | 23  | Boston

            (3 rows returned)</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Key Points about Result Sets:</strong></p>
                                <ul>
                                    <li><strong>Temporary:</strong> Exists only during query execution, not stored permanently</li>
                                    <li><strong>Virtual:</strong> It's a view of data, not a copy</li>
                                    <li><strong>Can be empty:</strong> If no matches found, returns 0 rows</li>
                                    <li><strong>Ordered:</strong> If you use ORDER BY, otherwise order is unpredictable</li>
                                </ul>
                                <p style="margin-top: 1rem;">In applications, this result set is what gets displayed to users or processed by code!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can we write multiple queries together?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! You can write multiple queries in sequence, separated by semicolons.</strong></p>
                                <p><strong>Example - Multiple Queries:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Query 1: Get all students
            SELECT * FROM STUDENTS;

            -- Query 2: Count total students
            SELECT COUNT(*) FROM STUDENTS;

            -- Query 3: Get students from Boston
            SELECT * FROM STUDENTS WHERE City = 'Boston';</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>Each query:</strong></p>
                                <ul>
                                    <li>Executes independently</li>
                                    <li>Produces its own result set</li>
                                    <li>Can fail without affecting others</li>
                                </ul>
                                <p style="margin-top: 1rem;"><strong>You can also combine queries using UNION:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Combine results from two queries
            SELECT Name FROM STUDENTS WHERE City = 'Boston'
            UNION
            SELECT Name FROM STUDENTS WHERE City = 'New York';</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>And use subqueries (query inside query):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Students older than average age
            SELECT Name, Age FROM STUDENTS
            WHERE Age > (SELECT AVG(Age) FROM STUDENTS);</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if your query is incorrect?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The database will return an error message and won't execute the query.</strong></p>
                                <p><strong>Common Types of Errors:</strong></p>
                                <p><strong>1. Syntax Errors (Grammatical mistakes):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Wrong: Missing FROM
            SELECT Name WHERE Age > 20;
            -- Error: "You have an error in your SQL syntax"

            -- Correct:
            SELECT Name FROM STUDENTS WHERE Age > 20;</code></pre>
                                </div>
                                <p><strong>2. Table/Column Doesn't Exist:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>SELECT * FROM STUDENT;  -- Typo! Should be STUDENTS
            -- Error: "Table 'STUDENT' doesn't exist"</code></pre>
                                </div>
                                <p><strong>3. Data Type Mismatch:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>SELECT * FROM STUDENTS WHERE Age = 'twenty';
            -- Error: Cannot compare INT with VARCHAR</code></pre>
                                </div>
                                <p><strong>4. Permission Denied:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>DELETE FROM STUDENTS;
            -- Error: "Access denied - You don't have DELETE permission"</code></pre>
                                </div>
                                <p style="margin-top: 1rem;"><strong>What to do when you get errors:</strong></p>
                                <ul>
                                    <li>Read the error message carefully - it usually tells you what's wrong</li>
                                    <li>Check for typos in table/column names</li>
                                    <li>Verify your SQL syntax</li>
                                    <li>Make sure you have necessary permissions</li>
                                    <li>Test queries on small datasets first</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <!--  Question 10 -->
            <div class="question-content" id="q10">
                <div class="question-header">
                    <h1 class="question-title">What is meant by "Relational" in RDBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 7 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                    <div class="content-card">
                        <div class="section-title">
                            <i class="fas fa-book"></i>
                            Definition
                        </div>
                        <div class="definition-box">
                            <p>The term <strong>"Relational"</strong> in RDBMS refers to two key concepts:</p>
                            <p style="margin-top: 1rem;"><strong>1. Mathematical Relations:</strong> Data is organized in tables (called relations in mathematical terms), where each table represents a relation - a set of related data items.</p>
                            <p><strong>2. Relationships Between Tables:</strong> More importantly, it means that tables can be connected or "related" to each other through common columns. This allows you to link data across multiple tables, avoiding duplication and maintaining data integrity.</p>
                            <p style="margin-top: 1rem;">For example, instead of storing customer information in every order, you store customers once in a CUSTOMERS table and orders in an ORDERS table, then create a <strong>relationship</strong> between them using keys. This is what makes relational databases so powerful and efficient!</p>
                        </div>

                        <div class="keyword-tags">
                            <span class="keyword-tag"><i class="fas fa-tag"></i> Primary Key</span>
                            <span class="keyword-tag"><i class="fas fa-tag"></i> Foreign Key</span>
                            <span class="keyword-tag"><i class="fas fa-tag"></i> Referential Integrity</span>
                            <span class="keyword-tag"><i class="fas fa-tag"></i> Relationships</span>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="section-title">
                            <i class="fas fa-lightbulb"></i>
                            Types of Relationships
                        </div>
                        <div class="comparison-grid">
                            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border-left: 4px solid var(--success-color);">
                                <h4 style="color: var(--success-color);"><i class="fas fa-arrow-right"></i> One-to-One (1:1)</h4>
                                <p>One record in Table A relates to one record in Table B</p>
                                <p style="margin-top: 0.5rem;"><strong>Example:</strong></p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">One Person ‚Üí One Passport</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">One Employee ‚Üí One Desk</p>
                            </div>

                            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(14, 165, 233, 0.05) 0%, rgba(6, 182, 212, 0.05) 100%); border-left: 4px solid var(--primary-color);">
                                <h4 style="color: var(--primary-color);"><i class="fas fa-arrows-alt-h"></i> One-to-Many (1:N)</h4>
                                <p>One record in Table A relates to multiple records in Table B</p>
                                <p style="margin-top: 0.5rem;"><strong>Example:</strong></p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">One Customer ‚Üí Many Orders</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">One Teacher ‚Üí Many Students</p>
                                <p style="margin-top: 0.5rem;"><strong>Most Common!</strong></p>
                            </div>

                            <div class="comparison-card" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(251, 191, 36, 0.05) 100%); border-left: 4px solid var(--warning-color);">
                                <h4 style="color: var(--warning-color);"><i class="fas fa-exchange-alt"></i> Many-to-Many (M:N)</h4>
                                <p>Multiple records in Table A relate to multiple records in Table B</p>
                                <p style="margin-top: 0.5rem;"><strong>Example:</strong></p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Many Students ‚Üí Many Courses</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Many Authors ‚Üí Many Books</p>
                                <p style="margin-top: 0.5rem;"><strong>Requires junction table</strong></p>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="section-title">
                            <i class="fas fa-code"></i>
                            Creating Relationships
                        </div>
                        <div class="example-box">
                            <div class="example-header">
                                <span class="example-title"><i class="fas fa-link"></i> Example: Customer-Orders Relationship</span>
                            </div>
                            <pre><code>-- Parent Table with Primary Key
                CREATE TABLE CUSTOMERS (
                    CustomerID INT PRIMARY KEY,
                    Name VARCHAR(100),
                    Email VARCHAR(100)
                );

                -- Child Table with Foreign Key
                CREATE TABLE ORDERS (
                    OrderID INT PRIMARY KEY,
                    OrderDate DATE,
                    TotalAmount DECIMAL(10,2),
                    CustomerID INT,
                    FOREIGN KEY (CustomerID) REFERENCES CUSTOMERS(CustomerID)
                );

                -- Now ORDERS.CustomerID "relates" to CUSTOMERS.CustomerID
                -- This creates a One-to-Many relationship!</code></pre>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="section-title">
                            <i class="fas fa-question-circle"></i>
                            Cross Questions
                        </div>
                        <div class="cross-questions">
                            <div class="cross-question-item">
                                <div class="cross-question-text">
                                    <i class="fas fa-arrow-right"></i>
                                    <span><strong>What does "relation" mean in database terms?</strong></span>
                                </div>
                                <div class="cross-answer">
                                    <p><strong>In database theory, a "relation" is simply a table!</strong></p>
                                    <p>The term comes from mathematics (set theory and relational algebra). Dr. E.F. Codd used "relation" because he was describing databases in mathematical terms.</p>
                                    <p style="margin-top: 1rem;"><strong>What a relation contains:</strong></p>
                                    <ul>
                                        <li><strong>Tuples:</strong> The rows (records)</li>
                                        <li><strong>Attributes:</strong> The columns (fields)</li>
                                        <li><strong>Domain:</strong> The set of allowed values for each attribute</li>
                                    </ul>
                                    <p style="margin-top: 1rem;"><strong>Example:</strong></p>
                                    <p>When we say "STUDENTS relation," we mean the STUDENTS table.</p>
                                    <p style="margin-top: 1rem;">In practice:</p>
                                    <ul>
                                        <li>Academics say: "relation"</li>
                                        <li>Developers say: "table"</li>
                                        <li>Both mean the exact same thing!</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="cross-question-item">
                                <div class="cross-question-text">
                                    <i class="fas fa-arrow-right"></i>
                                    <span><strong>How are tables related to each other?</strong></span>
                                </div>
                                <div class="cross-answer">
                                    <p><strong>Tables are related through Primary Keys and Foreign Keys!</strong></p>
                                    <p><strong>The Process:</strong></p>
                                    <p><strong>1. Primary Key (Parent Table):</strong> Uniquely identifies each record</p>
                                    <p><strong>2. Foreign Key (Child Table):</strong> References the primary key of parent table</p>
                                    <p style="margin-top: 1rem;"><strong>Real Example:</strong></p>
                                    <div class="example-box" style="margin-top: 0.5rem;">
                                        <pre><code>CUSTOMERS Table (Parent):
                CustomerID (PK) | Name         | Email
                ----------------|--------------|----------------
                C001            | John Smith   | john@email.com
                C002            | Sarah Lee    | sarah@email.com

                ORDERS Table (Child):
                OrderID (PK) | CustomerID (FK) | Amount  | Date
                -------------|-----------------|---------|----------
                O101         | C001            | $100.00 | 2024-11-01
                O102         | C001            | $50.00  | 2024-11-02
                O103         | C002            | $200.00 | 2024-11-03

                -- CustomerID in ORDERS points to CustomerID in CUSTOMERS
                -- This links each order to its customer!</code></pre>
                                    </div>
                                    <p style="margin-top: 1rem;"><strong>Benefits:</strong></p>
                                    <ul>
                                        <li>Customer info stored ONCE, not repeated in every order</li>
                                        <li>Easy to find all orders for a specific customer</li>
                                        <li>If customer email changes, update one place</li>
                                        <li>Database prevents orphaned orders (orders without valid customers)</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="cross-question-item">
                                <div class="cross-question-text">
                                    <i class="fas fa-arrow-right"></i>
                                    <span><strong>Can two tables exist without a relationship?</strong></span>
                                </div>
                                <div class="cross-answer">
                                    <p><strong>Yes, absolutely! Not all tables need to be related.</strong></p>
                                    <p>Tables should only be related if there's a logical connection between the data they store.</p>
                                    <p style="margin-top: 1rem;"><strong>Example - Unrelated Tables:</strong></p>
                                    <ul>
                                        <li><strong>STUDENTS</strong> table (student information)</li>
                                        <li><strong>PRODUCTS</strong> table (e-commerce products)</li>
                                    </ul>
                                    <p style="margin-top: 0.5rem;">These have nothing to do with each other, so no relationship needed!</p>
                                    <p style="margin-top: 1rem;"><strong>When tables SHOULD be related:</strong></p>
                                    <ul>
                                        <li>CUSTOMERS and ORDERS (customers place orders)</li>
                                        <li>STUDENTS and ENROLLMENTS (students enroll in courses)</li>
                                        <li>EMPLOYEES and DEPARTMENTS (employees belong to departments)</li>
                                    </ul>
                                    <p style="margin-top: 1rem;"><strong>When tables DON'T need relationships:</strong></p>
                                    <ul>
                                        <li>USERS and PRODUCTS (in an inventory system)</li>
                                        <li>LOG_ENTRIES and INVOICES (completely separate domains)</li>
                                    </ul>
                                    <p style="margin-top: 1rem;">Design principle: Create relationships only when there's a meaningful connection between entities!</p>
                                </div>
                            </div>

                            <div class="cross-question-item">
                                <div class="cross-question-text">
                                    <i class="fas fa-arrow-right"></i>
                                    <span><strong>Why are relationships important?</strong></span>
                                </div>
                                <div class="cross-answer">
                                    <p><strong>Relationships are the core feature that makes relational databases powerful!</strong></p>
                                    <p><strong>Key Benefits:</strong></p>
                                    <p><strong>1. Eliminates Data Redundancy:</strong></p>
                                    <p>Instead of storing customer name and email in every order, store it once in CUSTOMERS table and reference it.</p>
                                    <p style="margin-top: 1rem;"><strong>2. Maintains Data Integrity:</strong></p>
                                    <p>Can't create an order for a customer that doesn't exist. Database enforces this automatically through foreign key constraints.</p>
                                    <p style="margin-top: 1rem;"><strong>3. Easy Data Updates:</strong></p>
                                    <p>Change customer email in one place, automatically reflects everywhere.</p>
                                    <p style="margin-top: 1rem;"><strong>4. Efficient Storage:</strong></p>
                                    <p>Saves disk space by not duplicating data</p>
                                    <p style="margin-top: 1rem;"><strong>5. Complex Queries Made Simple:</strong></p>
                                    <p>Can easily join tables to get comprehensive information:</p>
                                    <div class="example-box" style="margin-top: 0.5rem;">
                                        <pre><code>-- Get customer name with their order details
                SELECT c.Name, o.OrderDate, o.Amount
                FROM CUSTOMERS c
                JOIN ORDERS o ON c.CustomerID = o.CustomerID;</code></pre>
                                    </div>
                                    <p style="margin-top: 1rem;"><strong>6. Data Consistency:</strong></p>
                                    <p>If a customer is deleted, you can configure what happens to their orders (cascade delete, prevent deletion, etc.)</p>
                                    <p style="margin-top: 1rem;">Without relationships, databases would just be flat files with massive duplication!</p>
                                </div>
                            </div>

                            <div class="cross-question-item">
                                <div class="cross-question-text">
                                    <i class="fas fa-arrow-right"></i>
                                    <span><strong>How are relationships implemented technically?</strong></span>
                                </div>
                                <div class="cross-answer">
                                    <p><strong>Relationships are implemented using Keys and Constraints!</strong></p>
                                    <p><strong>Step-by-Step Implementation:</strong></p>
                                    <p><strong>1. Define Primary Key in Parent Table:</strong></p>
                                    <div class="example-box" style="margin-top: 0.5rem;">
                                        <pre><code>CREATE TABLE DEPARTMENTS (
                    DeptID INT PRIMARY KEY,  ‚Üê Unique identifier
                    DeptName VARCHAR(100)
                );</code></pre>
                                    </div>
                                    <p><strong>2. Define Foreign Key in Child Table:</strong></p>
                                    <div class="example-box" style="margin-top: 0.5rem;">
                                        <pre><code>CREATE TABLE EMPLOYEES (
                    EmployeeID INT PRIMARY KEY,
                    Name VARCHAR(100),
                    DeptID INT,              ‚Üê References parent
                    FOREIGN KEY (DeptID) REFERENCES DEPARTMENTS(DeptID)
                );</code></pre>
                                    </div>
                                    <p style="margin-top: 1rem;"><strong>What This Does:</strong></p>
                                    <ul>
                                        <li>Links EMPLOYEES.DeptID to DEPARTMENTS.DeptID</li>
                                        <li>Ensures every DeptID in EMPLOYEES exists in DEPARTMENTS</li>
                                        <li>Maintains referential integrity automatically</li>
                                    </ul>
                                    <p style="margin-top: 1rem;"><strong>3. Configure Cascade Actions:</strong></p>
                                    <div class="example-box" style="margin-top: 0.5rem;">
                                        <pre><code>FOREIGN KEY (DeptID) REFERENCES DEPARTMENTS(DeptID)
                    ON DELETE CASCADE          -- Delete employees if dept deleted
                    ON UPDATE CASCADE          -- Update employees if dept ID changes</code></pre>
                                    </div>
                                    <p style="margin-top: 1rem;"><strong>Behind the Scenes:</strong></p>
                                    <p>The database creates <strong>indexes</strong> on foreign keys for fast lookups and maintains constraint checking to ensure data validity!</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="navigation-buttons">
                        <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <button class="nav-btn next" onclick="navigateQuestion('next')" disabled>
                            Next <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
            </div>
            
            <!-- Question 11: What is Data Redundancy? -->
            <div class="question-content" id="q11">
                <div class="question-header">
                    <h1 class="question-title">What is Data Redundancy?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 6 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Data Redundancy</strong> means having the same piece of data stored in multiple places unnecessarily. It's like having five copies of the same photo on your phone - wasteful and confusing!</p>
                        <p style="margin-top: 1rem;">In databases, redundancy occurs when the same information is repeated across multiple tables or records. For example, if you store a customer's address in both the Customers table AND in every order they place, that's redundancy. While some redundancy can be intentional for performance reasons, excessive redundancy leads to serious problems like data inconsistency, wasted storage, and maintenance nightmares.</p>
                        <p style="margin-top: 1rem;">The key goal of good database design, especially through <strong>normalization</strong>, is to minimize unnecessary redundancy while maintaining data integrity and performance.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Duplication</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Inconsistency</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Normalization</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Data Integrity</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Storage Waste</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Visual Understanding: Redundancy Problem
                    </div>
                    <div class="image-container">
                        <svg width="800" height="500" viewBox="0 0 800 500">
                            <rect width="800" height="500" fill="#1e293b"/>
                            
                            <text x="400" y="35" font-size="24" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Data Redundancy: Problem vs Solution</text>
                            
                            <!-- Problem Side -->
                            <rect x="50" y="70" width="330" height="360" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="2" rx="12"/>
                            <text x="215" y="100" font-size="16" fill="#ef4444" text-anchor="middle" font-weight="bold">‚ùå WITH REDUNDANCY</text>
                            
                            <!-- Orders Table with Redundant Data -->
                            <rect x="70" y="120" width="290" height="280" fill="#334155" rx="8"/>
                            <text x="215" y="145" font-size="13" fill="#cbd5e1" text-anchor="middle" font-weight="bold">ORDERS TABLE</text>
                            
                            <text x="90" y="170" font-size="10" fill="#94a3b8" text-anchor="start">OrderID | CustomerName | Address | Amount</text>
                            <line x1="70" y1="175" x2="360" y2="175" stroke="#475569" stroke-width="1"/>
                            
                            <text x="90" y="195" font-size="9" fill="#cbd5e1" text-anchor="start">O001 | John Smith | 123 Main St | $100</text>
                            <text x="90" y="215" font-size="9" fill="#cbd5e1" text-anchor="start">O002 | John Smith | 123 Main St | $200</text>
                            <text x="90" y="235" font-size="9" fill="#cbd5e1" text-anchor="start">O003 | John Smith | 123 Main St | $150</text>
                            
                            <text x="215" y="260" font-size="9" fill="#ef4444" text-anchor="middle" font-weight="bold">‚Üë Name & Address repeated 3 times!</text>
                            
                            <!-- Problems -->
                            <rect x="80" y="280" width="270" height="100" fill="rgba(239, 68, 68, 0.1)" rx="6"/>
                            <text x="215" y="300" font-size="11" fill="#ef4444" text-anchor="middle" font-weight="bold">Problems:</text>
                            <text x="90" y="320" font-size="9" fill="#cbd5e1" text-anchor="start">‚Ä¢ Wastes storage space</text>
                            <text x="90" y="335" font-size="9" fill="#cbd5e1" text-anchor="start">‚Ä¢ John moves ‚Üí Update 3 places!</text>
                            <text x="90" y="350" font-size="9" fill="#cbd5e1" text-anchor="start">‚Ä¢ Miss one update ‚Üí Inconsistency</text>
                            <text x="90" y="365" font-size="9" fill="#cbd5e1" text-anchor="start">‚Ä¢ Harder to maintain</text>
                            
                            <!-- Arrow -->
                            <path d="M 390 250 L 400 250" stroke="#10b981" stroke-width="3" marker-end="url(#arrowgreen3)"/>
                            <text x="395" y="240" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">Fix with</text>
                            <text x="395" y="255" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">Normalization</text>
                            
                            <!-- Solution Side -->
                            <rect x="410" y="70" width="340" height="360" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="2" rx="12"/>
                            <text x="580" y="100" font-size="16" fill="#10b981" text-anchor="middle" font-weight="bold">‚úÖ WITHOUT REDUNDANCY</text>
                            
                            <!-- Customers Table -->
                            <rect x="430" y="120" width="300" height="100" fill="#334155" rx="8"/>
                            <text x="580" y="140" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">CUSTOMERS</text>
                            <text x="440" y="160" font-size="9" fill="#94a3b8" text-anchor="start">CustomerID | Name | Address</text>
                            <line x1="430" y1="165" x2="730" y2="165" stroke="#475569" stroke-width="1"/>
                            <text x="440" y="180" font-size="9" fill="#cbd5e1" text-anchor="start">C001 | John Smith | 123 Main St</text>
                            <text x="580" y="205" font-size="8" fill="#10b981" text-anchor="middle" font-style="italic">Stored ONCE!</text>
                            
                            <!-- Orders Table (normalized) -->
                            <rect x="430" y="240" width="300" height="110" fill="#334155" rx="8"/>
                            <text x="580" y="260" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">ORDERS</text>
                            <text x="440" y="280" font-size="9" fill="#94a3b8" text-anchor="start">OrderID | CustomerID | Amount</text>
                            <line x1="430" y1="285" x2="730" y2="285" stroke="#475569" stroke-width="1"/>
                            <text x="440" y="300" font-size="9" fill="#cbd5e1" text-anchor="start">O001 | C001 | $100</text>
                            <text x="440" y="315" font-size="9" fill="#cbd5e1" text-anchor="start">O002 | C001 | $200</text>
                            <text x="440" y="330" font-size="9" fill="#cbd5e1" text-anchor="start">O003 | C001 | $150</text>
                            
                            <!-- Benefits -->
                            <rect x="430" y="360" width="300" height="60" fill="rgba(16, 185, 129, 0.1)" rx="6"/>
                            <text x="580" y="378" font-size="11" fill="#10b981" text-anchor="middle" font-weight="bold">Benefits:</text>
                            <text x="440" y="395" font-size="9" fill="#cbd5e1" text-anchor="start">‚úì No duplication | ‚úì Update once</text>
                            <text x="440" y="410" font-size="9" fill="#cbd5e1" text-anchor="start">‚úì Saves space | ‚úì Always consistent</text>
                            
                            <!-- Bottom note -->
                            <rect x="50" y="450" width="700" height="40" fill="rgba(14, 165, 233, 0.1)" stroke="#0ea5e9" stroke-width="2" rx="8"/>
                            <text x="400" y="475" font-size="12" fill="#cbd5e1" text-anchor="middle">
                                <tspan fill="#ef4444" font-weight="bold">Redundancy</tspan> = Same data repeated unnecessarily | 
                                <tspan fill="#10b981" font-weight="bold">Normalization</tspan> = Process to reduce redundancy
                            </text>
                            
                            <defs>
                                <marker id="arrowgreen3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
                                </marker>
                            </defs>
                        </svg>
                        <p class="image-caption">Normalization eliminates redundancy by storing data once and referencing it</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Example
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-graduation-cap"></i> Student Database - Before & After Normalization
                        </div>
                        <p><strong>BAD DESIGN (With Redundancy):</strong></p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>ENROLLMENTS TABLE:
            StudentID | StudentName | StudentEmail      | CourseName    | Grade
            ----------|-------------|-------------------|---------------|------
            1001      | John Smith  | john@uni.edu      | Databases     | A
            1001      | John Smith  | john@uni.edu      | Web Dev       | B
            1001      | John Smith  | john@uni.edu      | Data Struct   | A-

            Problem: John's name and email repeated 3 times!
            If John changes email ‚Üí Must update 3 rows
            Miss one ‚Üí Database has inconsistent data!</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>GOOD DESIGN (Without Redundancy):</strong></p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>STUDENTS TABLE:
            StudentID | Name       | Email
            ----------|------------|-------------
            1001      | John Smith | john@uni.edu

            ENROLLMENTS TABLE:
            EnrollmentID | StudentID | CourseID | Grade
            -------------|-----------|----------|------
            E001         | 1001      | C101     | A
            E002         | 1001      | C102     | B
            E003         | 1001      | C103     | A-

            Benefit: John's info stored ONCE
            Change email? Update 1 row in STUDENTS
            All enrollments automatically reference updated info!</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why is redundancy a problem?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Redundancy creates multiple serious problems:</strong></p>
                                
                                <p><strong>1. Data Inconsistency (Biggest Problem):</strong></p>
                                <p>When the same data exists in multiple places, updating one location but forgetting others leads to inconsistent information. Which version is correct? Nobody knows!</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: Customer address in 5 places - you update 4, miss 1. Now system has 2 different addresses!</p>
                                
                                <p style="margin-top: 1rem;"><strong>2. Update Anomalies:</strong></p>
                                <p>Must update data in multiple locations. More work, more chance of error</p>
                                
                                <p style="margin-top: 1rem;"><strong>3. Insertion Anomalies:</strong></p>
                                <p>Can't insert certain data without having other data</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: Can't add a new course unless a student enrolls in it</p>
                                
                                <p style="margin-top: 1rem;"><strong>4. Deletion Anomalies:</strong></p>
                                <p>Deleting one record might lose other important information</p>
                                <p style="margin-left: 1rem; color: var(--text-secondary);">Example: Last student drops a course - course info is also lost!</p>
                                
                                <p style="margin-top: 1rem;"><strong>5. Wasted Storage:</strong></p>
                                <p>Storing the same data repeatedly wastes disk space</p>
                                
                                <p style="margin-top: 1rem;"><strong>6. Slower Performance:</strong></p>
                                <p>More data to scan, larger database, slower queries</p>
                                
                                <p style="margin-top: 1rem;"><strong>7. Maintenance Nightmare:</strong></p>
                                <p>Making changes to schema becomes extremely complex</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can redundancy ever be useful?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Sometimes controlled redundancy is intentional for good reasons:</strong></p>
                                
                                <p><strong>1. Performance Optimization:</strong></p>
                                <p>Storing frequently accessed data redundantly to avoid expensive joins</p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Instead of joining 3 tables for every query
            -- Store commonly accessed data together
            ORDERS table includes CustomerName
            (even though name exists in CUSTOMERS table)
            -- Faster reads, but must maintain consistency!</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>2. Data Warehousing:</strong></p>
                                <p>Analytical databases intentionally denormalize for faster reporting</p>
                                
                                <p style="margin-top: 1rem;"><strong>3. Caching:</strong></p>
                                <p>Temporary redundant storage for quick access</p>
                                
                                <p style="margin-top: 1rem;"><strong>4. Backup & Recovery:</strong></p>
                                <p>Obviously, backups are intentional redundancy!</p>
                                
                                <p style="margin-top: 1rem;"><strong>5. Distributed Systems:</strong></p>
                                <p>Replicating data across multiple servers for availability</p>
                                
                                <p style="margin-top: 1rem;"><strong>Key Point:</strong> These are <em>controlled, intentional</em> cases where benefits outweigh costs. But uncontrolled, accidental redundancy? Always bad!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does normalization help reduce redundancy?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Normalization is a systematic process to eliminate redundancy by organizing data into separate, related tables.</strong></p>
                                
                                <p><strong>The Process:</strong></p>
                                
                                <p><strong>1. Identify Repeating Data:</strong></p>
                                <p>Find what information is being duplicated</p>
                                
                                <p><strong>2. Create Separate Tables:</strong></p>
                                <p>Move repeating data to its own table</p>
                                
                                <p><strong>3. Establish Relationships:</strong></p>
                                <p>Connect tables using Primary and Foreign Keys</p>
                                
                                <p style="margin-top: 1rem;"><strong>Example - Normalizing Student Enrollments:</strong></p>
                                
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>BEFORE (Redundant):
            StudentID | Name  | Email        | Course   | Instructor
            ----------|-------|--------------|----------|------------
            1001      | John  | john@edu.com | Database | Dr. Smith
            1001      | John  | john@edu.com | Web Dev  | Dr. Smith
            1002      | Sarah | sara@edu.com | Database | Dr. Smith

            AFTER (Normalized - 3 tables):

            STUDENTS:
            StudentID | Name  | Email
            ----------|-------|-------------
            1001      | John  | john@edu.com
            1002      | Sarah | sara@edu.com

            COURSES:
            CourseID | CourseName | Instructor
            ---------|------------|------------
            C101     | Database   | Dr. Smith
            C102     | Web Dev    | Dr. Smith

            ENROLLMENTS:
            EnrollmentID | StudentID | CourseID
            -------------|-----------|----------
            E001         | 1001      | C101
            E002         | 1001      | C102
            E003         | 1002      | C101</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Result:</strong> Each piece of information stored exactly once!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Give an example of redundancy in a student database.</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Here's a classic example of redundancy in a student database:</strong></p>
                                
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>STUDENT_COURSES TABLE (with redundancy):

            StudentID | Name       | Email          | Phone      | Major  | CourseName  | Credits
            ----------|------------|----------------|------------|--------|-------------|--------
            1001      | John Smith | john@uni.edu   | 555-0123   | CS     | Databases   | 4
            1001      | John Smith | john@uni.edu   | 555-0123   | CS     | Web Dev     | 3
            1001      | John Smith | john@uni.edu   | 555-0123   | CS     | Algorithms  | 4
            1002      | Sarah Lee  | sarah@uni.edu  | 555-0456   | Math   | Calculus    | 4
            1002      | Sarah Lee  | sarah@uni.edu  | 555-0456   | Math   | Statistics  | 3</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Problems with this design:</strong></p>
                                <ul>
                                    <li><strong>John's information repeated 3 times</strong> (Name, Email, Phone, Major)</li>
                                    <li><strong>Sarah's information repeated 2 times</strong></li>
                                    <li>If John changes his phone number: Must update 3 rows</li>
                                    <li>If you update 2 rows but miss 1: Inconsistent data!</li>
                                    <li>If John switches major: Update 3 places</li>
                                    <li>Wasted storage: Same data stored multiple times</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Better Design (Normalized):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>STUDENTS TABLE:
            StudentID | Name       | Email          | Phone      | Major
            ----------|------------|----------------|------------|------
            1001      | John Smith | john@uni.edu   | 555-0123   | CS
            1002      | Sarah Lee  | sarah@uni.edu  | 555-0456   | Math

            COURSES TABLE:
            CourseID | CourseName  | Credits
            ---------|-------------|--------
            C101     | Databases   | 4
            C102     | Web Dev     | 3
            C103     | Algorithms  | 4
            C104     | Calculus    | 4
            C105     | Statistics  | 3

            ENROLLMENTS TABLE:
            StudentID | CourseID
            ----------|----------
            1001      | C101
            1001      | C102
            1001      | C103
            1002      | C104
            1002      | C105

            Now: Student info stored ONCE, Course info stored ONCE
            Change John's phone? Update 1 row. Perfect!</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if redundant data becomes inconsistent?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>When redundant data becomes inconsistent, you get data integrity nightmares!</strong></p>
                                
                                <p><strong>Real-World Scenario:</strong></p>
                                <p>Imagine an e-commerce database storing customer addresses redundantly:</p>
                                
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>ORDER #1: Customer John Smith, Address: 123 Oak St, Boston
            ORDER #2: Customer John Smith, Address: 456 Elm St, New York
            ORDER #3: Customer John Smith, Address: 123 Oak St, Boston

            Which address is current? Nobody knows!</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Consequences:</strong></p>
                                
                                <p><strong>1. Business Problems:</strong></p>
                                <ul>
                                    <li>Ship product to wrong address</li>
                                    <li>Send invoice to old address</li>
                                    <li>Contact wrong phone number</li>
                                    <li>Lost sales, angry customers!</li>
                                </ul>
                                
                                <p><strong>2. Trust Issues:</strong></p>
                                <ul>
                                    <li>Which version is correct?</li>
                                    <li>Can't trust any data</li>
                                    <li>Reports become meaningless</li>
                                    <li>Decision-making becomes impossible</li>
                                </ul>
                                
                                <p><strong>3. Technical Problems:</strong></p>
                                <ul>
                                    <li>Data quality degrades over time</li>
                                    <li>Expensive data cleaning required</li>
                                    <li>Applications behave unpredictably</li>
                                    <li>Debugging becomes nightmare</li>
                                </ul>
                                
                                <p><strong>4. Legal/Compliance Issues:</strong></p>
                                <ul>
                                    <li>Incorrect billing</li>
                                    <li>Privacy violations (sending to wrong person)</li>
                                    <li>Audit failures</li>
                                    <li>Regulatory penalties</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Solution:</strong> Eliminate redundancy through proper normalization. Store each fact exactly once, establish clear relationships. One source of truth!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <!-- Question 12: What is Data Integrity? -->
            <div class="question-content" id="q12">
                <div class="question-header">
                    <h1 class="question-title">What is Data Integrity?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Foundation</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 7 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Data Integrity</strong> refers to the accuracy, consistency, and reliability of data throughout its entire lifecycle. It means the data in your database is correct, valid, and remains trustworthy over time. Think of it as ensuring your data is "clean" and "honest."</p>
                        <p style="margin-top: 1rem;">Data integrity ensures that the information stored in the database is:</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem; color: var(--text-secondary);">
                            <li><strong>Accurate:</strong> Data represents what it's supposed to represent</li>
                            <li><strong>Consistent:</strong> Same data looks the same everywhere</li>
                            <li><strong>Valid:</strong> Data follows defined rules and constraints</li>
                            <li><strong>Complete:</strong> All required information is present</li>
                        </ul>
                        <p style="margin-top: 1rem;">Maintaining data integrity is crucial because decisions, reports, and business operations depend on this data. Bad data leads to bad decisions! Databases enforce integrity through <strong>constraints, validation rules, and relationships</strong>.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Accuracy</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Consistency</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Validation</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Referential Integrity</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Constraints</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Types of Data Integrity
                    </div>
                    <div class="comparison-grid">
                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border-left: 4px solid var(--success-color);">
                            <h4 style="color: var(--success-color);"><i class="fas fa-database"></i> Entity Integrity</h4>
                            <p>Each row in a table must be uniquely identifiable and have a valid primary key</p>
                            <p style="margin-top: 0.5rem;"><strong>Rule:</strong> Primary Key cannot be NULL</p>
                            <p style="margin-top: 0.5rem;"><strong>Example:</strong></p>
                            <p style="margin-left: 1rem; color: var(--text-secondary);">Every student MUST have a unique StudentID</p>
                        </div>

                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(14, 165, 233, 0.05) 0%, rgba(6, 182, 212, 0.05) 100%); border-left: 4px solid var(--primary-color);">
                            <h4 style="color: var(--primary-color);"><i class="fas fa-link"></i> Referential Integrity</h4>
                            <p>Foreign key values must reference valid primary key values in parent table</p>
                            <p style="margin-top: 0.5rem;"><strong>Rule:</strong> Can't have orphaned records</p>
                            <p style="margin-top: 0.5rem;"><strong>Example:</strong></p>
                            <p style="margin-left: 1rem; color: var(--text-secondary);">Can't create an order for a customer that doesn't exist</p>
                        </div>

                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.05) 0%, rgba(147, 51, 234, 0.05) 100%); border-left: 4px solid var(--purple-color);">
                            <h4 style="color: var(--purple-color);"><i class="fas fa-columns"></i> Domain Integrity</h4>
                            <p>Values in a column must belong to a defined set or range</p>
                            <p style="margin-top: 0.5rem;"><strong>Rule:</strong> Data type and constraints</p>
                            <p style="margin-top: 0.5rem;"><strong>Example:</strong></p>
                            <p style="margin-left: 1rem; color: var(--text-secondary);">Age must be a positive integer between 0-150</p>
                        </div>

                        <div class="comparison-card" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(251, 191, 36, 0.05) 100%); border-left: 4px solid var(--warning-color);">
                            <h4 style="color: var(--warning-color);"><i class="fas fa-user-check"></i> User-Defined Integrity</h4>
                            <p>Custom business rules specific to your application</p>
                            <p style="margin-top: 0.5rem;"><strong>Rule:</strong> Business logic constraints</p>
                            <p style="margin-top: 0.5rem;"><strong>Example:</strong></p>
                            <p style="margin-left: 1rem; color: var(--text-secondary);">Employee's hire date must be before promotion date</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        Enforcing Data Integrity with Constraints
                    </div>
                    <div class="example-box">
                        <div class="example-header">
                            <span class="example-title"><i class="fas fa-code"></i> SQL Constraints Examples</span>
                        </div>
                        <pre><code>CREATE TABLE STUDENTS (
                -- Entity Integrity: Primary Key
                StudentID INT PRIMARY KEY,
                
                -- Domain Integrity: NOT NULL
                Name VARCHAR(100) NOT NULL,
                
                -- Domain Integrity: CHECK constraint
                Age INT CHECK (Age >= 18 AND Age <= 100),
                
                -- Domain Integrity: UNIQUE
                Email VARCHAR(100) UNIQUE,
                
                -- Domain Integrity: DEFAULT value
                EnrollmentDate DATE DEFAULT CURRENT_DATE,
                
                -- Domain Integrity: Data type enforcement
                GPA DECIMAL(3, 2) CHECK (GPA >= 0.0 AND GPA <= 4.0)
            );

            CREATE TABLE ENROLLMENTS (
                EnrollmentID INT PRIMARY KEY,
                StudentID INT NOT NULL,
                CourseID INT NOT NULL,
                
                -- Referential Integrity: Foreign Keys
                FOREIGN KEY (StudentID) REFERENCES STUDENTS(StudentID)
                    ON DELETE CASCADE
                    ON UPDATE CASCADE,
                
                FOREIGN KEY (CourseID) REFERENCES COURSES(CourseID)
                    ON DELETE RESTRICT
                    ON UPDATE CASCADE,
                
                -- User-Defined Integrity: Business rule
                Grade CHAR(2) CHECK (Grade IN ('A', 'B', 'C', 'D', 'F')),
                
                -- Composite constraint
                UNIQUE(StudentID, CourseID)  -- Student can enroll in course only once
            );</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Example
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-hospital"></i> Hospital Patient Management System
                        </div>
                        <p><strong>Scenario:</strong> Hospital must maintain perfect data integrity for patient safety</p>
                        
                        <p style="margin-top: 1rem;"><strong>Entity Integrity:</strong></p>
                        <p style="margin-left: 1rem;">Every patient has unique PatientID - no duplicates, no NULLs</p>
                        
                        <p style="margin-top: 1rem;"><strong>Referential Integrity:</strong></p>
                        <p style="margin-left: 1rem;">Prescription must reference valid PatientID and valid DoctorID. Can't prescribe medicine to non-existent patient!</p>
                        
                        <p style="margin-top: 1rem;"><strong>Domain Integrity:</strong></p>
                        <ul>
                            <li>Blood Pressure: Must be in format "120/80", positive numbers</li>
                            <li>Blood Type: Must be one of: A+, A-, B+, B-, AB+, AB-, O+, O-</li>
                            <li>Age: Must be 0-150</li>
                            <li>Appointment Date: Cannot be in the past</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>User-Defined Integrity:</strong></p>
                        <ul>
                            <li>Patient discharge date must be after admission date</li>
                            <li>Child under 16 must have guardian contact info</li>
                            <li>Prescription dosage must match doctor's authorization level</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why It Matters:</strong> Wrong blood type in database = patient dies. Data integrity is literally life or death in healthcare!</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How can you maintain data integrity?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Data integrity is maintained through multiple layers of protection:</strong></p>
                                
                                <p><strong>1. Database Constraints (Primary Method):</strong></p>
                                <ul>
                                    <li><strong>PRIMARY KEY:</strong> Ensures uniqueness, no duplicates</li>
                                    <li><strong>FOREIGN KEY:</strong> Maintains referential integrity</li>
                                    <li><strong>UNIQUE:</strong> No duplicate values in column</li>
                                    <li><strong>NOT NULL:</strong> Must provide a value</li>
                                    <li><strong>CHECK:</strong> Custom validation rules</li>
                                    <li><strong>DEFAULT:</strong> Automatic values</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>2. Data Types:</strong></p>
                                <p>Choose appropriate types - INT for numbers, DATE for dates. Database won't allow wrong type.</p>
                                
                                <p style="margin-top: 1rem;"><strong>3. Transactions (ACID Properties):</strong></p>
                                <ul>
                                    <li><strong>Atomicity:</strong> All or nothing</li>
                                    <li><strong>Consistency:</strong> Data moves from valid state to valid state</li>
                                    <li><strong>Isolation:</strong> Concurrent transactions don't interfere</li>
                                    <li><strong>Durability:</strong> Committed data persists</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>4. Application-Level Validation:</strong></p>
                                <p>Validate data BEFORE sending to database - JavaScript form validation, backend checks</p>
                                
                                <p style="margin-top: 1rem;"><strong>5. Stored Procedures & Triggers:</strong></p>
                                <p>Automatic validation and business rule enforcement</p>
                                
                                <p style="margin-top: 1rem;"><strong>6. Access Control:</strong></p>
                                <p>Limit who can modify data - principle of least privilege</p>
                                
                                <p style="margin-top: 1rem;"><strong>7. Regular Audits:</strong></p>
                                <p>Periodically check data quality, find and fix issues</p>
                                
                                <p style="margin-top: 1rem;"><strong>8. Backup & Recovery:</strong></p>
                                <p>Protect against data corruption, hardware failure</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What causes integrity loss?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Data integrity can be compromised by many factors:</strong></p>
                                
                                <p><strong>1. Human Errors:</strong></p>
                                <ul>
                                    <li>Typos during data entry</li>
                                    <li>Accidental deletion or modification</li>
                                    <li>Copy-paste errors</li>
                                    <li>Misunderstanding data requirements</li>
                                </ul>
                                
                                <p><strong>2. Application Bugs:</strong></p>
                                <ul>
                                    <li>Poorly written code that bypasses validation</li>
                                    <li>SQL injection vulnerabilities</li>
                                    <li>Logic errors in update/delete operations</li>
                                    <li>Race conditions in concurrent access</li>
                                </ul>
                                
                                <p><strong>3. System Failures:</strong></p>
                                <ul>
                                    <li>Hardware crash during write operation</li>
                                    <li>Power failure mid-transaction</li>
                                    <li>Disk corruption</li>
                                    <li>Network interruption during data transfer</li>
                                </ul>
                                
                                <p><strong>4. Malicious Attacks:</strong></p>
                                <ul>
                                    <li>SQL injection attacks</li>
                                    <li>Unauthorized access</li>
                                    <li>Data tampering</li>
                                    <li>Ransomware encryption</li>
                                </ul>
                                
                                <p><strong>5. Poor Database Design:</strong></p>
                                <ul>
                                    <li>No constraints defined</li>
                                    <li>Excessive data redundancy</li>
                                    <li>Lack of referential integrity</li>
                                    <li>Wrong data types</li>
                                </ul>
                                
                                <p><strong>6. Data Migration Issues:</strong></p>
                                <ul>
                                    <li>Importing bad data from external sources</li>
                                    <li>Format conversion errors</li>
                                    <li>Incomplete data transfer</li>
                                </ul>
                                
                                <p><strong>7. Integration Problems:</strong></p>
                                <ul>
                                    <li>Multiple systems modifying same data</li>
                                    <li>Sync failures between systems</li>
                                    <li>API errors</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Is data integrity related to security?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Data integrity and security are closely related but different concepts:</strong></p>
                                
                                <p><strong>How They're Related:</strong></p>
                                
                                <p><strong>1. Both Protect Data:</strong></p>
                                <ul>
                                    <li><strong>Security:</strong> Protects from unauthorized access (confidentiality)</li>
                                    <li><strong>Integrity:</strong> Protects from unauthorized/accidental modification (accuracy)</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>2. Security Enables Integrity:</strong></p>
                                <p>Good security prevents malicious data corruption</p>
                                <ul>
                                    <li>Access controls prevent unauthorized changes</li>
                                    <li>Authentication ensures only valid users modify data</li>
                                    <li>Encryption protects data in transit from tampering</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>3. CIA Triad Includes Both:</strong></p>
                                <ul>
                                    <li><strong>Confidentiality:</strong> Security concern</li>
                                    <li><strong>Integrity:</strong> Both security AND data quality concern</li>
                                    <li><strong>Availability:</strong> Security concern</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Key Differences:</strong></p>
                                
                                <p><strong>Data Security:</strong></p>
                                <ul>
                                    <li>WHO can access data</li>
                                    <li>Preventing unauthorized access</li>
                                    <li>Encryption, authentication, authorization</li>
                                </ul>
                                
                                <p><strong>Data Integrity:</strong></p>
                                <ul>
                                    <li>Is data CORRECT and VALID</li>
                                    <li>Preventing invalid/inconsistent data</li>
                                    <li>Constraints, validation, transactions</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Example:</strong></p>
                                <p>You might have perfect security (no one can hack in), but poor integrity (data full of errors). Or vice versa - perfect data accuracy but no security (anyone can access it)!</p>
                                
                                <p style="margin-top: 1rem;"><strong>Bottom Line:</strong> You need BOTH for a robust database system!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is referential integrity?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Referential Integrity is a database rule that maintains consistency between related tables using Foreign Keys.</strong></p>
                                
                                <p><strong>The Rule:</strong> A foreign key value must either be NULL or match a valid primary key value in the referenced table.</p>
                                
                                <p style="margin-top: 1rem;"><strong>What It Prevents:</strong></p>
                                <ul>
                                    <li><strong>Orphaned Records:</strong> Child records without valid parent</li>
                                    <li><strong>Invalid References:</strong> Pointing to non-existent data</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Example:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>CUSTOMERS Table:
            CustomerID | Name
            -----------|------------
            C001       | John Smith
            C002       | Sarah Lee

            ORDERS Table:
            OrderID | CustomerID | Amount
            --------|------------|-------
            O001    | C001       | $100   ‚úì Valid (C001 exists)
            O002    | C999       | $200   ‚úó REJECTED! C999 doesn't exist

            -- Database enforces referential integrity
            -- Won't allow O002 to be inserted</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Cascade Actions:</strong></p>
                                
                                <p><strong>ON DELETE CASCADE:</strong></p>
                                <p style="margin-left: 1rem;">Delete customer ‚Üí Automatically delete all their orders</p>
                                
                                <p><strong>ON DELETE RESTRICT:</strong></p>
                                <p style="margin-left: 1rem;">Can't delete customer if they have orders</p>
                                
                                <p><strong>ON DELETE SET NULL:</strong></p>
                                <p style="margin-left: 1rem;">Delete customer ‚Üí Set CustomerID to NULL in orders</p>
                                
                                <p><strong>ON UPDATE CASCADE:</strong></p>
                                <p style="margin-left: 1rem;">Change CustomerID ‚Üí Automatically update in all orders</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you enforce integrity using SQL?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Absolutely! SQL provides powerful mechanisms to enforce all types of integrity:</strong></p>
                                
                                <p><strong>1. Using Constraints at Table Creation:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>CREATE TABLE EMPLOYEES (
                -- Primary Key (Entity Integrity)
                EmployeeID INT PRIMARY KEY,
                
                -- NOT NULL (Domain Integrity)
                FirstName VARCHAR(50) NOT NULL,
                LastName VARCHAR(50) NOT NULL,
                
                -- UNIQUE (Domain Integrity)
                Email VARCHAR(100) UNIQUE,
                SSN CHAR(11) UNIQUE,
                
                -- CHECK constraint (Domain Integrity)
                Age INT CHECK (Age >= 18 AND Age <= 70),
                Salary DECIMAL(10,2) CHECK (Salary > 0),
                
                -- DEFAULT value
                HireDate DATE DEFAULT CURRENT_DATE,
                Status VARCHAR(20) DEFAULT 'Active' 
                    CHECK (Status IN ('Active', 'Inactive', 'Terminated')),
                
                -- Foreign Key (Referential Integrity)
                DepartmentID INT,
                FOREIGN KEY (DepartmentID) 
                    REFERENCES DEPARTMENTS(DeptID)
                    ON DELETE SET NULL
                    ON UPDATE CASCADE
            );</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>2. Adding Constraints Later:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Add CHECK constraint
            ALTER TABLE EMPLOYEES
            ADD CONSTRAINT chk_email_format 
            CHECK (Email LIKE '%@%.%');

            -- Add UNIQUE constraint
            ALTER TABLE EMPLOYEES
            ADD CONSTRAINT uq_phone UNIQUE (Phone);

            -- Add FOREIGN KEY
            ALTER TABLE ORDERS
            ADD CONSTRAINT fk_customer
            FOREIGN KEY (CustomerID) REFERENCES CUSTOMERS(CustomerID);</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>3. Using Triggers (Complex Rules):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Ensure hire date before promotion date
            CREATE TRIGGER check_promotion_date
            BEFORE INSERT ON PROMOTIONS
            FOR EACH ROW
            BEGIN
                IF NEW.PromotionDate < (
                    SELECT HireDate FROM EMPLOYEES 
                    WHERE EmployeeID = NEW.EmployeeID
                ) THEN
                    SIGNAL SQLSTATE '45000'
                    SET MESSAGE_TEXT = 'Promotion date cannot be before hire date';
                END IF;
            END;</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Benefits:</strong></p>
                                <ul>
                                    <li>Database automatically enforces rules</li>
                                    <li>Can't bypass constraints (even with buggy code)</li>
                                    <li>Centralized data validation</li>
                                    <li>Better performance than app-level validation</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 13: What is Referential Integrity? -->
            <div class="question-content" id="q13">
                <div class="question-header">
                    <h1 class="question-title">What is Referential Integrity?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Basic</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Referential Integrity</strong> is a database constraint that ensures relationships between tables remain consistent. It guarantees that a foreign key value always refers to an existing primary key value in the referenced table.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Concepts:</strong></p>
                        <ul>
                            <li><strong>Foreign Key:</strong> A column that references a primary key in another table</li>
                            <li><strong>Parent Table:</strong> The table containing the primary key (referenced table)</li>
                            <li><strong>Child Table:</strong> The table containing the foreign key (referencing table)</li>
                            <li><strong>Referential Integrity Rules:</strong> Prevent orphaned records</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>The Rule:</strong></p>
                        <div class="definition-box" style="margin-top: 0.5rem; background: #fef3c7; border-color: #f59e0b;">
                            <p style="font-weight: bold; color: #92400e;">A foreign key value MUST either:</p>
                            <ul style="color: #92400e;">
                                <li>Match an existing primary key value in the parent table, OR</li>
                                <li>Be NULL (if allowed)</li>
                            </ul>
                            <p style="margin-top: 0.5rem; font-weight: bold; color: #92400e;">You CANNOT have a foreign key value that doesn't exist in the parent table!</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Detailed Explanation
                    </div>
                    <div class="explanation-text">
                        <p>Imagine a library system with <strong>Books</strong> and <strong>Authors</strong> tables. Every book must have a valid author. Referential integrity ensures you can't:</p>
                        <ul>
                            <li>Add a book with an author that doesn't exist</li>
                            <li>Delete an author who has books (without handling the books first)</li>
                            <li>Change an author's ID without updating all their books</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Without Referential Integrity:</strong> You could have "orphaned records" - books pointing to non-existent authors!</p>
                        <p style="margin-top: 0.5rem;"><strong>With Referential Integrity:</strong> Database prevents these inconsistencies automatically.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Implementing Referential Integrity
                    </div>
                    <div class="example-box">
                        <pre><code>-- Example: Parent-Child Relationship
            -- Parent Table: Departments
            CREATE TABLE Departments (
                DepartmentID INT PRIMARY KEY,
                DepartmentName VARCHAR(100),
                Location VARCHAR(100)
            );

            -- Child Table: Employees (with Foreign Key)
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                EmployeeName VARCHAR(100),
                Salary DECIMAL(10,2),
                DepartmentID INT,
                
                -- Define Foreign Key Constraint
                FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID)
            );

            -- Insert sample data
            INSERT INTO Departments VALUES
            (1, 'IT', 'Building A'),
            (2, 'HR', 'Building B'),
            (3, 'Finance', 'Building C');

            -- Valid INSERT (DepartmentID exists)
            INSERT INTO Employees VALUES (1, 'John Smith', 75000, 1);  -- ‚úì Success

            -- Invalid INSERT (DepartmentID doesn't exist)
            INSERT INTO Employees VALUES (2, 'Jane Doe', 80000, 99);  
            -- ‚ùå ERROR: Cannot add or update a child row: 
            -- a foreign key constraint fails
            -- Referential integrity violation!

            -- NULL is allowed (if not specified as NOT NULL)
            INSERT INTO Employees VALUES (3, 'Bob Wilson', 70000, NULL);  -- ‚úì Success</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        Referential Actions (ON DELETE, ON UPDATE)
                    </div>
                    <div class="explanation-text">
                        <p>You can specify what happens when a referenced row is deleted or updated:</p>
                    </div>
                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- 1. CASCADE - Automatically propagate changes
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                EmployeeName VARCHAR(100),
                DepartmentID INT,
                FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID)
                    ON DELETE CASCADE      -- Delete employees when department is deleted
                    ON UPDATE CASCADE      -- Update employees when department ID changes
            );

            -- Test CASCADE
            DELETE FROM Departments WHERE DepartmentID = 1;
            -- ‚úì Department deleted
            -- ‚úì All employees in that department automatically deleted!

            -- -----------------------------------------------------------
            -- 2. SET NULL - Set foreign key to NULL
            -- -----------------------------------------------------------
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                EmployeeName VARCHAR(100),
                DepartmentID INT,
                FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID)
                    ON DELETE SET NULL     -- Set DepartmentID to NULL when department deleted
                    ON UPDATE SET NULL
            );

            -- Test SET NULL
            DELETE FROM Departments WHERE DepartmentID = 1;
            -- ‚úì Department deleted
            -- ‚úì Employees' DepartmentID set to NULL (they become "unassigned")

            -- -----------------------------------------------------------
            -- 3. SET DEFAULT - Set foreign key to default value
            -- -----------------------------------------------------------
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                EmployeeName VARCHAR(100),
                DepartmentID INT DEFAULT 1,  -- Default department
                FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID)
                    ON DELETE SET DEFAULT
                    ON UPDATE SET DEFAULT
            );

            -- Test SET DEFAULT
            DELETE FROM Departments WHERE DepartmentID = 3;
            -- ‚úì Department deleted
            -- ‚úì Employees moved to default department (ID = 1)

            -- -----------------------------------------------------------
            -- 4. RESTRICT (or NO ACTION) - Prevent deletion/update (Default)
            -- -----------------------------------------------------------
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                EmployeeName VARCHAR(100),
                DepartmentID INT,
                FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID)
                    ON DELETE RESTRICT     -- Prevent deletion if employees exist
                    ON UPDATE RESTRICT
            );

            -- Test RESTRICT
            DELETE FROM Departments WHERE DepartmentID = 1;
            -- ‚ùå ERROR: Cannot delete or update a parent row: 
            -- a foreign key constraint fails
            -- Must delete/reassign employees first!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Visual Representation
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 450" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Referential Integrity</text>
                            
                            <!-- Parent Table -->
                            <rect x="100" y="80" width="250" height="150" fill="#d1fae5" stroke="#10b981" stroke-width="3" rx="5"/>
                            <text x="225" y="105" font-size="15" font-weight="bold" fill="#065f46" text-anchor="middle">Departments (Parent)</text>
                            
                            <line x1="120" y1="115" x2="330" y2="115" stroke="#10b981" stroke-width="2"/>
                            
                            <text x="130" y="135" font-size="12" fill="#333" font-weight="bold">DeptID (PK)</text>
                            <text x="250" y="135" font-size="12" fill="#333">DeptName</text>
                            
                            <rect x="120" y="145" width="210" height="25" fill="#fff" stroke="#10b981"/>
                            <text x="130" y="162" font-size="11" fill="#333">1</text>
                            <text x="250" y="162" font-size="11" fill="#333">IT</text>
                            
                            <rect x="120" y="170" width="210" height="25" fill="#fff" stroke="#10b981"/>
                            <text x="130" y="187" font-size="11" fill="#333">2</text>
                            <text x="250" y="187" font-size="11" fill="#333">HR</text>
                            
                            <rect x="120" y="195" width="210" height="25" fill="#fff" stroke="#10b981"/>
                            <text x="130" y="212" font-size="11" fill="#333">3</text>
                            <text x="250" y="212" font-size="11" fill="#333">Finance</text>
                            
                            <!-- Child Table -->
                            <rect x="450" y="80" width="300" height="200" fill="#dbeafe" stroke="#3b82f6" stroke-width="3" rx="5"/>
                            <text x="600" y="105" font-size="15" font-weight="bold" fill="#1e40af" text-anchor="middle">Employees (Child)</text>
                            
                            <line x1="470" y1="115" x2="730" y2="115" stroke="#3b82f6" stroke-width="2"/>
                            
                            <text x="480" y="135" font-size="12" fill="#333" font-weight="bold">EmpID (PK)</text>
                            <text x="580" y="135" font-size="12" fill="#333">Name</text>
                            <text x="680" y="135" font-size="12" fill="#333" font-weight="bold">DeptID (FK)</text>
                            
                            <rect x="470" y="145" width="250" height="25" fill="#fff" stroke="#3b82f6"/>
                            <text x="480" y="162" font-size="11" fill="#333">101</text>
                            <text x="580" y="162" font-size="11" fill="#333">John</text>
                            <text x="690" y="162" font-size="11" fill="#f59e0b" font-weight="bold">1</text>
                            
                            <rect x="470" y="170" width="250" height="25" fill="#fff" stroke="#3b82f6"/>
                            <text x="480" y="187" font-size="11" fill="#333">102</text>
                            <text x="580" y="187" font-size="11" fill="#333">Sarah</text>
                            <text x="690" y="187" font-size="11" fill="#f59e0b" font-weight="bold">2</text>
                            
                            <rect x="470" y="195" width="250" height="25" fill="#fff" stroke="#3b82f6"/>
                            <text x="480" y="212" font-size="11" fill="#333">103</text>
                            <text x="580" y="212" font-size="11" fill="#333">Mike</text>
                            <text x="690" y="212" font-size="11" fill="#f59e0b" font-weight="bold">1</text>
                            
                            <rect x="470" y="220" width="250" height="25" fill="#fff" stroke="#3b82f6"/>
                            <text x="480" y="237" font-size="11" fill="#333">104</text>
                            <text x="580" y="237" font-size="11" fill="#333">Emily</text>
                            <text x="690" y="237" font-size="11" fill="#f59e0b" font-weight="bold">3</text>
                            
                            <rect x="470" y="245" width="250" height="25" fill="#fff" stroke="#3b82f6"/>
                            <text x="480" y="262" font-size="11" fill="#333">105</text>
                            <text x="580" y="262" font-size="11" fill="#333">David</text>
                            <text x="690" y="262" font-size="11" fill="#999">NULL</text>
                            
                            <!-- Relationship Arrow -->
                            <path d="M 350 155 L 450 155" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow12)"/>
                            <text x="400" y="145" font-size="12" fill="#f59e0b" font-weight="bold" text-anchor="middle">REFERENCES</text>
                            
                            <!-- Rules Box -->
                            <rect x="50" y="310" width="700" height="120" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                            <text x="400" y="335" font-size="14" font-weight="bold" fill="#92400e" text-anchor="middle">Referential Integrity Rules</text>
                            
                            <text x="70" y="360" font-size="12" fill="#333">‚úì Foreign Key values (1, 2, 3) MUST exist in Parent table's Primary Key</text>
                            <text x="70" y="380" font-size="12" fill="#333">‚úì NULL is allowed (David has no department)</text>
                            <text x="70" y="400" font-size="12" fill="#333">‚úó Cannot insert Employee with DeptID = 99 (doesn't exist in Parent)</text>
                            <text x="70" y="420" font-size="12" fill="#333">‚úó Cannot delete Department with ID = 1 (has employees, unless CASCADE)</text>
                            
                            <!-- Marker -->
                            <defs>
                                <marker id="arrow12" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#f59e0b"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-briefcase"></i>
                        Real-World Scenario
                    </div>
                    <div class="scenario-box">
                        <h4>E-commerce Order System with Referential Integrity</h4>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Complete e-commerce schema with referential integrity
            CREATE TABLE Customers (
                CustomerID INT PRIMARY KEY AUTO_INCREMENT,
                CustomerName VARCHAR(100),
                Email VARCHAR(100) UNIQUE
            );

            CREATE TABLE Products (
                ProductID INT PRIMARY KEY AUTO_INCREMENT,
                ProductName VARCHAR(100),
                Price DECIMAL(10,2),
                StockQuantity INT
            );

            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY AUTO_INCREMENT,
                CustomerID INT NOT NULL,
                OrderDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                TotalAmount DECIMAL(10,2),
                Status VARCHAR(20),
                
                -- Foreign Key with RESTRICT (can't delete customer with orders)
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
                    ON DELETE RESTRICT
                    ON UPDATE CASCADE
            );

            CREATE TABLE Order_Items (
                OrderItemID INT PRIMARY KEY AUTO_INCREMENT,
                OrderID INT NOT NULL,
                ProductID INT NOT NULL,
                Quantity INT,
                Price DECIMAL(10,2),
                
                -- Foreign Keys with CASCADE
                FOREIGN KEY (OrderID) REFERENCES Orders(OrderID)
                    ON DELETE CASCADE,      -- Delete items when order is deleted
                FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
                    ON DELETE RESTRICT      -- Can't delete product if in orders
            );

            -- Test Referential Integrity
            INSERT INTO Customers VALUES (1, 'John Doe', 'john@email.com');
            INSERT INTO Products VALUES (1, 'Laptop', 999.99, 10);
            INSERT INTO Orders VALUES (1, 1, NOW(), 999.99, 'Completed');
            INSERT INTO Order_Items VALUES (1, 1, 1, 1, 999.99);

            -- Try to delete customer with orders
            DELETE FROM Customers WHERE CustomerID = 1;
            -- ‚ùå ERROR: Cannot delete - customer has orders (RESTRICT)

            -- Try to delete non-existent customer
            DELETE FROM Customers WHERE CustomerID = 999;
            -- ‚úì Success - no constraint violation

            -- Delete order (cascades to order items)
            DELETE FROM Orders WHERE OrderID = 1;
            -- ‚úì Order deleted
            -- ‚úì Order_Items automatically deleted (CASCADE)

            -- Try to delete product that's been ordered
            DELETE FROM Products WHERE ProductID = 1;
            -- ‚ùå ERROR: Cannot delete - product is in orders (RESTRICT)</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if you try to delete a parent record with child records?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p>It depends on the <strong>ON DELETE</strong> action defined in the foreign key constraint:</p>
                                
                                <p style="margin-top: 1rem;"><strong>1. RESTRICT (Default):</strong></p>
                                <ul>
                                    <li>‚ùå Deletion is <strong>blocked</strong></li>
                                    <li>Error message: "Cannot delete parent row: foreign key constraint fails"</li>
                                    <li>Must delete/reassign child records first</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>2. CASCADE:</strong></p>
                                <ul>
                                    <li>‚úì Parent deleted</li>
                                    <li>‚úì All child records <strong>automatically deleted</strong></li>
                                    <li>‚ö†Ô∏è Use with caution - can delete lots of data!</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>3. SET NULL:</strong></p>
                                <ul>
                                    <li>‚úì Parent deleted</li>
                                    <li>‚úì Child records' foreign key set to <strong>NULL</strong></li>
                                    <li>Child records become "orphaned" but remain in database</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>4. SET DEFAULT:</strong></p>
                                <ul>
                                    <li>‚úì Parent deleted</li>
                                    <li>‚úì Child records' foreign key set to <strong>default value</strong></li>
                                    <li>Useful for "reassigning" to a default parent</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you have a foreign key referencing multiple columns?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes!</strong> This is called a <strong>composite foreign key</strong> and is used when the primary key consists of multiple columns.</p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Parent table with composite primary key
            CREATE TABLE Courses (
                CourseCode VARCHAR(10),
                Semester VARCHAR(10),
                CourseName VARCHAR(100),
                PRIMARY KEY (CourseCode, Semester)  -- Composite PK
            );

            -- Child table with composite foreign key
            CREATE TABLE Enrollments (
                EnrollmentID INT PRIMARY KEY,
                StudentID INT,
                CourseCode VARCHAR(10),
                Semester VARCHAR(10),
                Grade VARCHAR(2),
                
                -- Composite Foreign Key
                FOREIGN KEY (CourseCode, Semester) 
                    REFERENCES Courses(CourseCode, Semester)
                    ON DELETE CASCADE
            );

            -- Valid insert
            INSERT INTO Courses VALUES ('CS101', 'Fall2024', 'Intro to Programming');
            INSERT INTO Enrollments VALUES (1, 1001, 'CS101', 'Fall2024', 'A');  -- ‚úì

            -- Invalid insert (course + semester combination doesn't exist)
            INSERT INTO Enrollments VALUES (2, 1002, 'CS101', 'Spring2024', 'B');  -- ‚ùå</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the difference between Referential Integrity and Entity Integrity?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Entity Integrity</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Referential Integrity</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Applies To</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Primary Key</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Foreign Key</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Primary key cannot be NULL or duplicate</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Foreign key must match existing primary key</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Purpose</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Ensure each row is uniquely identifiable</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Ensure relationships are valid</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Scope</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Within a single table</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Between tables</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Example</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">EmployeeID must be unique, not NULL</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">DepartmentID must exist in Departments table</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Referential Integrity</span>
                        <span class="keyword-tag">Foreign Key</span>
                        <span class="keyword-tag">Parent Table</span>
                        <span class="keyword-tag">Child Table</span>
                        <span class="keyword-tag">ON DELETE CASCADE</span>
                        <span class="keyword-tag">ON UPDATE CASCADE</span>
                        <span class="keyword-tag">RESTRICT</span>
                        <span class="keyword-tag">SET NULL</span>
                        <span class="keyword-tag">Orphaned Records</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <!-- Question 14: What is Data and What is a Database? -->
            <div class="question-content" id="q14">
                <div class="question-header">
                    <h1 class="question-title">What is Data and What is a Database?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Understanding Data
                    </div>
                    <div class="definition-box">
                        <p><strong>Data</strong> is raw, unorganized facts and figures that have no meaning by themselves. Data consists of individual values, numbers, text, images, or any other form of input that can be stored and processed.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Characteristics of Data:</strong></p>
                        <ul>
                            <li><strong>Raw Facts:</strong> Unprocessed and unorganized</li>
                            <li><strong>No Context:</strong> Lacks meaning by itself</li>
                            <li><strong>Building Blocks:</strong> Foundation for information</li>
                            <li><strong>Various Forms:</strong> Numbers, text, images, audio, video</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Examples of Data:</strong></p>
                        <ul>
                            <li>23 (just a number - no context)</li>
                            <li>"John" (just a name - who is John?)</li>
                            <li>01/15/2024 (a date - date of what?)</li>
                            <li>$1500 (an amount - for what?)</li>
                            <li>37.7749, -122.4194 (coordinates - where?)</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Data becomes Information when:</strong></p>
                        <p>Data is processed, organized, structured, or presented in a meaningful context that gives it meaning and makes it useful for decision-making.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-database"></i>
                        Understanding Database
                    </div>
                    <div class="definition-box">
                        <p><strong>Database</strong> is an organized collection of structured data stored electronically in a computer system. A database is typically controlled by a Database Management System (DBMS).</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Characteristics of Database:</strong></p>
                        <ul>
                            <li><strong>Organized:</strong> Data stored in structured format (tables, documents, etc.)</li>
                            <li><strong>Persistent:</strong> Data remains stored even after application closes</li>
                            <li><strong>Shared:</strong> Multiple users/applications can access simultaneously</li>
                            <li><strong>Managed:</strong> Controlled by DBMS for security, integrity, consistency</li>
                            <li><strong>Efficient:</strong> Optimized for fast retrieval and storage</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Database = Data + Structure + Management</strong></p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-chart-line"></i>
                        Data to Information to Knowledge Hierarchy
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 500" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Data-Information-Knowledge-Wisdom Pyramid</text>
                            
                            <!-- Pyramid -->
                            <polygon points="400,100 200,450 600,450" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            
                            <!-- Wisdom Level -->
                            <polygon points="400,100 300,200 500,200" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="400" y="140" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">WISDOM</text>
                            <text x="400" y="160" font-size="11" fill="#1e40af" text-anchor="middle">Why?</text>
                            
                            <!-- Knowledge Level -->
                            <polygon points="300,200 250,300 550,300 500,200" fill="#bfdbfe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="400" y="240" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">KNOWLEDGE</text>
                            <text x="400" y="260" font-size="11" fill="#1e40af" text-anchor="middle">How?</text>
                            
                            <!-- Information Level -->
                            <polygon points="250,300 225,375 575,375 550,300" fill="#93c5fd" stroke="#3b82f6" stroke-width="2"/>
                            <text x="400" y="330" font-size="14" font-weight="bold" fill="#1e3a8a" text-anchor="middle">INFORMATION</text>
                            <text x="400" y="350" font-size="11" fill="#1e3a8a" text-anchor="middle">What? Who? Where? When?</text>
                            
                            <!-- Data Level -->
                            <polygon points="225,375 200,450 600,450 575,375" fill="#60a5fa" stroke="#3b82f6" stroke-width="2"/>
                            <text x="400" y="410" font-size="14" font-weight="bold" fill="white" text-anchor="middle">DATA</text>
                            <text x="400" y="430" font-size="11" fill="white" text-anchor="middle">Raw Facts & Figures</text>
                            
                            <!-- Examples on the right -->
                            <text x="650" y="150" font-size="12" font-weight="bold" fill="#1e40af">Examples:</text>
                            
                            <text x="650" y="180" font-size="11" fill="#475569">Wisdom: Best strategy</text>
                            
                            <text x="650" y="250" font-size="11" fill="#475569">Knowledge: Patterns</text>
                            <text x="650" y="270" font-size="11" fill="#475569">& Relationships</text>
                            
                            <text x="650" y="340" font-size="11" fill="#475569">Information: John's</text>
                            <text x="650" y="360" font-size="11" fill="#475569">age is 23 years</text>
                            
                            <text x="650" y="420" font-size="11" fill="#475569">Data: 23, "John",</text>
                            <text x="650" y="440" font-size="11" fill="#475569">01/15/2000</text>
                        </svg>
                    </div>
                    
                    <div class="example-box" style="margin-top: 2rem;">
                        <pre><code>-- Example: Student Grades

            -- LEVEL 1: DATA (Raw Facts)
            -- Individual values without context:
            85, 92, 78, 88, 95
            "Math", "Science", "English", "History", "Computer"
            "John Smith"
            "ID: 12345"
            "Semester: Spring 2024"

            -- LEVEL 2: INFORMATION (Processed Data with Context)
            -- Data organized and given meaning:

            Student: John Smith (ID: 12345)
            Semester: Spring 2024
            Grades:
            - Math: 85
            - Science: 92
            - English: 78
            - History: 88
            - Computer: 95
            Average: 87.6
            Status: Above average

            -- Now we know WHO scored WHAT in WHICH subjects

            -- LEVEL 3: KNOWLEDGE (Patterns & Relationships)
            -- Understanding derived from information:

            John performs best in technical subjects (Science: 92, Computer: 95)
            John struggles with language subjects (English: 78)
            John's overall performance is consistent (85-95 range)
            John's average (87.6) is above class average (82.3)
            Pattern: Technical students often score lower in English

            -- LEVEL 4: WISDOM (Decision Making)
            -- Using knowledge to make informed decisions:

            Recommendation: 
            - John should consider STEM career path
            - Provide additional English tutoring to improve weak area
            - Encourage enrollment in advanced Computer Science courses
            - Maintain current study habits (consistent performance)

            -- -----------------------------------------------------------
            -- E-commerce Example
            -- -----------------------------------------------------------

            -- DATA:
            $1500, 2024-01-15, "iPhone 15", "John Doe", "New York"

            -- INFORMATION:
            Order Details:
            Customer: John Doe
            Location: New York
            Product: iPhone 15
            Amount: $1500
            Date: January 15, 2024
            Status: Delivered

            -- KNOWLEDGE:
            - John is a high-value customer (spent $1500)
            - iPhones popular in New York market
            - January is strong sales month
            - John has purchased 3 times in 6 months
            - John prefers premium products

            -- WISDOM:
            - Target John with premium product launches
            - Send personalized offers for iPhone accessories
            - Include John in VIP customer program
            - Use John's profile for similar customer targeting
            - Optimize inventory for premium products in NY

            -- -----------------------------------------------------------
            -- Healthcare Example
            -- -----------------------------------------------------------

            -- DATA:
            98.6, 120, 80, "2024-01-15 09:00", "John Doe", 45

            -- INFORMATION:
            Patient: John Doe
            Age: 45 years
            Visit: January 15, 2024, 9:00 AM
            Vital Signs:
            - Temperature: 98.6¬∞F (Normal)
            - Blood Pressure: 120/80 mmHg (Normal)
            - Heart Rate: 72 bpm (Normal)

            -- KNOWLEDGE:
            - John's vitals are within normal range
            - John's health is stable for his age group
            - John has consistent normal readings over 5 years
            - John has no history of cardiovascular issues
            - Similar 45-year-old males show similar patterns

            -- WISDOM:
            - Continue current health maintenance plan
            - Schedule routine checkup in 6 months
            - No immediate medical intervention needed
            - John is good candidate for preventive health program
            - Use John's profile as baseline for age group</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Types of Data
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Structured Data</h4>
                        <p><strong>Highly organized data that fits neatly into tables with rows and columns.</strong></p>
                        <ul>
                            <li>Fixed schema and format</li>
                            <li>Easy to search and analyze</li>
                            <li>Stored in relational databases</li>
                            <li>Examples: Employee records, bank transactions, inventory data</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Structured Data Example: Customer Table

            | customer_id | first_name | last_name | email              | phone          | age |
            |-------------|------------|-----------|--------------------|--------------------|-----|
            | 1           | John       | Doe       | john@example.com   | (555) 123-4567 | 35  |
            | 2           | Jane       | Smith     | jane@example.com   | (555) 987-6543 | 28  |
            | 3           | Bob        | Johnson   | bob@example.com    | (555) 456-7890 | 42  |

            -- Characteristics:
            -- ‚úì Fixed columns (schema)
            -- ‚úì Consistent data types
            -- ‚úì Easy to query with SQL
            -- ‚úì Relationships defined</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Semi-Structured Data</h4>
                        <p><strong>Data that doesn't fit into strict tables but has some organizational structure.</strong></p>
                        <ul>
                            <li>Contains tags, markers, or metadata</li>
                            <li>Flexible schema</li>
                            <li>Self-describing structure</li>
                            <li>Examples: JSON, XML, email messages, log files</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Semi-Structured Data Example: JSON

            {
            "customer_id": 1,
            "name": {
                "first": "John",
                "last": "Doe"
            },
            "email": "john@example.com",
            "phone": ["(555) 123-4567", "(555) 111-2222"],
            "addresses": [
                {
                "type": "home",
                "street": "123 Main St",
                "city": "New York"
                },
                {
                "type": "work",
                "street": "456 Office Blvd",
                "city": "Boston"
                }
            ],
            "preferences": {
                "newsletter": true,
                "theme": "dark"
            }
            }

            -- Characteristics:
            -- ‚ö† Flexible structure (nested objects)
            -- ‚ö† Variable number of fields
            -- ‚úì Still has organization (hierarchy)
            -- ‚úì Self-describing (field names included)</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Unstructured Data</h4>
                        <p><strong>Data with no predefined structure or organization.</strong></p>
                        <ul>
                            <li>No fixed schema</li>
                            <li>Difficult to search and analyze</li>
                            <li>Requires special processing</li>
                            <li>Examples: Text documents, images, videos, audio files, social media posts</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Unstructured Data Examples:

            -- Email body:
            "Hi John, I wanted to follow up on our meeting yesterday. 
            Can you send me the quarterly report by Friday? Thanks!"

            -- Social media post:
            "Just tried the new restaurant downtown! Amazing food! üçï 
            #foodie #NYC #dinner"

            -- Customer review:
            "This product exceeded my expectations. Fast shipping, 
            great quality, would definitely buy again. 5/5 stars!"

            -- Image: profile_photo.jpg (binary data)
            -- Video: product_demo.mp4 (binary data)
            -- Audio: customer_call_recording.mp3 (binary data)

            -- Characteristics:
            -- ‚ùå No fixed structure
            -- ‚ùå Hard to query directly
            -- ‚ùå Requires NLP, image processing, etc.
            -- ‚úì Rich information content</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Data vs Database: Quick Comparison
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Data</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Database</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Definition</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Raw facts and figures</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Organized collection of data</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Structure</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Unorganized</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Well-organized</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Meaning</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No meaning by itself</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Meaningful and useful</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Example</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">23, "John", 01/15/2024</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Student database with grades</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Storage</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Can be anywhere</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Stored electronically</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Accessibility</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Difficult to access</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Easy to access and query</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Management</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No management system</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Managed by DBMS</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Relationship</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Data is component</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Database contains data</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Analogy
                    </div>
                    
                    <div style="padding: 1rem; background: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 4px;">
                        <p style="margin: 0; font-weight: bold; color: #1e40af;">Library Analogy:</p>
                        <ul style="margin: 0.5rem 0 0 1rem; color: #1e40af;">
                            <li><strong>Data:</strong> Individual words, sentences, paragraphs in books</li>
                            <li><strong>Information:</strong> Complete books with organized chapters</li>
                            <li><strong>Database:</strong> The entire library with cataloging system</li>
                            <li><strong>DBMS:</strong> The librarian who helps you find and manage books</li>
                        </ul>
                        <p style="margin: 0.5rem 0 0 0; color: #1e40af;">Just as words alone are meaningless until organized into books, and books need a library system to be useful, data needs to be organized in a database and managed by a DBMS to provide value!</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Data</span>
                        <span class="keyword-tag">Database</span>
                        <span class="keyword-tag">Information</span>
                        <span class="keyword-tag">Knowledge</span>
                        <span class="keyword-tag">Wisdom</span>
                        <span class="keyword-tag">Structured Data</span>
                        <span class="keyword-tag">Semi-Structured Data</span>
                        <span class="keyword-tag">Unstructured Data</span>
                        <span class="keyword-tag">Raw Facts</span>
                        <span class="keyword-tag">Data Hierarchy</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 15: What are the Key Differences Between Data and Database? -->
            <div class="question-content" id="q15">
                <div class="question-header">
                    <h1 class="question-title">What are the Key Differences Between Data and Database?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Beginner</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Fundamental Differences
                    </div>
                    <div class="definition-box">
                        <p><strong>Core Concept:</strong> Data is the ingredient; Database is the recipe book. Data is the paint; Database is the organized art gallery. Data is individual bricks; Database is the structured building.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Distinction:</strong></p>
                        <p>Data exists independently and can be scattered anywhere. A database is a purposefully designed system that collects, organizes, stores, and manages data to make it useful and accessible.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list"></i>
                        Detailed Comparison
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Organization</h4>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- DATA (Unorganized):
            -- Scattered pieces of information

            23
            "John Doe"
            "john@example.com"
            "New York"
            $50000
            "Software Engineer"
            "2020-01-15"
            28
            "Jane Smith"
            "jane@example.com"

            -- No structure, no relationships, no meaning
            -- Like random puzzle pieces ‚ùå

            -- DATABASE (Organized):
            -- Structured and meaningful

            TABLE: employees
            +----+------------+----------------------+----------+--------+-------------------+------------+
            | id | name       | email                | city     | salary | job_title         | hire_date  |
            +----+------------+----------------------+----------+--------+-------------------+------------+
            | 23 | John Doe   | john@example.com     | New York | 50000  | Software Engineer | 2020-01-15 |
            | 28 | Jane Smith | jane@example.com     | Boston   | 60000  | Data Analyst      | 2021-03-20 |
            +----+------------+----------------------+----------+--------+-------------------+------------+

            -- ‚úì Structured in tables
            -- ‚úì Clear relationships
            -- ‚úì Meaningful context
            -- ‚úì Easy to query and understand</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Dependency</h4>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- DATA: Independent
            -- Can exist anywhere, in any form

            -- On paper:
            Name: John Doe
            Age: 35

            -- In email:
            "John's salary is $50,000"

            -- In spreadsheet:
            John, 35, 50000

            -- In memory:
            int age = 35;
            string name = "John";

            -- In conversation:
            "John is 35 years old"

            -- Data exists independently of any system ‚úì

            -- -----------------------------------------------------------

            -- DATABASE: Dependent on System
            -- Requires infrastructure to exist

            -- Needs:
            -- 1. Database Management System (DBMS)
            -- 2. Storage system (disk, SSD)
            -- 3. Memory for operations
            -- 4. Processing power
            -- 5. Network (for distributed systems)

            -- Without DBMS:
            -- Database files are just binary data ‚ùå
            -- Cannot be accessed or queried ‚ùå
            -- No meaning or structure ‚ùå

            -- Example:
            -- PostgreSQL database file: base/16384/16385
            -- Without PostgreSQL: Just binary gibberish ‚ùå
            -- With PostgreSQL: Structured, queryable data ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Accessibility</h4>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- DATA: Difficult to Access
            -- Finding specific data is hard

            -- Scenario: Find John's salary

            -- If data is scattered:
            -- 1. Check email archives (hours) ‚è∞
            -- 2. Search through documents (hours) ‚è∞
            -- 3. Look in spreadsheets (hours) ‚è∞
            -- 4. Ask colleagues (hours) ‚è∞
            -- 5. Check old reports (hours) ‚è∞

            -- Total time: Days ‚ùå
            -- Accuracy: Uncertain (which is latest?) ‚ö†
            -- Consistency: Multiple conflicting values ‚ùå

            -- -----------------------------------------------------------

            -- DATABASE: Easy to Access
            -- Instant, precise retrieval

            SELECT salary 
            FROM employees 
            WHERE name = 'John Doe';

            -- Result in milliseconds ‚ö°
            -- Always current ‚úì
            -- Always consistent ‚úì
            -- Can combine with other queries:

            -- Get average salary in John's department:
            SELECT AVG(salary) 
            FROM employees 
            WHERE department_id = (
                SELECT department_id 
                FROM employees 
                WHERE name = 'John Doe'
            );

            -- Complex query, instant result ‚ö°

            -- Get John's salary history:
            SELECT year, salary, increase_percentage
            FROM salary_history
            WHERE employee_id = (
                SELECT id FROM employees WHERE name = 'John Doe'
            )
            ORDER BY year DESC;

            -- Comprehensive analysis in seconds ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. Integrity and Validation</h4>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- DATA: No Built-in Validation
            -- Anything goes!

            -- Inconsistent formats:
            "John Doe"
            "Jane SMITH"
            "bob johnson"  -- Lowercase
            "Alice_Brown"  -- Underscore
            "123 Charlie"  -- Starts with number

            -- Invalid values:
            Age: -5  -- Negative age ‚ùå
            Salary: "fifty thousand"  -- String instead of number ‚ùå
            Email: "not_an_email"  -- Invalid format ‚ùå
            Hire Date: "2025-13-45"  -- Invalid date ‚ùå

            -- Duplicates:
            Employee ID: 101 (appears 3 times) ‚ùå

            -- No one enforces correctness ‚ùå

            -- -----------------------------------------------------------

            -- DATABASE: Built-in Validation
            -- Enforces rules automatically

            CREATE TABLE employees (
                id INT PRIMARY KEY,  -- Must be unique ‚úì
                name VARCHAR(100) NOT NULL,  -- Required ‚úì
                age INT CHECK (age >= 18 AND age <= 65),  -- Valid range ‚úì
                salary DECIMAL(10,2) CHECK (salary > 0),  -- Positive number ‚úì
                email VARCHAR(255) UNIQUE,  -- No duplicates ‚úì
                hire_date DATE CHECK (hire_date <= CURRENT_DATE),  -- Not future ‚úì
                department_id INT,
                FOREIGN KEY (department_id) REFERENCES departments(id)  -- Must exist ‚úì
            );

            -- Attempted invalid inserts:

            INSERT INTO employees VALUES (1, 'John', -5, 50000, 'john@ex.com', '2020-01-01', 1);
            -- ERROR: age must be between 18 and 65 ‚ùå

            INSERT INTO employees VALUES (2, 'Jane', 30, -1000, 'jane@ex.com', '2020-01-01', 1);
            -- ERROR: salary must be positive ‚ùå

            INSERT INTO employees VALUES (3, '', 25, 60000, 'alice@ex.com', '2020-01-01', 1);
            -- ERROR: name cannot be empty ‚ùå

            INSERT INTO employees VALUES (4, 'Bob', 30, 70000, 'john@ex.com', '2020-01-01', 1);
            -- ERROR: email already exists ‚ùå

            -- Database prevents garbage data! ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">5. Redundancy and Consistency</h4>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- DATA (Without Database): Redundancy Issues

            -- Same customer info in multiple places:

            -- In sales spreadsheet:
            Customer: John Doe, Email: john@oldaddress.com, Phone: 555-1234

            -- In support system:
            Customer: John Doe, Email: john@newaddress.com, Phone: 555-5678

            -- In marketing list:
            Customer: Jhon Do, Email: john@oldaddress.com, Phone: 555-1234

            -- Problems:
            -- ‚ùå Three different versions
            -- ‚ùå Spelling error ("Jhon Do")
            -- ‚ùå Two different emails
            -- ‚ùå Two different phones
            -- ‚ùå Which is correct? Unknown!
            -- ‚ùå Update one ‚Üí Others remain stale
            -- ‚ùå Wastes storage space

            -- -----------------------------------------------------------

            -- DATABASE: Controlled Redundancy

            -- Single source of truth:
            CREATE TABLE customers (
                id INT PRIMARY KEY,
                name VARCHAR(100),
                email VARCHAR(255),
                phone VARCHAR(20)
            );

            -- Customer stored once:
            INSERT INTO customers VALUES (1, 'John Doe', 'john@example.com', '555-9999');

            -- Other tables reference by ID:
            CREATE TABLE orders (
                order_id INT PRIMARY KEY,
                customer_id INT,  -- Just reference, not duplicate data
                order_date DATE,
                amount DECIMAL(10,2),
                FOREIGN KEY (customer_id) REFERENCES customers(id)
            );

            -- Update customer once, reflected everywhere:
            UPDATE customers SET email = 'john@newemail.com' WHERE id = 1;

            -- All orders now see updated email ‚úì
            -- Single update, consistent everywhere ‚úì
            -- No duplicate storage ‚úì

            -- Query shows current data:
            SELECT o.order_id, c.name, c.email, o.amount
            FROM orders o
            JOIN customers c ON o.customer_id = c.id
            WHERE c.id = 1;

            -- Always current and consistent! ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">6. Security and Access Control</h4>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- DATA (Files, Spreadsheets): Limited Security

            -- File: employees.xlsx
            -- Anyone with file access can:
            -- ‚úì View all data (including salaries!)
            -- ‚úì Modify anything
            -- ‚úì Delete entire file
            -- ‚úì Copy and share
            -- ‚ùå No granular control
            -- ‚ùå No audit trail

            -- Problems:
            -- ‚Ä¢ Junior employee sees CEO salary ‚ùå
            -- ‚Ä¢ Intern can change financial data ‚ùå
            -- ‚Ä¢ Accidental deletion ‚ùå
            -- ‚Ä¢ No track of who changed what ‚ùå

            -- -----------------------------------------------------------

            -- DATABASE: Granular Security

            -- Create roles with specific permissions:

            -- Read-only analyst:
            CREATE ROLE analyst;
            GRANT SELECT ON employees TO analyst;
            -- Can only view data ‚úì

            -- HR manager:
            CREATE ROLE hr_manager;
            GRANT SELECT, INSERT, UPDATE ON employees TO hr_manager;
            -- Cannot delete ‚úì
            -- Cannot see salary above certain level ‚úì

            -- Restricted view for general staff:
            CREATE VIEW employee_directory AS
            SELECT id, name, department, email
            FROM employees;  -- No salary, no DOB

            GRANT SELECT ON employee_directory TO general_staff;
            -- Only see public info ‚úì

            -- Row-level security:
            -- Managers can only see their department:
            CREATE POLICY manager_policy ON employees
            FOR SELECT
            USING (department_id = current_user_department());

            -- Column-level security:
            -- Only specific role can see salary:
            REVOKE SELECT ON employees.salary FROM PUBLIC;
            GRANT SELECT ON employees.salary TO payroll_admin;

            -- Audit trail:
            -- Every change logged automatically:
            SELECT * FROM audit_log WHERE table_name = 'employees';

            | timestamp           | user     | action | old_value | new_value |
            |---------------------|----------|--------|-----------|-----------|
            | 2024-01-15 10:30:00 | hr_admin | UPDATE | 50000     | 55000     |

            -- ‚úì Know who changed what, when
            -- ‚úì Can rollback if needed
            -- ‚úì Compliance ready (SOX, GDPR)</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Comprehensive Comparison Table
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Feature</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Data</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Database</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Organization</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Unorganized, scattered</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Highly organized, structured</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Context</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No context, meaningless</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Meaningful with context</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Accessibility</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Difficult, time-consuming</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Easy, instant queries</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Integrity</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No validation</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Built-in constraints</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Redundancy</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">High, uncontrolled</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Minimal, controlled</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Consistency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Often inconsistent</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Always consistent</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Security</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Limited, all-or-nothing</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Granular, role-based</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Concurrency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">File locking issues</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Multi-user support</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Backup</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Manual, error-prone</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Automated, reliable</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Scalability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Difficult to scale</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Designed for scale</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Relationships</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No defined relationships</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Clear relationships (FK)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Query Language</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">None, manual search</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">SQL, powerful queries</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Cost</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Low initial cost</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;">Higher initial cost</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Complexity</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Simple</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;">More complex</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Best For</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Small, temporary info</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Enterprise applications</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        When to Use What?
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">Use Raw Data (Files, Spreadsheets) When:</h4>
                        <ul>
                            <li>‚úì Small amount of data (few hundred records)</li>
                            <li>‚úì Single user or very few users</li>
                            <li>‚úì Temporary or one-time use</li>
                            <li>‚úì Simple structure, no relationships</li>
                            <li>‚úì No security requirements</li>
                            <li>‚úì Quick prototyping or analysis</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Examples:</strong> Personal budget, quick data analysis, configuration files</p>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Use Database When:</h4>
                        <ul>
                            <li>‚úì Large amounts of data (thousands+ records)</li>
                            <li>‚úì Multiple concurrent users</li>
                            <li>‚úì Long-term storage needs</li>
                            <li>‚úì Complex relationships between data</li>
                            <li>‚úì Security and access control required</li>
                            <li>‚úì Data integrity critical</li>
                            <li>‚úì Need complex queries and reporting</li>
                            <li>‚úì Need backup and recovery</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Examples:</strong> Enterprise applications, e-commerce, banking, healthcare, CRM systems</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Data vs Database</span>
                        <span class="keyword-tag">Organization</span>
                        <span class="keyword-tag">Accessibility</span>
                        <span class="keyword-tag">Data Integrity</span>
                        <span class="keyword-tag">Redundancy</span>
                        <span class="keyword-tag">Consistency</span>
                        <span class="keyword-tag">Security</span>
                        <span class="keyword-tag">Validation</span>
                        <span class="keyword-tag">DBMS</span>
                        <span class="keyword-tag">Structured Storage</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 30: Who is E.F. Codd? -->
            <div class="question-content active" id="q30">
                <div class="question-header">
                    <h1 class="question-title">Who is E.F. Codd and What is His Contribution?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-brain"></i> Expert Level</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Dr. Edgar Frank "Ted" Codd</strong> (1923-2003) was a British computer scientist and mathematician who worked at IBM. He is universally recognized as the <strong>"Father of Relational Databases"</strong>. In 1970, he published a groundbreaking paper titled <strong>"A Relational Model of Data for Large Shared Data Banks"</strong> which completely revolutionized how we think about and manage data.</p>
                        
                        <p style="margin-top: 1rem;">Before Codd's work, databases were hierarchical or network-based, which made them incredibly complex and difficult to work with. Codd introduced the concept of organizing data into <strong>tables (relations)</strong> with <strong>rows and columns</strong>, and using mathematical set theory to manipulate this data. This was a game-changing idea that laid the foundation for modern database systems like Oracle, MySQL, PostgreSQL, and SQL Server.</p>
                        
                        <p style="margin-top: 1rem;">His most significant contributions include:</p>
                        <ul>
                            <li><strong>The Relational Model</strong> - organizing data in tables</li>
                            <li><strong>Codd's 12 Rules</strong> - criteria for what makes a true relational database</li>
                            <li><strong>Normalization Theory</strong> - eliminating data redundancy</li>
                            <li><strong>SQL Foundations</strong> - though SQL was developed later based on his work</li>
                        </ul>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Father of RDBMS</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Relational Model</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> IBM Researcher</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> 1970 Paper</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> 12 Rules</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Normalization</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Impact & Historical Context
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-history"></i> Before and After Codd's Revolution
                        </div>
                        
                        <p><strong>Before 1970 (Pre-Codd Era):</strong></p>
                        <p>Imagine you're working with databases in the 1960s. You had two main options:</p>
                        
                        <ul>
                            <li><strong>Hierarchical Databases:</strong> Data was organized like a family tree - rigid parent-child relationships. IBM's IMS (Information Management System) was the most popular. If you wanted to access data, you had to navigate through the entire hierarchy. Want to find all customers who bought a specific product? You'd have to traverse the entire tree structure manually.</li>
                            
                            <li><strong>Network Databases:</strong> Slightly better than hierarchical, allowing many-to-many relationships, but still incredibly complex. You needed to understand the physical storage structure and write complex navigation code just to retrieve simple data.</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>The Problem:</strong> Both approaches were:</p>
                        <ul>
                            <li>Extremely complex for programmers</li>
                            <li>Tightly coupled with physical storage (change storage, rewrite applications)</li>
                            <li>Required procedural navigation code</li>
                            <li>Difficult to maintain and modify</li>
                            <li>Not flexible for ad-hoc queries</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>After Codd's 1970 Paper:</strong></p>
                        <p>Codd proposed something radical - what if we could organize data into simple tables and use mathematical set operations to query it? Instead of navigating pointers and links, what if we could just <strong>declare what we want</strong> rather than how to get it?</p>
                        
                        <p style="margin-top: 1rem;">This led to:</p>
                        <ul>
                            <li><strong>Data Independence:</strong> Separation of logical data structure from physical storage</li>
                            <li><strong>Declarative Queries:</strong> "SELECT * FROM customers WHERE city='New York'" - you say WHAT you want, not HOW to get it</li>
                            <li><strong>Mathematical Foundation:</strong> Based on set theory and predicate logic</li>
                            <li><strong>Simplicity:</strong> Anyone could understand tables with rows and columns</li>
                        </ul>
                        
                        <div class="highlight-box" style="margin-top: 1.5rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6;">
                            <p><strong>üìå Fun Fact:</strong> IBM initially resisted Codd's ideas because they had heavily invested in IMS (their hierarchical database). It was Oracle Corporation (then called Relational Software Inc.) that first commercialized Codd's relational model in 1979, beating IBM to market!</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Visual Understanding
                    </div>
                    <div class="image-container">
                        <svg width="900" height="600" viewBox="0 0 900 600">
                            <!-- Background -->
                            <rect width="900" height="600" fill="#1e293b"/>
                            
                            <!-- Title -->
                            <text x="450" y="35" font-size="26" fill="#0ea5e9" text-anchor="middle" font-weight="bold">E.F. Codd's Revolutionary Contribution</text>
                            
                            <!-- Timeline -->
                            <line x1="100" y1="80" x2="800" y2="80" stroke="#64748b" stroke-width="3"/>
                            
                            <!-- Pre-1970 Era -->
                            <circle cx="150" cy="80" r="8" fill="#ef4444"/>
                            <text x="150" y="110" font-size="14" fill="#ef4444" text-anchor="middle" font-weight="bold">1960s</text>
                            <text x="150" y="130" font-size="12" fill="#cbd5e1" text-anchor="middle">Hierarchical/Network</text>
                            <text x="150" y="148" font-size="12" fill="#cbd5e1" text-anchor="middle">Databases</text>
                            
                            <!-- Codd's Paper -->
                            <circle cx="450" cy="80" r="12" fill="#10b981"/>
                            <text x="450" y="115" font-size="16" fill="#10b981" text-anchor="middle" font-weight="bold">1970</text>
                            <text x="450" y="138" font-size="13" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Codd's Paper:</text>
                            <text x="450" y="156" font-size="11" fill="#cbd5e1" text-anchor="middle">"A Relational Model of</text>
                            <text x="450" y="172" font-size="11" fill="#cbd5e1" text-anchor="middle">Data for Large Shared</text>
                            <text x="450" y="188" font-size="11" fill="#cbd5e1" text-anchor="middle">Data Banks"</text>
                            
                            <!-- Modern Era -->
                            <circle cx="750" cy="80" r="8" fill="#8b5cf6"/>
                            <text x="750" y="110" font-size="14" fill="#8b5cf6" text-anchor="middle" font-weight="bold">1979+</text>
                            <text x="750" y="130" font-size="12" fill="#cbd5e1" text-anchor="middle">Oracle, MySQL,</text>
                            <text x="750" y="148" font-size="12" fill="#cbd5e1" text-anchor="middle">PostgreSQL era</text>
                            
                            <!-- Problem Section (Left) -->
                            <rect x="50" y="220" width="380" height="340" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="2" rx="12"/>
                            <text x="240" y="250" font-size="18" fill="#ef4444" text-anchor="middle" font-weight="bold">‚ùå Before Codd (The Problem)</text>
                            
                            <!-- Hierarchical Example -->
                            <text x="240" y="280" font-size="14" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Hierarchical Database:</text>
                            <circle cx="240" cy="310" r="25" fill="#334155" stroke="#ef4444" stroke-width="2"/>
                            <text x="240" y="318" font-size="11" fill="#cbd5e1" text-anchor="middle">Company</text>
                            
                            <line x1="240" y1="335" x2="180" y2="365" stroke="#ef4444" stroke-width="2"/>
                            <line x1="240" y1="335" x2="300" y2="365" stroke="#ef4444" stroke-width="2"/>
                            
                            <circle cx="180" cy="375" r="22" fill="#334155" stroke="#ef4444" stroke-width="2"/>
                            <text x="180" y="382" font-size="10" fill="#cbd5e1" text-anchor="middle">Dept A</text>
                            
                            <circle cx="300" cy="375" r="22" fill="#334155" stroke="#ef4444" stroke-width="2"/>
                            <text x="300" y="382" font-size="10" fill="#cbd5e1" text-anchor="middle">Dept B</text>
                            
                            <line x1="180" y1="397" x2="160" y2="425" stroke="#ef4444" stroke-width="2"/>
                            <line x1="180" y1="397" x2="200" y2="425" stroke="#ef4444" stroke-width="2"/>
                            
                            <circle cx="160" cy="435" r="18" fill="#334155" stroke="#ef4444" stroke-width="2"/>
                            <text x="160" y="440" font-size="9" fill="#cbd5e1" text-anchor="middle">Emp1</text>
                            
                            <circle cx="200" cy="435" r="18" fill="#334155" stroke="#ef4444" stroke-width="2"/>
                            <text x="200" y="440" font-size="9" fill="#cbd5e1" text-anchor="middle">Emp2</text>
                            
                            <!-- Problems List -->
                            <text x="240" y="480" font-size="13" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Major Issues:</text>
                            <text x="70" y="505" font-size="11" fill="#94a3b8">üî∏ Complex navigation code required</text>
                            <text x="70" y="525" font-size="11" fill="#94a3b8">üî∏ Tightly coupled with storage</text>
                            <text x="70" y="545" font-size="11" fill="#94a3b8">üî∏ Hard to modify structure</text>
                            
                            <!-- Solution Section (Right) -->
                            <rect x="470" y="220" width="380" height="340" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="2" rx="12"/>
                            <text x="660" y="250" font-size="18" fill="#10b981" text-anchor="middle" font-weight="bold">‚úÖ After Codd (The Solution)</text>
                            
                            <!-- Table Representation -->
                            <text x="660" y="280" font-size="14" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Relational Tables:</text>
                            
                            <!-- Employees Table -->
                            <rect x="520" y="295" width="280" height="30" fill="#0ea5e9" opacity="0.2" stroke="#0ea5e9" stroke-width="2"/>
                            <text x="540" y="315" font-size="11" fill="#cbd5e1" font-weight="bold">EmpID</text>
                            <text x="620" y="315" font-size="11" fill="#cbd5e1" font-weight="bold">Name</text>
                            <text x="700" y="315" font-size="11" fill="#cbd5e1" font-weight="bold">DeptID</text>
                            
                            <rect x="520" y="325" width="280" height="25" fill="#334155" stroke="#0ea5e9" stroke-width="1"/>
                            <text x="540" y="342" font-size="10" fill="#94a3b8">101</text>
                            <text x="620" y="342" font-size="10" fill="#94a3b8">John</text>
                            <text x="700" y="342" font-size="10" fill="#94a3b8">1</text>
                            
                            <rect x="520" y="350" width="280" height="25" fill="#334155" stroke="#0ea5e9" stroke-width="1"/>
                            <text x="540" y="367" font-size="10" fill="#94a3b8">102</text>
                            <text x="620" y="367" font-size="10" fill="#94a3b8">Sarah</text>
                            <text x="700" y="367" font-size="10" fill="#94a3b8">2</text>
                            
                            <!-- Department Table -->
                            <rect x="520" y="395" width="280" height="30" fill="#8b5cf6" opacity="0.2" stroke="#8b5cf6" stroke-width="2"/>
                            <text x="540" y="415" font-size="11" fill="#cbd5e1" font-weight="bold">DeptID</text>
                            <text x="650" y="415" font-size="11" fill="#cbd5e1" font-weight="bold">DeptName</text>
                            
                            <rect x="520" y="425" width="280" height="25" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
                            <text x="540" y="442" font-size="10" fill="#94a3b8">1</text>
                            <text x="650" y="442" font-size="10" fill="#94a3b8">Sales</text>
                            
                            <rect x="520" y="450" width="280" height="25" fill="#334155" stroke="#8b5cf6" stroke-width="1"/>
                            <text x="540" y="467" font-size="10" fill="#94a3b8">2</text>
                            <text x="650" y="467" font-size="10" fill="#94a3b8">Engineering</text>
                            
                            <!-- Benefits List -->
                            <text x="660" y="500" font-size="13" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Key Benefits:</text>
                            <text x="490" y="525" font-size="11" fill="#94a3b8">‚ú® Simple table structure</text>
                            <text x="490" y="545" font-size="11" fill="#94a3b8">‚ú® Declarative queries (SQL)</text>
                        </svg>
                        <p class="image-caption">Codd transformed complex hierarchical databases into simple, intuitive table-based structures</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Practical Example: Before vs After Codd
                    </div>
                    
                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">‚ùå Before Codd (Hierarchical - IMS Style)</span>
                        </div>
                        <pre><code class="language-cobol">/* To find all employees in Sales department - Complex Navigation Required */

GET UNIQUE DEPARTMENT WHERE DEPT_NAME = 'SALES'
IF STATUS = OK THEN
    GET NEXT EMPLOYEE WITHIN DEPARTMENT
    WHILE STATUS = OK DO
        PROCESS EMPLOYEE RECORD
        GET NEXT EMPLOYEE WITHIN DEPARTMENT
    END-WHILE
END-IF

/* Problems:
   - Must understand physical structure
   - Procedural navigation required
   - Tightly coupled with storage
   - Hard to modify queries */</code></pre>
                    </div>

                    <div class="code-example" style="margin-top: 1rem;">
                        <div class="code-header">
                            <span class="code-title">‚úÖ After Codd (Relational - SQL)</span>
                        </div>
                        <pre><code class="language-sql">-- Same query - Simple and Declarative!

SELECT e.EmpID, e.Name, e.Salary
FROM Employees e
JOIN Departments d ON e.DeptID = d.DeptID
WHERE d.DeptName = 'Sales';

/* Benefits:
   - Declarative: Say WHAT you want, not HOW
   - Independent of physical storage
   - Easy to understand and modify
   - Database optimizer handles execution */</code></pre>
                    </div>

                    <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981;">
                        <p><strong>üéØ The Key Innovation:</strong> With Codd's relational model, you simply declare WHAT data you want using SQL. The database management system figures out HOW to retrieve it efficiently. This is called <strong>declarative programming</strong> versus the old <strong>procedural programming</strong> approach.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-trophy"></i>
                        E.F. Codd's Major Contributions
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Contribution</th>
                                    <th>Description</th>
                                    <th>Impact</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Relational Model (1970)</strong></td>
                                    <td>Proposed organizing data into tables (relations) with rows and columns, using mathematical set theory</td>
                                    <td>Foundation of all modern RDBMS systems like Oracle, MySQL, PostgreSQL</td>
                                </tr>
                                <tr>
                                    <td><strong>Codd's 12 Rules (1985)</strong></td>
                                    <td>Defined criteria for what qualifies as a true relational database management system</td>
                                    <td>Became the gold standard for evaluating RDBMS systems</td>
                                </tr>
                                <tr>
                                    <td><strong>Normalization Theory</strong></td>
                                    <td>Developed normal forms (1NF, 2NF, 3NF, BCNF) to eliminate data redundancy and anomalies</td>
                                    <td>Essential technique for designing efficient database schemas</td>
                                </tr>
                                <tr>
                                    <td><strong>Data Independence</strong></td>
                                    <td>Separated logical data structure from physical storage implementation</td>
                                    <td>Applications don't break when storage changes</td>
                                </tr>
                                <tr>
                                    <td><strong>Relational Algebra & Calculus</strong></td>
                                    <td>Provided mathematical foundation for database queries</td>
                                    <td>Led to development of SQL and query optimization</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why was Codd's relational model revolutionary compared to earlier database models?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Great question! Let me break down why it was truly revolutionary:</strong></p>
                                
                                <p><strong>1. Simplicity Through Tables:</strong></p>
                                <p>Earlier models like hierarchical (IMS) and network (CODASYL) databases required programmers to understand complex pointer structures and navigate through data physically. Codd's model used simple <strong>tables</strong> that anyone could understand - just rows and columns. Think of an Excel spreadsheet, but with mathematical rigor.</p>
                                
                                <p><strong>2. Data Independence:</strong></p>
                                <p>This was huge! In hierarchical systems, if you changed how data was stored physically (say, moved from tape to disk), you had to rewrite all your application code. Codd introduced <strong>logical-physical separation</strong>. Your queries look the same whether data is on SSD, magnetic disk, or distributed across servers.</p>
                                
                                <p><strong>3. Declarative Queries vs Procedural Navigation:</strong></p>
                                <p>Before Codd, you wrote procedural code: "Go to this record, follow this pointer, check this condition, loop through children..." With SQL (based on Codd's work), you just declare: <code>SELECT * FROM customers WHERE city='NYC'</code>. The DBMS figures out the best way to get it.</p>
                                
                                <p><strong>4. Mathematical Foundation:</strong></p>
                                <p>Codd based his model on <strong>set theory and first-order predicate logic</strong>. This mathematical rigor meant queries could be proven correct and optimized systematically.</p>
                                
                                <p><strong>5. Ad-hoc Queries:</strong></p>
                                <p>In the old days, every query required custom programming. Want to know "how many customers bought product X in March?" You'd need a programmer to write specific code. With relational databases, business users could write SQL queries themselves.</p>
                                
                                <p><strong>Real Example:</strong></p>
                                <p>At IBM, before Codd's model, generating a simple management report from IMS could take weeks of programming. After adopting SQL/relational systems, the same report could be written in minutes!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Did Codd invent SQL?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No, but his work directly led to SQL's creation!</strong></p>
                                
                                <p><strong>The Timeline:</strong></p>
                                <ul>
                                    <li><strong>1970:</strong> Codd published his relational model paper</li>
                                    <li><strong>1974:</strong> IBM researchers Donald Chamberlin and Raymond Boyce created <strong>SEQUEL</strong> (Structured English Query Language) based on Codd's work</li>
                                    <li><strong>1977:</strong> SEQUEL was renamed to <strong>SQL</strong> (Structured Query Language) due to trademark issues</li>
                                    <li><strong>1979:</strong> Oracle Corporation released the first commercial SQL RDBMS</li>
                                    <li><strong>1986:</strong> SQL became an ANSI standard</li>
                                </ul>
                                
                                <p><strong>Codd's Original Language:</strong></p>
                                <p>Codd actually proposed two formal languages:</p>
                                <ul>
                                    <li><strong>Relational Algebra:</strong> Procedural language using operations like SELECT, PROJECT, JOIN</li>
                                    <li><strong>Relational Calculus:</strong> Declarative language based on predicate logic</li>
                                </ul>
                                
                                <p>SQL was inspired by these concepts but made more user-friendly and English-like. Interestingly, <strong>Codd was critical of SQL</strong> because it violated some of his rules (like allowing duplicate rows, improper NULL handling, etc.).</p>
                                
                                <p><strong>Fun Fact:</strong> The original SEQUEL syntax was even more English-like: <code>SELECT name FROM employees WHERE salary > 50000</code> was written as <code>GET name FROM employees WHERE salary IS GREATER THAN 50000</code></p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why did IBM initially resist Codd's relational model?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is a fascinating business and technical story!</strong></p>
                                
                                <p><strong>Reason 1: Massive Investment in IMS</strong></p>
                                <p>IBM had spent enormous resources developing and marketing <strong>IMS (Information Management System)</strong>, their hierarchical database. It was hugely profitable and used by major corporations and government agencies. Adopting Codd's relational model would essentially be admitting their flagship product was obsolete.</p>
                                
                                <p><strong>Reason 2: Performance Concerns</strong></p>
                                <p>Hierarchical databases were hand-optimized for specific access patterns. They were FAST for predefined queries because navigation paths were hard-coded. IBM worried that relational databases, with their flexible ad-hoc queries, would be too slow. They questioned whether the query optimizer could compete with hand-tuned code.</p>
                                
                                <p><strong>Reason 3: Mathematical Complexity</strong></p>
                                <p>Many IBM executives and salespeople didn't understand the mathematical foundations (set theory, relational algebra). It seemed too academic and theoretical. They preferred "proven" technology.</p>
                                
                                <p><strong>Reason 4: Customer Lock-in</strong></p>
                                <p>IMS customers had invested heavily in applications. Migration would be expensive and painful. IBM feared losing customers during transition.</p>
                                
                                <p><strong>The Irony:</strong></p>
                                <p>While IBM delayed, <strong>Larry Ellison</strong> (founder of Oracle) read Codd's papers and immediately saw the potential. Oracle beat IBM to market with the first commercial relational database in 1979. IBM finally released DB2 in 1983, but Oracle had already captured significant market share.</p>
                                
                                <p><strong>Codd's Response:</strong></p>
                                <p>Frustrated with IBM's resistance, Codd published his <strong>12 Rules</strong> in 1985, essentially setting standards that even IBM's DB2 didn't fully meet at the time. It was his way of keeping the industry honest about what "relational" really meant.</p>
                                
                                <p><strong>Lesson:</strong> Sometimes established companies resist innovation, even from their own employees, because it threatens existing revenue streams. This is why disruptive technologies often come from startups!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What recognition did E.F. Codd receive for his work?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Codd received numerous prestigious honors:</strong></p>
                                
                                <p><strong>1. Turing Award (1981):</strong></p>
                                <p>Often called the "Nobel Prize of Computing," Codd received this for his fundamental and continuing contributions to the theory and practice of database management systems.</p>
                                
                                <p><strong>2. IBM Fellow (1976):</strong></p>
                                <p>IBM's highest technical honor, given to only a select few researchers who make extraordinary contributions.</p>
                                
                                <p><strong>3. Lasting Impact on Industry:</strong></p>
                                <ul>
                                    <li><strong>Trillion-dollar industry:</strong> The database market is now worth hundreds of billions annually</li>
                                    <li><strong>Universal adoption:</strong> Every major company uses relational databases</li>
                                    <li><strong>SQL dominance:</strong> SQL remains the most widely used database query language 50+ years later</li>
                                    <li><strong>Academic influence:</strong> Database courses worldwide teach Codd's relational model</li>
                                </ul>
                                
                                <p><strong>Quote from Turing Award Citation:</strong></p>
                                <blockquote>"For his fundamental and continuing contributions to the theory and practice of database management systems. He originated the relational approach to database management in a series of research papers published beginning in 1970. His paper 'A Relational Model of Data for Large Shared Data Banks' was a seminal work in the field of database systems."</blockquote>
                                
                                <p><strong>Modern Recognition:</strong></p>
                                <p>Today, every database professional learns about Codd in their education. Terms like "Codd's Rules," "Normalization," and "Relational Model" are fundamental to the field. His 1970 paper is one of the most cited computer science papers of all time.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Are Codd's principles still relevant with NoSQL and modern databases?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Absolutely, and here's why:</strong></p>
                                
                                <p><strong>1. Relational Databases Still Dominate:</strong></p>
                                <p>Despite NoSQL hype, relational databases (PostgreSQL, MySQL, Oracle, SQL Server) still power the vast majority of applications. According to DB-Engines, 7 of the top 10 databases are relational.</p>
                                
                                <p><strong>2. NoSQL Adds Relational Features:</strong></p>
                                <p>Interestingly, many NoSQL databases are adding SQL-like query languages:</p>
                                <ul>
                                    <li><strong>MongoDB:</strong> Added SQL queries, joins, and transactions</li>
                                    <li><strong>Cassandra:</strong> Uses CQL (Cassandra Query Language), similar to SQL</li>
                                    <li><strong>DynamoDB:</strong> Added PartiQL, a SQL-compatible query language</li>
                                </ul>
                                <p>Why? Because Codd's declarative query approach is simply more intuitive than programmatic data access!</p>
                                
                                <p><strong>3. Core Principles Transcend Technology:</strong></p>
                                <p>Codd's fundamental ideas remain valuable:</p>
                                <ul>
                                    <li><strong>Data Independence:</strong> Still critical in microservices and cloud architectures</li>
                                    <li><strong>Declarative Queries:</strong> Even NoSQL benefits from this approach</li>
                                    <li><strong>Normalization:</strong> Still prevents anomalies, even in document databases</li>
                                    <li><strong>Mathematical Rigor:</strong> Enables query optimization in any system</li>
                                </ul>
                                
                                <p><strong>4. NewSQL Movement:</strong></p>
                                <p>Modern distributed databases like Google Spanner, CockroachDB, and YugabyteDB combine:</p>
                                <ul>
                                    <li>Codd's relational model and SQL</li>
                                    <li>NoSQL's scalability and distribution</li>
                                    <li>ACID guarantees across distributed systems</li>
                                </ul>
                                
                                <p><strong>The Reality:</strong></p>
                                <p>NoSQL doesn't replace relational databases; it complements them for specific use cases (unstructured data, extreme scale, high write throughput). For most business applications requiring structured data, relationships, and transactions, Codd's relational model remains the gold standard.</p>
                                
                                <p><strong>Bottom Line:</strong> Codd didn't just create a database model; he established fundamental principles of data management that transcend specific technologies. That's why 50+ years later, we're still studying and applying his work!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Key Takeaways About E.F. Codd
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Aspect</th>
                                    <th>Details</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Full Name</strong></td>
                                    <td>Edgar Frank "Ted" Codd (1923-2003)</td>
                                </tr>
                                <tr>
                                    <td><strong>Title</strong></td>
                                    <td>Father of Relational Databases, IBM Fellow, Turing Award Winner</td>
                                </tr>
                                <tr>
                                    <td><strong>Key Publication</strong></td>
                                    <td>"A Relational Model of Data for Large Shared Data Banks" (1970)</td>
                                </tr>
                                <tr>
                                    <td><strong>Major Innovation</strong></td>
                                    <td>Replaced hierarchical/network databases with simple table-based relational model</td>
                                </tr>
                                <tr>
                                    <td><strong>Core Contributions</strong></td>
                                    <td>Relational Model, 12 Rules, Normalization Theory, Data Independence</td>
                                </tr>
                                <tr>
                                    <td><strong>Legacy</strong></td>
                                    <td>Foundation of all modern RDBMS (Oracle, MySQL, PostgreSQL, SQL Server)</td>
                                </tr>
                                <tr>
                                    <td><strong>Industry Impact</strong></td>
                                    <td>Enabled trillion-dollar database industry, SQL universal adoption</td>
                                </tr>
                                <tr>
                                    <td><strong>Current Relevance</strong></td>
                                    <td>Principles still fundamental; even NoSQL systems adopt relational concepts</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')" disabled>
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 31: What is the Relational Model? -->
            <div class="question-content" id="q31">
                <div class="question-header">
                    <h1 class="question-title">What is the Relational Model Proposed by E.F. Codd?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-brain"></i> Expert Level</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 12 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>The <strong>Relational Model</strong> is a database model proposed by <strong>E.F. Codd in 1970</strong> that represents data as a collection of <strong>relations (tables)</strong>. Each relation consists of <strong>tuples (rows)</strong> and <strong>attributes (columns)</strong>, where relationships between data are established through common attributes rather than physical pointers or links.</p>
                        
                        <p style="margin-top: 1rem;">At its core, the relational model is based on <strong>mathematical set theory</strong> and <strong>first-order predicate logic</strong>. It provides a <strong>declarative approach</strong> to data management where you specify <strong>what data you want</strong>, not <strong>how to retrieve it</strong>. This was revolutionary because it separated the logical view of data from its physical storage.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Principle:</strong> Data is organized into tables (relations) where each table represents an entity type, and relationships between entities are represented by matching values in columns (foreign keys) rather than physical links. This simple yet powerful concept transformed database management forever.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Relations/Tables</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Tuples/Rows</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Attributes/Columns</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Set Theory</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Data Independence</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Declarative Queries</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Analogy: Library System
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-book-open"></i> Understanding Relational Model Through a Library
                        </div>
                        
                        <p><strong>Imagine a traditional library before computers:</strong></p>
                        <p>Librarians maintained several card catalog drawers:</p>
                        <ul>
                            <li><strong>Books Catalog:</strong> Index cards for each book with title, author, ISBN</li>
                            <li><strong>Authors Catalog:</strong> Cards with author information</li>
                            <li><strong>Members Catalog:</strong> Cards for library members</li>
                            <li><strong>Borrowing Records:</strong> Cards tracking who borrowed which book</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>The Relational Model does exactly this, but digitally:</strong></p>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Books Table (Relation)</span>
                            </div>
                            <pre><code class="language-sql">Books Table:
+--------+--------------------------------+-------------+-----------+
| BookID | Title                          | AuthorID    | ISBN      |
+--------+--------------------------------+-------------+-----------+
| 1      | 1984                           | 101         | 978-0-452 |
| 2      | Animal Farm                    | 101         | 978-0-451 |
| 3      | To Kill a Mockingbird          | 102         | 978-0-061 |
+--------+--------------------------------+-------------+-----------+

Authors Table (Relation):
+-----------+----------------------+-------------+
| AuthorID  | AuthorName           | Country     |
+-----------+----------------------+-------------+
| 101       | George Orwell        | England     |
| 102       | Harper Lee           | USA         |
+-----------+----------------------+-------------+

Members Table (Relation):
+-----------+----------------------+------------------+
| MemberID  | MemberName           | JoinDate         |
+-----------+----------------------+------------------+
| 501       | John Smith           | 2023-01-15       |
| 502       | Sarah Johnson        | 2023-03-20       |
+-----------+----------------------+------------------+

Borrowings Table (Relation):
+--------------+-----------+--------+-------------+
| BorrowingID  | MemberID  | BookID | BorrowDate  |
+--------------+-----------+--------+-------------+
| 1            | 501       | 1      | 2024-11-01  |
| 2            | 502       | 3      | 2024-11-03  |
+--------------+-----------+--------+-------------+</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Notice the Key Concepts:</strong></p>
                        <ul>
                            <li><strong>Each table is independent:</strong> You can look at Books without knowing about Members</li>
                            <li><strong>Relationships through values:</strong> BookID in Borrowings links to BookID in Books (no physical pointers!)</li>
                            <li><strong>Query flexibility:</strong> "Find all books by George Orwell" or "Who borrowed 1984?" - easy to ask!</li>
                            <li><strong>No redundancy:</strong> Author information stored once, referenced many times</li>
                        </ul>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6;">
                            <p><strong>üéØ The Magic:</strong> To find "all books borrowed by John Smith," you simply specify WHAT you want, not HOW to navigate through card catalogs. The database figures out the optimal path!</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Visual Understanding: Relational Model Structure
                    </div>
                    <div class="image-container">
                        <svg width="900" height="650" viewBox="0 0 900 650">
                            <!-- Background -->
                            <rect width="900" height="650" fill="#1e293b"/>
                            
                            <!-- Title -->
                            <text x="450" y="35" font-size="26" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Relational Model Components</text>
                            
                            <!-- Main Relation (Table) Example -->
                            <text x="450" y="70" font-size="18" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Relation = Table with Rows and Columns</text>
                            
                            <!-- Table Header -->
                            <rect x="100" y="90" width="700" height="50" fill="#0ea5e9" opacity="0.3" stroke="#0ea5e9" stroke-width="3" rx="8"/>
                            <text x="150" y="122" font-size="14" fill="#cbd5e1" font-weight="bold">StudentID</text>
                            <text x="300" y="122" font-size="14" fill="#cbd5e1" font-weight="bold">Name</text>
                            <text x="480" y="122" font-size="14" fill="#cbd5e1" font-weight="bold">DeptID</text>
                            <text x="650" y="122" font-size="14" fill="#cbd5e1" font-weight="bold">Email</text>
                            
                            <!-- Attribute Labels -->
                            <text x="150" y="80" font-size="11" fill="#0ea5e9" font-style="italic">Attribute 1</text>
                            <text x="300" y="80" font-size="11" fill="#0ea5e9" font-style="italic">Attribute 2</text>
                            <text x="480" y="80" font-size="11" fill="#0ea5e9" font-style="italic">Attribute 3</text>
                            <text x="650" y="80" font-size="11" fill="#0ea5e9" font-style="italic">Attribute 4</text>
                            
                            <!-- Row 1 (Tuple) -->
                            <rect x="100" y="140" width="700" height="40" fill="#334155" stroke="#64748b" stroke-width="2" rx="4"/>
                            <text x="150" y="165" font-size="13" fill="#94a3b8">101</text>
                            <text x="300" y="165" font-size="13" fill="#94a3b8">Alice Johnson</text>
                            <text x="480" y="165" font-size="13" fill="#94a3b8">CS</text>
                            <text x="650" y="165" font-size="13" fill="#94a3b8">alice@uni.edu</text>
                            <text x="30" y="165" font-size="11" fill="#10b981" font-style="italic">Tuple 1</text>
                            
                            <!-- Row 2 (Tuple) -->
                            <rect x="100" y="180" width="700" height="40" fill="#334155" stroke="#64748b" stroke-width="2" rx="4"/>
                            <text x="150" y="205" font-size="13" fill="#94a3b8">102</text>
                            <text x="300" y="205" font-size="13" fill="#94a3b8">Bob Smith</text>
                            <text x="480" y="205" font-size="13" fill="#94a3b8">EE</text>
                            <text x="650" y="205" font-size="13" fill="#94a3b8">bob@uni.edu</text>
                            <text x="30" y="205" font-size="11" fill="#10b981" font-style="italic">Tuple 2</text>
                            
                            <!-- Row 3 (Tuple) -->
                            <rect x="100" y="220" width="700" height="40" fill="#334155" stroke="#64748b" stroke-width="2" rx="4"/>
                            <text x="150" y="245" font-size="13" fill="#94a3b8">103</text>
                            <text x="300" y="245" font-size="13" fill="#94a3b8">Carol White</text>
                            <text x="480" y="245" font-size="13" fill="#94a3b8">CS</text>
                            <text x="650" y="245" font-size="13" fill="#94a3b8">carol@uni.edu</text>
                            <text x="30" y="245" font-size="11" fill="#10b981" font-style="italic">Tuple 3</text>
                            
                            <!-- Degree Label -->
                            <path d="M 100 275 L 800 275" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowpurple)"/>
                            <text x="450" y="295" font-size="13" fill="#8b5cf6" text-anchor="middle" font-weight="bold">Degree = 4 (Number of Attributes/Columns)</text>
                            
                            <!-- Cardinality Label -->
                            <path d="M 85 90 L 85 260" stroke="#f59e0b" stroke-width="2" marker-end="url(#arroworange)"/>
                            <text x="40" y="180" font-size="13" fill="#f59e0b" text-anchor="middle" font-weight="bold" transform="rotate(-90 40 180)">Cardinality = 3 (Number of Tuples/Rows)</text>
                            
                            <!-- Key Components Explanation -->
                            <rect x="50" y="320" width="800" height="300" fill="rgba(14, 165, 233, 0.05)" stroke="#0ea5e9" stroke-width="2" rx="12"/>
                            <text x="450" y="350" font-size="20" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Core Components of Relational Model</text>
                            
                            <!-- Component 1 -->
                            <rect x="80" y="370" width="360" height="100" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="2" rx="8"/>
                            <text x="260" y="395" font-size="15" fill="#10b981" text-anchor="middle" font-weight="bold">üìä Relation (Table)</text>
                            <text x="100" y="420" font-size="11" fill="#94a3b8">‚Ä¢ Collection of related data</text>
                            <text x="100" y="438" font-size="11" fill="#94a3b8">‚Ä¢ Has unique name</text>
                            <text x="100" y="456" font-size="11" fill="#94a3b8">‚Ä¢ Represents an entity type</text>
                            
                            <!-- Component 2 -->
                            <rect x="460" y="370" width="360" height="100" fill="rgba(59, 130, 246, 0.1)" stroke="#3b82f6" stroke-width="2" rx="8"/>
                            <text x="640" y="395" font-size="15" fill="#3b82f6" text-anchor="middle" font-weight="bold">üìù Tuple (Row)</text>
                            <text x="480" y="420" font-size="11" fill="#94a3b8">‚Ä¢ Single record/instance</text>
                            <text x="480" y="438" font-size="11" fill="#94a3b8">‚Ä¢ Must be unique (no duplicates)</text>
                            <text x="480" y="456" font-size="11" fill="#94a3b8">‚Ä¢ Unordered (no fixed sequence)</text>
                            
                            <!-- Component 3 -->
                            <rect x="80" y="490" width="360" height="100" fill="rgba(139, 92, 246, 0.1)" stroke="#8b5cf6" stroke-width="2" rx="8"/>
                            <text x="260" y="515" font-size="15" fill="#8b5cf6" text-anchor="middle" font-weight="bold">üè∑Ô∏è Attribute (Column)</text>
                            <text x="100" y="540" font-size="11" fill="#94a3b8">‚Ä¢ Property/characteristic</text>
                            <text x="100" y="558" font-size="11" fill="#94a3b8">‚Ä¢ Has defined data type</text>
                            <text x="100" y="576" font-size="11" fill="#94a3b8">‚Ä¢ Domain defines valid values</text>
                            
                            <!-- Component 4 -->
                            <rect x="460" y="490" width="360" height="100" fill="rgba(234, 179, 8, 0.1)" stroke="#eab308" stroke-width="2" rx="8"/>
                            <text x="640" y="515" font-size="15" fill="#eab308" text-anchor="middle" font-weight="bold">üîë Key</text>
                            <text x="480" y="540" font-size="11" fill="#94a3b8">‚Ä¢ Uniquely identifies tuples</text>
                            <text x="480" y="558" font-size="11" fill="#94a3b8">‚Ä¢ Primary Key: main identifier</text>
                            <text x="480" y="576" font-size="11" fill="#94a3b8">‚Ä¢ Foreign Key: links relations</text>
                            
                            <defs>
                                <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#8b5cf6"/>
                                </marker>
                                <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#f59e0b"/>
                                </marker>
                            </defs>
                        </svg>
                        <p class="image-caption">The Relational Model organizes data into tables with well-defined structure and relationships</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Practical Example: E-commerce Relational Model
                    </div>
                    
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-shopping-bag"></i> Building an E-commerce Database
                        </div>
                        
                        <p><strong>Let's design a simple online shopping system using the Relational Model:</strong></p>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Creating Relations (Tables)</span>
                            </div>
                            <pre><code class="language-sql">-- Relation 1: Customers
CREATE TABLE Customers (
    CustomerID INT PRIMARY KEY,          -- Attribute (Primary Key)
    CustomerName VARCHAR(100) NOT NULL,  -- Attribute
    Email VARCHAR(100) UNIQUE,           -- Attribute with constraint
    City VARCHAR(50),                    -- Attribute
    RegistrationDate DATE                -- Attribute
);

-- Relation 2: Products
CREATE TABLE Products (
    ProductID INT PRIMARY KEY,
    ProductName VARCHAR(200) NOT NULL,
    CategoryID INT,
    Price DECIMAL(10, 2),
    StockQuantity INT CHECK (StockQuantity >= 0)
);

-- Relation 3: Categories
CREATE TABLE Categories (
    CategoryID INT PRIMARY KEY,
    CategoryName VARCHAR(100) UNIQUE,
    Description TEXT
);

-- Relation 4: Orders
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT,                      -- Foreign Key
    OrderDate DATE,
    TotalAmount DECIMAL(10, 2),
    Status VARCHAR(20),
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
);

-- Relation 5: OrderDetails (Junction Table)
CREATE TABLE OrderDetails (
    OrderDetailID INT PRIMARY KEY,
    OrderID INT,                         -- Foreign Key
    ProductID INT,                       -- Foreign Key
    Quantity INT,
    UnitPrice DECIMAL(10, 2),
    FOREIGN KEY (OrderID) REFERENCES Orders(OrderID),
    FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
);

-- Establishing relationship between Products and Categories
ALTER TABLE Products
ADD FOREIGN KEY (CategoryID) REFERENCES Categories(CategoryID);</code></pre>
                        </div>
                        
                        <p style="margin-top: 1.5rem;"><strong>Sample Data (Tuples):</strong></p>
                        <div class="code-example">
                            <pre><code class="language-sql">-- Inserting tuples into Customers relation
INSERT INTO Customers VALUES 
(1, 'John Doe', 'john@email.com', 'New York', '2024-01-15'),
(2, 'Jane Smith', 'jane@email.com', 'Los Angeles', '2024-02-20'),
(3, 'Mike Johnson', 'mike@email.com', 'Chicago', '2024-03-10');

-- Inserting tuples into Categories relation
INSERT INTO Categories VALUES
(10, 'Electronics', 'Electronic devices and gadgets'),
(20, 'Clothing', 'Apparel and fashion items'),
(30, 'Books', 'Physical and digital books');

-- Inserting tuples into Products relation
INSERT INTO Products VALUES
(101, 'Laptop', 10, 999.99, 50),
(102, 'Smartphone', 10, 699.99, 100),
(103, 'T-Shirt', 20, 29.99, 200),
(104, 'SQL Guide Book', 30, 49.99, 75);

-- Inserting tuples into Orders relation
INSERT INTO Orders VALUES
(1001, 1, '2024-11-01', 1049.98, 'Delivered'),
(1002, 2, '2024-11-03', 729.98, 'Shipped'),
(1003, 1, '2024-11-05', 49.99, 'Processing');

-- Inserting tuples into OrderDetails relation
INSERT INTO OrderDetails VALUES
(1, 1001, 101, 1, 999.99),    -- Order 1001: 1 Laptop
(2, 1001, 104, 1, 49.99),     -- Order 1001: 1 Book
(3, 1002, 102, 1, 699.99),    -- Order 1002: 1 Smartphone
(4, 1002, 103, 1, 29.99);     -- Order 1002: 1 T-Shirt</code></pre>
                        </div>
                        
                        <p style="margin-top: 1.5rem;"><strong>Querying the Relational Model (Declarative Approach):</strong></p>
                        <div class="code-example">
                            <pre><code class="language-sql">-- Query 1: Find all orders by John Doe
-- Notice: We DECLARE what we want, not HOW to navigate
SELECT o.OrderID, o.OrderDate, o.TotalAmount, o.Status
FROM Orders o
JOIN Customers c ON o.CustomerID = c.CustomerID
WHERE c.CustomerName = 'John Doe';

-- Query 2: Find all products in Electronics category
SELECT p.ProductName, p.Price, p.StockQuantity
FROM Products p
JOIN Categories cat ON p.CategoryID = cat.CategoryID
WHERE cat.CategoryName = 'Electronics';

-- Query 3: Get complete order details with product names
SELECT 
    c.CustomerName,
    o.OrderID,
    o.OrderDate,
    p.ProductName,
    od.Quantity,
    od.UnitPrice,
    (od.Quantity * od.UnitPrice) AS LineTotal
FROM Customers c
JOIN Orders o ON c.CustomerID = o.CustomerID
JOIN OrderDetails od ON o.OrderID = od.OrderID
JOIN Products p ON od.ProductID = p.ProductID
WHERE c.CustomerID = 1;

-- Result:
-- CustomerName | OrderID | OrderDate  | ProductName    | Quantity | UnitPrice | LineTotal
-- John Doe     | 1001    | 2024-11-01 | Laptop         | 1        | 999.99    | 999.99
-- John Doe     | 1001    | 2024-11-01 | SQL Guide Book | 1        | 49.99     | 49.99
-- John Doe     | 1003    | 2024-11-05 | SQL Guide Book | 1        | 49.99     | 49.99</code></pre>
                        </div>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981;">
                            <p><strong>‚ú® The Beauty of Relational Model:</strong></p>
                            <ul>
                                <li><strong>No physical pointers:</strong> Relationships established through matching values (CustomerID, ProductID)</li>
                                <li><strong>Declarative queries:</strong> We specified WHAT we wanted, database figured out HOW</li>
                                <li><strong>Data independence:</strong> Can change physical storage without affecting queries</li>
                                <li><strong>Flexibility:</strong> Can answer ANY question by combining relations differently</li>
                                <li><strong>No redundancy:</strong> Customer name stored once, referenced multiple times</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Key Characteristics of Relational Model
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Characteristic</th>
                                    <th>Description</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Relations (Tables)</strong></td>
                                    <td>Data organized in two-dimensional tables with rows and columns</td>
                                    <td>Customers table, Products table, Orders table</td>
                                </tr>
                                <tr>
                                    <td><strong>Tuples (Rows)</strong></td>
                                    <td>Each row represents a single record; tuples are unordered and unique</td>
                                    <td>One customer record: (1, 'John', 'john@email.com')</td>
                                </tr>
                                <tr>
                                    <td><strong>Attributes (Columns)</strong></td>
                                    <td>Properties that describe the entity; each has a defined data type</td>
                                    <td>CustomerID (INT), Name (VARCHAR), Email (VARCHAR)</td>
                                </tr>
                                <tr>
                                    <td><strong>Domain</strong></td>
                                    <td>Set of valid values that an attribute can hold</td>
                                    <td>Age domain: integers between 0 and 120</td>
                                </tr>
                                <tr>
                                    <td><strong>Primary Key</strong></td>
                                    <td>Attribute(s) that uniquely identify each tuple in a relation</td>
                                    <td>CustomerID uniquely identifies each customer</td>
                                </tr>
                                <tr>
                                    <td><strong>Foreign Key</strong></td>
                                    <td>Attribute that references primary key of another relation, establishing relationships</td>
                                    <td>CustomerID in Orders table references Customers table</td>
                                </tr>
                                <tr>
                                    <td><strong>Degree</strong></td>
                                    <td>Number of attributes (columns) in a relation</td>
                                    <td>Customers table with 5 columns has degree 5</td>
                                </tr>
                                <tr>
                                    <td><strong>Cardinality</strong></td>
                                    <td>Number of tuples (rows) in a relation at a given time</td>
                                    <td>Customers table with 1000 customers has cardinality 1000</td>
                                </tr>
                                <tr>
                                    <td><strong>Data Independence</strong></td>
                                    <td>Logical structure separated from physical storage; changes to storage don't affect applications</td>
                                    <td>Can change from HDD to SSD without rewriting queries</td>
                                </tr>
                                <tr>
                                    <td><strong>Declarative Queries</strong></td>
                                    <td>Specify WHAT data you want, not HOW to retrieve it (SQL-based)</td>
                                    <td>SELECT * FROM Customers WHERE City='NYC'</td>
                                </tr>
                                <tr>
                                    <td><strong>Set-Based Operations</strong></td>
                                    <td>Operations based on mathematical set theory (union, intersection, difference)</td>
                                    <td>JOIN, UNION, INTERSECT operations</td>
                                </tr>
                                <tr>
                                    <td><strong>Integrity Constraints</strong></td>
                                    <td>Rules that ensure data accuracy and consistency</td>
                                    <td>NOT NULL, UNIQUE, CHECK constraints, referential integrity</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does the Relational Model differ from Hierarchical and Network models?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is a crucial question to understand why the Relational Model was revolutionary!</strong></p>
                                
                                <p><strong>1. Hierarchical Model (1960s - IBM's IMS):</strong></p>
                                <ul>
                                    <li><strong>Structure:</strong> Tree-like structure with parent-child relationships</li>
                                    <li><strong>Navigation:</strong> Must traverse from root to reach any node</li>
                                    <li><strong>Relationships:</strong> One-to-many only (one parent, multiple children)</li>
                                    <li><strong>Limitation:</strong> Cannot represent many-to-many relationships naturally</li>
                                    <li><strong>Data Access:</strong> Procedural - must navigate physical paths</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code>Hierarchical Example:
           Company
          /      \
      Dept A    Dept B
      /    \        \
   Emp1  Emp2     Emp3

Problem: If an employee works for BOTH departments?
Can't represent without duplication!</code></pre>
                                </div>
                                
                                <p><strong>2. Network Model (1970s - CODASYL):</strong></p>
                                <ul>
                                    <li><strong>Structure:</strong> Graph structure with sets and owner-member relationships</li>
                                    <li><strong>Navigation:</strong> Follow pointer chains between records</li>
                                    <li><strong>Relationships:</strong> Many-to-many through sets</li>
                                    <li><strong>Limitation:</strong> Complex programming, tightly coupled with physical storage</li>
                                    <li><strong>Data Access:</strong> Still procedural, requires knowledge of network structure</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code>Network Example:
Student ‚Üê‚Üí Enrollment ‚Üê‚Üí Course
   ‚Üì                         ‚Üì
Professor ‚Üê‚Üí Teaching

Better than hierarchical, but:
- Complex pointer management
- Need to understand network structure
- Hard to modify structure</code></pre>
                                </div>
                                
                                <p><strong>3. Relational Model (1970 - Codd):</strong></p>
                                <ul>
                                    <li><strong>Structure:</strong> Simple tables (relations) with rows and columns</li>
                                    <li><strong>Navigation:</strong> No navigation! Declarative queries</li>
                                    <li><strong>Relationships:</strong> Through matching values (foreign keys), not pointers</li>
                                    <li><strong>Advantage:</strong> Flexible, easy to modify, data-independent</li>
                                    <li><strong>Data Access:</strong> Declarative SQL - say WHAT you want</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">Relational Example:

Students Table:          Enrollments Table:      Courses Table:
+----+--------+          +----+----+------+      +------+----------+
| ID | Name   |          | ID | SI | CID  |      | CID  | CName    |
+----+--------+          +----+----+------+      +------+----------+
| 1  | John   |          | 1  | 1  | C101 |      | C101 | Database |
| 2  | Sarah  |          | 2  | 1  | C102 |      | C102 | Networks |
+----+--------+          | 3  | 2  | C101 |      +------+----------+
                         +----+----+------+

-- Simple query to find John's courses:
SELECT c.CName
FROM Students s
JOIN Enrollments e ON s.ID = e.SI
JOIN Courses c ON e.CID = c.CID
WHERE s.Name = 'John';

No need to know physical structure or navigate pointers!</code></pre>
                                </div>
                                
                                <p><strong>Comparison Table:</strong></p>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Aspect</th>
                                                <th>Hierarchical</th>
                                                <th>Network</th>
                                                <th>Relational</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Structure</strong></td>
                                                <td>Tree</td>
                                                <td>Graph</td>
                                                <td>Tables</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Relationships</strong></td>
                                                <td>1:N only</td>
                                                <td>M:N with pointers</td>
                                                <td>M:N with values</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Query Language</strong></td>
                                                <td>Procedural</td>
                                                <td>Procedural</td>
                                                <td>Declarative (SQL)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Data Independence</strong></td>
                                                <td>None</td>
                                                <td>Low</td>
                                                <td>High</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Flexibility</strong></td>
                                                <td>Rigid</td>
                                                <td>Moderate</td>
                                                <td>Very Flexible</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Ease of Use</strong></td>
                                                <td>Difficult</td>
                                                <td>Complex</td>
                                                <td>Easy</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <p><strong>Key Advantage of Relational Model:</strong></p>
                                <blockquote>In hierarchical/network models, you must know HOW data is physically stored and navigate accordingly. In the relational model, you simply specify WHAT data you want using SQL, and the database engine figures out the optimal way to retrieve it. This <strong>data independence</strong> and <strong>declarative approach</strong> were game-changers!</blockquote>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the mathematical foundation behind the Relational Model?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Excellent question! Codd built the relational model on solid mathematical foundations:</strong></p>
                                
                                <p><strong>1. Set Theory:</strong></p>
                                <p>A relation is essentially a <strong>set of tuples</strong>. Key properties from set theory:</p>
                                <ul>
                                    <li><strong>No duplicates:</strong> A relation cannot have duplicate tuples (like mathematical sets)</li>
                                    <li><strong>Unordered:</strong> Tuples have no inherent order (sets are unordered collections)</li>
                                    <li><strong>Set operations:</strong> UNION, INTERSECTION, DIFFERENCE apply to relations</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Set operations on relations
-- UNION: Combine two relations
SELECT Name FROM Students_CS
UNION
SELECT Name FROM Students_EE;

-- INTERSECTION: Common tuples
SELECT Name FROM Students_CS
INTERSECT
SELECT Name FROM Students_EE;

-- DIFFERENCE: Tuples in first but not second
SELECT Name FROM Students_CS
EXCEPT
SELECT Name FROM Students_EE;</code></pre>
                                </div>
                                
                                <p><strong>2. First-Order Predicate Logic:</strong></p>
                                <p>Queries in the relational model can be expressed as logical predicates:</p>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">-- SQL Query:
SELECT Name FROM Students WHERE Age > 20;

-- Logical Expression:
{ s.Name | Student(s) ‚àß s.Age > 20 }

-- Read as: "The set of all Name values s.Name such that s is a Student AND s.Age > 20"

-- Another example:
SELECT s.Name FROM Students s, Enrollments e
WHERE s.StudentID = e.StudentID AND e.CourseID = 'CS101';

-- Logical Expression:
{ s.Name | ‚àÉe (Student(s) ‚àß Enrollment(e) ‚àß s.StudentID = e.StudentID ‚àß e.CourseID = 'CS101') }

-- Read as: "The set of all Name values such that there exists an enrollment e where..."</code></pre>
                                </div>
                                
                                <p><strong>3. Relational Algebra:</strong></p>
                                <p>Codd defined formal operations on relations:</p>
                                
                                <ul>
                                    <li><strong>SELECT (œÉ):</strong> Choose rows that satisfy a condition</li>
                                    <li><strong>PROJECT (œÄ):</strong> Choose specific columns</li>
                                    <li><strong>UNION (‚à™):</strong> Combine two relations</li>
                                    <li><strong>DIFFERENCE (‚àí):</strong> Tuples in first but not second</li>
                                    <li><strong>CARTESIAN PRODUCT (√ó):</strong> All combinations of tuples</li>
                                    <li><strong>JOIN (‚ãà):</strong> Combine relations based on condition</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code>-- Relational Algebra Example:
-- Find names of students enrolled in CS101

œÄName(œÉCourseID='CS101'(Students ‚ãà Enrollments))

Breaking it down:
1. Students ‚ãà Enrollments: Join students with enrollments
2. œÉCourseID='CS101'(...): Select only CS101 enrollments
3. œÄName(...): Project only the Name column

-- This algebraic expression can be optimized by the database!
-- For example, apply selection before join to reduce data processed.</code></pre>
                                </div>
                                
                                <p><strong>4. Relational Calculus:</strong></p>
                                <p>Alternative to relational algebra; more declarative:</p>
                                
                                <div class="code-example">
                                    <pre><code>-- Tuple Relational Calculus (TRC):
{ t | Student(t) ‚àß t.Age > 20 }

-- Domain Relational Calculus (DRC):
{ <name, age> | ‚àÉid (Student(id, name, age) ‚àß age > 20) }

-- SQL is actually based on Tuple Relational Calculus!
-- It's declarative: you specify WHAT, not HOW</code></pre>
                                </div>
                                
                                <p><strong>5. Cartesian Product and Domain:</strong></p>
                                <ul>
                                    <li><strong>Domain (D):</strong> Set of atomic values (e.g., integers, strings)</li>
                                    <li><strong>Relation:</strong> Subset of Cartesian product of domains</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code>Example:
Domain D1 = {1, 2, 3}          // StudentID domain
Domain D2 = {'Alice', 'Bob'}   // Name domain
Domain D3 = {18, 19, 20}       // Age domain

Cartesian Product D1 √ó D2 √ó D3:
All possible combinations:
(1, 'Alice', 18), (1, 'Alice', 19), (1, 'Alice', 20),
(1, 'Bob', 18), (1, 'Bob', 19), ... and so on

A Student relation is a SUBSET of this Cartesian product:
Student = {(1, 'Alice', 19), (2, 'Bob', 20), (3, 'Alice', 18)}

Not all combinations are valid - only those representing actual students!</code></pre>
                                </div>
                                
                                <p><strong>Why This Mathematical Foundation Matters:</strong></p>
                                <ul>
                                    <li><strong>Query Optimization:</strong> Algebraic expressions can be mathematically proven equivalent, enabling optimization</li>
                                    <li><strong>Correctness:</strong> Queries can be proven correct using logical proofs</li>
                                    <li><strong>Theoretical Completeness:</strong> Can express any computable query</li>
                                    <li><strong>Implementation Independence:</strong> Math doesn't care about physical storage</li>
                                </ul>
                                
                                <p><strong>Fun Fact:</strong> SQL is actually "weaker" than Codd's original relational calculus because SQL allows duplicate tuples (which violates set theory). Codd was actually critical of SQL for this reason! Pure relational model requires <code>SELECT DISTINCT</code> by default.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does the Relational Model ensure data integrity?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The Relational Model has built-in mechanisms to ensure data remains accurate and consistent:</strong></p>
                                
                                <p><strong>1. Entity Integrity:</strong></p>
                                <p>Every relation must have a <strong>primary key</strong>, and primary key values cannot be NULL.</p>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">CREATE TABLE Students (
    StudentID INT PRIMARY KEY,     -- Cannot be NULL or duplicate
    Name VARCHAR(100),
    Email VARCHAR(100)
);

-- This violates entity integrity:
INSERT INTO Students VALUES (NULL, 'John', 'john@email.com');  -- ERROR!

-- This also violates entity integrity:
INSERT INTO Students VALUES (1, 'Alice', 'alice@email.com');
INSERT INTO Students VALUES (1, 'Bob', 'bob@email.com');       -- ERROR! Duplicate key</code></pre>
                                </div>
                                
                                <p><strong>Why Entity Integrity Matters:</strong> Primary keys are used to identify tuples. If primary keys could be NULL or duplicate, you couldn't reliably identify specific records!</p>
                                
                                <p><strong>2. Referential Integrity:</strong></p>
                                <p>A <strong>foreign key</strong> value must either be NULL or match an existing primary key value in the referenced relation.</p>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT,
    OrderDate DATE,
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
);

-- Assuming Customer with ID=5 doesn't exist:
INSERT INTO Orders VALUES (101, 5, '2024-11-05');  -- ERROR!
-- Cannot reference non-existent customer

-- This is OK (NULL foreign key allowed):
INSERT INTO Orders VALUES (102, NULL, '2024-11-05');  -- SUCCESS

-- This is also OK if Customer ID=3 exists:
INSERT INTO Orders VALUES (103, 3, '2024-11-05');  -- SUCCESS</code></pre>
                                </div>
                                
                                <p><strong>Referential Integrity Actions:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- What happens when referenced record is deleted or updated?

CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT,
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
        ON DELETE CASCADE      -- Delete orders when customer deleted
        ON UPDATE CASCADE      -- Update orders when customer ID changes
);

-- Other options:
-- ON DELETE SET NULL       -- Set foreign key to NULL
-- ON DELETE SET DEFAULT    -- Set foreign key to default value
-- ON DELETE RESTRICT       -- Prevent deletion if references exist
-- ON DELETE NO ACTION      -- Same as RESTRICT</code></pre>
                                </div>
                                
                                <p><strong>3. Domain Integrity:</strong></p>
                                <p>Each attribute must have values from its defined domain (data type and constraints).</p>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">CREATE TABLE Employees (
    EmployeeID INT PRIMARY KEY,
    Name VARCHAR(100) NOT NULL,        -- Domain: non-null strings up to 100 chars
    Age INT CHECK (Age >= 18 AND Age <= 65),  -- Domain: integers 18-65
    Email VARCHAR(100) UNIQUE,         -- Domain: unique strings
    Salary DECIMAL(10,2) CHECK (Salary > 0),  -- Domain: positive decimals
    Department VARCHAR(50) DEFAULT 'General', -- Domain: strings with default
    HireDate DATE CHECK (HireDate <= CURRENT_DATE)  -- Domain: past dates only
);

-- These violate domain integrity:
INSERT INTO Employees VALUES (1, NULL, 25, 'a@e.com', 5000, 'IT', '2024-01-01');  
-- ERROR: Name cannot be NULL

INSERT INTO Employees VALUES (2, 'John', 15, 'j@e.com', 5000, 'IT', '2024-01-01');  
-- ERROR: Age < 18

INSERT INTO Employees VALUES (3, 'Alice', 30, 'a@e.com', -1000, 'IT', '2024-01-01');  
-- ERROR: Salary <= 0

INSERT INTO Employees VALUES (4, 'Bob', 25, 'b@e.com', 5000, 'IT', '2025-12-31');  
-- ERROR: HireDate in future</code></pre>
                                </div>
                                
                                <p><strong>4. User-Defined Integrity:</strong></p>
                                <p>Business rules specific to your application.</p>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Example: Student cannot enroll in more than 6 courses per semester

CREATE TRIGGER check_enrollment_limit
BEFORE INSERT ON Enrollments
FOR EACH ROW
BEGIN
    DECLARE course_count INT;
    
    SELECT COUNT(*) INTO course_count
    FROM Enrollments
    WHERE StudentID = NEW.StudentID
      AND Semester = NEW.Semester;
    
    IF course_count >= 6 THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Cannot enroll in more than 6 courses per semester';
    END IF;
END;

-- Example: Order total must match sum of line items

CREATE TRIGGER check_order_total
BEFORE UPDATE ON Orders
FOR EACH ROW
BEGIN
    DECLARE calculated_total DECIMAL(10,2);
    
    SELECT SUM(Quantity * UnitPrice) INTO calculated_total
    FROM OrderDetails
    WHERE OrderID = NEW.OrderID;
    
    IF ABS(NEW.TotalAmount - calculated_total) > 0.01 THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Order total does not match line items';
    END IF;
END;</code></pre>
                                </div>
                                
                                <p><strong>5. Key Constraints:</strong></p>
                                <ul>
                                    <li><strong>PRIMARY KEY:</strong> Unique identifier, not NULL</li>
                                    <li><strong>UNIQUE:</strong> No duplicates allowed, but NULL permitted</li>
                                    <li><strong>FOREIGN KEY:</strong> Must reference existing value or be NULL</li>
                                </ul>
                                
                                <p><strong>6. Attribute Constraints:</strong></p>
                                <ul>
                                    <li><strong>NOT NULL:</strong> Attribute must have a value</li>
                                    <li><strong>DEFAULT:</strong> Specifies default value if none provided</li>
                                    <li><strong>CHECK:</strong> Value must satisfy boolean expression</li>
                                </ul>
                                
                                <p><strong>Summary - Layers of Data Integrity:</strong></p>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Integrity Type</th>
                                                <th>Purpose</th>
                                                <th>Enforced By</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Entity Integrity</strong></td>
                                                <td>Ensure each tuple can be uniquely identified</td>
                                                <td>PRIMARY KEY constraint</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Referential Integrity</strong></td>
                                                <td>Ensure relationships between tables remain valid</td>
                                                <td>FOREIGN KEY constraint</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Domain Integrity</strong></td>
                                                <td>Ensure values are valid for their data type</td>
                                                <td>Data types, CHECK, NOT NULL, UNIQUE, DEFAULT</td>
                                            </tr>
                                            <tr>
                                                <td><strong>User-Defined Integrity</strong></td>
                                                <td>Enforce business rules specific to application</td>
                                                <td>Triggers, stored procedures, application logic</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <p><strong>The Power of Declarative Constraints:</strong></p>
                                <p>Unlike hierarchical/network models where data integrity had to be enforced in application code, the relational model allows you to <strong>declare constraints</strong> once in the database schema. The DBMS automatically enforces them for ALL applications. This prevents bugs and ensures consistency!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 32: Main Components of Relational Model -->
            <div class="question-content" id="q32">
                <div class="question-header">
                    <h1 class="question-title">What are the Main Components of the Relational Model?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-brain"></i> Expert Level</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>The Relational Model, as proposed by E.F. Codd, consists of <strong>three fundamental components</strong> that work together to provide a complete database management system:</p>
                        
                        <ol style="margin-top: 1rem; line-height: 2;">
                            <li><strong>Structure Component:</strong> How data is organized and represented (relations/tables)</li>
                            <li><strong>Integrity Component:</strong> Rules and constraints that ensure data accuracy and consistency</li>
                            <li><strong>Manipulation Component:</strong> Operations for querying and modifying data</li>
                        </ol>
                        
                        <p style="margin-top: 1rem;">These three components form the complete foundation of relational database systems. Think of them as the "what," "how," and "rules" of data management - <strong>Structure</strong> defines WHAT data looks like, <strong>Manipulation</strong> defines HOW to work with it, and <strong>Integrity</strong> defines the RULES that must always be followed.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Structure</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Integrity</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Manipulation</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Relations</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Constraints</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Operations</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Analogy: Building Construction
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-building"></i> Understanding Components Through Construction
                        </div>
                        
                        <p><strong>Think of the Relational Model like constructing a building:</strong></p>
                        
                        <p><strong>1. Structure (The Blueprint):</strong></p>
                        <ul>
                            <li>Defines the <strong>layout</strong> - where rooms are, how many floors</li>
                            <li>In databases: Tables, columns, rows, data types</li>
                            <li><em>Example:</em> "We have an Employees table with ID, Name, Salary columns"</li>
                        </ul>
                        
                        <p><strong>2. Integrity (Building Codes & Safety Rules):</strong></p>
                        <ul>
                            <li>Enforces <strong>standards</strong> - materials must meet codes, no shortcuts</li>
                            <li>In databases: Constraints, keys, validation rules</li>
                            <li><em>Example:</em> "Salary cannot be negative, EmployeeID must be unique"</li>
                        </ul>
                        
                        <p><strong>3. Manipulation (Tools & Workers):</strong></p>
                        <ul>
                            <li>Provides <strong>methods</strong> to build, modify, inspect the building</li>
                            <li>In databases: SQL queries, insert/update/delete operations</li>
                            <li><em>Example:</em> "SELECT all employees earning over $50,000"</li>
                        </ul>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6;">
                            <p><strong>üéØ Key Insight:</strong> Just as a building needs all three - a blueprint (structure), safety codes (integrity), and construction tools (manipulation) - a relational database needs all three components working together. Remove any one, and the system falls apart!</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Visual Understanding: Three Components
                    </div>
                    <div class="image-container">
                        <svg width="900" height="700" viewBox="0 0 900 700">
                            <!-- Background -->
                            <rect width="900" height="700" fill="#1e293b"/>
                            
                            <!-- Title -->
                            <text x="450" y="35" font-size="26" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Three Components of Relational Model</text>
                            
                            <!-- Component 1: Structure -->
                            <rect x="50" y="70" width="800" height="180" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="3" rx="12"/>
                            <text x="450" y="105" font-size="22" fill="#10b981" text-anchor="middle" font-weight="bold">1Ô∏è‚É£ STRUCTURE Component</text>
                            <text x="450" y="130" font-size="14" fill="#cbd5e1" text-anchor="middle" font-style="italic">"How data is organized and represented"</text>
                            
                            <!-- Structure Details -->
                            <rect x="80" y="145" width="230" height="85" fill="#334155" stroke="#10b981" stroke-width="2" rx="8"/>
                            <text x="195" y="170" font-size="13" fill="#10b981" text-anchor="middle" font-weight="bold">Relations (Tables)</text>
                            <text x="100" y="190" font-size="11" fill="#94a3b8">‚Ä¢ Two-dimensional tables</text>
                            <text x="100" y="206" font-size="11" fill="#94a3b8">‚Ä¢ Named entities</text>
                            <text x="100" y="222" font-size="11" fill="#94a3b8">‚Ä¢ Set of tuples</text>
                            
                            <rect x="330" y="145" width="230" height="85" fill="#334155" stroke="#10b981" stroke-width="2" rx="8"/>
                            <text x="445" y="170" font-size="13" fill="#10b981" text-anchor="middle" font-weight="bold">Attributes (Columns)</text>
                            <text x="350" y="190" font-size="11" fill="#94a3b8">‚Ä¢ Properties of entity</text>
                            <text x="350" y="206" font-size="11" fill="#94a3b8">‚Ä¢ Defined data type</text>
                            <text x="350" y="222" font-size="11" fill="#94a3b8">‚Ä¢ Domain specification</text>
                            
                            <rect x="580" y="145" width="230" height="85" fill="#334155" stroke="#10b981" stroke-width="2" rx="8"/>
                            <text x="695" y="170" font-size="13" fill="#10b981" text-anchor="middle" font-weight="bold">Tuples (Rows)</text>
                            <text x="600" y="190" font-size="11" fill="#94a3b8">‚Ä¢ Individual records</text>
                            <text x="600" y="206" font-size="11" fill="#94a3b8">‚Ä¢ Unique instances</text>
                            <text x="600" y="222" font-size="11" fill="#94a3b8">‚Ä¢ Unordered collection</text>
                            
                            <!-- Component 2: Integrity -->
                            <rect x="50" y="270" width="800" height="180" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="3" rx="12"/>
                            <text x="450" y="305" font-size="22" fill="#ef4444" text-anchor="middle" font-weight="bold">2Ô∏è‚É£ INTEGRITY Component</text>
                            <text x="450" y="330" font-size="14" fill="#cbd5e1" text-anchor="middle" font-style="italic">"Rules ensuring data accuracy and consistency"</text>
                            
                            <!-- Integrity Details -->
                            <rect x="80" y="345" width="230" height="85" fill="#334155" stroke="#ef4444" stroke-width="2" rx="8"/>
                            <text x="195" y="370" font-size="13" fill="#ef4444" text-anchor="middle" font-weight="bold">Entity Integrity</text>
                            <text x="100" y="390" font-size="11" fill="#94a3b8">‚Ä¢ Primary key NOT NULL</text>
                            <text x="100" y="406" font-size="11" fill="#94a3b8">‚Ä¢ Unique identification</text>
                            <text x="100" y="422" font-size="11" fill="#94a3b8">‚Ä¢ No duplicates</text>
                            
                            <rect x="330" y="345" width="230" height="85" fill="#334155" stroke="#ef4444" stroke-width="2" rx="8"/>
                            <text x="445" y="370" font-size="13" fill="#ef4444" text-anchor="middle" font-weight="bold">Referential Integrity</text>
                            <text x="350" y="390" font-size="11" fill="#94a3b8">‚Ä¢ Foreign keys valid</text>
                            <text x="350" y="406" font-size="11" fill="#94a3b8">‚Ä¢ Relationship consistency</text>
                            <text x="350" y="422" font-size="11" fill="#94a3b8">‚Ä¢ CASCADE actions</text>
                            
                            <rect x="580" y="345" width="230" height="85" fill="#334155" stroke="#ef4444" stroke-width="2" rx="8"/>
                            <text x="695" y="370" font-size="13" fill="#ef4444" text-anchor="middle" font-weight="bold">Domain Integrity</text>
                            <text x="600" y="390" font-size="11" fill="#94a3b8">‚Ä¢ Data type constraints</text>
                            <text x="600" y="406" font-size="11" fill="#94a3b8">‚Ä¢ CHECK constraints</text>
                            <text x="600" y="422" font-size="11" fill="#94a3b8">‚Ä¢ Valid value ranges</text>
                            
                            <!-- Component 3: Manipulation -->
                            <rect x="50" y="470" width="800" height="180" fill="rgba(59, 130, 246, 0.1)" stroke="#3b82f6" stroke-width="3" rx="12"/>
                            <text x="450" y="505" font-size="22" fill="#3b82f6" text-anchor="middle" font-weight="bold">3Ô∏è‚É£ MANIPULATION Component</text>
                            <text x="450" y="530" font-size="14" fill="#cbd5e1" text-anchor="middle" font-style="italic">"Operations for querying and modifying data"</text>
                            
                            <!-- Manipulation Details -->
                            <rect x="80" y="545" width="230" height="85" fill="#334155" stroke="#3b82f6" stroke-width="2" rx="8"/>
                            <text x="195" y="570" font-size="13" fill="#3b82f6" text-anchor="middle" font-weight="bold">Relational Algebra</text>
                            <text x="100" y="590" font-size="11" fill="#94a3b8">‚Ä¢ SELECT (œÉ)</text>
                            <text x="100" y="606" font-size="11" fill="#94a3b8">‚Ä¢ PROJECT (œÄ)</text>
                            <text x="100" y="622" font-size="11" fill="#94a3b8">‚Ä¢ JOIN (‚ãà), UNION (‚à™)</text>
                            
                            <rect x="330" y="545" width="230" height="85" fill="#334155" stroke="#3b82f6" stroke-width="2" rx="8"/>
                            <text x="445" y="570" font-size="13" fill="#3b82f6" text-anchor="middle" font-weight="bold">Relational Calculus</text>
                            <text x="350" y="590" font-size="11" fill="#94a3b8">‚Ä¢ Tuple calculus</text>
                            <text x="350" y="606" font-size="11" fill="#94a3b8">‚Ä¢ Domain calculus</text>
                            <text x="350" y="622" font-size="11" fill="#94a3b8">‚Ä¢ Declarative queries</text>
                            
                            <rect x="580" y="545" width="230" height="85" fill="#334155" stroke="#3b82f6" stroke-width="2" rx="8"/>
                            <text x="695" y="570" font-size="13" fill="#3b82f6" text-anchor="middle" font-weight="bold">SQL Language</text>
                            <text x="600" y="590" font-size="11" fill="#94a3b8">‚Ä¢ SELECT, INSERT</text>
                            <text x="600" y="606" font-size="11" fill="#94a3b8">‚Ä¢ UPDATE, DELETE</text>
                            <text x="600" y="622" font-size="11" fill="#94a3b8">‚Ä¢ DDL & DML commands</text>
                            
                            <!-- Connection Lines -->
                            <path d="M 450 665 L 450 680" stroke="#0ea5e9" stroke-width="3"/>
                            <circle cx="450" cy="685" r="5" fill="#0ea5e9"/>
                            <text x="450" y="705" font-size="14" fill="#0ea5e9" text-anchor="middle" font-weight="bold">All Three Work Together!</text>
                        </svg>
                        <p class="image-caption">The three components of the Relational Model work in harmony to provide complete database functionality</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Practical Example: Complete Component Demonstration
                    </div>
                    
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-university"></i> University Database System
                        </div>
                        
                        <p><strong>Let's see all three components in action with a complete example:</strong></p>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">COMPONENT 1: STRUCTURE - Defining Tables</span>
                            </div>
                            <pre><code class="language-sql">-- Structure Component: Creating Relations (Tables)

-- Students Relation
CREATE TABLE Students (
    StudentID INT,              -- Attribute: Integer type
    StudentName VARCHAR(100),   -- Attribute: Variable character string
    Email VARCHAR(100),         -- Attribute: Email address
    DeptID INT,                 -- Attribute: Department reference
    EnrollmentDate DATE         -- Attribute: Date type
);

-- Departments Relation
CREATE TABLE Departments (
    DeptID INT,
    DeptName VARCHAR(50),
    BuildingName VARCHAR(50),
    HOD_Name VARCHAR(100)
);

-- Enrollments Relation (Many-to-Many relationship)
CREATE TABLE Enrollments (
    EnrollmentID INT,
    StudentID INT,
    CourseID INT,
    Semester VARCHAR(20),
    Grade CHAR(2)
);

-- Courses Relation
CREATE TABLE Courses (
    CourseID INT,
    CourseName VARCHAR(100),
    Credits INT,
    DeptID INT
);

/* 
STRUCTURE defines:
‚úì What tables exist
‚úì What columns each table has
‚úì What data types are used
‚úì How entities are organized
*/</code></pre>
                        </div>
                        
                        <div class="code-example" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span class="code-title">COMPONENT 2: INTEGRITY - Adding Constraints</span>
                            </div>
                            <pre><code class="language-sql">-- Integrity Component: Enforcing Rules and Constraints

-- Adding Entity Integrity (Primary Keys)
ALTER TABLE Students 
ADD PRIMARY KEY (StudentID);

ALTER TABLE Departments 
ADD PRIMARY KEY (DeptID);

ALTER TABLE Courses 
ADD PRIMARY KEY (CourseID);

ALTER TABLE Enrollments 
ADD PRIMARY KEY (EnrollmentID);

-- Adding Referential Integrity (Foreign Keys)
ALTER TABLE Students
ADD FOREIGN KEY (DeptID) REFERENCES Departments(DeptID)
ON DELETE RESTRICT
ON UPDATE CASCADE;

ALTER TABLE Enrollments
ADD FOREIGN KEY (StudentID) REFERENCES Students(StudentID)
ON DELETE CASCADE,
ADD FOREIGN KEY (CourseID) REFERENCES Courses(CourseID)
ON DELETE CASCADE;

ALTER TABLE Courses
ADD FOREIGN KEY (DeptID) REFERENCES Departments(DeptID);

-- Adding Domain Integrity (Constraints)
ALTER TABLE Students
MODIFY StudentName VARCHAR(100) NOT NULL,
MODIFY Email VARCHAR(100) UNIQUE NOT NULL,
ADD CHECK (Email LIKE '%@%.%');

ALTER TABLE Courses
ADD CHECK (Credits BETWEEN 1 AND 6);

ALTER TABLE Enrollments
ADD CHECK (Grade IN ('A', 'B', 'C', 'D', 'F', 'W', 'I')),
ADD CHECK (Semester IN ('Fall', 'Spring', 'Summer'));

/* 
INTEGRITY ensures:
‚úì Every student has unique ID
‚úì Email addresses are valid and unique
‚úì Students can't enroll in non-existent courses
‚úì Grades are from valid set only
‚úì Credits are reasonable (1-6)
‚úì When student deleted, enrollments also deleted
*/</code></pre>
                        </div>
                        
                        <div class="code-example" style="margin-top: 1rem;">
                            <div class="code-header">
                                <span class="code-title">COMPONENT 3: MANIPULATION - Querying Data</span>
                            </div>
                            <pre><code class="language-sql">-- Manipulation Component: Working with Data

-- 1. RELATIONAL ALGEBRA: Selection (œÉ)
-- Find all Computer Science students
SELECT * 
FROM Students s
JOIN Departments d ON s.DeptID = d.DeptID
WHERE d.DeptName = 'Computer Science';

-- 2. RELATIONAL ALGEBRA: Projection (œÄ)
-- Get only names and emails
SELECT StudentName, Email
FROM Students;

-- 3. RELATIONAL ALGEBRA: Join (‚ãà)
-- Find students with their department names
SELECT s.StudentID, s.StudentName, d.DeptName
FROM Students s
INNER JOIN Departments d ON s.DeptID = d.DeptID;

-- 4. COMPLEX QUERY: Multiple operations combined
-- Find all students enrolled in Database course with grade A
SELECT 
    s.StudentID,
    s.StudentName,
    c.CourseName,
    e.Grade,
    e.Semester
FROM Students s
JOIN Enrollments e ON s.StudentID = e.StudentID
JOIN Courses c ON e.CourseID = c.CourseID
WHERE c.CourseName = 'Database Systems'
  AND e.Grade = 'A';

-- 5. AGGREGATION: Count students per department
SELECT 
    d.DeptName,
    COUNT(s.StudentID) AS TotalStudents
FROM Departments d
LEFT JOIN Students s ON d.DeptID = s.DeptID
GROUP BY d.DeptName;

-- 6. INSERT Operation
INSERT INTO Students VALUES 
(101, 'Alice Johnson', 'alice@university.edu', 1, '2024-09-01');

-- 7. UPDATE Operation
UPDATE Students
SET Email = 'alice.johnson@university.edu'
WHERE StudentID = 101;

-- 8. DELETE Operation
DELETE FROM Enrollments
WHERE StudentID = 101 AND Grade = 'W';

/* 
MANIPULATION provides:
‚úì Query data (SELECT with WHERE, JOIN, GROUP BY)
‚úì Insert new records (INSERT)
‚úì Update existing data (UPDATE)
‚úì Delete records (DELETE)
‚úì Aggregate and analyze (COUNT, SUM, AVG)
‚úì Complex multi-table queries
*/</code></pre>
                        </div>
                        
                        <div class="highlight-box" style="margin-top: 1.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981;">
                            <p><strong>üéØ Notice How All Three Work Together:</strong></p>
                            <ul>
                                <li><strong>Structure</strong> created the tables and defined their schema</li>
                                <li><strong>Integrity</strong> added constraints ensuring data remains valid</li>
                                <li><strong>Manipulation</strong> allowed us to query and modify data declaratively</li>
                            </ul>
                            <p style="margin-top: 0.5rem;">Remove any component, and the system is incomplete!</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Detailed Breakdown of Components
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Component</th>
                                    <th>Sub-Elements</th>
                                    <th>Purpose</th>
                                    <th>SQL Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td rowspan="5"><strong>STRUCTURE</strong><br/>(Data Organization)</td>
                                    <td>Relations/Tables</td>
                                    <td>Organized collection of data</td>
                                    <td><code>CREATE TABLE Students</code></td>
                                </tr>
                                <tr>
                                    <td>Attributes/Columns</td>
                                    <td>Properties of entities</td>
                                    <td><code>StudentID INT, Name VARCHAR(100)</code></td>
                                </tr>
                                <tr>
                                    <td>Tuples/Rows</td>
                                    <td>Individual records</td>
                                    <td><code>INSERT INTO Students VALUES(...)</code></td>
                                </tr>
                                <tr>
                                    <td>Domains</td>
                                    <td>Valid value sets for attributes</td>
                                    <td><code>Age INT (domain: 0-120)</code></td>
                                </tr>
                                <tr>
                                    <td>Schema</td>
                                    <td>Overall database structure</td>
                                    <td>Table definitions, relationships</td>
                                </tr>
                                <tr>
                                    <td rowspan="5"><strong>INTEGRITY</strong><br/>(Data Validation)</td>
                                    <td>Entity Integrity</td>
                                    <td>Primary keys must be unique and NOT NULL</td>
                                    <td><code>PRIMARY KEY (StudentID)</code></td>
                                </tr>
                                <tr>
                                    <td>Referential Integrity</td>
                                    <td>Foreign keys must reference valid records</td>
                                    <td><code>FOREIGN KEY (DeptID) REFERENCES...</code></td>
                                </tr>
                                <tr>
                                    <td>Domain Integrity</td>
                                    <td>Values must conform to data types and constraints</td>
                                    <td><code>CHECK (Age >= 18)</code></td>
                                </tr>
                                <tr>
                                    <td>Key Constraints</td>
                                    <td>UNIQUE, NOT NULL rules</td>
                                    <td><code>Email VARCHAR(100) UNIQUE NOT NULL</code></td>
                                </tr>
                                <tr>
                                    <td>User-Defined Rules</td>
                                    <td>Business logic constraints</td>
                                    <td>Triggers, stored procedures</td>
                                </tr>
                                <tr>
                                    <td rowspan="6"><strong>MANIPULATION</strong><br/>(Data Operations)</td>
                                    <td>Selection (œÉ)</td>
                                    <td>Choose rows meeting criteria</td>
                                    <td><code>SELECT * WHERE Age > 20</code></td>
                                </tr>
                                <tr>
                                    <td>Projection (œÄ)</td>
                                    <td>Choose specific columns</td>
                                    <td><code>SELECT Name, Email FROM...</code></td>
                                </tr>
                                <tr>
                                    <td>Join (‚ãà)</td>
                                    <td>Combine related tables</td>
                                    <td><code>FROM Students JOIN Departments ON...</code></td>
                                </tr>
                                <tr>
                                    <td>Set Operations</td>
                                    <td>UNION, INTERSECT, EXCEPT</td>
                                    <td><code>SELECT... UNION SELECT...</code></td>
                                </tr>
                                <tr>
                                    <td>Data Modification</td>
                                    <td>INSERT, UPDATE, DELETE operations</td>
                                    <td><code>UPDATE Students SET...</code></td>
                                </tr>
                                <tr>
                                    <td>Aggregation</td>
                                    <td>COUNT, SUM, AVG, GROUP BY</td>
                                    <td><code>SELECT COUNT(*) GROUP BY...</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why did Codd separate these three components instead of treating them as one?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Excellent question! This separation was deliberate and brilliant. Here's why:</strong></p>
                                
                                <p><strong>1. Separation of Concerns:</strong></p>
                                <p>Each component addresses a different aspect of database management:</p>
                                <ul>
                                    <li><strong>Structure</strong> answers: "What does the data look like?"</li>
                                    <li><strong>Integrity</strong> answers: "What rules must the data follow?"</li>
                                    <li><strong>Manipulation</strong> answers: "How do we work with the data?"</li>
                                </ul>
                                
                                <p><strong>2. Independent Evolution:</strong></p>
                                <p>You can change one component without affecting others:</p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Change STRUCTURE: Add new column
ALTER TABLE Students ADD COLUMN Phone VARCHAR(15);
-- Existing MANIPULATION queries still work!
-- INTEGRITY constraints remain valid!

-- Change INTEGRITY: Add new constraint
ALTER TABLE Students ADD CHECK (Phone LIKE '+%');
-- STRUCTURE unchanged!
-- MANIPULATION unchanged!

-- Change MANIPULATION: New query operation
CREATE VIEW GoodStudents AS 
SELECT * FROM Students WHERE GPA > 3.5;
-- STRUCTURE unchanged!
-- INTEGRITY still enforced!</code></pre>
                                </div>
                                
                                <p><strong>3. Flexibility in Implementation:</strong></p>
                                <p>Different RDBMS systems can implement components differently while maintaining compatibility:</p>
                                <ul>
                                    <li><strong>Structure:</strong> PostgreSQL might store tables differently than MySQL</li>
                                    <li><strong>Integrity:</strong> Oracle might check constraints at different times than SQL Server</li>
                                    <li><strong>Manipulation:</strong> Different query optimizers, but same SQL syntax</li>
                                </ul>
                                
                                <p><strong>4. Historical Context - Before Separation:</strong></p>
                                <p>In hierarchical/network databases, everything was mixed together:</p>
                                <div class="code-example">
                                    <pre><code class="language-cobol">* In IMS (Hierarchical), structure, integrity, and manipulation were tangled:
ESTABLISH DEPARTMENT-EMPLOYEE-LINK.  * Structure + Manipulation together
CHECK-EMPLOYEE-AGE-VALID.             * Integrity in application code
NAVIGATE-TO-NEXT-EMPLOYEE.            * Manipulation tightly coupled to structure

* If you changed the structure, you had to rewrite:
- Navigation code (manipulation)
- Validation logic (integrity)
- Everything!</code></pre>
                                </div>
                                
                                <p><strong>5. Declarative vs Procedural:</strong></p>
                                <p>Separation allowed <strong>declarative</strong> specification:</p>
                                <ul>
                                    <li><strong>Structure:</strong> Declare table schema once</li>
                                    <li><strong>Integrity:</strong> Declare constraints once</li>
                                    <li><strong>Manipulation:</strong> Declare what you want (DBMS figures out how)</li>
                                </ul>
                                
                                <p><strong>6. Division of Responsibilities:</strong></p>
                                <ul>
                                    <li><strong>Database Designers:</strong> Focus on structure</li>
                                    <li><strong>Business Analysts:</strong> Define integrity rules</li>
                                    <li><strong>Developers/Users:</strong> Use manipulation operations</li>
                                </ul>
                                
                                <p><strong>Real-World Analogy:</strong></p>
                                <p>Think of a library:</p>
                                <ul>
                                    <li><strong>Structure:</strong> How books are organized (Dewey Decimal System)</li>
                                    <li><strong>Integrity:</strong> Rules (no more than 5 books per person, return in 2 weeks)</li>
                                    <li><strong>Manipulation:</strong> Operations (check out, return, search for books)</li>
                                </ul>
                                <p>You can change the organization system without changing checkout rules. You can add new rules without reorganizing books. You can add new services (reserve online) without changing either!</p>
                                
                                <p><strong>The Genius:</strong> This separation is what makes relational databases so powerful and long-lasting. Even 50+ years later, this architectural principle remains valid!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you have a database with structure and manipulation but without integrity?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Technically yes, but it would be a disaster! Let me explain why integrity is crucial:</strong></p>
                                
                                <p><strong>What Would Happen Without Integrity:</strong></p>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Scenario: Students and Enrollments tables WITHOUT constraints

CREATE TABLE Students (
    StudentID INT,
    Name VARCHAR(100),
    Email VARCHAR(100)
    -- NO PRIMARY KEY!
    -- NO UNIQUE constraint on Email!
);

CREATE TABLE Enrollments (
    EnrollmentID INT,
    StudentID INT,
    CourseID INT
    -- NO FOREIGN KEY constraint!
);

-- Now chaos ensues:

-- Problem 1: Duplicate Students
INSERT INTO Students VALUES (1, 'Alice', 'alice@email.com');
INSERT INTO Students VALUES (1, 'Alice', 'alice@email.com');  -- Allowed!
INSERT INTO Students VALUES (1, 'Bob', 'bob@email.com');      -- Same ID!
-- Which Alice is the real one? Which student does ID 1 refer to?

-- Problem 2: NULL Primary Keys
INSERT INTO Students VALUES (NULL, 'Charlie', 'charlie@email.com');
-- How do you identify this student? Can't reference them!

-- Problem 3: Invalid References (Orphaned Records)
INSERT INTO Enrollments VALUES (1, 999, 101);
-- Student 999 doesn't exist! Orphaned enrollment record!
DELETE FROM Students WHERE StudentID = 1;
-- Student deleted, but enrollments remain! Data inconsistency!

-- Problem 4: Invalid Data
INSERT INTO Students VALUES (-5, '', 'notanemail');
-- Negative ID? Empty name? Invalid email? All accepted!

-- Problem 5: Duplicate Emails
INSERT INTO Students VALUES (2, 'Alice', 'alice@email.com');
INSERT INTO Students VALUES (3, 'Another Alice', 'alice@email.com');
-- Multiple students, same email - which one to contact?</code></pre>
                                </div>
                                
                                <p><strong>Real-World Consequences:</strong></p>
                                
                                <p><strong>Example 1: Banking Without Integrity</strong></p>
                                <ul>
                                    <li>Account numbers could be duplicated</li>
                                    <li>Balances could be negative without limit</li>
                                    <li>Transactions could reference non-existent accounts</li>
                                    <li>Same account number used for multiple customers</li>
                                    <li><strong>Result:</strong> Money goes to wrong accounts, lawsuits, bank collapse!</li>
                                </ul>
                                
                                <p><strong>Example 2: E-commerce Without Integrity</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Without integrity constraints:
INSERT INTO Orders VALUES (1, NULL, '2024-11-05', -500.00);
-- NULL customer? Negative price? Accepted!

INSERT INTO OrderDetails VALUES (1, 1, 999, 5, 100.00);
-- Product 999 doesn't exist, but order created!
-- Customer charged for non-existent product!

DELETE FROM Products WHERE ProductID = 101;
-- Product deleted but orders reference it - broken data!
</code></pre>
                                </div>
                                
                                <p><strong>Where "No Integrity" Might Be Acceptable:</strong></p>
                                <p>Only in very specific cases:</p>
                                <ul>
                                    <li><strong>Data staging/loading:</strong> Temporary tables during ETL process</li>
                                    <li><strong>Logging systems:</strong> Where speed > accuracy, and data is immutable</li>
                                    <li><strong>Caching layers:</strong> Temporary data that can be regenerated</li>
                                    <li><strong>Development/testing:</strong> Quick prototypes (never production!)</li>
                                </ul>
                                
                                <p><strong>How Applications Would Compensate:</strong></p>
                                <p>Without database-level integrity, you'd need application-level checks:</p>
                                <div class="code-example">
                                    <pre><code class="language-python"># Application code would need to do EVERYTHING:

def insert_student(student_id, name, email):
    # Check 1: Validate ID is positive
    if student_id <= 0:
        raise ValueError("Invalid student ID")
    
    # Check 2: Validate ID is unique
    existing = db.query("SELECT * FROM Students WHERE StudentID = ?", student_id)
    if existing:
        raise ValueError("Duplicate student ID")
    
    # Check 3: Validate email format
    if not validate_email(email):
        raise ValueError("Invalid email")
    
    # Check 4: Validate email is unique
    existing = db.query("SELECT * FROM Students WHERE Email = ?", email)
    if existing:
        raise ValueError("Duplicate email")
    
    # Check 5: Validate name is not empty
    if not name:
        raise ValueError("Name required")
    
    # Finally insert
    db.execute("INSERT INTO Students VALUES (?, ?, ?)", student_id, name, email)

# Problems:
# - This must be repeated in EVERY application!
# - If someone uses SQL directly, bypasses all checks!
# - Difficult to maintain consistency across applications
# - Performance overhead on every operation
# - Bug-prone - easy to forget a check</code></pre>
                                </div>
                                
                                <p><strong>The Database Approach (With Integrity):</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Define integrity ONCE in database:
CREATE TABLE Students (
    StudentID INT PRIMARY KEY CHECK (StudentID > 0),
    Name VARCHAR(100) NOT NULL,
    Email VARCHAR(100) UNIQUE NOT NULL CHECK (Email LIKE '%@%')
);

-- Now ALL applications benefit automatically!
-- Database enforces rules, not application code!</code></pre>
                                </div>
                                
                                <p><strong>Bottom Line:</strong></p>
                                <p>You <em>can</em> have structure and manipulation without integrity, but you'd be building a house without a foundation. It might stand briefly, but will collapse under real-world usage. <strong>Integrity is what transforms a data storage system into a reliable database management system!</strong></p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How do these three components relate to SQL's DDL, DML, and DCL?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Great question! SQL categories map closely to Codd's components. Let me show you the connections:</strong></p>
                                
                                <p><strong>SQL Language Categories:</strong></p>
                                <ul>
                                    <li><strong>DDL (Data Definition Language):</strong> CREATE, ALTER, DROP, TRUNCATE</li>
                                    <li><strong>DML (Data Manipulation Language):</strong> SELECT, INSERT, UPDATE, DELETE</li>
                                    <li><strong>DCL (Data Control Language):</strong> GRANT, REVOKE</li>
                                    <li><strong>TCL (Transaction Control Language):</strong> COMMIT, ROLLBACK, SAVEPOINT</li>
                                </ul>
                                
                                <p><strong>The Mapping:</strong></p>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Codd's Component</th>
                                                <th>SQL Category</th>
                                                <th>Commands</th>
                                                <th>Purpose</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td rowspan="2"><strong>STRUCTURE</strong></td>
                                                <td><strong>DDL</strong></td>
                                                <td>CREATE, ALTER, DROP</td>
                                                <td>Define and modify schema</td>
                                            </tr>
                                            <tr>
                                                <td><strong>DDL</strong></td>
                                                <td>CREATE INDEX, CREATE VIEW</td>
                                                <td>Define access structures</td>
                                            </tr>
                                            <tr>
                                                <td rowspan="2"><strong>INTEGRITY</strong></td>
                                                <td><strong>DDL</strong></td>
                                                <td>CONSTRAINT clauses</td>
                                                <td>PRIMARY KEY, FOREIGN KEY, CHECK, etc.</td>
                                            </tr>
                                            <tr>
                                                <td><strong>TCL</strong></td>
                                                <td>COMMIT, ROLLBACK</td>
                                                <td>Maintain transaction integrity</td>
                                            </tr>
                                            <tr>
                                                <td><strong>MANIPULATION</strong></td>
                                                <td><strong>DML</strong></td>
                                                <td>SELECT, INSERT, UPDATE, DELETE</td>
                                                <td>Query and modify data</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Not in Codd's Model</strong></td>
                                                <td><strong>DCL</strong></td>
                                                <td>GRANT, REVOKE</td>
                                                <td>Security/permissions</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <p><strong>Detailed Examples:</strong></p>
                                
                                <p><strong>1. STRUCTURE ‚Üí DDL</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Creating structure (STRUCTURE component via DDL)
CREATE TABLE Employees (
    EmpID INT,
    Name VARCHAR(100),
    DeptID INT,
    Salary DECIMAL(10,2)
);

-- Modifying structure
ALTER TABLE Employees ADD COLUMN Email VARCHAR(100);

-- Removing structure
DROP TABLE Employees;</code></pre>
                                </div>
                                
                                <p><strong>2. INTEGRITY ‚Üí DDL (Constraints) + TCL</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Defining integrity constraints (INTEGRITY component via DDL)
ALTER TABLE Employees
ADD PRIMARY KEY (EmpID),
ADD FOREIGN KEY (DeptID) REFERENCES Departments(DeptID),
ADD CHECK (Salary > 0),
ADD UNIQUE (Email);

-- Transaction control ensures integrity (INTEGRITY component via TCL)
BEGIN TRANSACTION;
UPDATE Employees SET Salary = Salary * 1.10 WHERE DeptID = 5;
UPDATE Budgets SET Amount = Amount - 50000 WHERE DeptID = 5;
-- Both succeed or both fail - maintains integrity
COMMIT;</code></pre>
                                </div>
                                
                                <p><strong>3. MANIPULATION ‚Üí DML</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Querying data (MANIPULATION component via DML)
SELECT Name, Salary 
FROM Employees 
WHERE DeptID = 5;

-- Modifying data (MANIPULATION component via DML)
INSERT INTO Employees VALUES (101, 'Alice', 5, 75000);
UPDATE Employees SET Salary = 80000 WHERE EmpID = 101;
DELETE FROM Employees WHERE EmpID = 101;</code></pre>
                                </div>
                                
                                <p><strong>Why DDL Appears in Both Structure AND Integrity:</strong></p>
                                <p>DDL serves dual purpose:</p>
                                <div class="code-example">
                                    <pre><code class="language-sql">CREATE TABLE Students (
    -- STRUCTURE component:
    StudentID INT,              -- Defines table structure
    Name VARCHAR(100),          -- Defines attributes
    Email VARCHAR(100),
    
    -- INTEGRITY component:
    PRIMARY KEY (StudentID),    -- Integrity constraint
    UNIQUE (Email),             -- Integrity constraint
    CHECK (StudentID > 0)       -- Integrity constraint
);

-- One statement, two components!</code></pre>
                                </div>
                                
                                <p><strong>Complete Example Showing All Mappings:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- ===== STRUCTURE (via DDL) =====
CREATE TABLE Orders (
    OrderID INT,
    CustomerID INT,
    OrderDate DATE,
    TotalAmount DECIMAL(10,2)
);

-- ===== INTEGRITY (via DDL - constraints) =====
ALTER TABLE Orders
ADD PRIMARY KEY (OrderID),
ADD FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
    ON DELETE RESTRICT,
ADD CHECK (TotalAmount >= 0);

-- ===== MANIPULATION (via DML) =====
-- Query data
SELECT * FROM Orders WHERE CustomerID = 100;

-- Insert data
INSERT INTO Orders VALUES (1, 100, '2024-11-05', 1500.00);

-- Update data
UPDATE Orders SET TotalAmount = 1600.00 WHERE OrderID = 1;

-- Delete data
DELETE FROM Orders WHERE OrderID = 1;

-- ===== INTEGRITY (via TCL) =====
BEGIN TRANSACTION;
  INSERT INTO Orders VALUES (2, 100, '2024-11-05', 500.00);
  UPDATE Customers SET TotalSpent = TotalSpent + 500.00 WHERE CustomerID = 100;
COMMIT;  -- Both operations succeed together

-- ===== SECURITY (DCL - not in Codd's model) =====
GRANT SELECT ON Orders TO user_readonly;
REVOKE INSERT ON Orders FROM user_readonly;</code></pre>
                                </div>
                                
                                <p><strong>Key Insight:</strong></p>
                                <p>SQL's categories (DDL/DML/DCL/TCL) are <strong>implementation details</strong> of how to interact with Codd's conceptual components (Structure/Integrity/Manipulation). Codd defined <strong>WHAT</strong> a relational database needs; SQL defines <strong>HOW</strong> to actually implement and use it!</p>
                                
                                <p><strong>One More Thing:</strong> DCL (security/permissions) isn't explicitly part of Codd's three components. It was added later as databases evolved for multi-user environments. Codd's model focused on the logical structure, integrity, and manipulation of data - security was considered an implementation detail.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 33: How Many Codd's Rules? -->
            <div class="question-content" id="q33">
                <div class="question-header">
                    <h1 class="question-title">How Many Codd's Rules Are There and What Do They Define?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-brain"></i> Expert Level</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>Well, this is interesting because Codd actually proposed <strong>13 rules</strong>, numbered from <strong>0 to 12</strong>! Yes, there's a <strong>Rule 0</strong> - Codd called it the <strong>Foundation Rule</strong> because it's the prerequisite for all others.</p>
                        
                        <p style="margin-top: 1rem;">Codd published these rules in <strong>1985</strong> - that's 15 years after his original relational model paper in 1970. Why? Because by the 1980s, many database vendors were claiming their products were "relational" when they really weren't. They were just adding some SQL-like features to their old hierarchical or network databases and calling them "relational."</p>
                        
                        <p style="margin-top: 1rem;">Codd was frustrated, so he created these 12 rules (plus Rule 0) as a <strong>litmus test</strong> - a way to evaluate whether a database management system is truly relational or just pretending to be. These rules define <strong>what qualifies as a true Relational Database Management System (RDBMS)</strong>.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> 13 Rules (0-12)</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Foundation Rule</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> RDBMS Criteria</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> 1985 Publication</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Evaluation Standard</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Visual Understanding: All 13 Rules Overview
                    </div>
                    <div class="image-container">
                        <svg width="900" height="800" viewBox="0 0 900 800">
                            <rect width="900" height="800" fill="#1e293b"/>
                            
                            <text x="450" y="35" font-size="26" fill="#0ea5e9" text-anchor="middle" font-weight="bold">Codd's 13 Rules (0-12)</text>
                            <text x="450" y="60" font-size="14" fill="#cbd5e1" text-anchor="middle" font-style="italic">Published 1985 - Criteria for True RDBMS</text>
                            
                            <!-- Rule 0 - Special -->
                            <rect x="50" y="80" width="800" height="60" fill="rgba(239, 68, 68, 0.15)" stroke="#ef4444" stroke-width="3" rx="8"/>
                            <text x="70" y="110" font-size="18" fill="#ef4444" font-weight="bold">Rule 0: Foundation Rule</text>
                            <text x="70" y="130" font-size="12" fill="#cbd5e1">System must be purely relational - no mixing with other approaches</text>
                            
                            <!-- Category 1: Data Representation -->
                            <rect x="50" y="160" width="800" height="180" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="2" rx="8"/>
                            <text x="450" y="185" font-size="16" fill="#10b981" text-anchor="middle" font-weight="bold">üìä Data Representation & Access (Rules 1-4)</text>
                            
                            <text x="70" y="210" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 1: Information Rule</text>
                            <text x="90" y="227" font-size="11" fill="#94a3b8">All data must be in tables - no hidden pointers</text>
                            
                            <text x="470" y="210" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 2: Guaranteed Access Rule</text>
                            <text x="490" y="227" font-size="11" fill="#94a3b8">Every value: Table + PK + Column</text>
                            
                            <text x="70" y="260" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 3: Systematic Null Treatment</text>
                            <text x="90" y="277" font-size="11" fill="#94a3b8">NULL ‚â† 0, NULL ‚â† empty, three-valued logic</text>
                            
                            <text x="470" y="260" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 4: Active Online Catalog</text>
                            <text x="490" y="277" font-size="11" fill="#94a3b8">Metadata stored as regular data</text>
                            
                            <text x="70" y="310" font-size="11" fill="#10b981" font-style="italic">‚úì How data is organized and identified</text>
                            <text x="470" y="310" font-size="11" fill="#10b981" font-style="italic">‚úì How to access any piece of information</text>
                            
                            <!-- Category 2: Language Requirements -->
                            <rect x="50" y="360" width="800" height="140" fill="rgba(59, 130, 246, 0.1)" stroke="#3b82f6" stroke-width="2" rx="8"/>
                            <text x="450" y="385" font-size="16" fill="#3b82f6" text-anchor="middle" font-weight="bold">üí¨ Language Requirements (Rules 5-7)</text>
                            
                            <text x="70" y="410" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 5: Comprehensive Data Sub-language</text>
                            <text x="90" y="427" font-size="11" fill="#94a3b8">Must support DDL, DML, security, integrity</text>
                            
                            <text x="470" y="410" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 6: View Updating Rule</text>
                            <text x="490" y="427" font-size="11" fill="#94a3b8">Theoretically updatable views must be updatable</text>
                            
                            <text x="70" y="460" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 7: High-Level Insert, Update, Delete</text>
                            <text x="90" y="477" font-size="11" fill="#94a3b8">Set-based operations, not just row-by-row</text>
                            
                            <!-- Category 3: Data Independence -->
                            <rect x="50" y="520" width="800" height="100" fill="rgba(139, 92, 246, 0.1)" stroke="#8b5cf6" stroke-width="2" rx="8"/>
                            <text x="450" y="545" font-size="16" fill="#8b5cf6" text-anchor="middle" font-weight="bold">üîì Data Independence (Rules 8-9)</text>
                            
                            <text x="70" y="570" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 8: Physical Data Independence</text>
                            <text x="90" y="587" font-size="11" fill="#94a3b8">Storage changes don't affect applications</text>
                            
                            <text x="470" y="570" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 9: Logical Data Independence</text>
                            <text x="490" y="587" font-size="11" fill="#94a3b8">Schema changes don't affect applications</text>
                            
                            <!-- Category 4: Integrity & Distribution -->
                            <rect x="50" y="640" width="800" height="120" fill="rgba(234, 179, 8, 0.1)" stroke="#eab308" stroke-width="2" rx="8"/>
                            <text x="450" y="665" font-size="16" fill="#eab308" text-anchor="middle" font-weight="bold">üîí Integrity & Distribution (Rules 10-12)</text>
                            
                            <text x="70" y="690" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 10: Integrity Independence</text>
                            <text x="90" y="707" font-size="11" fill="#94a3b8">Constraints in catalog, DBMS enforced</text>
                            
                            <text x="470" y="690" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 11: Distribution Independence</text>
                            <text x="490" y="707" font-size="11" fill="#94a3b8">Location of data transparent to users</text>
                            
                            <text x="70" y="735" font-size="13" fill="#cbd5e1" font-weight="bold">Rule 12: Non-subversion Rule</text>
                            <text x="90" y="752" font-size="11" fill="#94a3b8">Low-level access can't bypass integrity</text>
                            
                            <rect x="50" y="775" width="800" height="20" fill="rgba(14, 165, 233, 0.2)" rx="4"/>
                            <text x="450" y="790" font-size="12" fill="#0ea5e9" text-anchor="middle" font-weight="bold">‚ö†Ô∏è Reality: NO modern RDBMS fully satisfies all 12 rules! Most achieve 8-10.</text>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Complete Rule Breakdown
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Rule #</th>
                                    <th>Name</th>
                                    <th>Key Concept</th>
                                    <th>Modern Compliance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: rgba(239, 68, 68, 0.1);">
                                    <td><strong>0</strong></td>
                                    <td>Foundation Rule</td>
                                    <td>Must be purely relational</td>
                                    <td>‚úÖ Most RDBMS comply</td>
                                </tr>
                                <tr>
                                    <td><strong>1</strong></td>
                                    <td>Information Rule</td>
                                    <td>All data in tables</td>
                                    <td>‚ö†Ô∏è SQL allows duplicates</td>
                                </tr>
                                <tr>
                                    <td><strong>2</strong></td>
                                    <td>Guaranteed Access</td>
                                    <td>Table+PK+Column addressing</td>
                                    <td>‚úÖ Fully supported</td>
                                </tr>
                                <tr>
                                    <td><strong>3</strong></td>
                                    <td>Null Treatment</td>
                                    <td>Systematic NULL handling</td>
                                    <td>‚úÖ Implemented correctly</td>
                                </tr>
                                <tr>
                                    <td><strong>4</strong></td>
                                    <td>Active Catalog</td>
                                    <td>Metadata in tables</td>
                                    <td>‚úÖ information_schema</td>
                                </tr>
                                <tr>
                                    <td><strong>5</strong></td>
                                    <td>Data Sub-language</td>
                                    <td>Comprehensive SQL support</td>
                                    <td>‚úÖ SQL covers all needs</td>
                                </tr>
                                <tr>
                                    <td><strong>6</strong></td>
                                    <td>View Updating</td>
                                    <td>Updatable views</td>
                                    <td>‚ö†Ô∏è Limited support</td>
                                </tr>
                                <tr>
                                    <td><strong>7</strong></td>
                                    <td>High-Level Operations</td>
                                    <td>Set-based operations</td>
                                    <td>‚úÖ Fully supported</td>
                                </tr>
                                <tr>
                                    <td><strong>8</strong></td>
                                    <td>Physical Independence</td>
                                    <td>Storage independent</td>
                                    <td>‚úÖ Mostly achieved</td>
                                </tr>
                                <tr>
                                    <td><strong>9</strong></td>
                                    <td>Logical Independence</td>
                                    <td>Schema changes flexible</td>
                                    <td>‚ö†Ô∏è Partial support</td>
                                </tr>
                                <tr>
                                    <td><strong>10</strong></td>
                                    <td>Integrity Independence</td>
                                    <td>Constraints in catalog</td>
                                    <td>‚úÖ Fully supported</td>
                                </tr>
                                <tr>
                                    <td><strong>11</strong></td>
                                    <td>Distribution Independence</td>
                                    <td>Location transparency</td>
                                    <td>‚ö†Ô∏è Limited in practice</td>
                                </tr>
                                <tr>
                                    <td><strong>12</strong></td>
                                    <td>Non-subversion</td>
                                    <td>No integrity bypassing</td>
                                    <td>‚ö†Ô∏è Can be violated</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        SQL Examples Demonstrating Rules
                    </div>
                    
                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">Rule 1 Violation: SQL Allows Duplicates</span>
                        </div>
                        <pre><code class="language-sql">-- Rule 1 violation: SQL allows duplicate rows (not a true set)
SELECT Name FROM Employees;  
-- Can return: 'John', 'Alice', 'John' (duplicate!)

-- Codd's pure relational model requires DISTINCT by default
SELECT DISTINCT Name FROM Employees;  -- This is more correct
</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">Rule 2: Guaranteed Access - Every Value Addressable</span>
                        </div>
                        <pre><code class="language-sql">-- Every value uniquely addressed by: Table + Primary Key + Column
SELECT Salary 
FROM Employees 
WHERE EmployeeID = 101;  -- Table + PK + Column = unique address

-- This is the essence of relational access</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">Rule 3: Systematic NULL Treatment</span>
                        </div>
                        <pre><code class="language-sql">-- NULL is NOT zero, NOT empty string
SELECT * FROM Employees WHERE Salary IS NULL;     -- Correct
-- SELECT * FROM Employees WHERE Salary = NULL;   -- WRONG! Returns nothing

-- Three-valued logic: TRUE, FALSE, UNKNOWN
SELECT * FROM Employees WHERE Salary > 50000;  -- NULL salaries excluded
SELECT * FROM Employees WHERE Salary > 50000 OR Salary IS NULL;  -- Includes NULLs</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">Rule 4: Active Online Catalog</span>
                        </div>
                        <pre><code class="language-sql">-- Metadata stored as regular data - can query it!
SELECT table_name, column_name, data_type
FROM information_schema.columns
WHERE table_schema = 'mydb';

-- This is Rule 4 in action - database describing itself!</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">Rule 7: High-Level Set Operations</span>
                        </div>
                        <pre><code class="language-sql">-- Set-based operations, not row-by-row
UPDATE Employees 
SET Salary = Salary * 1.10 
WHERE DeptID = 5;  -- Updates entire set at once!

-- Not like procedural programming:
-- for each employee in department 5:
--     employee.salary = employee.salary * 1.10</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">Rule 8: Physical Data Independence</span>
                        </div>
                        <pre><code class="language-sql">-- Your query works same whether data is on HDD, SSD, or cloud
SELECT * FROM Employees WHERE DeptID = 10;

-- Add index for performance - query doesn't change!
CREATE INDEX idx_dept ON Employees(DeptID);
-- Same query, just faster - that's physical independence!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why are there 13 rules numbered 0-12 instead of 1-13?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Great question! Rule 0 is special - it's the meta-rule.</strong></p>
                                
                                <p>Codd wanted to make it absolutely clear that before you even evaluate the 12 rules, the system must qualify as <strong>relational</strong>, <strong>database</strong>, and <strong>management system</strong>.</p>
                                
                                <p><strong>Think of it like this:</strong></p>
                                <p>Before checking if your house meets building codes (Rules 1-12), we must first confirm it's actually a house and not a tent (Rule 0)!</p>
                                
                                <p><strong>Rule 0 states:</strong></p>
                                <blockquote>For a system to qualify as a relational database management system, it must use its relational facilities <strong>exclusively</strong> to manage the database.</blockquote>
                                
                                <p><strong>What this means:</strong></p>
                                <ul>
                                    <li>‚úÖ Can't have SQL <em>plus</em> some proprietary navigational interface</li>
                                    <li>‚úÖ Can't be "partially relational"</li>
                                    <li>‚úÖ Must use relational approach for ALL data management</li>
                                </ul>
                                
                                <p><strong>Why this matters:</strong></p>
                                <p>Without Rule 0, vendors could add SQL as a feature to their non-relational databases and claim they're "relational." Rule 0 prevents that gaming of the system. It's the gatekeeper that says: "Either you're fully relational, or you're not relational at all - no middle ground!"</p>
                                
                                <p><strong>Historical context:</strong></p>
                                <p>In the 1980s, IBM considered adding SQL to their hierarchical database IMS instead of building a true relational system. Rule 0 was Codd's way of saying: "That's not good enough. Build it right or don't call it relational!"</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Do any modern RDBMS systems fully satisfy all 12 rules?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The honest answer: NO! Not a single modern RDBMS fully satisfies all 12 rules.</strong></p>
                                
                                <p>Most achieve about 8-10 of the rules. Here's the reality check:</p>
                                
                                <p><strong>Common Violations:</strong></p>
                                
                                <p><strong>Rule 1 (Information Rule):</strong></p>
                                <ul>
                                    <li>SQL allows duplicate rows - violates set theory</li>
                                    <li>Should require DISTINCT by default, but doesn't</li>
                                    <li><strong>Example:</strong> <code>SELECT Name FROM Employees</code> can return duplicates</li>
                                </ul>
                                
                                <p><strong>Rule 6 (View Updating):</strong></p>
                                <ul>
                                    <li>Not all theoretically updatable views can actually be updated</li>
                                    <li>Views with GROUP BY, DISTINCT, or joins often non-updatable</li>
                                    <li>This is a known limitation in all major RDBMS</li>
                                </ul>
                                
                                <p><strong>Rule 9 (Logical Data Independence):</strong></p>
                                <ul>
                                    <li>Partial compliance only</li>
                                    <li>Adding columns works, but renaming/removing breaks applications</li>
                                    <li>Requires views to maintain full independence - not automatic</li>
                                </ul>
                                
                                <p><strong>Rule 11 (Distribution Independence):</strong></p>
                                <ul>
                                    <li>Most RDBMS struggle with this</li>
                                    <li>Distributed queries often require special syntax</li>
                                    <li>Performance characteristics change based on location</li>
                                </ul>
                                
                                <p><strong>Rule 12 (Non-subversion):</strong></p>
                                <ul>
                                    <li>Can be violated with direct file access</li>
                                    <li>LOAD DATA INFILE can bypass constraints</li>
                                    <li>Backup restoration might skip integrity checks</li>
                                </ul>
                                
                                <p><strong>Compliance Score Card:</strong></p>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>RDBMS</th>
                                                <th>Approximate Compliance</th>
                                                <th>Major Violations</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>PostgreSQL</td>
                                                <td>~10 of 12</td>
                                                <td>Rules 1, 6, 11</td>
                                            </tr>
                                            <tr>
                                                <td>Oracle</td>
                                                <td>~9 of 12</td>
                                                <td>Rules 1, 6, 9, 11</td>
                                            </tr>
                                            <tr>
                                                <td>MySQL</td>
                                                <td>~8 of 12</td>
                                                <td>Rules 1, 6, 9, 11, 12</td>
                                            </tr>
                                            <tr>
                                                <td>SQL Server</td>
                                                <td>~9 of 12</td>
                                                <td>Rules 1, 6, 11</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <p><strong>Why the violations exist:</strong></p>
                                <ul>
                                    <li><strong>Performance:</strong> Enforcing DISTINCT by default would slow queries</li>
                                    <li><strong>Practicality:</strong> Some rules are theoretically perfect but practically difficult</li>
                                    <li><strong>Backwards compatibility:</strong> Fixing violations would break existing applications</li>
                                    <li><strong>Trade-offs:</strong> Sometimes you sacrifice purity for usability</li>
                                </ul>
                                
                                <p><strong>The Bottom Line:</strong></p>
                                <p>Codd's rules represent an <strong>ideal</strong> - a north star to aim for. No system is perfect, but the rules remain valuable for evaluating and improving database systems. The fact that we can identify violations shows we understand the principles!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why did Codd publish these rules 15 years after proposing the relational model?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is a fascinating story about protecting intellectual integrity!</strong></p>
                                
                                <p><strong>Timeline:</strong></p>
                                <ul>
                                    <li><strong>1970:</strong> Codd publishes "A Relational Model of Data"</li>
                                    <li><strong>1970-1985:</strong> Database vendors start adopting "relational" approaches</li>
                                    <li><strong>1985:</strong> Codd publishes the 12 rules</li>
                                </ul>
                                
                                <p><strong>What Happened in Those 15 Years:</strong></p>
                                
                                <p><strong>1. Marketing Madness (early 1980s):</strong></p>
                                <p>By the mid-1980s, "relational database" had become a hot marketing term. Every vendor wanted to claim their product was "relational" because:</p>
                                <ul>
                                    <li>It sounded modern and advanced</li>
                                    <li>Customers were demanding relational features</li>
                                    <li>Traditional hierarchical/network databases seemed outdated</li>
                                </ul>
                                
                                <p><strong>2. False Claims:</strong></p>
                                <p>Vendors were doing questionable things:</p>
                                <ul>
                                    <li>Adding SQL as a thin layer over hierarchical databases</li>
                                    <li>Calling themselves "relational" with minimal compliance</li>
                                    <li>Using "relational-like" marketing language</li>
                                    <li>Mixing relational and non-relational features</li>
                                </ul>
                                
                                <p><strong>Example of the problem:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Some 1980s "relational" databases allowed:

-- Relational query:
SELECT * FROM Employees WHERE DeptID = 10;  -- OK, relational

-- But also required:
NAVIGATE FROM Employees THROUGH Department LINK;  -- Not relational!

-- They called this "hybrid relational" or "extended relational"
-- Codd said: "No! Either fully relational or not relational at all!"</code></pre>
                                </div>
                                
                                <p><strong>3. IBM's Approach:</strong></p>
                                <p>Even IBM, Codd's own employer, was being cautious:</p>
                                <ul>
                                    <li>They released DB2 in 1983 but with limitations</li>
                                    <li>Some features violated Codd's principles</li>
                                    <li>Marketing was aggressive about "relational" claims</li>
                                </ul>
                                
                                <p><strong>4. Codd's Frustration:</strong></p>
                                <p>Codd realized that without clear criteria, the term "relational" would become meaningless. He needed a way to objectively evaluate systems.</p>
                                
                                <p><strong>5. The Solution - 12 Rules (1985):</strong></p>
                                <p>Codd published "Is Your DBMS Really Relational?" and "Does Your DBMS Run By the Rules?" in ComputerWorld magazine, presenting his 12 rules as a litmus test.</p>
                                
                                <p><strong>The Impact:</strong></p>
                                <ul>
                                    <li>Created objective standards</li>
                                    <li>Exposed vendor false claims</li>
                                    <li>Sparked industry debate</li>
                                    <li>Pushed vendors to improve compliance</li>
                                </ul>
                                
                                <p><strong>Interesting Fact:</strong></p>
                                <p>When Codd published the rules, even DB2 (IBM's flagship) didn't fully comply! This created internal tension at IBM but ultimately led to improvements.</p>
                                
                                <p><strong>Modern Parallel:</strong></p>
                                <p>Today we see similar issues with "AI" - every product claims to use AI. Codd's rules teach us the importance of having objective criteria to evaluate such claims.</p>
                                
                                <p><strong>Key Lesson:</strong></p>
                                <p>Sometimes the creator of an idea must return years later to clarify and protect their original vision when commercial interests threaten to dilute it. The 15-year gap represents the time it took for the market to mature and for the need for clear standards to become apparent.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 34: Rule 0 - Foundation Rule -->
            <div class="question-content" id="q34">
                <div class="question-header">
                    <h1 class="question-title">What is Rule 0: Foundation Rule of Codd's Rules?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-brain"></i> Expert Level</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>Rule 0 is the <strong>Foundation Rule</strong>, and it's the most important rule because it's the prerequisite for all other rules. Codd stated it like this:</p>
                        
                        <blockquote style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-left: 4px solid #3b82f6; margin: 1rem 0;">
                            <strong>Rule 0:</strong> For any system that is advertised as, or claimed to be, a relational database management system, that system must be able to manage databases <strong>entirely through its relational capabilities</strong>.
                        </blockquote>
                        
                        <p style="margin-top: 1rem;">Let me break that down: If you call yourself a relational database, you must use <strong>ONLY</strong> relational methods to manage data. No mixing and matching with other approaches! The system must be:</p>
                        
                        <ol style="margin-top: 1rem; line-height: 2;">
                            <li><strong>Relational:</strong> Based on mathematical relations (tables)</li>
                            <li><strong>Database:</strong> Stores integrated, shared data</li>
                            <li><strong>Management System:</strong> Provides tools to manage that data</li>
                        </ol>
                        
                        <p style="margin-top: 1rem;">And here's the key: It must manage databases <strong>ENTIRELY</strong> through relational capabilities. No exceptions, no backdoors, no alternative methods.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Foundation Rule</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Purely Relational</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> No Mixing</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Exclusive Relational</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Meta Rule</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Analogy: Electric Car
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-car"></i> Understanding Rule 0 Through Vehicles
                        </div>
                        
                        <p><strong>Imagine buying a car advertised as "100% Electric":</strong></p>
                        
                        <p><strong>‚ùå Violation of "Pure Electric":</strong></p>
                        <ul>
                            <li>You discover it also has a gasoline engine for emergencies</li>
                            <li>Manufacturer says: "It's mostly electric, with gas backup"</li>
                            <li>Is it really a pure electric car? <strong>NO!</strong></li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>‚úÖ True Pure Electric:</strong></p>
                        <ul>
                            <li>Only electric motor, no gas engine whatsoever</li>
                            <li>All power comes from batteries exclusively</li>
                            <li>No hybrid functionality</li>
                        </ul>
                        
                        <p style="margin-top: 1.5rem;"><strong>Rule 0 Works the Same Way:</strong></p>
                        
                        <p><strong>‚ùå Not Pure Relational (Violates Rule 0):</strong></p>
                        <div class="code-example">
                            <pre><code class="language-sql">-- System allows SQL queries (relational)
SELECT * FROM Employees WHERE DeptID = 10;

-- But ALSO requires proprietary navigation (non-relational)
db.navigate("Employees").followPointer("Department").filter(id=10);

-- This is "hybrid" - NOT pure relational!</code></pre>
                        </div>
                        
                        <p><strong>‚úÖ Pure Relational (Complies with Rule 0):</strong></p>
                        <div class="code-example">
                            <pre><code class="language-sql">-- Everything done through SQL (relational methods only)
SELECT * FROM Employees WHERE DeptID = 10;
INSERT INTO Employees VALUES (...);
UPDATE Employees SET ...;
DELETE FROM Employees WHERE ...;

-- No alternative methods exist!</code></pre>
                        </div>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444;">
                            <p><strong>üéØ The Rule:</strong> You're either <strong>purely relational</strong> or you're <strong>not relational at all</strong>. There's no middle ground! Can't be "70% relational" - that's like being "a little bit pregnant."</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Examples: Rule 0 Violations vs Compliance
                    </div>
                    
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-times-circle"></i> Historical Violations (1980s)
                        </div>
                        
                        <p><strong>Problem: Vendors Adding SQL to Non-Relational Systems</strong></p>
                        
                        <p><strong>Example 1: IBM IMS with SQL Layer</strong></p>
                        <div class="code-example">
                            <pre><code>-- IMS (Hierarchical Database) in 1980s
-- Vendor added SQL interface on top:

-- You could do this (looks relational):
SELECT * FROM EMPLOYEES WHERE DEPT = 'SALES';

-- But underneath, still using hierarchical structure
-- And for complex operations, you STILL needed:
ESTABLISH PARENT-CHILD-LINK
NAVIGATE TO NEXT SEGMENT
GET NEXT OCCURRENCE

-- This VIOLATES Rule 0!
-- Not purely relational - mixed approach</code></pre>
                        </div>
                        
                        <p><strong>Example 2: Network Database with SQL</strong></p>
                        <div class="code-example">
                            <pre><code>-- CODASYL Network Database with SQL addon

-- Simple queries worked with SQL:
SELECT EMP_NAME FROM EMPLOYEES;

-- But relationships required set navigation:
FIND EMPLOYEE-DEPT-SET
OBTAIN NEXT WITHIN SET
-- Still procedural navigation!

-- VIOLATES Rule 0 - not exclusively relational</code></pre>
                        </div>
                    </div>

                    <div class="scenario-box" style="margin-top: 1.5rem;">
                        <div class="scenario-title">
                            <i class="fas fa-check-circle"></i> Modern Compliance Examples
                        </div>
                        
                        <p><strong>PostgreSQL - Rule 0 Compliant</strong></p>
                        <div class="code-example">
                            <pre><code class="language-sql">-- ALL operations through SQL (relational language)

-- Data Definition (DDL)
CREATE TABLE Employees (
    EmpID INT PRIMARY KEY,
    Name VARCHAR(100),
    DeptID INT
);

-- Data Manipulation (DML)
SELECT * FROM Employees;
INSERT INTO Employees VALUES (1, 'Alice', 10);
UPDATE Employees SET Name = 'Bob' WHERE EmpID = 1;
DELETE FROM Employees WHERE EmpID = 1;

-- Data Control (DCL)
GRANT SELECT ON Employees TO user_readonly;
REVOKE INSERT ON Employees FROM user_readonly;

-- Transaction Control (TCL)
BEGIN;
UPDATE Accounts SET balance = balance - 100 WHERE id = 1;
COMMIT;

-- Administrative Operations
CREATE INDEX idx_dept ON Employees(DeptID);
CREATE VIEW ActiveEmployees AS SELECT * FROM Employees WHERE Status = 'Active';
ALTER TABLE Employees ADD COLUMN Salary DECIMAL(10,2);

-- Everything relational! No procedural navigation required!</code></pre>
                        </div>
                        
                        <p><strong>MySQL - Rule 0 Compliant</strong></p>
                        <div class="code-example">
                            <pre><code class="language-sql">-- Pure SQL interface for all database operations

-- Query optimization - still relational
EXPLAIN SELECT * FROM Employees WHERE DeptID = 10;

-- Metadata access - through relational queries
SELECT * FROM information_schema.tables;
SELECT * FROM information_schema.columns WHERE table_name = 'Employees';

-- Everything declarative, nothing procedural!</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-history"></i>
                        Why Codd Created Rule 0
                    </div>
                    <div class="scenario-box">
                        <p><strong>The Problem in 1985:</strong></p>
                        
                        <p>By the mid-1980s, "relational database" was a hot marketing term. Vendors were doing this:</p>
                        
                        <ol style="line-height: 2;">
                            <li>Take their old hierarchical/network database</li>
                            <li>Add a SQL interface on top</li>
                            <li>Market it as "Now Relational!"</li>
                            <li>But underneath, still using pointers and navigation</li>
                        </ol>
                        
                        <p style="margin-top: 1rem;"><strong>Codd's Response:</strong></p>
                        <blockquote style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-left: 4px solid #10b981; margin: 1rem 0;">
                            "No! If you call it relational, it must be <strong>purely</strong> relational. Build it right or don't call it relational!"
                        </blockquote>
                        
                        <p><strong>The IBM IMS Story:</strong></p>
                        <ul>
                            <li>IMS (hierarchical database) was IBM's cash cow</li>
                            <li>When Codd proposed relational model, IBM resisted</li>
                            <li>They considered adding SQL to IMS instead of building true relational system</li>
                            <li>Rule 0 effectively said: "That's not good enough!"</li>
                            <li>Forced IBM to build DB2 as truly relational system</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Modern Example:</strong></p>
                        <p>Today, some NoSQL databases add SQL interfaces:</p>
                        <ul>
                            <li>MongoDB with SQL queries</li>
                            <li>Cassandra with CQL (looks like SQL)</li>
                            <li>Redis with RedisSQL</li>
                        </ul>
                        
                        <p>According to Rule 0, these aren't purely relational because:</p>
                        <ul>
                            <li>Their <strong>primary model</strong> is non-relational</li>
                            <li>SQL is <strong>added interface</strong>, not foundation</li>
                            <li>Core operations still use non-relational paradigms</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Rule 0 Checklist
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Requirement</th>
                                    <th>What It Means</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Must be Relational</strong></td>
                                    <td>Based on mathematical relations (tables)</td>
                                    <td>Data organized in tables with rows/columns</td>
                                </tr>
                                <tr>
                                    <td><strong>Must be Database</strong></td>
                                    <td>Stores integrated, shared, persistent data</td>
                                    <td>Not just in-memory cache, actual persistent storage</td>
                                </tr>
                                <tr>
                                    <td><strong>Must be Management System</strong></td>
                                    <td>Provides complete tools to manage data</td>
                                    <td>CREATE, SELECT, INSERT, UPDATE, DELETE, etc.</td>
                                </tr>
                                <tr>
                                    <td><strong>ENTIRELY Relational</strong></td>
                                    <td>No mixing with other database models</td>
                                    <td>Can't have SQL + navigational APIs together</td>
                                </tr>
                                <tr>
                                    <td><strong>No Alternative Methods</strong></td>
                                    <td>Relational interface is the ONLY way</td>
                                    <td>Can't bypass SQL to access data directly</td>
                                </tr>
                                <tr>
                                    <td><strong>No Backdoors</strong></td>
                                    <td>Can't circumvent relational approach</td>
                                    <td>No proprietary APIs that skip relational layer</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can a database be partially relational according to Rule 0?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>According to Codd's Rule 0: Absolutely NOT!</strong></p>
                                
                                <p>You're either relational or you're not - there's no middle ground. Codd was crystal clear: a database cannot be "mostly relational" or "relationally-inspired." It must manage data <strong>entirely</strong> through relational capabilities.</p>
                                
                                <p><strong>The Pregnancy Analogy:</strong></p>
                                <p>This is like being pregnant - you either are or you aren't. You can't be "70% pregnant" or "somewhat pregnant." Similarly, you can't be "partially relational."</p>
                                
                                <p><strong>Why This Strict Rule?</strong></p>
                                
                                <p><strong>1. Prevents Marketing Manipulation:</strong></p>
                                <ul>
                                    <li>Without strict criteria, vendors could claim "relational" with minimal compliance</li>
                                    <li>"We support SQL queries, so we're relational!" - Not enough</li>
                                    <li>Rule 0 says: Everything must be relational, not just queries</li>
                                </ul>
                                
                                <p><strong>2. Ensures Consistency:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- If system is "partially relational":
-- Sometimes you'd use SQL:
SELECT * FROM Employees WHERE DeptID = 10;

-- Other times you'd use navigational code:
navigate_to_employee_record();
follow_pointer_to_department();
-- Inconsistent! Confusing! Error-prone!

-- With Rule 0 (purely relational):
-- Everything is SQL:
SELECT * FROM Employees WHERE DeptID = 10;
SELECT * FROM Departments WHERE DeptID = 10;
-- Consistent approach!</code></pre>
                                </div>
                                
                                <p><strong>3. Theoretical Purity:</strong></p>
                                <p>Codd's relational model is based on mathematical set theory and predicate logic. Mixing in non-relational approaches violates the mathematical foundation.</p>
                                
                                <p><strong>Modern "Multi-Model" Databases:</strong></p>
                                <p>Today many systems claim to be "multi-model":</p>
                                <ul>
                                    <li>MongoDB: Document database + SQL interface</li>
                                    <li>Cassandra: Wide-column + CQL</li>
                                    <li>PostgreSQL: Relational + JSON support</li>
                                </ul>
                                
                                <p><strong>According to Rule 0:</strong></p>
                                <ul>
                                    <li><strong>MongoDB:</strong> NOT purely relational (document model is primary)</li>
                                    <li><strong>Cassandra:</strong> NOT purely relational (wide-column is primary)</li>
                                    <li><strong>PostgreSQL:</strong> Arguably YES (relational is primary, JSON is additive feature)</li>
                                </ul>
                                
                                <p><strong>The Practical Reality:</strong></p>
                                <p>In real world, we're pragmatic - we use the best tool for the job. But from a <strong>theoretical</strong> and <strong>definitional</strong> standpoint, Codd's Rule 0 draws a clear line: either pure relational or not relational at all.</p>
                                
                                <p><strong>Key Takeaway:</strong></p>
                                <blockquote>Rule 0 is the gatekeeper. It prevents database vendors from slapping "relational" label on non-relational systems. It maintains the integrity of the term "relational database."</blockquote>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why is Rule 0 called the "Foundation Rule" and numbered 0 instead of 1?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Brilliant question! The numbering is very deliberate.</strong></p>
                                
                                <p><strong>Why "0" and Not "1"?</strong></p>
                                
                                <p>Rule 0 is numbered zero because it's the <strong>prerequisite</strong> - it must be satisfied <strong>before</strong> you even evaluate Rules 1-12. It's the foundation that everything else is built upon.</p>
                                
                                <p><strong>Programming Analogy:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-javascript">// Think of it like index-based arrays in programming
// Array indices start at 0!

if (!satisfiesRule0()) {
    throw new Error("Not even qualified as RDBMS!");
    // Don't bother checking Rules 1-12
}

// Only if Rule 0 passes:
for (let rule = 1; rule <= 12; rule++) {
    checkRule(rule);
}</code></pre>
                                </div>
                                
                                <p><strong>The Building Metaphor:</strong></p>
                                <ul>
                                    <li><strong>Rule 0:</strong> Is this actually a building? (Not a tent, not a shed)</li>
                                    <li><strong>Rules 1-12:</strong> Does this building meet all safety codes?</li>
                                </ul>
                                <p>You must confirm it's a building (Rule 0) before checking building codes (Rules 1-12)!</p>
                                
                                <p><strong>Why "Foundation" Rule?</strong></p>
                                
                                <p><strong>1. It's the Base:</strong></p>
                                <p>Just like a building's foundation supports everything above it, Rule 0 supports all other rules. Without Rule 0 compliance, the other rules are meaningless.</p>
                                
                                <p><strong>2. It Defines Eligibility:</strong></p>
                                <ul>
                                    <li>Rule 0: "Are you even in the game?"</li>
                                    <li>Rules 1-12: "How well are you playing?"</li>
                                </ul>
                                
                                <p><strong>3. It's Non-Negotiable:</strong></p>
                                <p>You might partially satisfy Rules 1-12 (most RDBMS do), but Rule 0 is binary - either you satisfy it completely or you don't.</p>
                                
                                <p><strong>Historical Context:</strong></p>
                                <p>When Codd published the rules in 1985, he saw vendors claiming "relational" status while fundamentally being non-relational systems with SQL tacked on. He needed a rule that said: "Before we discuss HOW relational you are (Rules 1-12), let's confirm you're relational AT ALL (Rule 0)."</p>
                                
                                <p><strong>The Numbering Convention:</strong></p>
                                <table>
                                    <tr>
                                        <td><strong>Rule 0:</strong></td>
                                        <td>Meta-rule - defines what qualifies for evaluation</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Rules 1-12:</strong></td>
                                        <td>Actual criteria - specific requirements to meet</td>
                                    </tr>
                                </table>
                                
                                <p><strong>Mathematical Parallel:</strong></p>
                                <p>In mathematics and computer science, indexing from 0 is common and logical:</p>
                                <ul>
                                    <li>Arrays start at index 0</li>
                                    <li>The "zeroth" element comes first</li>
                                    <li>0 represents the base case or starting point</li>
                                </ul>
                                
                                <p><strong>Real-World Impact:</strong></p>
                                <div class="code-example">
                                    <pre><code>// Evaluation Process:

Step 0: Check Rule 0
‚Üì
If FAILS ‚Üí "Not an RDBMS, stop evaluation"
If PASSES ‚Üí Continue to Step 1

Step 1-12: Check Rules 1-12
‚Üì
Score: X out of 12 rules satisfied

// Without Rule 0, vendors could claim:
// "We satisfy 10 out of 12 rules!"
// But if their system isn't fundamentally relational, 
// that score is meaningless!</code></pre>
                                </div>
                                
                                <p><strong>Conclusion:</strong></p>
                                <p>Rule 0 is called the Foundation Rule and numbered 0 because it's the <strong>prerequisite condition</strong> that must be true before any other evaluation makes sense. It's not just the first rule - it's the rule that determines whether the other rules even apply.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Do modern NoSQL databases with SQL interfaces violate Rule 0?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, they do violate Rule 0, and here's why:</strong></p>
                                
                                <p><strong>The NoSQL + SQL Trend:</strong></p>
                                <p>Many NoSQL databases have added SQL-like interfaces:</p>
                                <ul>
                                    <li><strong>MongoDB:</strong> Added SQL queries via BI Connector</li>
                                    <li><strong>Cassandra:</strong> CQL (Cassandra Query Language)</li>
                                    <li><strong>Redis:</strong> RedisSQL module</li>
                                    <li><strong>Couchbase:</strong> N1QL (SQL for JSON)</li>
                                </ul>
                                
                                <p><strong>Why They Violate Rule 0:</strong></p>
                                
                                <p><strong>1. SQL is Secondary, Not Primary:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-javascript">// MongoDB Example
// Primary Interface (Document-based):
db.users.insertOne({
    name: "Alice",
    email: "alice@example.com",
    age: 30
});

// Secondary Interface (SQL-like):
SELECT * FROM users WHERE age > 25;

// The system is fundamentally document-oriented
// SQL is just a query layer on top
// VIOLATES Rule 0 - not "entirely" relational</code></pre>
                                </div>
                                
                                <p><strong>2. Core Data Model Isn't Relational:</strong></p>
                                <ul>
                                    <li><strong>MongoDB:</strong> Core is document (JSON/BSON), not tables</li>
                                    <li><strong>Cassandra:</strong> Core is wide-column, not normalized tables</li>
                                    <li><strong>Redis:</strong> Core is key-value, not relational</li>
                                </ul>
                                
                                <p><strong>3. Different Design Principles:</strong></p>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Aspect</th>
                                            <th>Relational (Rule 0)</th>
                                            <th>NoSQL + SQL</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Data Model</strong></td>
                                            <td>Normalized tables</td>
                                            <td>Documents/Key-Value/Columns</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Relationships</strong></td>
                                            <td>Foreign keys, JOINs</td>
                                            <td>Embedded documents, denormalized</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Schema</strong></td>
                                            <td>Fixed schema required</td>
                                            <td>Schema-flexible or schemaless</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Transactions</strong></td>
                                            <td>ACID across tables</td>
                                            <td>Limited or eventual consistency</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <p><strong>Specific Examples:</strong></p>
                                
                                <p><strong>MongoDB with SQL:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- You can write this SQL:
SELECT name, age FROM users WHERE age > 25;

-- But MongoDB internally:
-- 1. Translates to document query
-- 2. Searches through JSON documents
-- 3. Returns results

-- The relational interface is a facade
-- Core is still document-oriented
-- VIOLATES Rule 0</code></pre>
                                </div>
                                
                                <p><strong>Cassandra with CQL:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- CQL looks like SQL:
CREATE TABLE users (
    user_id UUID PRIMARY KEY,
    name TEXT,
    email TEXT
);

INSERT INTO users VALUES (...);
SELECT * FROM users WHERE user_id = ...;

-- But underneath:
-- - Data stored in wide-column format
-- - No true JOINs (must denormalize)
-- - Partition keys determine data distribution
-- - Different consistency model than RDBMS

-- Looks relational, isn't relational
-- VIOLATES Rule 0</code></pre>
                                </div>
                                
                                <p><strong>The Key Question:</strong></p>
                                <blockquote>Can you manage the database <strong>entirely</strong> through relational capabilities?</blockquote>
                                
                                <p>For NoSQL + SQL systems:</p>
                                <ul>
                                    <li>‚ùå No - you need the native API for full functionality</li>
                                    <li>‚ùå No - SQL interface is limited/incomplete</li>
                                    <li>‚ùå No - core operations use non-relational paradigms</li>
                                </ul>
                                
                                <p><strong>Are They Bad Systems?</strong></p>
                                <p><strong>NO!</strong> These are excellent systems for their use cases:</p>
                                <ul>
                                    <li>MongoDB: Great for flexible schemas, rapid development</li>
                                    <li>Cassandra: Excellent for massive scale, high availability</li>
                                    <li>Redis: Perfect for caching, real-time applications</li>
                                </ul>
                                
                                <p><strong>The Point:</strong></p>
                                <p>They're great databases, but they're <strong>not relational databases according to Rule 0</strong>. They're NoSQL databases with SQL-like query interfaces. That's fine - use the right tool for the job!</p>
                                
                                <p><strong>Contrast with PostgreSQL:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- PostgreSQL is fundamentally relational
-- Everything is tables, even when storing JSON:

CREATE TABLE documents (
    id SERIAL PRIMARY KEY,
    data JSONB
);

-- JSON is stored IN a relational table
-- Still accessed through SQL
-- Relational model is primary
-- COMPLIES with Rule 0</code></pre>
                                </div>
                                
                                <p><strong>Bottom Line:</strong></p>
                                <p>NoSQL databases with SQL interfaces violate Rule 0 because their <strong>fundamental data model isn't relational</strong>. SQL is added for convenience, not because the system is inherently relational. And that's perfectly okay - they're solving different problems than traditional RDBMS!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 35: Rule 1 - Information Rule -->
            <div class="question-content" id="q35">
                <div class="question-header">
                    <h1 class="question-title">Explain Rule 1: Information Rule in RDBMS</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-brain"></i> Expert Level</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 1: Information Rule</strong> states that:</p>
                        
                        <blockquote style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-left: 4px solid #10b981; margin: 1rem 0;">
                            <strong>All information in a relational database is represented explicitly at the logical level and in exactly one way ‚Äì by values in tables.</strong>
                        </blockquote>
                        
                        <p style="margin-top: 1rem;">Let me break this down: <strong>EVERYTHING</strong> must be stored as values in table cells. No exceptions! This means:</p>
                        
                        <ul style="margin-top: 1rem; line-height: 2;">
                            <li><strong>No pointers:</strong> Relationships through values, not memory addresses</li>
                            <li><strong>No physical links:</strong> No hidden connections between records</li>
                            <li><strong>No metadata tricks:</strong> Even structural information stored as data</li>
                            <li><strong>Pure tabular form:</strong> Rows and columns only</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;">This is what makes relational databases "relational" - data is related through <strong>matching values</strong> in columns (foreign keys), not through physical pointers or hierarchical structures.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Values in Tables</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> No Pointers</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> No Hidden Data</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Pure Tabular</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Explicit Representation</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Scenario: Employee-Department Relationship
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-sitemap"></i> Before and After Rule 1
                        </div>
                        
                        <p><strong>‚ùå BEFORE Rule 1 (Hierarchical Database with Pointers):</strong></p>
                        <div class="code-example">
                            <pre><code>// Hierarchical model used physical pointers

Employee Record:
{
    ID: 101,
    Name: "Alice",
    DepartmentPointer: 0x7FFF8A2B  // Memory address!
}

Department Record (at address 0x7FFF8A2B):
{
    ID: 10,
    Name: "Engineering"
}

Problem:
- Information hidden in pointers
- Can't see relationship in data itself
- Must navigate memory to find department
- Breaks if pointer becomes invalid</code></pre>
                        </div>
                        
                        <p><strong>‚úÖ AFTER Rule 1 (Relational - Values Only):</strong></p>
                        <div class="code-example">
                            <pre><code class="language-sql">-- Employees Table
+-------+----------+----------+
| EmpID | Name     | DeptID   |
+-------+----------+----------+
| 101   | Alice    | 10       |  ‚Üê DeptID is a VALUE, not pointer!
| 102   | Bob      | 10       |
| 103   | Carol    | 20       |
+-------+----------+----------+

-- Departments Table
+--------+-------------+
| DeptID | DeptName    |
+--------+-------------+
| 10     | Engineering |
| 20     | Sales       |
+--------+-------------+

-- Relationship established through MATCHING VALUES
-- Employee's DeptID (10) matches Department's DeptID (10)
-- No pointers, no hidden links!

SELECT e.Name, d.DeptName
FROM Employees e
JOIN Departments d ON e.DeptID = d.DeptID;  -- Match on VALUES</code></pre>
                        </div>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6;">
                            <p><strong>üéØ Key Point:</strong> In relational databases, you can <strong>see</strong> all information just by looking at table values. No hidden pointers, no secret links. Everything is explicit and visible!</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        SQL Examples Demonstrating Rule 1
                    </div>
                    
                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">‚úÖ Rule 1 Compliant: All Information in Values</span>
                        </div>
                        <pre><code class="language-sql">-- Students Table
CREATE TABLE Students (
    StudentID INT PRIMARY KEY,
    Name VARCHAR(100),
    Email VARCHAR(100),
    DeptID INT  -- Foreign key as VALUE, not pointer
);

-- Departments Table
CREATE TABLE Departments (
    DeptID INT PRIMARY KEY,
    DeptName VARCHAR(50),
    Building VARCHAR(50)
);

-- Enrollments Table (Many-to-Many)
CREATE TABLE Enrollments (
    EnrollmentID INT PRIMARY KEY,
    StudentID INT,  -- VALUE reference
    CourseID INT,   -- VALUE reference
    Grade CHAR(2)
);

-- All relationships through VALUES!
-- No hidden pointers anywhere
-- Everything visible in table data</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">Querying: Relationships Through Value Matching</span>
                        </div>
                        <pre><code class="language-sql">-- Find all students in Computer Science department
SELECT s.StudentID, s.Name, d.DeptName
FROM Students s
JOIN Departments d ON s.DeptID = d.DeptID  -- Match on VALUES
WHERE d.DeptName = 'Computer Science';

-- Result shows data from multiple tables
-- Joined by matching DeptID VALUES
-- No pointer navigation needed!</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span class="code-title">‚ö†Ô∏è SQL Violation: Duplicate Rows (Not Pure Set)</span>
                        </div>
                        <pre><code class="language-sql">-- SQL allows duplicate rows - violates pure relational theory
SELECT Name FROM Students;

-- Can return:
-- 'John'
-- 'Alice'
-- 'John'  ‚Üê Duplicate!

-- Pure relational model (Rule 1) says relations are SETS
-- Sets don't have duplicates!

-- Should require DISTINCT by default:
SELECT DISTINCT Name FROM Students;

-- This is one area where SQL doesn't perfectly follow Rule 1</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-times-circle"></i>
                        What Violates Rule 1?
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Violation</th>
                                    <th>Description</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Physical Pointers</strong></td>
                                    <td>Using memory addresses to link records</td>
                                    <td>Hierarchical DB: Record at 0x7FFF points to parent</td>
                                </tr>
                                <tr>
                                    <td><strong>Hidden Links</strong></td>
                                    <td>Relationships not visible as data values</td>
                                    <td>Network DB: CODASYL sets with owner-member pointers</td>
                                </tr>
                                <tr>
                                    <td><strong>Row Ordering Dependency</strong></td>
                                    <td>Meaning encoded in physical row order</td>
                                    <td>First row is "primary", rest are "details"</td>
                                </tr>
                                <tr>
                                    <td><strong>Column Ordering Dependency</strong></td>
                                    <td>Meaning encoded in column position</td>
                                    <td>Column 1 is always "key", column 2 is "value"</td>
                                </tr>
                                <tr>
                                    <td><strong>Duplicate Rows</strong></td>
                                    <td>Same tuple appearing multiple times</td>
                                    <td>SQL allowing: SELECT Name ‚Üí 'John', 'John'</td>
                                </tr>
                                <tr>
                                    <td><strong>Special Row Types</strong></td>
                                    <td>Header rows, separator rows with special meaning</td>
                                    <td>Row indicating "start of new group"</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does Rule 1 differ from how hierarchical databases stored information?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is the fundamental difference that made the relational model revolutionary!</strong></p>
                                
                                <p><strong>Hierarchical Databases (IBM IMS - 1960s):</strong></p>
                                
                                <p><strong>1. Physical Pointers:</strong></p>
                                <div class="code-example">
                                    <pre><code>Company (Root)
  ‚Üì (pointer 0x1A2B)
Department
  ‚Üì (pointer 0x3C4D)
Employee

// Information stored as:
// - Data values (name, ID)
// - Physical pointers (memory addresses)
// - Parent-child links

// You CANNOT see relationships by looking at data
// Must follow pointers through memory</code></pre>
                                </div>
                                
                                <p><strong>2. Navigation Required:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-cobol">* To find employees in Sales dept:
GET UNIQUE COMPANY
GET NEXT DEPARTMENT UNTIL DEPT-NAME = 'SALES'
GET NEXT EMPLOYEE WITHIN DEPARTMENT
WHILE NOT END-OF-SEGMENT
    PROCESS EMPLOYEE
    GET NEXT EMPLOYEE
END-WHILE

* Must navigate through physical structure!</code></pre>
                                </div>
                                
                                <p><strong>Relational Databases (Rule 1 - 1970+):</strong></p>
                                
                                <p><strong>1. Values Only:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Everything is VALUES in tables

Departments:
+--------+-------+
| DeptID | Name  |
+--------+-------+
| 1      | Sales |
+--------+-------+

Employees:
+-------+-------+--------+
| EmpID | Name  | DeptID |
+-------+-------+--------+
| 101   | Alice | 1      |
+-------+-------+--------+

-- DeptID "1" in Employees matches DeptID "1" in Departments
-- Relationship visible as matching VALUES
-- No pointers involved!</code></pre>
                                </div>
                                
                                <p><strong>2. Declarative Query:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Same query - declarative!
SELECT e.Name
FROM Employees e
JOIN Departments d ON e.DeptID = d.DeptID
WHERE d.Name = 'Sales';

-- No navigation!
-- Just declare WHAT you want
-- Database figures out HOW</code></pre>
                                </div>
                                
                                <p><strong>Key Differences:</strong></p>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Aspect</th>
                                            <th>Hierarchical (Pre-Rule 1)</th>
                                            <th>Relational (Rule 1)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Relationships</strong></td>
                                            <td>Physical pointers</td>
                                            <td>Matching values</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Visibility</strong></td>
                                            <td>Hidden in structure</td>
                                            <td>Explicit in data</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Access</strong></td>
                                            <td>Procedural navigation</td>
                                            <td>Declarative queries</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Flexibility</strong></td>
                                            <td>Fixed paths only</td>
                                            <td>Any combination</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Independence</strong></td>
                                            <td>Tightly coupled</td>
                                            <td>Data independent</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <p><strong>Why Rule 1 Matters:</strong></p>
                                <ul>
                                    <li><strong>Transparency:</strong> See all relationships in data</li>
                                    <li><strong>Simplicity:</strong> No pointer management</li>
                                    <li><strong>Flexibility:</strong> Query any combination of tables</li>
                                    <li><strong>Portability:</strong> Data is just values, easily moved</li>
                                    <li><strong>Integrity:</strong> Values can be validated, pointers can't</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Does SQL fully comply with Rule 1? If not, why not?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>SQL mostly complies with Rule 1, but has one significant violation: it allows duplicate rows!</strong></p>
                                
                                <p><strong>The Violation: Duplicate Tuples</strong></p>
                                
                                <p>Rule 1 says all information is represented as values in tables. In Codd's pure relational model, tables are <strong>sets</strong>, and sets cannot have duplicate elements.</p>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">-- SQL allows duplicates:
SELECT DeptID FROM Employees;

-- Can return:
-- 10
-- 10  ‚Üê Duplicate!
-- 20
-- 10  ‚Üê Another duplicate!

-- This violates set theory
-- In pure relational model, a relation is a SET
-- Sets don't have duplicates!</code></pre>
                                </div>
                                
                                <p><strong>Why SQL Allows This:</strong></p>
                                
                                <p><strong>1. Performance Reasons:</strong></p>
                                <ul>
                                    <li>Removing duplicates requires sorting or hashing - expensive!</li>
                                    <li>Making DISTINCT default would slow ALL queries</li>
                                    <li>Better to let users choose when they need uniqueness</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Without automatic DISTINCT:
SELECT Name FROM Employees;  -- Fast

-- With automatic DISTINCT (Codd's way):
SELECT DISTINCT Name FROM Employees;  -- Slower, but "correct"</code></pre>
                                </div>
                                
                                <p><strong>2. Practical Considerations:</strong></p>
                                <ul>
                                    <li>Sometimes you WANT duplicates (counting, aggregating)</li>
                                    <li>Multisets (bags) are more practical than sets</li>
                                    <li>Most users don't care about theoretical purity</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code class="language-sql">-- When duplicates are useful:
SELECT Salary FROM Employees;
-- Multiple employees might have same salary
-- You want to see each one for counting

-- Aggregation needs duplicates:
SELECT AVG(Salary) FROM Employees;
-- If Salary column had: 50000, 50000, 60000
-- Average should be (50000+50000+60000)/3 = 53,333
-- If DISTINCT was automatic: (50000+60000)/2 = 55,000 (wrong!)</code></pre>
                                </div>
                                
                                <p><strong>Areas Where SQL DOES Comply with Rule 1:</strong></p>
                                
                                <p><strong>‚úÖ No Physical Pointers:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Relationships through values, not pointers
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT,  -- VALUE, not pointer!
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
);

-- Join on matching VALUES:
SELECT * FROM Orders o
JOIN Customers c ON o.CustomerID = c.CustomerID;</code></pre>
                                </div>
                                
                                <p><strong>‚úÖ No Hidden Links:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- All relationships explicit in data
-- Can see them by examining table contents

SELECT * FROM Orders;
-- You can SEE which CustomerID each order belongs to
-- No hidden connections!</code></pre>
                                </div>
                                
                                <p><strong>‚úÖ No Ordering Dependencies:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Rows are unordered (in theory)
-- Meaning not dependent on row position
SELECT * FROM Employees;  -- Any order is valid

-- Order only matters if you explicitly request it:
SELECT * FROM Employees ORDER BY Name;</code></pre>
                                </div>
                                
                                <p><strong>Codd's Opinion:</strong></p>
                                <p>Codd himself was critical of SQL for allowing duplicates. He felt it violated the mathematical purity of the relational model. However, the SQL designers chose pragmatism over purity.</p>
                                
                                <p><strong>Bottom Line:</strong></p>
                                <p>SQL is about <strong>98% compliant</strong> with Rule 1. The duplicate rows issue is the main violation, but it's a deliberate design choice for performance and practicality. In real-world usage, this violation rarely causes problems, and you can always use DISTINCT when needed.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why is it important that all information be "explicitly" represented as values?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The "explicitly" part is crucial - it means you can understand your data just by looking at it!</strong></p>
                                
                                <p><strong>Explicit vs Implicit Information:</strong></p>
                                
                                <p><strong>‚ùå Implicit (Bad - Violates Rule 1):</strong></p>
                                <div class="code-example">
                                    <pre><code>// Row position has meaning:
Row 1: Company data (always first!)
Row 2: First department
Row 3: First employee of first department
Row 4: Second employee of first department
Row 5: Second department
...

// You can't understand data without knowing the structure!
// Information hidden in row position</code></pre>
                                </div>
                                
                                <p><strong>‚úÖ Explicit (Good - Follows Rule 1):</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Every relationship is a VALUE you can see

Employees Table:
+-------+-------+--------+------------+
| EmpID | Name  | DeptID | ManagerID  |
+-------+-------+--------+------------+
| 101   | Alice | 10     | NULL       |
| 102   | Bob   | 10     | 101        |
| 103   | Carol | 20     | NULL       |
+-------+-------+--------+------------+

-- Can SEE that:
-- - Bob is in Department 10 (DeptID column)
-- - Alice manages Bob (ManagerID matches Alice's EmpID)
-- - Carol has no manager (ManagerID is NULL)
-- All explicit! No hidden meaning!</code></pre>
                                </div>
                                
                                <p><strong>Why Explicitness Matters:</strong></p>
                                
                                <p><strong>1. Data Portability:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Export data to CSV:
101,Alice,10,NULL
102,Bob,10,101
103,Carol,20,NULL

-- Import to different system:
-- All relationships preserved!
-- No pointers that break
-- No structure dependencies</code></pre>
                                </div>
                                
                                <p><strong>2. Query Flexibility:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Can ask ANY question about relationships:

-- Who manages Bob?
SELECT m.Name FROM Employees e
JOIN Employees m ON e.ManagerID = m.EmpID
WHERE e.Name = 'Bob';

-- How many employees does Alice manage?
SELECT COUNT(*) FROM Employees
WHERE ManagerID = 101;

-- Which departments have employees?
SELECT DISTINCT d.DeptName
FROM Employees e
JOIN Departments d ON e.DeptID = d.DeptID;

-- All possible because relationships are EXPLICIT VALUES!</code></pre>
                                </div>
                                
                                <p><strong>3. Data Validation:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Because relationships are values, we can validate them!

-- Ensure DeptID exists:
ALTER TABLE Employees
ADD FOREIGN KEY (DeptID) REFERENCES Departments(DeptID);

-- Ensure ManagerID refers to real employee:
ALTER TABLE Employees
ADD FOREIGN KEY (ManagerID) REFERENCES Employees(EmpID);

-- Can't validate pointers this way!</code></pre>
                                </div>
                                
                                <p><strong>4. Understandability:</strong></p>
                                <ul>
                                    <li>New developer looks at table ‚Üí understands relationships immediately</li>
                                    <li>No need to understand physical storage</li>
                                    <li>No need to know system internals</li>
                                    <li>Self-documenting data structure</li>
                                </ul>
                                
                                <p><strong>5. Data Independence:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Change physical storage:
-- Move from HDD to SSD
-- Change indexing strategy
-- Reorganize file layout

-- Queries still work unchanged!
SELECT * FROM Employees WHERE DeptID = 10;

-- Because relationship is EXPLICIT VALUE (DeptID = 10)
-- Not dependent on physical location</code></pre>
                                </div>
                                
                                <p><strong>6. Ad-hoc Queries:</strong></p>
                                <p>When information is explicit:</p>
                                <ul>
                                    <li>Business users can write queries</li>
                                    <li>Don't need to understand internals</li>
                                    <li>Can explore data freely</li>
                                    <li>Empowers self-service analytics</li>
                                </ul>
                                
                                <p><strong>Real-World Impact:</strong></p>
                                <div class="code-example">
                                    <pre><code>// Before Rule 1 (Implicit):
"To find an employee's department, you need to:
1. Load employee record
2. Follow pointer at offset +24 bytes
3. Dereference to get department record
4. Read department name at offset +8 bytes"

// After Rule 1 (Explicit):
SELECT d.DeptName 
FROM Employees e
JOIN Departments d ON e.DeptID = d.DeptID
WHERE e.EmpID = 101;

Simple! No technical knowledge required!</code></pre>
                                </div>
                                
                                <p><strong>The Bottom Line:</strong></p>
                                <p>Explicit representation (Rule 1) makes databases <strong>transparent, portable, flexible, and user-friendly</strong>. It's the foundation of why relational databases are so successful - anyone can understand and query the data without needing to understand the system internals!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

             <!-- Question 36: What is Rule 2 - Guaranteed Access Rule? -->
            <div class="question-content" id="q36">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 2: Guaranteed Access Rule?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 2: Guaranteed Access Rule</strong> states that every single data value in a relational database must be logically accessible by using a combination of <strong>table name + primary key value + column name</strong>.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Core Principle:</strong></p>
                        <p>Each and every datum (atomic value) in a relational database is guaranteed to be accessible through a combination of:</p>
                        <ul>
                            <li><strong>Table Name:</strong> Which table the data is in</li>
                            <li><strong>Primary Key:</strong> Which row the data belongs to</li>
                            <li><strong>Column Name:</strong> Which attribute/field contains the data</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why This Matters:</strong></p>
                        <ul>
                            <li>No data should be "hidden" or inaccessible</li>
                            <li>Data access should be predictable and logical</li>
                            <li>Every piece of data must be uniquely identifiable</li>
                            <li>No physical pointers or positional access needed</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Examples and Implementation
                    </div>
                    <div class="example-box">
                        <pre><code>-- Example: Accessing Employee Data

            -- Table Definition
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,      -- Primary Key
                FirstName VARCHAR(50),
                LastName VARCHAR(50),
                Department VARCHAR(50),
                Salary DECIMAL(10,2)
            );

            -- Sample Data
            INSERT INTO Employees VALUES
            (101, 'John', 'Doe', 'IT', 75000),
            (102, 'Jane', 'Smith', 'HR', 65000),
            (103, 'Bob', 'Johnson', 'Finance', 80000);

            -- -----------------------------------------------------------
            -- Guaranteed Access Rule in Action
            -- -----------------------------------------------------------

            -- Access specific datum: John's Salary
            -- Table Name: Employees
            -- Primary Key: 101
            -- Column Name: Salary
            SELECT Salary FROM Employees WHERE EmployeeID = 101;
            -- Result: 75000 ‚úì

            -- Access Jane's Department
            -- Table Name: Employees
            -- Primary Key: 102  
            -- Column Name: Department
            SELECT Department FROM Employees WHERE EmployeeID = 102;
            -- Result: HR ‚úì

            -- Access Bob's Last Name
            -- Table Name: Employees
            -- Primary Key: 103
            -- Column Name: LastName
            SELECT LastName FROM Employees WHERE EmployeeID = 103;
            -- Result: Johnson ‚úì

            -- Every single value is accessible using:
            -- Table + Primary Key + Column Name

            -- -----------------------------------------------------------
            -- Violation Examples (What NOT to do)
            -- -----------------------------------------------------------

            -- ‚ùå BAD: Using row position (violates guaranteed access)
            -- SELECT * FROM Employees LIMIT 1 OFFSET 2;  -- Position-based, fragile

            -- ‚ùå BAD: No primary key (can't uniquely identify rows)
            CREATE TABLE BadTable (
                Name VARCHAR(50),
                Value INT
            );
            -- If two rows have same Name, how do you access specific Value?

            -- ‚úì GOOD: With primary key, every value is accessible
            CREATE TABLE GoodTable (
                ID INT PRIMARY KEY,
                Name VARCHAR(50),
                Value INT
            );
            -- Can always access: SELECT Value FROM GoodTable WHERE ID = 5;</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Guaranteed Access Visualization
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 450" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Guaranteed Access Rule: Table + PK + Column</text>
                            
                            <!-- Table Structure -->
                            <rect x="150" y="70" width="500" height="280" fill="#f0f9ff" stroke="#0284c7" stroke-width="2" rx="5"/>
                            
                            <!-- Table Header -->
                            <text x="400" y="100" font-size="14" font-weight="bold" fill="#0c4a6e" text-anchor="middle">Employees Table</text>
                            
                            <!-- Column Headers -->
                            <rect x="170" y="120" width="100" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="220" y="145" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">EmployeeID</text>
                            
                            <rect x="270" y="120" width="110" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="325" y="145" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">FirstName</text>
                            
                            <rect x="380" y="120" width="110" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="435" y="145" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">Department</text>
                            
                            <rect x="490" y="120" width="140" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="560" y="145" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">Salary</text>
                            
                            <!-- Row 1 -->
                            <rect x="170" y="160" width="100" height="40" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                            <text x="220" y="185" font-size="11" fill="#333" text-anchor="middle">101</text>
                            <text x="180" y="175" font-size="8" fill="#059669">PK ‚Üí</text>
                            
                            <rect x="270" y="160" width="110" height="40" fill="white" stroke="#cbd5e1" stroke-width="1"/>
                            <text x="325" y="185" font-size="11" fill="#333" text-anchor="middle">John</text>
                            
                            <rect x="380" y="160" width="110" height="40" fill="white" stroke="#cbd5e1" stroke-width="1"/>
                            <text x="435" y="185" font-size="11" fill="#333" text-anchor="middle">IT</text>
                            
                            <rect x="490" y="160" width="140" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                            <text x="560" y="185" font-size="11" fill="#333" text-anchor="middle">75000</text>
                            
                            <!-- Row 2 -->
                            <rect x="170" y="200" width="100" height="40" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                            <text x="220" y="225" font-size="11" fill="#333" text-anchor="middle">102</text>
                            
                            <rect x="270" y="200" width="110" height="40" fill="white" stroke="#cbd5e1" stroke-width="1"/>
                            <text x="325" y="225" font-size="11" fill="#333" text-anchor="middle">Jane</text>
                            
                            <rect x="380" y="200" width="110" height="40" fill="white" stroke="#cbd5e1" stroke-width="1"/>
                            <text x="435" y="225" font-size="11" fill="#333" text-anchor="middle">HR</text>
                            
                            <rect x="490" y="200" width="140" height="40" fill="white" stroke="#cbd5e1" stroke-width="1"/>
                            <text x="560" y="225" font-size="11" fill="#333" text-anchor="middle">65000</text>
                            
                            <!-- Row 3 -->
                            <rect x="170" y="240" width="100" height="40" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                            <text x="220" y="265" font-size="11" fill="#333" text-anchor="middle">103</text>
                            
                            <rect x="270" y="240" width="110" height="40" fill="white" stroke="#cbd5e1" stroke-width="1"/>
                            <text x="325" y="265" font-size="11" fill="#333" text-anchor="middle">Bob</text>
                            
                            <rect x="380" y="240" width="110" height="40" fill="white" stroke="#cbd5e1" stroke-width="1"/>
                            <text x="435" y="265" font-size="11" fill="#333" text-anchor="middle">Finance</text>
                            
                            <rect x="490" y="240" width="140" height="40" fill="white" stroke="#cbd5e1" stroke-width="1"/>
                            <text x="560" y="265" font-size="11" fill="#333" text-anchor="middle">80000</text>
                            
                            <!-- Access Example -->
                            <rect x="150" y="300" width="500" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="3"/>
                            <text x="400" y="325" font-size="12" font-weight="bold" fill="#92400e" text-anchor="middle">Access John's Salary: Table="Employees" + PK=101 + Column="Salary" ‚Üí 75000</text>
                            
                            <!-- Arrows pointing to access -->
                            <path d="M 400 300 L 220 200" stroke="#dc2626" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow21)"/>
                            <text x="300" y="250" font-size="10" fill="#dc2626" font-weight="bold">Primary Key</text>
                            
                            <path d="M 450 300 L 560 200" stroke="#dc2626" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow21)"/>
                            <text x="520" y="250" font-size="10" fill="#dc2626" font-weight="bold">Column</text>
                            
                            <!-- Benefits -->
                            <rect x="50" y="370" width="700" height="60" fill="#d1fae5" stroke="#10b981" stroke-width="2" rx="5"/>
                            <text x="400" y="395" font-size="13" font-weight="bold" fill="#065f46" text-anchor="middle">Benefits of Guaranteed Access</text>
                            <text x="70" y="417" font-size="11" fill="#333">‚úì Every value uniquely accessible   ‚úì No hidden data   ‚úì Predictable access   ‚úì No physical pointers needed</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow21" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#dc2626"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Real-World Issues When Rule 2 is Violated
                    </div>
                    <div class="explanation-text">
                        <p><strong>If a DBMS fails to implement Rule 2, users face:</strong></p>
                        
                        <h4 style="color: #dc2626; margin-top: 1rem;">1. Data Inaccessibility</h4>
                        <ul>
                            <li>Cannot reliably access specific data values</li>
                            <li>Must rely on physical positions or pointers</li>
                            <li>Data might become "lost" if structure changes</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Problem: Table without Primary Key
            CREATE TABLE Orders (
                CustomerName VARCHAR(50),
                Product VARCHAR(50),
                Quantity INT
            );

            INSERT INTO Orders VALUES ('John', 'Laptop', 1);
            INSERT INTO Orders VALUES ('John', 'Laptop', 1);  -- Duplicate!

            -- How do you update ONLY the first order? You can't!
            -- No unique identifier to access specific row
            UPDATE Orders SET Quantity = 2 
            WHERE CustomerName = 'John' AND Product = 'Laptop';
            -- This updates BOTH rows! ‚ùå</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1rem;">2. Data Integrity Issues</h4>
                        <ul>
                            <li>Cannot uniquely identify rows</li>
                            <li>Updates may affect wrong rows</li>
                            <li>Deletes may remove wrong data</li>
                        </ul>
                        
                        <h4 style="color: #dc2626; margin-top: 1rem;">3. Application Complexity</h4>
                        <ul>
                            <li>Applications must use workarounds</li>
                            <li>Position-based access is fragile</li>
                            <li>Code becomes error-prone</li>
                        </ul>
                        
                        <h4 style="color: #dc2626; margin-top: 1rem;">4. Performance Problems</h4>
                        <ul>
                            <li>Full table scans to find data</li>
                            <li>Cannot use efficient indexes</li>
                            <li>Slower queries</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        How RDBMS Implements Rule 2
                    </div>
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Primary Key Constraints:</strong>
                                <ul>
                                    <li>Enforce unique identification of rows</li>
                                    <li>Automatically create unique index</li>
                                </ul>
                            </li>
                            
                            <li><strong>Data Dictionary/Catalog:</strong>
                                <ul>
                                    <li>Stores metadata about tables and columns</li>
                                    <li>Enables query by table name + column name</li>
                                </ul>
                            </li>
                            
                            <li><strong>SQL Language:</strong>
                                <ul>
                                    <li>WHERE clause with primary key</li>
                                    <li>Logical access, not physical</li>
                                </ul>
                            </li>
                            
                            <li><strong>Indexes:</strong>
                                <ul>
                                    <li>Fast lookup by primary key</li>
                                    <li>Efficient access to any value</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What if a table has a composite primary key?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p>Rule 2 still applies! You use <strong>all parts of the composite key</strong> together.</p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Composite Primary Key Example
            CREATE TABLE OrderItems (
                OrderID INT,
                ProductID INT,
                Quantity INT,
                Price DECIMAL(10,2),
                PRIMARY KEY (OrderID, ProductID)  -- Composite key
            );

            -- Access specific value: Price of Product 5 in Order 100
            -- Table: OrderItems
            -- Primary Key: OrderID = 100 AND ProductID = 5
            -- Column: Price
            SELECT Price FROM OrderItems 
            WHERE OrderID = 100 AND ProductID = 5;
            -- Guaranteed access! ‚úì</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Does Rule 2 mean we can't have tables without primary keys?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p>Technically, SQL allows tables without primary keys, but it <strong>violates Rule 2</strong> and is considered <strong>bad practice</strong>.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong></p>
                                <ul>
                                    <li>Every table SHOULD have a primary key</li>
                                    <li>If no natural key exists, use surrogate key (auto-increment ID)</li>
                                    <li>This ensures guaranteed access to all data</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- GOOD: Table with surrogate primary key
            CREATE TABLE Comments (
                CommentID INT PRIMARY KEY AUTO_INCREMENT,
                PostID INT,
                UserID INT,
                CommentText TEXT,
                CreatedAt TIMESTAMP
            );
            -- Every comment uniquely accessible via CommentID ‚úì</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does Rule 2 relate to data normalization?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p>Rule 2 and normalization work together:</p>
                                <ul>
                                    <li><strong>Rule 2:</strong> Ensures every value is accessible via table + PK + column</li>
                                    <li><strong>Normalization:</strong> Ensures data is organized efficiently without redundancy</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;">Both require:</p>
                                <ul>
                                    <li>Primary keys on all tables</li>
                                    <li>Proper relationships via foreign keys</li>
                                    <li>Atomic values in columns</li>
                                    <li>No repeating groups</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;">Together they create a <strong>well-designed, accessible database</strong>.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Guaranteed Access Rule</span>
                        <span class="keyword-tag">Codd's Rule 2</span>
                        <span class="keyword-tag">Primary Key</span>
                        <span class="keyword-tag">Unique Identification</span>
                        <span class="keyword-tag">Logical Access</span>
                        <span class="keyword-tag">Table + PK + Column</span>
                        <span class="keyword-tag">Data Accessibility</span>
                        <span class="keyword-tag">No Physical Pointers</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 37: What is Rule 3 - Systematic Treatment of Null Values? -->
            <div class="question-content" id="q37">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 3: Systematic Treatment of Null Values?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 3: Systematic Treatment of Null Values</strong> states that the DBMS must support a systematic way to represent and handle <strong>missing or inapplicable information</strong> using NULL values, and NULL must be treated consistently across the entire system.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Points:</strong></p>
                        <ul>
                            <li><strong>NULL represents:</strong> Missing, unknown, or inapplicable data</li>
                            <li><strong>NULL ‚â† Zero:</strong> NULL is NOT the same as 0, empty string, or false</li>
                            <li><strong>NULL ‚â† Empty:</strong> NULL means "no value" not "empty value"</li>
                            <li><strong>Systematic:</strong> NULL must be handled consistently in ALL operations</li>
                            <li><strong>Three-valued logic:</strong> TRUE, FALSE, and UNKNOWN (NULL)</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>What NULL Means:</strong></p>
                        <ul>
                            <li><strong>Unknown:</strong> Value exists but we don't know it yet (e.g., employee's phone number)</li>
                            <li><strong>Inapplicable:</strong> Value doesn't apply (e.g., spouse name for unmarried person)</li>
                            <li><strong>Missing:</strong> Value should be there but is missing</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        NULL Handling Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- Create table with NULL-able columns
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                FirstName VARCHAR(50) NOT NULL,
                LastName VARCHAR(50) NOT NULL,
                Email VARCHAR(100),              -- Can be NULL (unknown)
                Phone VARCHAR(15),                -- Can be NULL (unknown)
                ManagerID INT,                    -- Can be NULL (CEO has no manager - inapplicable)
                Salary DECIMAL(10,2),
                Commission DECIMAL(10,2)          -- Can be NULL (not applicable for all roles)
            );

            -- Insert data with NULLs
            INSERT INTO Employees VALUES
            (1, 'John', 'Doe', 'john@company.com', NULL, NULL, 75000, NULL),
            (2, 'Jane', 'Smith', NULL, '555-1234', 1, 65000, 5000),
            (3, 'Bob', 'Johnson', 'bob@company.com', '555-5678', 1, 80000, NULL);

            -- -----------------------------------------------------------
            -- NULL in Comparisons
            -- -----------------------------------------------------------

            -- NULL is NOT equal to anything, not even NULL!
            SELECT * FROM Employees WHERE Email = NULL;      -- Returns 0 rows ‚ùå
            SELECT * FROM Employees WHERE Email IS NULL;     -- Correct way ‚úì

            SELECT * FROM Employees WHERE Email != NULL;     -- Returns 0 rows ‚ùå
            SELECT * FROM Employees WHERE Email IS NOT NULL; -- Correct way ‚úì

            -- NULL in arithmetic
            SELECT EmployeeID, Salary, Commission, 
                Salary + Commission AS TotalComp
            FROM Employees;
            -- Result:
            -- ID | Salary | Commission | TotalComp
            -- 1  | 75000  | NULL       | NULL       ‚Üê NULL + anything = NULL
            -- 2  | 65000  | 5000       | 70000
            -- 3  | 80000  | NULL       | NULL

            -- Handle NULL in calculations
            SELECT EmployeeID, Salary, Commission,
                Salary + COALESCE(Commission, 0) AS TotalComp
            FROM Employees;
            -- Result:
            -- ID | Salary | Commission | TotalComp
            -- 1  | 75000  | NULL       | 75000      ‚Üê COALESCE replaces NULL with 0
            -- 2  | 65000  | 5000       | 70000
            -- 3  | 80000  | NULL       | 80000

            -- -----------------------------------------------------------
            -- NULL in Logical Operations (Three-Valued Logic)
            -- -----------------------------------------------------------

            -- AND with NULL
            -- TRUE AND NULL = NULL
            -- FALSE AND NULL = FALSE
            -- NULL AND NULL = NULL

            SELECT * FROM Employees 
            WHERE Salary > 70000 AND Commission > 1000;
            -- Excludes rows where Commission IS NULL

            -- OR with NULL
            -- TRUE OR NULL = TRUE
            -- FALSE OR NULL = NULL
            -- NULL OR NULL = NULL

            -- NOT with NULL
            -- NOT NULL = NULL

            -- -----------------------------------------------------------
            -- NULL in Aggregations
            -- -----------------------------------------------------------

            -- COUNT, SUM, AVG ignore NULL values
            SELECT 
                COUNT(*) AS TotalEmployees,           -- 3
                COUNT(Email) AS EmployeesWithEmail,   -- 2 (excludes NULL)
                COUNT(Commission) AS EmployeesWithCommission,  -- 1
                AVG(Commission) AS AvgCommission,     -- 5000 (only 1 non-NULL value)
                SUM(Commission) AS TotalCommission    -- 5000
            FROM Employees;

            -- Be careful with AVG and NULL!
            -- AVG ignores NULLs, which might not be what you want

            -- -----------------------------------------------------------
            -- NULL in Sorting
            -- -----------------------------------------------------------

            -- NULL values sorted to beginning or end depending on DB
            SELECT * FROM Employees ORDER BY Email;
            -- MySQL: NULLs first
            -- PostgreSQL: NULLs last (by default)

            SELECT * FROM Employees ORDER BY Email NULLS LAST;   -- PostgreSQL
            SELECT * FROM Employees ORDER BY Email NULLS FIRST;  -- PostgreSQL

            -- -----------------------------------------------------------
            -- NULL in DISTINCT
            -- -----------------------------------------------------------

            -- NULL values are considered distinct from all other values
            -- BUT multiple NULLs are considered equal to each other in DISTINCT
            SELECT DISTINCT Email FROM Employees;
            -- Returns unique emails + one NULL (if any NULL exists)</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-table"></i>
                        NULL Three-Valued Logic Truth Table
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">AND Operation</h4>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <tr style="background: #dbeafe;">
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">AND</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">TRUE</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">FALSE</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">NULL</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>TRUE</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">TRUE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">FALSE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">NULL</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>FALSE</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">FALSE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">FALSE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">FALSE</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>NULL</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">NULL</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">FALSE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">NULL</td>
                            </tr>
                        </table>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">OR Operation</h4>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <tr style="background: #dbeafe;">
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">OR</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">TRUE</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">FALSE</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">NULL</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>TRUE</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5; color: black">TRUE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5; color: black">TRUE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5; color: black">TRUE</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>FALSE</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">TRUE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; color: black">FALSE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">NULL</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>NULL</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">TRUE</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">NULL</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">NULL</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Real-World NULL Violations
                    </div>
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Example: Database Violating Rule 3</h4>
                        
                        <p><strong>Problem Scenario:</strong> A database treats NULL inconsistently:</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- BAD: Database treats NULL as zero in calculations
            -- (Some old databases did this)

            SELECT Salary + Commission AS TotalComp
            FROM Employees WHERE EmployeeID = 1;
            -- Bad DB: Returns 75000 (treats NULL Commission as 0)
            -- Good DB: Returns NULL (correct behavior)

            -- This causes:
            -- ‚ùå Incorrect calculations
            -- ‚ùå Misleading reports
            -- ‚ùå Wrong business decisions

            -- -----------------------------------------------------------
            -- Another Violation: NULL = NULL returns TRUE
            -- -----------------------------------------------------------

            -- BAD: Some systems incorrectly treat NULL = NULL as TRUE
            SELECT * FROM Employees WHERE Email = NULL;
            -- Bad DB: Returns rows where Email IS NULL
            -- Good DB: Returns 0 rows (correct - NULL = NULL is UNKNOWN, not TRUE)

            -- -----------------------------------------------------------
            -- Violation: Empty string vs NULL confusion
            -- -----------------------------------------------------------

            -- BAD: Database treats '' (empty string) same as NULL
            INSERT INTO Employees (EmployeeID, FirstName, Email) 
            VALUES (10, 'Test', '');

            -- Some databases store this as NULL
            -- Others store as empty string ''
            -- This inconsistency violates Rule 3!</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Impact of Violations:</strong></p>
                        <ul>
                            <li>‚ùå Data integrity issues</li>
                            <li>‚ùå Incorrect query results</li>
                            <li>‚ùå Application bugs</li>
                            <li>‚ùå Inconsistent behavior across queries</li>
                            <li>‚ùå Difficult to maintain code</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Best Practices for NULL Handling
                    </div>
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Always use IS NULL / IS NOT NULL:</strong>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- ‚úì CORRECT
            WHERE column IS NULL
            WHERE column IS NOT NULL

            -- ‚úó WRONG
            WHERE column = NULL
            WHERE column != NULL</code></pre>
                                </div>
                            </li>
                            
                            <li><strong>Use COALESCE to handle NULLs:</strong>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Replace NULL with default value
            SELECT COALESCE(Email, 'no-email@company.com') AS Email
            FROM Employees;

            -- Use first non-NULL value
            SELECT COALESCE(Phone, Mobile, 'No contact') AS Contact
            FROM Employees;</code></pre>
                                </div>
                            </li>
                            
                            <li><strong>Be careful with COUNT:</strong>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- COUNT(*) counts all rows
            -- COUNT(column) counts non-NULL values
            SELECT 
                COUNT(*) AS AllRows,
                COUNT(Email) AS RowsWithEmail
            FROM Employees;</code></pre>
                                </div>
                            </li>
                            
                            <li><strong>Consider NOT NULL constraints:</strong>
                                <ul>
                                    <li>Use NOT NULL for mandatory fields</li>
                                    <li>Forces data integrity at database level</li>
                                </ul>
                            </li>
                            
                            <li><strong>Document NULL meanings:</strong>
                                <ul>
                                    <li>Unknown vs Inapplicable</li>
                                    <li>Business rules for NULL handling</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why did Codd insist on systematic NULL handling?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Reasons:</strong></p>
                                <ol>
                                    <li><strong>Real-world reality:</strong> Missing information is common</li>
                                    <li><strong>Data integrity:</strong> Better than using "magic values" (e.g., -1, 'N/A')</li>
                                    <li><strong>Consistency:</strong> Uniform handling across all operations</li>
                                    <li><strong>Three-valued logic:</strong> More accurate representation of uncertainty</li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Alternative (without NULL):</strong></p>
                                <ul>
                                    <li>Use special values: -1 for unknown age, 'N/A' for unknown email</li>
                                    <li>Problem: These are actual values, not "no value"</li>
                                    <li>Can cause calculation errors, query confusion</li>
                                    <li>NULL is cleaner, more systematic</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between NULL and empty string?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">NULL</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Empty String ''</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Meaning</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No value / Unknown</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Empty value / Known to be empty</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Example</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Middle name unknown</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Person has no middle name</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Length</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">NULL</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">0</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Comparison</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">NULL = NULL is NULL (unknown)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">'' = '' is TRUE</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- NULL vs Empty String
            SELECT LENGTH(NULL);   -- Returns NULL
            SELECT LENGTH('');     -- Returns 0

            -- Different behavior in queries
            WHERE column = '';     -- Matches empty strings
            WHERE column IS NULL;  -- Matches NULL values</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can primary keys contain NULL?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No! Primary keys CANNOT be NULL.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Reasons:</strong></p>
                                <ul>
                                    <li>Primary key must uniquely identify each row</li>
                                    <li>NULL means "unknown" - can't identify with unknown value</li>
                                    <li>Multiple NULLs would violate uniqueness (since NULL ‚â† NULL)</li>
                                    <li>Primary key automatically has NOT NULL constraint</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- This automatically adds NOT NULL
            CREATE TABLE Test (
                ID INT PRIMARY KEY,  -- Implicitly NOT NULL
                Name VARCHAR(50)
            );

            -- This fails
            INSERT INTO Test VALUES (NULL, 'John');
            -- ERROR: Column 'ID' cannot be null</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Foreign keys CAN be NULL:</strong> Means relationship doesn't exist (optional relationship).</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">NULL Values</span>
                        <span class="keyword-tag">Codd's Rule 3</span>
                        <span class="keyword-tag">Three-Valued Logic</span>
                        <span class="keyword-tag">IS NULL</span>
                        <span class="keyword-tag">IS NOT NULL</span>
                        <span class="keyword-tag">COALESCE</span>
                        <span class="keyword-tag">Unknown vs Inapplicable</span>
                        <span class="keyword-tag">NULL ‚â† Empty</span>
                        <span class="keyword-tag">NULL ‚â† Zero</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 38 : What is Rule 4 - Active Online Catalog? -->
            <div class="question-content" id="q38">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 4: Active Online Catalog?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 4: Active Online Catalog (Data Dictionary)</strong> states that the database description (metadata) must be stored in the database itself using the same relational model, and this catalog must be accessible to authorized users using the same query language used for regular data.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Principles:</strong></p>
                        <ul>
                            <li><strong>Self-describing:</strong> Database stores its own structure information</li>
                            <li><strong>Relational format:</strong> Metadata stored in tables, just like data</li>
                            <li><strong>Query-able:</strong> Use SQL to query metadata</li>
                            <li><strong>Online:</strong> Always available and up-to-date</li>
                            <li><strong>Active:</strong> Automatically updated when structure changes</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>What Metadata Includes:</strong></p>
                        <ul>
                            <li>Table names and structures</li>
                            <li>Column names, data types, constraints</li>
                            <li>Indexes and keys</li>
                            <li>Views and stored procedures</li>
                            <li>User permissions and privileges</li>
                            <li>Relationships (foreign keys)</li>
                            <li>Statistics and performance data</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-database"></i>
                        How RDBMS Implements the Catalog
                    </div>
                    
                    <div class="explanation-text">
                        <p>Modern RDBMS implement this through system databases/schemas:</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">MySQL: information_schema</h4>
                        <p>A read-only database containing metadata about all databases.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">PostgreSQL: information_schema & pg_catalog</h4>
                        <p>Standard ANSI catalog plus PostgreSQL-specific system catalog.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">SQL Server: sys schema</h4>
                        <p>System views and tables containing metadata.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Oracle: Data Dictionary</h4>
                        <p>ALL_, USER_, and DBA_ views for metadata access.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Querying the Catalog - Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- MySQL information_schema Examples

            -- 1. List all databases
            SELECT schema_name 
            FROM information_schema.schemata;

            -- 2. List all tables in a specific database
            SELECT table_name, table_type
            FROM information_schema.tables
            WHERE table_schema = 'mydb'
            ORDER BY table_name;

            -- Result:
            -- table_name     | table_type
            -- Customers      | BASE TABLE
            -- Orders         | BASE TABLE
            -- Products       | BASE TABLE
            -- SalesView      | VIEW

            -- 3. Get detailed table structure
            SELECT 
                column_name,
                data_type,
                is_nullable,
                column_key,
                column_default,
                extra
            FROM information_schema.columns
            WHERE table_schema = 'mydb' 
            AND table_name = 'Employees'
            ORDER BY ordinal_position;

            -- Result:
            -- column_name  | data_type | is_nullable | column_key | column_default | extra
            -- EmployeeID   | int       | NO          | PRI        | NULL           | auto_increment
            -- FirstName    | varchar   | NO          |            | NULL           |
            -- LastName     | varchar   | NO          |            | NULL           |
            -- Email        | varchar   | YES         | UNI        | NULL           |
            -- DepartmentID | int       | YES         | MUL        | NULL           |
            -- Salary       | decimal   | YES         |            | NULL           |

            -- 4. Find all foreign key relationships
            SELECT 
                constraint_name,
                table_name,
                column_name,
                referenced_table_name,
                referenced_column_name
            FROM information_schema.key_column_usage
            WHERE table_schema = 'mydb'
            AND referenced_table_name IS NOT NULL;

            -- Result:
            -- constraint_name      | table_name | column_name  | referenced_table_name | referenced_column_name
            -- fk_emp_dept         | Employees  | DepartmentID | Departments           | DepartmentID
            -- fk_order_customer   | Orders     | CustomerID   | Customers             | CustomerID

            -- 5. List all indexes on a table
            SELECT 
                index_name,
                column_name,
                seq_in_index,
                non_unique,
                index_type
            FROM information_schema.statistics
            WHERE table_schema = 'mydb'
            AND table_name = 'Employees'
            ORDER BY index_name, seq_in_index;

            -- 6. Find tables without primary keys
            SELECT table_name
            FROM information_schema.tables t
            WHERE table_schema = 'mydb'
            AND table_type = 'BASE TABLE'
            AND NOT EXISTS (
                SELECT 1 
                FROM information_schema.table_constraints tc
                WHERE tc.table_schema = t.table_schema
                    AND tc.table_name = t.table_name
                    AND tc.constraint_type = 'PRIMARY KEY'
            );

            -- 7. Get table sizes
            SELECT 
                table_name,
                table_rows,
                ROUND((data_length + index_length) / 1024 / 1024, 2) AS size_mb
            FROM information_schema.tables
            WHERE table_schema = 'mydb'
            AND table_type = 'BASE TABLE'
            ORDER BY (data_length + index_length) DESC;

            -- Result:
            -- table_name  | table_rows | size_mb
            -- Orders      | 1000000    | 125.50
            -- Customers   | 500000     | 45.30
            -- Products    | 10000      | 2.15

            -- 8. List all views
            SELECT 
                table_name AS view_name,
                view_definition
            FROM information_schema.views
            WHERE table_schema = 'mydb';

            -- 9. Find all stored procedures
            SELECT 
                routine_name,
                routine_type,
                data_type AS return_type,
                routine_definition
            FROM information_schema.routines
            WHERE routine_schema = 'mydb'
            AND routine_type = 'PROCEDURE';

            -- 10. Check column constraints
            SELECT 
                table_name,
                column_name,
                constraint_name,
                constraint_type
            FROM information_schema.table_constraints tc
            JOIN information_schema.key_column_usage kcu
            ON tc.constraint_name = kcu.constraint_name
            AND tc.table_schema = kcu.table_schema
            WHERE tc.table_schema = 'mydb';

            -- -----------------------------------------------------------
            -- Practical Use Cases
            -- -----------------------------------------------------------

            -- Use Case 1: Generate documentation automatically
            SELECT 
                CONCAT(
                    'Table: ', table_name, '\n',
                    'Columns:\n',
                    GROUP_CONCAT(
                        CONCAT('  - ', column_name, ' (', data_type, ')')
                        SEPARATOR '\n'
                    )
                ) AS documentation
            FROM information_schema.columns
            WHERE table_schema = 'mydb'
            GROUP BY table_name;

            -- Use Case 2: Find all tables a user has access to
            SELECT DISTINCT table_name
            FROM information_schema.table_privileges
            WHERE grantee = "'user123'@'localhost'"
            AND table_schema = 'mydb';

            -- Use Case 3: Compare two database schemas
            -- Tables in DB1 but not in DB2
            SELECT table_name
            FROM information_schema.tables
            WHERE table_schema = 'db1'
            AND table_name NOT IN (
                SELECT table_name 
                FROM information_schema.tables 
                WHERE table_schema = 'db2'
            );

            -- Use Case 4: Find unused indexes (requires performance_schema)
            SELECT 
                t.table_schema,
                t.table_name,
                s.index_name
            FROM information_schema.statistics s
            JOIN information_schema.tables t 
            ON s.table_schema = t.table_schema 
            AND s.table_name = t.table_name
            WHERE t.table_schema = 'mydb'
            AND s.index_name != 'PRIMARY'
            AND NOT EXISTS (
                SELECT 1 FROM performance_schema.table_io_waits_summary_by_index_usage iu
                WHERE iu.object_schema = s.table_schema
                    AND iu.object_name = s.table_name
                    AND iu.index_name = s.index_name
                    AND iu.count_star > 0
            );</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Catalog Architecture
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 500" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Active Online Catalog Architecture</text>
                            
                            <!-- User Application Layer -->
                            <rect x="250" y="60" width="300" height="60" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            <text x="400" y="90" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">User Application / SQL Client</text>
                            <text x="400" y="110" font-size="11" fill="#333" text-anchor="middle">Uses SQL to query both data and metadata</text>
                            
                            <!-- Arrows -->
                            <path d="M 350 120 L 300 170" stroke="#10b981" stroke-width="2" marker-end="url(#arrow22)"/>
                            <text x="310 " y="150" font-size="10" fill="#10b981" font-weight="bold">Query Data</text>
                            
                            <path d="M 450 120 L 500 170" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow23)"/>
                            <text x="490" y="150" font-size="10" fill="#f59e0b" font-weight="bold">Query Metadata</text>
                            
                            <!-- User Data -->
                            <rect x="100" y="180" width="280" height="280" fill="#d1fae5" stroke="#10b981" stroke-width="3" rx="5"/>
                            <text x="240" y="210" font-size="14" font-weight="bold" fill="#065f46" text-anchor="middle">User Data (Regular Tables)</text>
                            
                            <rect x="120" y="230" width="240" height="60" fill="white" stroke="#10b981" stroke-width="1" rx="3"/>
                            <text x="240" y="255" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">Employees Table</text>
                            <text x="130" y="275" font-size="10" fill="#333">ID | Name | Dept | Salary</text>
                            
                            <rect x="120" y="300" width="240" height="60" fill="white" stroke="#10b981" stroke-width="1" rx="3"/>
                            <text x="240" y="325" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">Orders Table</text>
                            <text x="130" y="345" font-size="10" fill="#333">OrderID | Date | Customer</text>
                            
                            <rect x="120" y="370" width="240" height="60" fill="white" stroke="#10b981" stroke-width="1" rx="3"/>
                            <text x="240" y="395" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">Products Table</text>
                            <text x="130" y="415" font-size="10" fill="#333">ProductID | Name | Price</text>
                            
                            <!-- System Catalog -->
                            <rect x="420" y="180" width="280" height="280" fill="#fef3c7" stroke="#f59e0b" stroke-width="3" rx="5"/>
                            <text x="560" y="210" font-size="14" font-weight="bold" fill="#92400e" text-anchor="middle">System Catalog (Metadata)</text>
                            
                            <rect x="440" y="230" width="240" height="60" fill="white" stroke="#f59e0b" stroke-width="1" rx="3"/>
                            <text x="560" y="255" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">information_schema.tables</text>
                            <text x="450" y="275" font-size="9" fill="#333">table_schema | table_name</text>
                            
                            <rect x="440" y="300" width="240" height="60" fill="white" stroke="#f59e0b" stroke-width="1" rx="3"/>
                            <text x="560" y="325" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">information_schema.columns</text>
                            <text x="450" y="345" font-size="9" fill="#333">column_name | data_type</text>
                            
                            <rect x="440" y="370" width="240" height="60" fill="white" stroke="#f59e0b" stroke-width="1" rx="3"/>
                            <text x="560" y="395" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">information_schema.key_column_usage</text>
                            <text x="450" y="415" font-size="9" fill="#333">Keys and constraints</text>
                            
                            <!-- Key Point -->
                            <rect x="150" y="470" width="500" height="20" fill="#f0f9ff" stroke="#0284c7" stroke-width="1" rx="3"/>
                            <text x="400" y="485" font-size="11" font-weight="bold" fill="#0c4a6e" text-anchor="middle">Both accessible using same SQL language!</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow22" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#10b981"/>
                                </marker>
                                <marker id="arrow23" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#f59e0b"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Benefits of Active Online Catalog
                    </div>
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Self-Documenting:</strong>
                                <ul>
                                    <li>Database structure is always documented</li>
                                    <li>No need for separate documentation files</li>
                                    <li>Documentation never out of sync</li>
                                </ul>
                            </li>
                            
                            <li><strong>Dynamic Schema Discovery:</strong>
                                <ul>
                                    <li>Applications can discover schema at runtime</li>
                                    <li>Tools can auto-generate interfaces</li>
                                    <li>Reports can adapt to schema changes</li>
                                </ul>
                            </li>
                            
                            <li><strong>Database Tools:</strong>
                                <ul>
                                    <li>GUI tools (phpMyAdmin, MySQL Workbench) use catalog</li>
                                    <li>Migration tools compare schemas</li>
                                    <li>Monitoring tools track changes</li>
                                </ul>
                            </li>
                            
                            <li><strong>Development Efficiency:</strong>
                                <ul>
                                    <li>Developers can query structure</li>
                                    <li>Understand relationships programmatically</li>
                                    <li>Validate changes before applying</li>
                                </ul>
                            </li>
                            
                            <li><strong>Security Auditing:</strong>
                                <ul>
                                    <li>Track who has access to what</li>
                                    <li>Monitor permission changes</li>
                                    <li>Audit schema modifications</li>
                                </ul>
                            </li>
                            
                            <li><strong>Automated Code Generation:</strong>
                                <ul>
                                    <li>Generate ORM models from schema</li>
                                    <li>Create API endpoints automatically</li>
                                    <li>Build admin interfaces dynamically</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can users modify the system catalog directly?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Generally NO!</strong> The system catalog is typically <strong>read-only</strong> for regular users.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Why?</strong></p>
                                <ul>
                                    <li>Direct modifications could corrupt the database</li>
                                    <li>Integrity constraints must be maintained</li>
                                    <li>Changes must be validated</li>
                                    <li>Physical storage must be updated</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Proper Way to Modify:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- ‚úì CORRECT: Use DDL statements
            ALTER TABLE Employees ADD COLUMN Department VARCHAR(50);
            CREATE INDEX idx_name ON Employees(LastName);
            DROP TABLE OldTable;

            -- These DDL statements update BOTH:
            -- 1. The actual data structures
            -- 2. The system catalog (automatically)

            -- ‚úó WRONG: Try to modify catalog directly
            UPDATE information_schema.columns 
            SET data_type = 'TEXT' 
            WHERE column_name = 'Name';
            -- ERROR: information_schema is read-only!</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Exception:</strong> DBAs with special privileges might be able to modify certain catalog tables in some systems, but this is dangerous and rarely done.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does the catalog stay "active" and up-to-date?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The catalog is automatically updated by the DBMS whenever DDL operations occur:</strong></p>
                                
                                <ol>
                                    <li><strong>CREATE TABLE:</strong> Adds entries to:
                                        <ul>
                                            <li>information_schema.tables</li>
                                            <li>information_schema.columns</li>
                                            <li>information_schema.statistics (for indexes)</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>ALTER TABLE:</strong> Updates column definitions</li>
                                    
                                    <li><strong>DROP TABLE:</strong> Removes all related catalog entries</li>
                                    
                                    <li><strong>CREATE INDEX:</strong> Updates statistics table</li>
                                    
                                    <li><strong>GRANT/REVOKE:</strong> Updates privilege tables</li>
                                </ol>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Before: Query catalog
            SELECT column_name FROM information_schema.columns
            WHERE table_name = 'Employees';
            -- Result: EmployeeID, FirstName, LastName, Email

            -- Add column
            ALTER TABLE Employees ADD COLUMN Phone VARCHAR(15);

            -- After: Query catalog again (automatically updated!)
            SELECT column_name FROM information_schema.columns
            WHERE table_name = 'Employees';
            -- Result: EmployeeID, FirstName, LastName, Email, Phone
            -- Phone appears automatically! ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>This is why it's called "Active":</strong> It reflects the current state instantly, not a static snapshot.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between SHOW commands and querying information_schema?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">SHOW Commands</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">information_schema Queries</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Standard</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MySQL-specific</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">ANSI SQL standard</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Flexibility</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Limited filtering</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Full SQL power (WHERE, JOIN, etc.)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Portability</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Not portable</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Works across different RDBMS</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Example</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SHOW TABLES;</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT * FROM information_schema.tables;</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- SHOW command (simpler, MySQL-specific)
            SHOW TABLES;
            SHOW COLUMNS FROM Employees;

            -- information_schema (more powerful, standard)
            SELECT table_name 
            FROM information_schema.tables 
            WHERE table_schema = 'mydb' 
            AND table_name LIKE 'Emp%'
            ORDER BY table_name;

            -- information_schema allows complex queries
            SELECT t.table_name, COUNT(c.column_name) AS column_count
            FROM information_schema.tables t
            JOIN information_schema.columns c 
            ON t.table_name = c.table_name
            WHERE t.table_schema = 'mydb'
            GROUP BY t.table_name
            HAVING column_count > 5;</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Use information_schema for portable, complex queries. Use SHOW for quick, interactive checks.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Active Online Catalog</span>
                        <span class="keyword-tag">Codd's Rule 4</span>
                        <span class="keyword-tag">Data Dictionary</span>
                        <span class="keyword-tag">information_schema</span>
                        <span class="keyword-tag">Metadata</span>
                        <span class="keyword-tag">Self-Describing Database</span>
                        <span class="keyword-tag">System Catalog</span>
                        <span class="keyword-tag">Schema Discovery</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 39: What is Rule 5 - Comprehensive Data Sub-language Rule? -->
            <div class="question-content" id="q39">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 5: Comprehensive Data Sub-language Rule?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 5: Comprehensive Data Sub-language Rule</strong> states that a relational system must support at least one relational language that:</p>
                        
                        <ol style="margin-top: 1rem;">
                            <li>Has a <strong>well-defined syntax</strong> (can be written as text)</li>
                            <li>Supports <strong>data definition</strong> (DDL)</li>
                            <li>Supports <strong>data manipulation</strong> (DML)</li>
                            <li>Supports <strong>security and integrity constraints</strong></li>
                            <li>Supports <strong>transaction management</strong></li>
                            <li>Can be used both <strong>interactively</strong> and from within programs</li>
                        </ol>
                        
                        <p style="margin-top: 1rem;"><strong>In Modern Terms:</strong> This language is <strong>SQL (Structured Query Language)</strong>.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why "Sub-language"?</strong></p>
                        <ul>
                            <li>It's a <strong>specialized language</strong> for database operations</li>
                            <li>Can be embedded in general-purpose languages (Java, Python, C++)</li>
                            <li>Not a full programming language (no loops, conditionals in standard SQL)</li>
                            <li>Focuses solely on data operations</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        Requirements of Comprehensive Data Sub-language
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Data Definition Language (DDL)</h4>
                        <p>Ability to define and modify database structure:</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- CREATE: Define new objects
            CREATE DATABASE mydb;
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100),
                DepartmentID INT
            );
            CREATE INDEX idx_name ON Employees(Name);
            CREATE VIEW EmployeeSummary AS 
                SELECT EmployeeID, Name FROM Employees;

            -- ALTER: Modify existing structure
            ALTER TABLE Employees ADD COLUMN Salary DECIMAL(10,2);
            ALTER TABLE Employees MODIFY COLUMN Name VARCHAR(150);
            ALTER TABLE Employees DROP COLUMN DepartmentID;

            -- DROP: Remove objects
            DROP TABLE OldTable;
            DROP INDEX idx_old;
            DROP VIEW OldView;</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Data Manipulation Language (DML)</h4>
                        <p>Ability to query and modify data:</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- SELECT: Query data
            SELECT * FROM Employees WHERE DepartmentID = 1;
            SELECT Name, Salary FROM Employees ORDER BY Salary DESC;

            -- INSERT: Add new data
            INSERT INTO Employees VALUES (1, 'John Doe', 1, 75000);
            INSERT INTO Employees (EmployeeID, Name) VALUES (2, 'Jane Smith');

            -- UPDATE: Modify existing data
            UPDATE Employees SET Salary = 80000 WHERE EmployeeID = 1;
            UPDATE Employees SET DepartmentID = 2 WHERE Name = 'John Doe';

            -- DELETE: Remove data
            DELETE FROM Employees WHERE EmployeeID = 1;
            DELETE FROM Employees WHERE DepartmentID IS NULL;</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Security and Authorization</h4>
                        <p>Control access to data:</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- GRANT: Give permissions
            GRANT SELECT ON Employees TO 'user123';
            GRANT INSERT, UPDATE ON Orders TO 'sales_team';
            GRANT ALL PRIVILEGES ON mydb.* TO 'admin_user';

            -- REVOKE: Remove permissions
            REVOKE DELETE ON Employees FROM 'user123';
            REVOKE ALL PRIVILEGES ON mydb.* FROM 'old_user';</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. Integrity Constraints</h4>
                        <p>Define and enforce data rules:</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Primary Key
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100) NOT NULL
            );

            -- Foreign Key
            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                CustomerID INT,
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
            );

            -- Unique Constraint
            ALTER TABLE Employees ADD CONSTRAINT uk_email UNIQUE (Email);

            -- Check Constraint
            ALTER TABLE Employees ADD CONSTRAINT chk_salary CHECK (Salary > 0);

            -- NOT NULL
            ALTER TABLE Employees MODIFY COLUMN Name VARCHAR(100) NOT NULL;</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">5. Transaction Control</h4>
                        <p>Manage transaction boundaries:</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Transaction Management
            START TRANSACTION;  -- or BEGIN

            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 2;

            COMMIT;  -- Save changes

            -- Or if error:
            ROLLBACK;  -- Undo changes

            -- Savepoints
            SAVEPOINT sp1;
            -- ... operations ...
            ROLLBACK TO SAVEPOINT sp1;</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">6. View Management</h4>
                        <p>Create virtual tables:</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Create views for data abstraction
            CREATE VIEW EmployeeSalaries AS
            SELECT EmployeeID, Name, Salary
            FROM Employees
            WHERE DepartmentID = 1;

            -- Query view like a table
            SELECT * FROM EmployeeSalaries WHERE Salary > 70000;</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-double"></i>
                        Why This Rule is Essential
                    </div>
                    <div class="explanation-text">
                        <p><strong>Codd considered this rule essential because:</strong></p>
                        
                        <ol>
                            <li><strong>Completeness:</strong>
                                <ul>
                                    <li>One language for ALL database operations</li>
                                    <li>No need for multiple tools or languages</li>
                                    <li>Consistent interface for everything</li>
                                </ul>
                            </li>
                            
                            <li><strong>Data Independence:</strong>
                                <ul>
                                    <li>Applications don't need to know physical storage</li>
                                    <li>Logical queries independent of implementation</li>
                                    <li>Can change storage without changing queries</li>
                                </ul>
                            </li>
                            
                            <li><strong>Non-Procedural:</strong>
                                <ul>
                                    <li>Specify <strong>WHAT</strong> you want, not HOW to get it</li>
                                    <li>Database optimizer determines best execution plan</li>
                                    <li>Simpler for users, better performance</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Declarative (SQL) - Non-Procedural
            SELECT Name FROM Employees WHERE Salary > 70000;
            -- Says WHAT we want, not HOW to fetch it

            -- vs Procedural (pseudo-code)
            for each employee in Employees:
                if employee.Salary > 70000:
                    print employee.Name
            -- Specifies HOW to process each row</code></pre>
                                </div>
                            </li>
                            
                            <li><strong>Set-Based Operations:</strong>
                                <ul>
                                    <li>Operate on entire sets of data at once</li>
                                    <li>More efficient than row-by-row processing</li>
                                    <li>Matches mathematical relational model</li>
                                </ul>
                            </li>
                            
                            <li><strong>Standardization:</strong>
                                <ul>
                                    <li>Common language across different databases</li>
                                    <li>Skills transferable between systems</li>
                                    <li>Application portability</li>
                                </ul>
                            </li>
                            
                            <li><strong>Integration:</strong>
                                <ul>
                                    <li>Can be used interactively (command line)</li>
                                    <li>Can be embedded in programs (JDBC, ODBC)</li>
                                    <li>Can be used in stored procedures</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        SQL as Comprehensive Data Sub-language
                    </div>
                    <div class="example-box">
                        <pre><code>-- Complete Example: SQL doing everything

            -- 1. DDL: Create database structure
            CREATE DATABASE CompanyDB;
            USE CompanyDB;

            CREATE TABLE Departments (
                DepartmentID INT PRIMARY KEY AUTO_INCREMENT,
                DepartmentName VARCHAR(100) NOT NULL UNIQUE,
                Budget DECIMAL(15,2) CHECK (Budget >= 0)
            );

            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY AUTO_INCREMENT,
                FirstName VARCHAR(50) NOT NULL,
                LastName VARCHAR(50) NOT NULL,
                Email VARCHAR(100) UNIQUE,
                DepartmentID INT,
                Salary DECIMAL(10,2) CHECK (Salary > 0),
                HireDate DATE NOT NULL,
                FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID)
            );

            CREATE INDEX idx_lastname ON Employees(LastName);

            CREATE VIEW EmployeeDetails AS
            SELECT 
                e.EmployeeID,
                CONCAT(e.FirstName, ' ', e.LastName) AS FullName,
                e.Email,
                d.DepartmentName,
                e.Salary
            FROM Employees e
            JOIN Departments d ON e.DepartmentID = d.DepartmentID;

            -- 2. DML: Manipulate data
            INSERT INTO Departments (DepartmentName, Budget) VALUES
            ('IT', 1000000),
            ('HR', 500000),
            ('Finance', 750000);

            INSERT INTO Employees (FirstName, LastName, Email, DepartmentID, Salary, HireDate) VALUES
            ('John', 'Doe', 'john@company.com', 1, 75000, '2020-01-15'),
            ('Jane', 'Smith', 'jane@company.com', 2, 65000, '2019-06-20'),
            ('Bob', 'Johnson', 'bob@company.com', 1, 80000, '2021-03-10');

            -- Query
            SELECT * FROM EmployeeDetails WHERE Salary > 70000;

            -- Update
            UPDATE Employees SET Salary = Salary * 1.10 WHERE DepartmentID = 1;

            -- Delete
            DELETE FROM Employees WHERE HireDate < '2019-01-01';

            -- 3. Security: Control access
            CREATE USER 'hr_manager'@'localhost' IDENTIFIED BY 'password123';
            GRANT SELECT, INSERT, UPDATE ON CompanyDB.Employees TO 'hr_manager'@'localhost';
            GRANT SELECT ON CompanyDB.EmployeeDetails TO 'hr_manager'@'localhost';

            CREATE USER 'analyst'@'localhost' IDENTIFIED BY 'password456';
            GRANT SELECT ON CompanyDB.* TO 'analyst'@'localhost';  -- Read-only

            -- 4. Transaction Control: Ensure consistency
            START TRANSACTION;

            UPDATE Departments SET Budget = Budget - 50000 WHERE DepartmentID = 1;
            UPDATE Departments SET Budget = Budget + 50000 WHERE DepartmentID = 2;

            -- If both succeed:
            COMMIT;
            -- If any fails:
            -- ROLLBACK;

            -- 5. Integrity: Enforce rules (already in CREATE TABLE)
            -- Primary keys, foreign keys, check constraints, unique constraints

            -- 6. Schema Modification
            ALTER TABLE Employees ADD COLUMN Phone VARCHAR(15);
            ALTER TABLE Employees ADD CONSTRAINT chk_hire CHECK (HireDate <= CURDATE());

            -- 7. Advanced Queries
            SELECT 
                d.DepartmentName,
                COUNT(e.EmployeeID) AS EmployeeCount,
                AVG(e.Salary) AS AvgSalary,
                MAX(e.Salary) AS MaxSalary
            FROM Departments d
            LEFT JOIN Employees e ON d.DepartmentID = e.DepartmentID
            GROUP BY d.DepartmentID, d.DepartmentName
            HAVING EmployeeCount > 0
            ORDER BY AvgSalary DESC;

            -- Everything done with ONE language (SQL)!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why is SQL called a "declarative" language?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>SQL is declarative because you specify WHAT you want, not HOW to get it.</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Declarative (SQL)</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Procedural (Java, Python)</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Focus</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">What to achieve</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">How to achieve</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Control Flow</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Hidden (optimizer decides)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Explicit (programmer controls)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Example</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT name WHERE age > 18</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">for each row: if age > 18: print name</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Declarative SQL
            SELECT Name, Salary 
            FROM Employees 
            WHERE DepartmentID = 1 
            AND Salary > 70000
            ORDER BY Salary DESC;
            -- You don't specify: which index to use, how to sort, etc.
            -- Database optimizer decides the best execution plan

            -- Procedural equivalent (pseudo-code)
            results = []
            for each employee in Employees:
                if employee.DepartmentID == 1 and employee.Salary > 70000:
                    results.append((employee.Name, employee.Salary))
            results.sort(key=lambda x: x[1], reverse=True)
            return results
            -- You control every step</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Benefits of Declarative:</strong></p>
                                <ul>
                                    <li>‚úì Simpler to write and understand</li>
                                    <li>‚úì Database can optimize execution</li>
                                    <li>‚úì Same query works on different data sizes</li>
                                    <li>‚úì Less error-prone</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can SQL be embedded in other programming languages?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes!</strong> SQL can be embedded in virtually any programming language.</p>
                                
                                <h4 style="color: #059669; margin-top: 1rem;">Methods of Embedding:</h4>
                                
                                <p style="margin-top: 1rem;"><strong>1. API/Library Approach (Most Common):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>// Java with JDBC
            Connection conn = DriverManager.getConnection(url, user, password);
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery("SELECT * FROM Employees WHERE Salary > 70000");
            while (rs.next()) {
                System.out.println(rs.getString("Name") + ": " + rs.getInt("Salary"));
            }

            # Python with mysql-connector
            import mysql.connector
            conn = mysql.connector.connect(host="localhost", user="user", password="pass", database="mydb")
            cursor = conn.cursor()
            cursor.execute("SELECT * FROM Employees WHERE Salary > 70000")
            for (name, salary) in cursor:
                print(f"{name}: {salary}")</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>2. Embedded SQL (Older Approach):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>// C with embedded SQL (Pro*C)
            EXEC SQL BEGIN DECLARE SECTION;
                char name[50];
                int salary;
            EXEC SQL END DECLARE SECTION;

            EXEC SQL SELECT Name, Salary INTO :name, :salary
                    FROM Employees
                    WHERE EmployeeID = 1;</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>3. ORM (Object-Relational Mapping):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>// Java with Hibernate
            Session session = sessionFactory.openSession();
            List<Employee> employees = session.createQuery(
                "FROM Employee WHERE salary > 70000", Employee.class
            ).list();

            # Python with SQLAlchemy
            employees = session.query(Employee).filter(Employee.salary > 70000).all()</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>This satisfies Rule 5's requirement that SQL can be used both interactively and from within programs!</strong></p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why isn't SQL a "complete" programming language?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>SQL lacks features of general-purpose programming languages:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>What SQL Doesn't Have (in standard SQL):</strong></p>
                                <ul>
                                    <li>‚ùå Loops (FOR, WHILE) - though stored procedures have them</li>
                                    <li>‚ùå Conditional statements (IF-THEN-ELSE) - though procedures have them</li>
                                    <li>‚ùå Variable declarations and manipulation</li>
                                    <li>‚ùå File I/O operations</li>
                                    <li>‚ùå User interface capabilities</li>
                                    <li>‚ùå Complex data structures (arrays, objects)</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>What SQL DOES Have:</strong></p>
                                <ul>
                                    <li>‚úì Set-based operations on data</li>
                                    <li>‚úì Data definition and manipulation</li>
                                    <li>‚úì Transaction control</li>
                                    <li>‚úì Security and access control</li>
                                    <li>‚úì Integrity constraints</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>This is by design!</strong> SQL is a <strong>specialized language</strong> for database operations. For application logic, business rules, and UI, you use a general-purpose language that embeds SQL.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Extensions:</strong> Some databases extend SQL with procedural capabilities:</p>
                                <ul>
                                    <li>PL/SQL (Oracle)</li>
                                    <li>T-SQL (SQL Server)</li>
                                    <li>PL/pgSQL (PostgreSQL)</li>
                                </ul>
                                
                                <p>But standard SQL remains a data sub-language, not a full programming language.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Comprehensive Data Sub-language</span>
                        <span class="keyword-tag">Codd's Rule 5</span>
                        <span class="keyword-tag">SQL</span>
                        <span class="keyword-tag">DDL</span>
                        <span class="keyword-tag">DML</span>
                        <span class="keyword-tag">Declarative Language</span>
                        <span class="keyword-tag">Non-Procedural</span>
                        <span class="keyword-tag">Set-Based Operations</span>
                        <span class="keyword-tag">Embedded SQL</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 40: What is Rule 6 - View Updating Rule? -->
            <div class="question-content" id="q40">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 6: View Updating Rule?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 6: View Updating Rule</strong> states that all views that are theoretically updatable must be updatable by the system. If a view can logically be updated, the DBMS should allow INSERT, UPDATE, and DELETE operations on it.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Core Principle:</strong></p>
                        <p>Users should be able to modify data through views just as they would modify base tables, as long as the modification makes logical sense.</p>
                        
                        <p style="margin-top: 1rem;"><strong>What is a View?</strong></p>
                        <ul>
                            <li><strong>Virtual table:</strong> Not stored physically, computed from base tables</li>
                            <li><strong>Query result:</strong> Defined by a SELECT statement</li>
                            <li><strong>Abstraction layer:</strong> Simplifies complex queries</li>
                            <li><strong>Security:</strong> Can hide sensitive columns/rows</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Updatable vs Non-Updatable Views:</strong></p>
                        <ul>
                            <li><strong>Updatable:</strong> Changes can be translated to base table operations</li>
                            <li><strong>Non-Updatable:</strong> Ambiguous how to update base tables</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        When is a View Updatable?
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>A view is generally updatable when it meets these criteria:</strong></p>
                        
                        <ol>
                            <li><strong>Based on a single table:</strong> No JOINs</li>
                            <li><strong>No aggregation:</strong> No GROUP BY, HAVING, or aggregate functions (SUM, COUNT, AVG, etc.)</li>
                            <li><strong>No DISTINCT:</strong> All rows are unique naturally</li>
                            <li><strong>No UNION:</strong> Single SELECT query only</li>
                            <li><strong>All non-nullable columns included:</strong> Or have defaults</li>
                            <li><strong>No derived columns:</strong> Or only updatable expressions</li>
                        </ol>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Base Table
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                FirstName VARCHAR(50) NOT NULL,
                LastName VARCHAR(50) NOT NULL,
                Email VARCHAR(100),
                DepartmentID INT,
                Salary DECIMAL(10,2),
                HireDate DATE
            );

            -- ‚úì UPDATABLE VIEW: Simple, single-table, no aggregation
            CREATE VIEW IT_Employees AS
            SELECT EmployeeID, FirstName, LastName, Email, Salary
            FROM Employees
            WHERE DepartmentID = 1;

            -- Can INSERT through view
            INSERT INTO IT_Employees (EmployeeID, FirstName, LastName, Email, Salary)
            VALUES (101, 'John', 'Doe', 'john@company.com', 75000);
            -- This inserts into base Employees table with DepartmentID = 1

            -- Can UPDATE through view
            UPDATE IT_Employees SET Salary = 80000 WHERE EmployeeID = 101;
            -- Updates base Employees table

            -- Can DELETE through view
            DELETE FROM IT_Employees WHERE EmployeeID = 101;
            -- Deletes from base Employees table

            -- ‚ùå NON-UPDATABLE VIEW: Has JOIN
            CREATE VIEW Employee_Department AS
            SELECT e.EmployeeID, e.FirstName, e.LastName, d.DepartmentName
            FROM Employees e
            JOIN Departments d ON e.DepartmentID = d.DepartmentID;

            -- This fails:
            UPDATE Employee_Department SET DepartmentName = 'IT' WHERE EmployeeID = 101;
            -- ERROR: Can't update view - ambiguous which table to update

            -- ‚ùå NON-UPDATABLE VIEW: Has aggregation
            CREATE VIEW Salary_Summary AS
            SELECT DepartmentID, AVG(Salary) AS AvgSalary, COUNT(*) AS EmpCount
            FROM Employees
            GROUP BY DepartmentID;

            -- This fails:
            UPDATE Salary_Summary SET AvgSalary = 80000 WHERE DepartmentID = 1;
            -- ERROR: Can't update aggregate values directly</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Updatable View Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- Setup: Base table
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY AUTO_INCREMENT,
                FirstName VARCHAR(50) NOT NULL,
                LastName VARCHAR(50) NOT NULL,
                Email VARCHAR(100),
                DepartmentID INT,
                Salary DECIMAL(10,2),
                IsActive BOOLEAN DEFAULT TRUE
            );

            INSERT INTO Employees VALUES
            (1, 'John', 'Doe', 'john@co.com', 1, 75000, TRUE),
            (2, 'Jane', 'Smith', 'jane@co.com', 2, 65000, TRUE),
            (3, 'Bob', 'Johnson', 'bob@co.com', 1, 80000, FALSE);

            -- -----------------------------------------------------------
            -- Example 1: Simple Updatable View
            -- -----------------------------------------------------------
            CREATE VIEW Active_Employees AS
            SELECT EmployeeID, FirstName, LastName, Email, Salary
            FROM Employees
            WHERE IsActive = TRUE;

            -- View data
            SELECT * FROM Active_Employees;
            -- Result: John and Jane (Bob is not active)

            -- INSERT through view
            INSERT INTO Active_Employees (FirstName, LastName, Email, Salary)
            VALUES ('Alice', 'Williams', 'alice@co.com', 70000);
            -- This creates a new employee in base table with IsActive = TRUE

            -- UPDATE through view
            UPDATE Active_Employees 
            SET Salary = 77000 
            WHERE FirstName = 'John';
            -- Updates John's salary in base Employees table

            -- DELETE through view
            DELETE FROM Active_Employees WHERE EmployeeID = 2;
            -- Deletes Jane from base Employees table

            -- -----------------------------------------------------------
            -- Example 2: View with WITH CHECK OPTION
            -- -----------------------------------------------------------
            CREATE VIEW IT_Employees AS
            SELECT EmployeeID, FirstName, LastName, Email, DepartmentID, Salary
            FROM Employees
            WHERE DepartmentID = 1
            WITH CHECK OPTION;

            -- This works (DepartmentID = 1)
            INSERT INTO IT_Employees VALUES 
            (NULL, 'Charlie', 'Brown', 'charlie@co.com', 1, 72000);
            -- ‚úì Success

            -- This fails (DepartmentID = 2, violates view condition)
            INSERT INTO IT_Employees VALUES 
            (NULL, 'David', 'Lee', 'david@co.com', 2, 68000);
            -- ‚úó ERROR: CHECK OPTION failed

            -- Prevents updating rows out of view scope
            UPDATE IT_Employees SET DepartmentID = 2 WHERE EmployeeID = 1;
            -- ‚úó ERROR: Would move row outside view's WHERE clause

            -- -----------------------------------------------------------
            -- Example 3: Non-Updatable View (JOIN)
            -- -----------------------------------------------------------
            CREATE VIEW Employee_Details AS
            SELECT 
                e.EmployeeID,
                e.FirstName,
                e.LastName,
                d.DepartmentName,
                e.Salary
            FROM Employees e
            JOIN Departments d ON e.DepartmentID = d.DepartmentID;

            -- This fails - ambiguous
            UPDATE Employee_Details SET Salary = 85000 WHERE EmployeeID = 1;
            -- Some databases: ERROR
            -- Others: May update Employees table (ignoring Department)

            -- -----------------------------------------------------------
            -- Example 4: Non-Updatable View (Aggregation)
            -- -----------------------------------------------------------
            CREATE VIEW Department_Stats AS
            SELECT 
                DepartmentID,
                COUNT(*) AS EmployeeCount,
                AVG(Salary) AS AvgSalary,
                MAX(Salary) AS MaxSalary
            FROM Employees
            GROUP BY DepartmentID;

            SELECT * FROM Department_Stats;
            -- DepartmentID | EmployeeCount | AvgSalary | MaxSalary
            -- 1            | 2             | 77500     | 80000

            -- Cannot update aggregate view
            UPDATE Department_Stats SET AvgSalary = 80000 WHERE DepartmentID = 1;
            -- ‚úó ERROR: Cannot update aggregate function

            -- -----------------------------------------------------------
            -- Example 5: Updatable View with Computed Column
            -- -----------------------------------------------------------
            CREATE VIEW Employee_Names AS
            SELECT 
                EmployeeID,
                FirstName,
                LastName,
                CONCAT(FirstName, ' ', LastName) AS FullName,
                Email
            FROM Employees;

            -- Can update base columns
            UPDATE Employee_Names SET FirstName = 'Jonathan' WHERE EmployeeID = 1;
            -- ‚úì Success

            -- Cannot update computed column
            UPDATE Employee_Names SET FullName = 'Jonathan Doe' WHERE EmployeeID = 1;
            -- ‚úó ERROR: FullName is computed, not stored

            -- -----------------------------------------------------------
            -- Example 6: INSTEAD OF Triggers (Advanced)
            -- -----------------------------------------------------------
            -- For complex views, use INSTEAD OF triggers to make them updatable

            CREATE VIEW Complex_Employee_View AS
            SELECT 
                e.EmployeeID,
                e.FirstName,
                e.LastName,
                d.DepartmentName,
                e.Salary
            FROM Employees e
            JOIN Departments d ON e.DepartmentID = d.DepartmentID;

            -- Create INSTEAD OF trigger (SQL Server/Oracle syntax)
            CREATE TRIGGER trg_Update_Complex_View
            INSTEAD OF UPDATE ON Complex_Employee_View
            FOR EACH ROW
            BEGIN
                UPDATE Employees
                SET FirstName = NEW.FirstName,
                    LastName = NEW.LastName,
                    Salary = NEW.Salary
                WHERE EmployeeID = NEW.EmployeeID;
                
                -- If DepartmentName changed, update DepartmentID
                IF NEW.DepartmentName != OLD.DepartmentName THEN
                    UPDATE Employees
                    SET DepartmentID = (
                        SELECT DepartmentID 
                        FROM Departments 
                        WHERE DepartmentName = NEW.DepartmentName
                    )
                    WHERE EmployeeID = NEW.EmployeeID;
                END IF;
            END;

            -- Now the view is updatable via trigger
            UPDATE Complex_Employee_View 
            SET Salary = 85000, DepartmentName = 'Finance'
            WHERE EmployeeID = 1;
            -- ‚úì Trigger handles the complex update</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-table"></i>
                        Updatable vs Non-Updatable Views Summary
                    </div>
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">View Type</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Updatable?</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Example</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>Simple SELECT</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì Yes</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT * FROM Employees WHERE Dept = 1</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>With WHERE</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì Yes</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT * FROM Employees WHERE Salary > 50000</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>Subset of Columns</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì Yes</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT ID, Name, Email FROM Employees</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>With JOIN</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">‚úó No*</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT e.*, d.Name FROM Emp e JOIN Dept d</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>With GROUP BY</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">‚úó No</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT Dept, COUNT(*) FROM Emp GROUP BY Dept</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>With Aggregates</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">‚úó No</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT AVG(Salary) FROM Employees</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>With DISTINCT</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">‚úó No</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT DISTINCT DeptID FROM Employees</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>With UNION</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">‚úó No</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT * FROM E1 UNION SELECT * FROM E2</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>Calculated Columns</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö† Partial</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT Sal, Sal*1.1 AS NewSal (NewSal not updatable)</td>
                        </tr>
                    </table>
                    <p style="margin-top: 0.5rem; font-size: 0.9em; color: #666;">* Some databases support updating certain JOINed views with restrictions</p>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        WITH CHECK OPTION
                    </div>
                    <div class="explanation-text">
                        <p><strong>WITH CHECK OPTION</strong> ensures that all INSERT and UPDATE operations through the view satisfy the view's WHERE clause.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Without CHECK OPTION
            CREATE VIEW High_Salary_Employees AS
            SELECT * FROM Employees WHERE Salary > 70000;

            -- This works, but creates inconsistency!
            INSERT INTO High_Salary_Employees 
            VALUES (10, 'Test', 'User', 'test@co.com', 1, 50000, TRUE);
            -- Employee created with Salary = 50000, but view shows Salary > 70000
            -- This row won't appear in the view! Confusing! ‚ùå

            -- With CHECK OPTION
            CREATE VIEW High_Salary_Employees_Safe AS
            SELECT * FROM Employees WHERE Salary > 70000
            WITH CHECK OPTION;

            -- This fails (good!)
            INSERT INTO High_Salary_Employees_Safe 
            VALUES (11, 'Test2', 'User2', 'test2@co.com', 1, 50000, TRUE);
            -- ‚úó ERROR: CHECK OPTION failed (Salary = 50000 violates Salary > 70000)

            -- This works
            INSERT INTO High_Salary_Employees_Safe 
            VALUES (12, 'Test3', 'User3', 'test3@co.com', 1, 80000, TRUE);
            -- ‚úì Success (Salary = 80000 satisfies Salary > 70000)

            -- Prevents updates that move rows out of view
            UPDATE High_Salary_Employees_Safe SET Salary = 60000 WHERE EmployeeID = 1;
            -- ‚úó ERROR: Would violate view condition</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Always use WITH CHECK OPTION on updatable views with WHERE clauses to maintain data integrity.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why can't views with JOINs be easily updated?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Ambiguity Problem:</strong> It's unclear which base table(s) should be updated.</p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- View with JOIN
            CREATE VIEW Employee_Department AS
            SELECT 
                e.EmployeeID,
                e.FirstName,
                e.LastName,
                e.Salary,
                d.DepartmentName,
                d.Location
            FROM Employees e
            JOIN Departments d ON e.DepartmentID = d.DepartmentID;

            -- Ambiguous update: Which table to update?
            UPDATE Employee_Department 
            SET Salary = 85000, Location = 'New York'
            WHERE EmployeeID = 1;

            -- Should this:
            -- 1. Update Employees.Salary = 85000?  ‚úì
            -- 2. Update Departments.Location = 'New York'?  ‚úì
            -- 3. But which Department? The one linked to this employee?
            -- 4. What if update affects multiple employees in same dept?

            -- More ambiguous:
            UPDATE Employee_Department 
            SET DepartmentName = 'Finance' 
            WHERE EmployeeID = 1;

            -- Should this:
            -- 1. Update Departments.DepartmentName for employee's dept?
            --    (affects ALL employees in that dept!) ‚ùå
            -- 2. Change employee's DepartmentID to Finance's ID?
            --    (move employee to different dept) ‚úì
            -- 3. Database can't decide automatically!</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Solution:</strong> Use INSTEAD OF triggers to explicitly define update behavior.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why can't aggregate views be updated?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Loss of Detail:</strong> Aggregate views lose individual row information.</p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Aggregate View
            CREATE VIEW Department_Summary AS
            SELECT 
                DepartmentID,
                COUNT(*) AS EmployeeCount,
                AVG(Salary) AS AvgSalary,
                SUM(Salary) AS TotalSalary
            FROM Employees
            GROUP BY DepartmentID;

            -- Result:
            -- DepartmentID | EmployeeCount | AvgSalary | TotalSalary
            -- 1            | 10            | 75000     | 750000

            -- Try to update:
            UPDATE Department_Summary 
            SET AvgSalary = 80000 
            WHERE DepartmentID = 1;

            -- Problem: How to achieve AvgSalary = 80000?
            -- Option 1: Increase all 10 employees' salaries equally?
            -- Option 2: Increase one employee's salary by 50000?
            -- Option 3: Change some salaries up, others down?
            -- Infinite possibilities! Database can't decide! ‚ùå

            -- Similarly for COUNT:
            UPDATE Department_Summary 
            SET EmployeeCount = 12 
            WHERE DepartmentID = 1;

            -- Should we:
            -- 1. Hire 2 new employees? (But with what data?)
            -- 2. Transfer 2 from another dept?
            -- Impossible to determine! ‚ùå</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Conclusion:</strong> Aggregates summarize multiple rows into one. You can't reverse this process unambiguously.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Do all databases fully implement Rule 6?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No database fully implements Rule 6.</strong> The rule is theoretically ideal but practically difficult.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Reality:</strong></p>
                                <ul>
                                    <li><strong>Simple views:</strong> Most databases handle well</li>
                                    <li><strong>Complex views:</strong> Often not updatable automatically</li>
                                    <li><strong>Workaround:</strong> INSTEAD OF triggers for complex cases</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Why Rule 6 is Hard:</strong></p>
                                <ol>
                                    <li><strong>Ambiguity:</strong> Multiple ways to update base tables</li>
                                    <li><strong>Performance:</strong> Complex update logic is slow</li>
                                    <li><strong>Validation:</strong> Ensuring consistency is difficult</li>
                                    <li><strong>Side effects:</strong> Update might affect other views/rows</li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong></p>
                                <ul>
                                    <li>Keep views simple if they need to be updatable</li>
                                    <li>Use views primarily for reading/querying</li>
                                    <li>For complex updates, use stored procedures or triggers</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">View Updating Rule</span>
                        <span class="keyword-tag">Codd's Rule 6</span>
                        <span class="keyword-tag">Updatable Views</span>
                        <span class="keyword-tag">WITH CHECK OPTION</span>
                        <span class="keyword-tag">INSTEAD OF Triggers</span>
                        <span class="keyword-tag">Virtual Tables</span>
                        <span class="keyword-tag">View Ambiguity</span>
                        <span class="keyword-tag">Non-Updatable Views</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 41: What is Rule 7 - High-Level Insert, Update, and Delete? -->
            <div class="question-content" id="q41">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 7: High-Level Insert, Update, and Delete?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 7: High-Level Insert, Update, and Delete</strong> states that the database must support <strong>set-at-a-time</strong> (set-based) operations for INSERT, UPDATE, and DELETE, not just single-row operations. The system must be able to insert, update, or delete multiple rows with a single statement.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Principle:</strong></p>
                        <p>Operations should work on <strong>sets of data</strong> (multiple rows), not just one row at a time. This is fundamental to the relational model.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Set-Based vs Row-Based:</strong></p>
                        <ul>
                            <li><strong>Set-Based (Declarative):</strong> Specify WHAT to do to which set of rows</li>
                            <li><strong>Row-Based (Procedural):</strong> Loop through rows one by one</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why This Matters:</strong></p>
                        <ul>
                            <li><strong>Performance:</strong> Set operations are much faster</li>
                            <li><strong>Simplicity:</strong> Less code to write</li>
                            <li><strong>Optimization:</strong> Database can optimize set operations</li>
                            <li><strong>Relational Model:</strong> Relations are sets, operations should be set-based</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Set-Based Operations Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- Setup
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100),
                DepartmentID INT,
                Salary DECIMAL(10,2),
                HireDate DATE,
                Performance VARCHAR(20)
            );

            INSERT INTO Employees VALUES
            (1, 'John Doe', 1, 70000, '2020-01-15', 'Excellent'),
            (2, 'Jane Smith', 1, 65000, '2019-06-20', 'Good'),
            (3, 'Bob Johnson', 2, 75000, '2021-03-10', 'Excellent'),
            (4, 'Alice Williams', 2, 68000, '2020-08-05', 'Average'),
            (5, 'Charlie Brown', 3, 72000, '2018-11-12', 'Good');

            -- -----------------------------------------------------------
            -- HIGH-LEVEL INSERT (Set-Based) ‚úì
            -- -----------------------------------------------------------

            -- Insert multiple rows in one statement
            INSERT INTO Employees (EmployeeID, Name, DepartmentID, Salary, HireDate, Performance) VALUES
            (6, 'David Lee', 1, 71000, '2022-01-10', 'Good'),
            (7, 'Emma Davis', 2, 73000, '2022-02-15', 'Excellent'),
            (8, 'Frank Miller', 3, 69000, '2022-03-20', 'Average');
            -- ‚úì Inserts 3 rows at once (set-based)

            -- Insert from SELECT (very powerful!)
            CREATE TABLE High_Performers (
                EmployeeID INT,
                Name VARCHAR(100),
                Salary DECIMAL(10,2)
            );

            INSERT INTO High_Performers (EmployeeID, Name, Salary)
            SELECT EmployeeID, Name, Salary
            FROM Employees
            WHERE Performance = 'Excellent';
            -- ‚úì Inserts ALL excellent performers in one operation (set-based)

            -- -----------------------------------------------------------
            -- HIGH-LEVEL UPDATE (Set-Based) ‚úì
            -- -----------------------------------------------------------

            -- Update multiple rows matching condition
            UPDATE Employees 
            SET Salary = Salary * 1.10
            WHERE Performance = 'Excellent';
            -- ‚úì Updates ALL excellent performers at once (set-based)
            -- John (70000 ‚Üí 77000), Bob (75000 ‚Üí 82500), Emma (73000 ‚Üí 80300)

            -- Update with complex condition
            UPDATE Employees
            SET Salary = Salary * 1.05
            WHERE DepartmentID = 1 AND HireDate < '2020-01-01';
            -- ‚úì Updates multiple employees matching criteria (set-based)

            -- Update with subquery
            UPDATE Employees e
            SET Salary = (
                SELECT AVG(Salary) 
                FROM Employees 
                WHERE DepartmentID = e.DepartmentID
            )
            WHERE Performance = 'Average';
            -- ‚úì Updates to department average for all average performers (set-based)

            -- -----------------------------------------------------------
            -- HIGH-LEVEL DELETE (Set-Based) ‚úì
            -- -----------------------------------------------------------

            -- Delete multiple rows matching condition
            DELETE FROM Employees 
            WHERE Performance = 'Poor';
            -- ‚úì Deletes ALL poor performers at once (set-based)

            -- Delete with date condition
            DELETE FROM Employees 
            WHERE HireDate < '2019-01-01' AND DepartmentID = 3;
            -- ‚úì Deletes all matching employees at once (set-based)

            -- Delete using subquery
            DELETE FROM Employees
            WHERE DepartmentID IN (
                SELECT DepartmentID 
                FROM Departments 
                WHERE Budget < 100000
            );
            -- ‚úì Deletes all employees in low-budget departments (set-based)

            -- -----------------------------------------------------------
            -- CONTRAST: Low-Level (Row-by-Row) Approach ‚ùå
            -- -----------------------------------------------------------

            -- BAD: Row-by-row update using cursor (violates Rule 7)
            DELIMITER //
            CREATE PROCEDURE UpdateSalariesRowByRow()
            BEGIN
                DECLARE done INT DEFAULT FALSE;
                DECLARE emp_id INT;
                DECLARE emp_salary DECIMAL(10,2);
                
                DECLARE emp_cursor CURSOR FOR 
                    SELECT EmployeeID, Salary FROM Employees WHERE Performance = 'Excellent';
                DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
                
                OPEN emp_cursor;
                
                read_loop: LOOP
                    FETCH emp_cursor INTO emp_id, emp_salary;
                    IF done THEN LEAVE read_loop; END IF;
                    
                    -- Update one row at a time (SLOW! ‚ùå)
                    UPDATE Employees 
                    SET Salary = emp_salary * 1.10 
                    WHERE EmployeeID = emp_id;
                END LOOP;
                
                CLOSE emp_cursor;
            END //
            DELIMITER ;
            -- This is procedural, row-by-row, inefficient ‚ùå

            -- GOOD: Set-based equivalent
            UPDATE Employees 
            SET Salary = Salary * 1.10 
            WHERE Performance = 'Excellent';
            -- One statement, all rows updated at once ‚úì
            -- 100x FASTER!

            -- -----------------------------------------------------------
            -- Performance Comparison
            -- -----------------------------------------------------------

            -- Scenario: Update 10,000 employees

            -- Row-by-row (cursor):
            -- - 10,000 individual UPDATE statements
            -- - 10,000 separate operations
            -- - Time: ~10 seconds ‚ùå

            -- Set-based:
            -- - 1 UPDATE statement
            -- - 1 set operation
            -- - Time: ~0.1 seconds ‚úì
            -- 100x FASTER!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-chart-bar"></i>
                        Benefits of Set-Based Operations
                    </div>
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Performance:</strong>
                                <ul>
                                    <li>Database optimizes single set operation</li>
                                    <li>Reduces network round-trips</li>
                                    <li>Leverages indexes efficiently</li>
                                    <li>10x to 1000x faster than row-by-row</li>
                                </ul>
                            </li>
                            
                            <li><strong>Simplicity:</strong>
                                <ul>
                                    <li>Less code to write and maintain</li>
                                    <li>Declarative (what) vs procedural (how)</li>
                                    <li>Easier to understand and debug</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Simple: One line
            UPDATE Employees SET Salary = Salary * 1.10 WHERE DepartmentID = 1;

            -- vs Complex: 20+ lines with cursor loop ‚ùå</code></pre>
                                </div>
                            </li>
                            
                            <li><strong>Atomicity:</strong>
                                <ul>
                                    <li>Set operation is atomic (all or nothing)</li>
                                    <li>No partial updates</li>
                                    <li>Better transaction integrity</li>
                                </ul>
                            </li>
                            
                            <li><strong>Database Optimization:</strong>
                                <ul>
                                    <li>Query optimizer can choose best plan</li>
                                    <li>Can use parallel execution</li>
                                    <li>Can batch operations</li>
                                </ul>
                            </li>
                            
                            <li><strong>Less Locking:</strong>
                                <ul>
                                    <li>One lock acquisition vs many</li>
                                    <li>Reduced lock contention</li>
                                    <li>Better concurrency</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Set-Based vs Row-Based Comparison
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 500" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Set-Based vs Row-Based Operations</text>
                            
                            <!-- Row-Based (BAD) -->
                            <rect x="50" y="70" width="320" height="370" fill="#fee2e2" stroke="#dc2626" stroke-width="3" rx="5"/>
                            <text x="210" y="100" font-size="14" font-weight="bold" fill="#991b1b" text-anchor="middle">Row-Based (Procedural) ‚ùå</text>
                            
                            <!-- Application -->
                            <rect x="80" y="120" width="260" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="3"/>
                            <text x="210" y="145" font-size="12" fill="#92400e" text-anchor="middle">Application Code</text>
                            
                            <!-- Loop iterations -->
                            <rect x="100" y="180" width="220" height="30" fill="white" stroke="#dc2626" stroke-width="1" rx="3"/>
                            <text x="210" y="200" font-size="11" fill="#333" text-anchor="middle">UPDATE row 1</text>
                            <path d="M 210 180 L 210 230" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow24)"/>
                            
                            <rect x="100" y="230" width="220" height="30" fill="white" stroke="#dc2626" stroke-width="1" rx="3"/>
                            <text x="210" y="250" font-size="11" fill="#333" text-anchor="middle">UPDATE row 2</text>
                            <path d="M 210 230 L 210 280" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow24)"/>
                            
                            <rect x="100" y="280" width="220" height="30" fill="white" stroke="#dc2626" stroke-width="1" rx="3"/>
                            <text x="210" y="300" font-size="11" fill="#333" text-anchor="middle">UPDATE row 3</text>
                            <path d="M 210 280 L 210 330" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow24)"/>
                            
                            <text x="210" y="350" font-size="12" fill="#dc2626" font-weight="bold">... repeat 10,000 times ...</text>
                            
                            <rect x="80" y="370" width="260" height="50" fill="white" stroke="#dc2626" stroke-width="2" rx="3"/>
                            <text x="210" y="390" font-size="11" fill="#dc2626" font-weight="bold">10,000 operations</text>
                            <text x="210" y="408" font-size="11" fill="#dc2626" font-weight="bold">Time: ~10 seconds</text>
                            
                            <!-- Set-Based (GOOD) -->
                            <rect x="430" y="70" width="320" height="370" fill="#d1fae5" stroke="#10b981" stroke-width="3" rx="5"/>
                            <text x="590" y="100" font-size="14" font-weight="bold" fill="#065f46" text-anchor="middle">Set-Based (Declarative) ‚úì</text>
                            
                            <!-- Application -->
                            <rect x="460" y="120" width="260" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="3"/>
                            <text x="590" y="145" font-size="12" fill="#1e40af" text-anchor="middle">Application Code</text>
                            
                            <!-- Single operation -->
                            <path d="M 590 160 L 590 220" stroke="#10b981" stroke-width="3" marker-end="url(#arrow25)"/>
                            
                            <rect x="480" y="220" width="220" height="60" fill="white" stroke="#10b981" stroke-width="2" rx="3"/>
                            <text x="590" y="245" font-size="12" fill="#065f46" font-weight="bold" text-anchor="middle">UPDATE Employees</text>
                            <text x="590" y="265" font-size="11" fill="#333" text-anchor="middle">SET Salary = Salary * 1.10</text>
                            
                            <path d="M 590 280 L 590 340" stroke="#10b981" stroke-width="3" marker-end="url(#arrow25)"/>
                            
                            <rect x="460" y="340" width="260" height="80" fill="white" stroke="#10b981" stroke-width="2" rx="3"/>
                            <text x="590" y="365" font-size="12" fill="#10b981" font-weight="bold">All 10,000 rows updated</text>
                            <text x="590" y="385" font-size="12" fill="#10b981" font-weight="bold">in ONE operation!</text>
                            <text x="590" y="408" font-size="11" fill="#10b981" font-weight="bold">Time: ~0.1 seconds</text>
                            
                            <!-- Comparison -->
                            <rect x="200" y="460" width="400" height="30" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                            <text x="400" y="482" font-size="13" font-weight="bold" fill="#92400e" text-anchor="middle">Set-Based is 100x FASTER! ‚ö°</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow24" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#dc2626"/>
                                </marker>
                                <marker id="arrow25" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#10b981"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Advanced Set-Based Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- Complex set-based operations

            -- 1. INSERT with calculations
            INSERT INTO EmployeeBonuses (EmployeeID, BonusAmount)
            SELECT 
                EmployeeID,
                CASE 
                    WHEN Performance = 'Excellent' THEN Salary * 0.15
                    WHEN Performance = 'Good' THEN Salary * 0.10
                    ELSE Salary * 0.05
                END AS BonusAmount
            FROM Employees
            WHERE HireDate < '2022-01-01';
            -- Calculates and inserts bonuses for all eligible employees at once ‚úì

            -- 2. UPDATE with JOIN
            UPDATE Employees e
            JOIN Departments d ON e.DepartmentID = d.DepartmentID
            SET e.Salary = e.Salary * 1.10
            WHERE d.Budget > 1000000;
            -- Updates all employees in high-budget departments ‚úì

            -- 3. Conditional UPDATE
            UPDATE Employees
            SET Salary = CASE 
                WHEN Performance = 'Excellent' THEN Salary * 1.15
                WHEN Performance = 'Good' THEN Salary * 1.10
                WHEN Performance = 'Average' THEN Salary * 1.05
                ELSE Salary
            END
            WHERE HireDate < '2021-01-01';
            -- Different salary increases based on performance, all at once ‚úì

            -- 4. DELETE with subquery
            DELETE FROM Employees
            WHERE DepartmentID IN (
                SELECT DepartmentID 
                FROM Departments 
                WHERE Active = FALSE
            );
            -- Removes all employees from inactive departments ‚úì

            -- 5. Multi-table INSERT
            INSERT INTO EmployeeArchive (EmployeeID, Name, Salary, TerminationDate)
            SELECT EmployeeID, Name, Salary, CURDATE()
            FROM Employees
            WHERE LastWorkDay < CURDATE();

            DELETE FROM Employees 
            WHERE LastWorkDay < CURDATE();
            -- Archives and removes terminated employees (set-based) ‚úì

            -- 6. UPDATE with aggregation
            UPDATE Departments d
            SET d.AvgSalary = (
                SELECT AVG(e.Salary)
                FROM Employees e
                WHERE e.DepartmentID = d.DepartmentID
            );
            -- Updates average salary for all departments at once ‚úì

            -- 7. Bulk INSERT from external data
            LOAD DATA INFILE '/path/to/employees.csv'
            INTO TABLE Employees
            FIELDS TERMINATED BY ','
            LINES TERMINATED BY '\n'
            IGNORE 1 ROWS;
            -- Loads thousands of rows in one operation ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>When should you use cursors instead of set-based operations?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Use cursors ONLY when set-based operations are truly impossible.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Rare Valid Cases for Cursors:</strong></p>
                                <ol>
                                    <li><strong>Complex row-by-row logic:</strong>
                                        <ul>
                                            <li>Each row requires calling external APIs</li>
                                            <li>Each row needs complex procedural logic that can't be expressed in SQL</li>
                                            <li>Processing depends on results of previous rows</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Calling stored procedures:</strong>
                                        <ul>
                                            <li>Must call a stored procedure for each row</li>
                                            <li>Stored procedure has side effects (logging, notifications)</li>
                                        </ul>
                                    </li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong></p>
                                <ul>
                                    <li>‚úì Always try set-based solution first</li>
                                    <li>‚úì 95% of the time, set-based works</li>
                                    <li>‚úì Cursors should be last resort</li>
                                    <li>‚úì If you use cursors, document WHY</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- DON'T use cursor for this:
            -- (Can be done set-based!)
            UPDATE Employees SET Salary = Salary * 1.10 WHERE DepartmentID = 1;

            -- DO use cursor for this:
            -- (Complex logic per row that can't be expressed in SQL)
            FOR each employee:
                score = CallExternalScoringAPI(employee.id)
                IF score > 90 THEN
                    CallNotificationService(employee.email, "Congratulations!")
                    UPDATE Employees SET Bonus = CalculateComplexBonus(score) 
                    WHERE EmployeeID = employee.id
                END IF
            END FOR</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does set-based thinking differ from procedural thinking?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Procedural Thinking</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Set-Based Thinking</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Focus</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">How to process each row</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">What condition defines the set</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Iteration</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Explicit loops (FOR, WHILE)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Implicit (WHERE clause)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Example</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">for each emp: if salary > 70k: increase</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">UPDATE WHERE salary > 70000</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Performance</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Slow (row-by-row)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Fast (optimized)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Code Length</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Long (10-20 lines)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Short (1-3 lines)</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Task: Give 10% raise to employees hired before 2020 in IT dept

            -- Procedural thinking:
            for each employee in Employees:
                if employee.HireDate < '2020-01-01':
                    if employee.DepartmentID == 1:  // IT dept
                        employee.Salary = employee.Salary * 1.10
                        save(employee)

            -- Set-based thinking:
            UPDATE Employees 
            SET Salary = Salary * 1.10
            WHERE HireDate < '2020-01-01' AND DepartmentID = 1;

            -- Same result, 100x faster, 1/10th the code!</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you update 0 rows with a set-based operation?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes!</strong> And this is perfectly valid and happens often.</p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Update all employees with salary > 200000
            UPDATE Employees SET Salary = Salary * 1.10 WHERE Salary > 200000;

            -- If no employees have Salary > 200000:
            -- Query OK, 0 rows affected
            -- This is not an error! ‚úì

            -- Check affected rows
            SELECT ROW_COUNT();  -- Returns 0

            -- In application code:
            affected_rows = cursor.execute("UPDATE ... WHERE ...")
            if affected_rows == 0:
                print("No employees matched the criteria")
            else:
                print(f"Updated {affected_rows} employees")</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>This is actually an advantage of set-based operations:</strong></p>
                                <ul>
                                    <li>No need to check if rows exist first</li>
                                    <li>One operation handles 0, 1, or 1000 rows</li>
                                    <li>Simpler code, no special cases</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">High-Level Operations</span>
                        <span class="keyword-tag">Codd's Rule 7</span>
                        <span class="keyword-tag">Set-Based Operations</span>
                        <span class="keyword-tag">Set-at-a-Time</span>
                        <span class="keyword-tag">Declarative SQL</span>
                        <span class="keyword-tag">Bulk Operations</span>
                        <span class="keyword-tag">INSERT SELECT</span>
                        <span class="keyword-tag">Mass UPDATE</span>
                        <span class="keyword-tag">Multiple Row DELETE</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 42: What is Rule 8 - Physical Data Independence? -->
            <div class="question-content" id="q42">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 8: Physical Data Independence?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 8: Physical Data Independence</strong> states that changes to the physical storage of data (how data is stored on disk) should NOT require changes to application programs or user queries. Applications should be independent of physical storage details.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Principle:</strong></p>
                        <p>Users and applications interact with <strong>logical view</strong> of data, not physical storage. Physical storage can change without affecting applications.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Physical Storage Changes Include:</strong></p>
                        <ul>
                            <li>Storage device changes (HDD ‚Üí SSD)</li>
                            <li>File organization changes (heap ‚Üí clustered)</li>
                            <li>Index creation or deletion</li>
                            <li>Data compression or encryption</li>
                            <li>Tablespace reorganization</li>
                            <li>Partitioning strategies</li>
                            <li>Data page size changes</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why This Matters:</strong></p>
                        <ul>
                            <li><strong>Flexibility:</strong> Can optimize storage without breaking apps</li>
                            <li><strong>Performance:</strong> Can add indexes for speed</li>
                            <li><strong>Maintenance:</strong> Can reorganize data for efficiency</li>
                            <li><strong>Hardware:</strong> Can upgrade storage devices</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Three Levels of Data Abstraction
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 700 450" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="350" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Data Independence: Three-Level Architecture</text>
                            
                            <!-- External Level -->
                            <rect x="100" y="70" width="500" height="90" fill="#fef3c7" stroke="#f59e0b" stroke-width="3" rx="5"/>
                            <text x="350" y="100" font-size="14" font-weight="bold" fill="#92400e" text-anchor="middle">External Level (User Views)</text>
                            <text x="120" y="125" font-size="11" fill="#333">View 1: SELECT Name, Salary FROM Employees</text>
                            <text x="120" y="145" font-size="11" fill="#333">View 2: SELECT * FROM EmployeeDetails WHERE Dept='IT'</text>
                            
                            <!-- Logical Independence Arrow -->
                            <path d="M 350 160 L 350 180" stroke="#7c3aed" stroke-width="3" stroke-dasharray="5,5"/>
                            <rect x="250" y="165" width="200" height="25" fill="#f3e8ff" stroke="#7c3aed" stroke-width="1" rx="3"/>
                            <text x="350" y="182" font-size="10" font-weight="bold" fill="#5b21b6" text-anchor="middle">Logical Data Independence</text>
                            
                            <!-- Conceptual Level -->
                            <rect x="100" y="195" width="500" height="90" fill="#dbeafe" stroke="#3b82f6" stroke-width="3" rx="5"/>
                            <text x="350" y="225" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">Conceptual Level (Logical Schema)</text>
                            <text x="120" y="250" font-size="11" fill="#333">Employees(EmployeeID, Name, Dept, Salary)</text>
                            <text x="120" y="270" font-size="11" fill="#333">Departments(DeptID, DeptName, Budget)</text>
                            
                            <!-- Physical Independence Arrow -->
                            <path d="M 350 285 L 350 305" stroke="#10b981" stroke-width="3" stroke-dasharray="5,5"/>
                            <rect x="240" y="290" width="220" height="25" fill="#d1fae5" stroke="#10b981" stroke-width="1" rx="3"/>
                            <text x="350" y="307" font-size="10" font-weight="bold" fill="#065f46" text-anchor="middle">Physical Data Independence</text>
                            
                            <!-- Internal Level -->
                            <rect x="100" y="320" width="500" height="100" fill="#e5e7eb" stroke="#6b7280" stroke-width="3" rx="5"/>
                            <text x="350" y="350" font-size="14" font-weight="bold" fill="#374151" text-anchor="middle">Internal Level (Physical Storage)</text>
                            <text x="120" y="375" font-size="11" fill="#333">‚Ä¢ File: /data/employees.ibd (SSD)</text>
                            <text x="120" y="395" font-size="11" fill="#333">‚Ä¢ Index: B-tree on EmployeeID, Hash on Name</text>
                            <text x="120" y="415" font-size="11" fill="#333">‚Ä¢ Pages: 16KB, Compressed, Encrypted</text>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Physical Independence Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- Application Query (never changes!)
            SELECT EmployeeID, Name, Salary 
            FROM Employees 
            WHERE DepartmentID = 1 
            ORDER BY Salary DESC;

            -- This query works regardless of physical storage changes below:

            -- -----------------------------------------------------------
            -- Change 1: Add Index (Performance Optimization)
            -- -----------------------------------------------------------
            -- Before: Table scan (slow)
            CREATE INDEX idx_department ON Employees(DepartmentID);
            -- After: Index seek (fast)

            -- Application query: NO CHANGE NEEDED ‚úì
            -- Query automatically uses new index for better performance

            -- -----------------------------------------------------------
            -- Change 2: Add Composite Index
            -- -----------------------------------------------------------
            CREATE INDEX idx_dept_salary ON Employees(DepartmentID, Salary);
            -- Query optimizer may use this index instead

            -- Application query: NO CHANGE NEEDED ‚úì

            -- -----------------------------------------------------------
            -- Change 3: Change Storage Engine
            -- -----------------------------------------------------------
            -- Before: MyISAM
            ALTER TABLE Employees ENGINE = InnoDB;
            -- After: InnoDB (better transactions, row-level locking)

            -- Application query: NO CHANGE NEEDED ‚úì

            -- -----------------------------------------------------------
            -- Change 4: Add Partitioning (For Large Tables)
            -- -----------------------------------------------------------
            ALTER TABLE Employees 
            PARTITION BY RANGE (YEAR(HireDate)) (
                PARTITION p0 VALUES LESS THAN (2020),
                PARTITION p1 VALUES LESS THAN (2021),
                PARTITION p2 VALUES LESS THAN (2022),
                PARTITION p3 VALUES LESS THAN MAXVALUE
            );
            -- Data now split across multiple physical files

            -- Application query: NO CHANGE NEEDED ‚úì
            -- Database automatically queries relevant partitions

            -- -----------------------------------------------------------
            -- Change 5: Enable Compression
            -- -----------------------------------------------------------
            ALTER TABLE Employees ROW_FORMAT=COMPRESSED;
            -- Data compressed on disk, decompressed when read

            -- Application query: NO CHANGE NEEDED ‚úì
            -- Compression is transparent to applications

            -- -----------------------------------------------------------
            -- Change 6: Move to Different Storage
            -- -----------------------------------------------------------
            -- Move tablespace from HDD to SSD
            ALTER TABLE Employees TABLESPACE fast_ssd;

            -- Application query: NO CHANGE NEEDED ‚úì
            -- Applications don't know or care about storage device

            -- -----------------------------------------------------------
            -- Change 7: Reorganize Table (Defragment)
            -- -----------------------------------------------------------
            OPTIMIZE TABLE Employees;
            -- Rebuilds table, reclaims space, improves performance

            -- Application query: NO CHANGE NEEDED ‚úì

            -- -----------------------------------------------------------
            -- Change 8: Change Page Size
            -- -----------------------------------------------------------
            -- Database administrator changes page size from 8KB to 16KB
            -- Requires database restart, but:

            -- Application query: NO CHANGE NEEDED ‚úì

            -- -----------------------------------------------------------
            -- Change 9: Add Covering Index
            -- -----------------------------------------------------------
            CREATE INDEX idx_covering ON Employees(DepartmentID, EmployeeID, Name, Salary);
            -- Query can now be satisfied entirely from index (no table access)

            -- Application query: NO CHANGE NEEDED ‚úì
            -- Becomes much faster automatically!

            -- -----------------------------------------------------------
            -- Change 10: Enable Encryption
            -- -----------------------------------------------------------
            ALTER TABLE Employees ENCRYPTION='Y';
            -- Data encrypted at rest on disk

            -- Application query: NO CHANGE NEEDED ‚úì
            -- Encryption/decryption handled by DBMS transparently</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        Benefits of Physical Data Independence
                    </div>
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Performance Tuning Without Code Changes:</strong>
                                <ul>
                                    <li>Add indexes to speed up queries</li>
                                    <li>Remove unused indexes to save space</li>
                                    <li>Change storage engines</li>
                                    <li>Applications continue working unchanged</li>
                                </ul>
                            </li>
                            
                            <li><strong>Storage Optimization:</strong>
                                <ul>
                                    <li>Compress data to save disk space</li>
                                    <li>Partition large tables</li>
                                    <li>Move hot data to SSD, cold data to slower storage</li>
                                    <li>No application impact</li>
                                </ul>
                            </li>
                            
                            <li><strong>Hardware Upgrades:</strong>
                                <ul>
                                    <li>Migrate from HDD to SSD</li>
                                    <li>Add more storage capacity</li>
                                    <li>Change RAID configurations</li>
                                    <li>Applications oblivious to changes</li>
                                </ul>
                            </li>
                            
                            <li><strong>Maintenance Operations:</strong>
                                <ul>
                                    <li>Reorganize tables (defragment)</li>
                                    <li>Rebuild indexes</li>
                                    <li>Update statistics</li>
                                    <li>No application modifications needed</li>
                                </ul>
                            </li>
                            
                            <li><strong>Security Enhancements:</strong>
                                <ul>
                                    <li>Enable transparent encryption</li>
                                    <li>Change encryption algorithms</li>
                                    <li>Applications don't need to know</li>
                                </ul>
                            </li>
                            
                            <li><strong>Scalability:</strong>
                                <ul>
                                    <li>Move database to larger server</li>
                                    <li>Distribute data across multiple disks</li>
                                    <li>Use different storage tiers</li>
                                    <li>Applications unaffected</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Scenario
                    </div>
                    <div class="scenario-box">
                        <h4>E-commerce Database Evolution</h4>
                        
                        <p><strong>Initial Setup (Year 1):</strong></p>
                        <ul>
                            <li>Small database (100K products)</li>
                            <li>Single HDD</li>
                            <li>No indexes except primary key</li>
                            <li>MyISAM storage engine</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Year 2 - Performance Degradation:</strong></p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Add indexes for common queries (Physical change)
            CREATE INDEX idx_category ON Products(CategoryID);
            CREATE INDEX idx_price ON Products(Price);
            CREATE INDEX idx_name ON Products(ProductName);

            -- Switch to InnoDB for better concurrency (Physical change)
            ALTER TABLE Products ENGINE = InnoDB;

            -- Application code: NO CHANGES NEEDED! ‚úì
            -- Queries automatically become faster</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Year 3 - Data Growth (1M products):</strong></p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Upgrade storage: HDD ‚Üí SSD (Physical change)
            -- Move database files to SSD
            -- Faster random access, better I/O

            -- Enable compression to save space (Physical change)
            ALTER TABLE Products ROW_FORMAT=COMPRESSED;

            -- Application code: NO CHANGES NEEDED! ‚úì</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Year 4 - Scale to 10M products:</strong></p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Partition by category (Physical change)
            ALTER TABLE Products 
            PARTITION BY LIST (CategoryID) (
                PARTITION p_electronics VALUES IN (1,2,3),
                PARTITION p_clothing VALUES IN (4,5,6),
                PARTITION p_home VALUES IN (7,8,9),
                PARTITION p_other VALUES IN (10,11,12)
            );

            -- Add covering indexes (Physical change)
            CREATE INDEX idx_search ON Products(CategoryID, ProductName, Price);

            -- Application code: NO CHANGES NEEDED! ‚úì
            -- Queries automatically use partitions and indexes</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Result:</strong></p>
                        <ul>
                            <li>‚úì Database evolved over 4 years</li>
                            <li>‚úì Massive physical storage changes</li>
                            <li>‚úì Zero application code changes!</li>
                            <li>‚úì 100x performance improvement</li>
                            <li>‚úì Physical Data Independence in action!</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does data independence contribute to system scalability?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Physical Data Independence enables scalability by allowing storage optimization without application changes:</strong></p>
                                
                                <ol>
                                    <li><strong>Vertical Scaling:</strong>
                                        <ul>
                                            <li>Upgrade to faster storage (SSD, NVMe)</li>
                                            <li>Add more RAM</li>
                                            <li>Increase disk capacity</li>
                                            <li>Applications automatically benefit</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Horizontal Scaling:</strong>
                                        <ul>
                                            <li>Partition data across multiple disks</li>
                                            <li>Shard database across servers</li>
                                            <li>Use distributed storage</li>
                                            <li>Applications don't need to know</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Performance Optimization:</strong>
                                        <ul>
                                            <li>Add/modify indexes as load increases</li>
                                            <li>Change storage engines</li>
                                            <li>Enable caching layers</li>
                                            <li>No code deployment needed</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Cost Optimization:</strong>
                                        <ul>
                                            <li>Move old data to cheaper storage</li>
                                            <li>Keep hot data on fast storage</li>
                                            <li>Tiered storage strategies</li>
                                            <li>Transparent to applications</li>
                                        </ul>
                                    </li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Without Physical Data Independence:</strong></p>
                                <ul>
                                    <li>‚ùå Every storage change requires code changes</li>
                                    <li>‚ùå Expensive, time-consuming updates</li>
                                    <li>‚ùå Risk of breaking applications</li>
                                    <li>‚ùå Testing and deployment overhead</li>
                                    <li>‚ùå Slows down scalability efforts</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between physical and logical data independence?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Physical Independence</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Logical Independence</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Definition</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Storage changes don't affect apps</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Schema changes don't affect apps</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Level</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Internal ‚Üí Conceptual</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Conceptual ‚Üí External</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Examples</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Add index, change storage, partition</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Add column, split table, change datatype</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Difficulty</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Easier to achieve</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Harder to achieve</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Impact</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Performance, storage</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Data structure, relationships</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Physical Independence Example:
            CREATE INDEX idx_name ON Employees(Name);  -- Physical change
            -- Query: SELECT * FROM Employees WHERE Name = 'John'
            -- No change needed! ‚úì

            -- Logical Independence Example:
            ALTER TABLE Employees ADD COLUMN MiddleName VARCHAR(50);  -- Logical change
            -- Old query: SELECT FirstName, LastName FROM Employees
            -- Still works! ‚úì (doesn't reference new column)</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can applications ever violate physical data independence?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Applications can violate physical independence by:</strong></p>
                                
                                <ol>
                                    <li><strong>Using Hints or Low-Level Commands:</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>-- BAD: Specifying which index to use
            SELECT /*+ INDEX(Employees idx_name) */ * 
            FROM Employees WHERE Name = 'John';
            -- Now tied to specific index! ‚ùå

            -- GOOD: Let optimizer decide
            SELECT * FROM Employees WHERE Name = 'John';
            -- Works regardless of indexes ‚úì</code></pre>
                                        </div>
                                    </li>
                                    
                                    <li><strong>Directly Accessing Physical Files:</strong>
                                        <ul>
                                            <li>Reading database files directly</li>
                                            <li>Bypassing DBMS</li>
                                            <li>Breaks abstraction</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Hardcoding Physical Assumptions:</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>-- BAD: Assuming sorted order from index
            SELECT * FROM Employees;  -- assumes returns in EmployeeID order
            -- If index removed, order may change! ‚ùå

            -- GOOD: Explicit ORDER BY
            SELECT * FROM Employees ORDER BY EmployeeID;
            -- Always correct order ‚úì</code></pre>
                                        </div>
                                    </li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Always use standard SQL without physical assumptions or hints.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Physical Data Independence</span>
                        <span class="keyword-tag">Codd's Rule 8</span>
                        <span class="keyword-tag">Storage Independence</span>
                        <span class="keyword-tag">Three-Level Architecture</span>
                        <span class="keyword-tag">Internal Schema</span>
                        <span class="keyword-tag">Index Independence</span>
                        <span class="keyword-tag">Storage Optimization</span>
                        <span class="keyword-tag">Data Abstraction</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- Question 43: What is Rule 9 - Logical Data Independence? -->
            <div class="question-content" id="q43">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 9: Logical Data Independence?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 9: Logical Data Independence</strong> states that changes to the logical schema (table structure, relationships) should NOT require changes to application programs or user views, as long as the information content remains the same.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Principle:</strong></p>
                        <p>Applications should be isolated from changes in the database's logical structure. The database can evolve without breaking existing applications.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Logical Schema Changes Include:</strong></p>
                        <ul>
                            <li>Adding new columns to tables</li>
                            <li>Adding new tables</li>
                            <li>Splitting tables (normalization)</li>
                            <li>Merging tables (denormalization)</li>
                            <li>Changing data types (within compatibility)</li>
                            <li>Adding/removing constraints</li>
                            <li>Reorganizing relationships</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why This Matters:</strong></p>
                        <ul>
                            <li><strong>Schema Evolution:</strong> Database can grow and change over time</li>
                            <li><strong>Reduced Maintenance:</strong> Don't need to update all apps for every schema change</li>
                            <li><strong>Flexibility:</strong> Can improve design without massive rewrites</li>
                            <li><strong>Cost Savings:</strong> Less expensive than updating all applications</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        How to Achieve Logical Data Independence
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Use Views as Abstraction Layer</h4>
                        <p>Views hide underlying schema changes from applications.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Original Schema
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100),
                Salary DECIMAL(10,2)
            );

            -- Application uses this view
            CREATE VIEW EmployeeData AS
            SELECT EmployeeID, Name, Salary FROM Employees;

            -- Applications query the view (not the table directly)
            SELECT * FROM EmployeeData WHERE Name = 'John';

            -- -----------------------------------------------------------
            -- Schema Change 1: Split Name into FirstName and LastName
            -- -----------------------------------------------------------
            ALTER TABLE Employees ADD COLUMN FirstName VARCHAR(50);
            ALTER TABLE Employees ADD COLUMN LastName VARCHAR(50);
            -- Populate FirstName and LastName from Name
            UPDATE Employees SET FirstName = SUBSTRING_INDEX(Name, ' ', 1);
            UPDATE Employees SET LastName = SUBSTRING_INDEX(Name, ' ', -1);
            ALTER TABLE Employees DROP COLUMN Name;

            -- Update the view to maintain compatibility
            CREATE OR REPLACE VIEW EmployeeData AS
            SELECT 
                EmployeeID, 
                CONCAT(FirstName, ' ', LastName) AS Name,  -- Reconstruct Name
                Salary 
            FROM Employees;

            -- Application code: NO CHANGE NEEDED! ‚úì
            -- Still queries: SELECT * FROM EmployeeData WHERE Name = 'John'
            -- View handles the translation automatically</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Select Only Needed Columns</h4>
                        <p>Don't use SELECT *, specify columns explicitly.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- BAD: Breaks when columns added/removed
            SELECT * FROM Employees;  -- Application expects specific column order ‚ùå

            -- GOOD: Explicit columns, resilient to schema changes
            SELECT EmployeeID, Name, Salary FROM Employees;  -- Still works if new columns added ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Use Stored Procedures/Functions</h4>
                        <p>Encapsulate complex logic in database procedures.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Create procedure
            DELIMITER //
            CREATE PROCEDURE GetEmployeeInfo(IN emp_id INT)
            BEGIN
                SELECT EmployeeID, Name, Salary 
                FROM Employees 
                WHERE EmployeeID = emp_id;
            END //
            DELIMITER ;

            -- Application calls procedure
            CALL GetEmployeeInfo(101);

            -- If schema changes, update procedure (not application)
            -- Logical independence maintained ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Logical Independence Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Scenario: E-commerce Database Evolution
            -- -----------------------------------------------------------

            -- YEAR 1: Initial Schema
            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                CustomerName VARCHAR(100),
                CustomerEmail VARCHAR(100),
                CustomerPhone VARCHAR(15),
                ProductName VARCHAR(200),
                Quantity INT,
                Price DECIMAL(10,2),
                OrderDate DATE
            );

            -- Applications use this:
            SELECT * FROM Orders WHERE OrderDate > '2024-01-01';

            -- -----------------------------------------------------------
            -- YEAR 2: Normalize (Split into multiple tables)
            -- -----------------------------------------------------------

            -- Create normalized tables
            CREATE TABLE Customers (
                CustomerID INT PRIMARY KEY AUTO_INCREMENT,
                CustomerName VARCHAR(100),
                CustomerEmail VARCHAR(100),
                CustomerPhone VARCHAR(15)
            );

            CREATE TABLE Products (
                ProductID INT PRIMARY KEY AUTO_INCREMENT,
                ProductName VARCHAR(200),
                Price DECIMAL(10,2)
            );

            CREATE TABLE Orders_New (
                OrderID INT PRIMARY KEY,
                CustomerID INT,
                ProductID INT,
                Quantity INT,
                OrderDate DATE,
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID),
                FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
            );

            -- Migrate data
            INSERT INTO Customers (CustomerName, CustomerEmail, CustomerPhone)
            SELECT DISTINCT CustomerName, CustomerEmail, CustomerPhone FROM Orders;

            INSERT INTO Products (ProductName, Price)
            SELECT DISTINCT ProductName, Price FROM Orders;

            -- ... migrate Orders data ...

            -- Create VIEW to maintain compatibility with old schema
            CREATE VIEW Orders AS
            SELECT 
                o.OrderID,
                c.CustomerName,
                c.CustomerEmail,
                c.CustomerPhone,
                p.ProductName,
                o.Quantity,
                p.Price,
                o.OrderDate
            FROM Orders_New o
            JOIN Customers c ON o.CustomerID = c.CustomerID
            JOIN Products p ON o.ProductID = p.ProductID;

            -- Old application query: NO CHANGE NEEDED! ‚úì
            SELECT * FROM Orders WHERE OrderDate > '2024-01-01';
            -- Still works! View provides same interface

            -- -----------------------------------------------------------
            -- Example 2: Adding Columns (Backward Compatible)
            -- -----------------------------------------------------------

            -- Original table
            CREATE TABLE Products (
                ProductID INT PRIMARY KEY,
                ProductName VARCHAR(200),
                Price DECIMAL(10,2)
            );

            -- Application queries
            SELECT ProductID, ProductName, Price FROM Products;  -- Explicit columns ‚úì

            -- Add new columns
            ALTER TABLE Products ADD COLUMN Description TEXT;
            ALTER TABLE Products ADD COLUMN Weight DECIMAL(10,2);
            ALTER TABLE Products ADD COLUMN ManufacturerID INT;

            -- Old application query: STILL WORKS! ‚úì
            SELECT ProductID, ProductName, Price FROM Products;
            -- Doesn't reference new columns, continues to work

            -- New applications can use new columns
            SELECT ProductID, ProductName, Price, Description, Weight FROM Products;

            -- -----------------------------------------------------------
            -- Example 3: Splitting Tables (Using Views)
            -- -----------------------------------------------------------

            -- Original: All employee data in one table
            CREATE TABLE Employees_Old (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100),
                Address VARCHAR(200),
                City VARCHAR(50),
                State VARCHAR(50),
                Zip VARCHAR(10),
                Salary DECIMAL(10,2),
                Performance VARCHAR(20)
            );

            -- Split into multiple tables for better organization
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100),
                Salary DECIMAL(10,2),
                Performance VARCHAR(20)
            );

            CREATE TABLE EmployeeAddresses (
                EmployeeID INT PRIMARY KEY,
                Address VARCHAR(200),
                City VARCHAR(50),
                State VARCHAR(50),
                Zip VARCHAR(10),
                FOREIGN KEY (EmployeeID) REFERENCES Employees(EmployeeID)
            );

            -- Create view with old structure
            CREATE VIEW Employees_Old AS
            SELECT 
                e.EmployeeID,
                e.Name,
                a.Address,
                a.City,
                a.State,
                a.Zip,
                e.Salary,
                e.Performance
            FROM Employees e
            LEFT JOIN EmployeeAddresses a ON e.EmployeeID = a.EmployeeID;

            -- Old applications: NO CHANGE NEEDED! ‚úì
            SELECT * FROM Employees_Old WHERE City = 'New York';

            -- -----------------------------------------------------------
            -- Example 4: Merging Tables (Denormalization)
            -- -----------------------------------------------------------

            -- Original: Separate tables
            CREATE TABLE Customers (
                CustomerID INT PRIMARY KEY,
                CustomerName VARCHAR(100)
            );

            CREATE TABLE CustomerContacts (
                CustomerID INT PRIMARY KEY,
                Email VARCHAR(100),
                Phone VARCHAR(15),
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
            );

            -- Applications query both
            SELECT c.CustomerID, c.CustomerName, cc.Email, cc.Phone
            FROM Customers c
            JOIN CustomerContacts cc ON c.CustomerID = cc.CustomerID;

            -- Merge for performance (denormalization)
            CREATE TABLE Customers_New (
                CustomerID INT PRIMARY KEY,
                CustomerName VARCHAR(100),
                Email VARCHAR(100),
                Phone VARCHAR(15)
            );

            -- Migrate data
            INSERT INTO Customers_New
            SELECT c.CustomerID, c.CustomerName, cc.Email, cc.Phone
            FROM Customers c
            LEFT JOIN CustomerContacts cc ON c.CustomerID = cc.CustomerID;

            -- Create views to maintain old interface
            CREATE VIEW Customers AS
            SELECT CustomerID, CustomerName FROM Customers_New;

            CREATE VIEW CustomerContacts AS
            SELECT CustomerID, Email, Phone FROM Customers_New;

            -- Old applications: NO CHANGE NEEDED! ‚úì
            -- Can still query separate views as before

            -- -----------------------------------------------------------
            -- Example 5: Changing Data Types (Compatible Changes)
            -- -----------------------------------------------------------

            -- Original
            CREATE TABLE Products (
                ProductID INT PRIMARY KEY,
                ProductCode VARCHAR(10),  -- Too short!
                Price DECIMAL(8,2)
            );

            -- Expand size (backward compatible)
            ALTER TABLE Products MODIFY COLUMN ProductCode VARCHAR(20);
            ALTER TABLE Products MODIFY COLUMN Price DECIMAL(10,2);

            -- Applications: NO CHANGE NEEDED! ‚úì
            -- Larger VARCHAR and DECIMAL are compatible with smaller ones

            -- BAD: Reducing size (NOT backward compatible) ‚ùå
            -- ALTER TABLE Products MODIFY COLUMN ProductCode VARCHAR(5);  
            -- May truncate data or fail!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Challenges with Logical Data Independence
                    </div>
                    <div class="explanation-text">
                        <p><strong>Logical Independence is HARDER to achieve than Physical Independence:</strong></p>
                        
                        <ol>
                            <li><strong>Structural Changes Are More Complex:</strong>
                                <ul>
                                    <li>Splitting/merging tables affects data model</li>
                                    <li>Changing relationships can be complicated</li>
                                    <li>Views may not handle all changes transparently</li>
                                </ul>
                            </li>
                            
                            <li><strong>Updatable View Limitations:</strong>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- View with JOIN may not be updatable
            CREATE VIEW EmployeeDetails AS
            SELECT e.*, d.DepartmentName
            FROM Employees e
            JOIN Departments d ON e.DepartmentID = d.DepartmentID;

            -- This may fail:
            UPDATE EmployeeDetails SET DepartmentName = 'IT' WHERE EmployeeID = 1;
            -- ‚ùå Cannot update JOIN view directly in many databases</code></pre>
                                </div>
                            </li>
                            
                            <li><strong>Performance Overhead:</strong>
                                <ul>
                                    <li>Views add query overhead</li>
                                    <li>Complex views can be slow</li>
                                    <li>May need materialized views</li>
                                </ul>
                            </li>
                            
                            <li><strong>Application Dependencies:</strong>
                                <ul>
                                    <li>Applications using SELECT * are brittle</li>
                                    <li>Hard-coded column positions break</li>
                                    <li>Implicit assumptions about data structure</li>
                                </ul>
                            </li>
                            
                            <li><strong>Breaking Changes:</strong>
                                <ul>
                                    <li>Removing columns breaks dependent applications</li>
                                    <li>Changing datatypes can cause issues</li>
                                    <li>Renaming tables/columns requires coordination</li>
                                </ul>
                            </li>
                        </ol>
                        
                        <p style="margin-top: 1rem;"><strong>Reality Check:</strong></p>
                        <p>Complete logical data independence is difficult to achieve. Most systems achieve <strong>partial</strong> logical independence through careful design and use of views.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Best Practices for Logical Independence
                    </div>
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Always Use Views for Application Access:</strong>
                                <ul>
                                    <li>Applications query views, not tables directly</li>
                                    <li>Views provide stable interface</li>
                                    <li>Schema changes hidden behind views</li>
                                </ul>
                            </li>
                            
                            <li><strong>Explicit Column Names:</strong>
                                <ul>
                                    <li>Never use SELECT *</li>
                                    <li>Always specify column names</li>
                                    <li>Protects against column additions/reordering</li>
                                </ul>
                            </li>
                            
                            <li><strong>Use Stored Procedures:</strong>
                                <ul>
                                    <li>Encapsulate data access logic</li>
                                    <li>Single point of change</li>
                                    <li>Applications call procedures, not direct SQL</li>
                                </ul>
                            </li>
                            
                            <li><strong>Plan for Growth:</strong>
                                <ul>
                                    <li>Use appropriate data types from the start</li>
                                    <li>Leave room for expansion</li>
                                    <li>Design for change</li>
                                </ul>
                            </li>
                            
                            <li><strong>Additive Changes Preferred:</strong>
                                <ul>
                                    <li>Add new columns/tables instead of modifying</li>
                                    <li>Deprecate old structures gradually</li>
                                    <li>Maintain backward compatibility</li>
                                </ul>
                            </li>
                            
                            <li><strong>Version Your Schema:</strong>
                                <ul>
                                    <li>Track schema versions</li>
                                    <li>Document all changes</li>
                                    <li>Migration scripts for upgrades</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why is logical independence harder to achieve than physical independence?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Physical Independence</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Logical Independence</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Abstraction</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Storage details completely hidden</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Schema structure visible to apps</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Impact</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No semantic changes</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">May change meaning/structure</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Transparency</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Fully transparent (indexes, etc.)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Partially transparent (views help)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Examples</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Add index ‚Üí No app change</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Split table ‚Üí May need view</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Difficulty</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Easy (well-supported)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Hard (limited support)</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Key Reason:</strong> Physical changes don't affect <em>what data exists</em>, only <em>how it's stored</em>. Logical changes can fundamentally alter data structure and relationships.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How do views help achieve logical data independence?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Views act as a stable interface between applications and changing schemas:</strong></p>
                                
                                <ol>
                                    <li><strong>Hide Structural Changes:</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>-- Before: Single table
            SELECT Name FROM Employees;

            -- After: Split into FirstName, LastName
            -- Create view to maintain old interface
            CREATE VIEW Employees_V1 AS
            SELECT CONCAT(FirstName, ' ', LastName) AS Name FROM Employees_New;

            -- Old query still works!
            SELECT Name FROM Employees_V1;</code></pre>
                                        </div>
                                    </li>
                                    
                                    <li><strong>Abstract Complex Joins:</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>-- View simplifies complex joins
            CREATE VIEW OrderDetails AS
            SELECT o.OrderID, c.CustomerName, p.ProductName, o.Quantity
            FROM Orders o
            JOIN Customers c ON o.CustomerID = c.CustomerID
            JOIN Products p ON o.ProductID = p.ProductID;

            -- Applications query simple view instead of complex JOIN</code></pre>
                                        </div>
                                    </li>
                                    
                                    <li><strong>Provide Backward Compatibility:</strong>
                                        <ul>
                                            <li>Old view maintained for legacy apps</li>
                                            <li>New apps use new schema directly</li>
                                            <li>Gradual migration possible</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Security and Access Control:</strong>
                                        <ul>
                                            <li>Views can hide sensitive columns</li>
                                            <li>Different views for different user roles</li>
                                            <li>Change underlying tables without exposing to users</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What schema changes break logical independence?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Changes that BREAK applications (cannot be hidden by views):</strong></p>
                                
                                <ol>
                                    <li><strong>Removing Columns:</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>ALTER TABLE Employees DROP COLUMN Salary;
            -- Applications querying Salary will break! ‚ùå
            SELECT EmployeeID, Name, Salary FROM Employees;  -- ERROR!</code></pre>
                                        </div>
                                    </li>
                                    
                                    <li><strong>Renaming Columns (without view):</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>ALTER TABLE Employees CHANGE COLUMN Name FullName VARCHAR(100);
            -- Old queries break! ‚ùå
            SELECT Name FROM Employees;  -- ERROR: Unknown column 'Name'</code></pre>
                                        </div>
                                    </li>
                                    
                                    <li><strong>Incompatible Datatype Changes:</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>-- Original: Salary is DECIMAL
            -- Applications expect numeric
            SELECT Salary * 1.10 FROM Employees;

            -- Change to VARCHAR
            ALTER TABLE Employees MODIFY COLUMN Salary VARCHAR(50);
            -- Calculations break! ‚ùå
            SELECT Salary * 1.10 FROM Employees;  -- Type error!</code></pre>
                                        </div>
                                    </li>
                                    
                                    <li><strong>Removing Tables:</strong>
                                        <ul>
                                            <li>Applications querying dropped tables break immediately</li>
                                            <li>Cannot be hidden by views</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Changing Primary Keys:</strong>
                                        <ul>
                                            <li>Applications with hard-coded key values break</li>
                                            <li>Foreign key relationships affected</li>
                                        </ul>
                                    </li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Changes that DON'T break (can be hidden):</strong></p>
                                <ul>
                                    <li>‚úì Adding new columns (if SELECT explicit)</li>
                                    <li>‚úì Adding new tables</li>
                                    <li>‚úì Compatible datatype expansions (VARCHAR(10) ‚Üí VARCHAR(20))</li>
                                    <li>‚úì Splitting tables (with views)</li>
                                    <li>‚úì Adding indexes (physical, not logical)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Logical Data Independence</span>
                        <span class="keyword-tag">Codd's Rule 9</span>
                        <span class="keyword-tag">Schema Evolution</span>
                        <span class="keyword-tag">Views as Abstraction</span>
                        <span class="keyword-tag">Backward Compatibility</span>
                        <span class="keyword-tag">Structural Changes</span>
                        <span class="keyword-tag">Table Normalization</span>
                        <span class="keyword-tag">Schema Versioning</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 44: What is Rule 10 - Integrity Independence? -->
            <div class="question-content" id="q44">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 10: Integrity Independence?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 10: Integrity Independence</strong> states that integrity constraints (business rules) must be defined in the database catalog and stored in the database itself, not in application programs. The DBMS must enforce these constraints automatically.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Principle:</strong></p>
                        <p>Data integrity rules are part of the database definition, enforced by the DBMS, independent of applications.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Types of Integrity Constraints:</strong></p>
                        <ul>
                            <li><strong>Entity Integrity:</strong> Primary key cannot be NULL</li>
                            <li><strong>Referential Integrity:</strong> Foreign keys must reference valid primary keys</li>
                            <li><strong>Domain Integrity:</strong> Values must be from valid domain (data type, range)</li>
                            <li><strong>User-Defined Integrity:</strong> Custom business rules (CHECK constraints)</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why This Matters:</strong></p>
                        <ul>
                            <li><strong>Centralized:</strong> Rules defined once, enforced everywhere</li>
                            <li><strong>Consistent:</strong> All applications follow same rules</li>
                            <li><strong>Reliable:</strong> Cannot be bypassed accidentally</li>
                            <li><strong>Maintainable:</strong> Change rule once, affects all apps</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Integrity Constraints Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- 1. Entity Integrity (Primary Key)
            -- -----------------------------------------------------------
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,  -- Cannot be NULL, must be unique
                Name VARCHAR(100) NOT NULL,   -- Cannot be NULL
                Email VARCHAR(100)
            );

            -- These fail due to entity integrity:
            INSERT INTO Employees VALUES (NULL, 'John', 'john@co.com');  
            -- ‚ùå ERROR: Primary key cannot be NULL

            INSERT INTO Employees VALUES (1, 'John', 'john@co.com');
            INSERT INTO Employees VALUES (1, 'Jane', 'jane@co.com');
            -- ‚ùå ERROR: Duplicate primary key

            INSERT INTO Employees VALUES (2, NULL, 'test@co.com');
            -- ‚ùå ERROR: Name cannot be NULL

            -- -----------------------------------------------------------
            -- 2. Referential Integrity (Foreign Keys)
            -- -----------------------------------------------------------
            CREATE TABLE Departments (
                DepartmentID INT PRIMARY KEY,
                DepartmentName VARCHAR(100)
            );

            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100),
                DepartmentID INT,
                FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID)
                    ON DELETE RESTRICT          -- Prevent deleting department with employees
                    ON UPDATE CASCADE           -- Update employee's DepartmentID if dept changes
            );

            -- Insert valid department
            INSERT INTO Departments VALUES (1, 'IT'), (2, 'HR');

            -- This fails (referential integrity):
            INSERT INTO Employees VALUES (1, 'John', 999);
            -- ‚ùå ERROR: DepartmentID 999 doesn't exist in Departments

            -- This works:
            INSERT INTO Employees VALUES (1, 'John', 1);  -- ‚úì Department 1 exists

            -- Try to delete department with employees:
            DELETE FROM Departments WHERE DepartmentID = 1;
            -- ‚ùå ERROR: Cannot delete (has dependent employees)

            -- Try to update department ID:
            UPDATE Departments SET DepartmentID = 10 WHERE DepartmentID = 1;
            -- ‚úì Success! Employee's DepartmentID automatically updated to 10 (CASCADE)

            -- -----------------------------------------------------------
            -- 3. Domain Integrity (Data Types, Ranges)
            -- -----------------------------------------------------------
            CREATE TABLE Products (
                ProductID INT PRIMARY KEY,
                ProductName VARCHAR(100) NOT NULL,
                Price DECIMAL(10,2) CHECK (Price > 0),           -- Must be positive
                Quantity INT CHECK (Quantity >= 0),               -- Cannot be negative
                Rating DECIMAL(3,2) CHECK (Rating BETWEEN 0 AND 5),  -- 0 to 5
                Status ENUM('Active', 'Discontinued', 'OutOfStock'),  -- Limited values
                LaunchDate DATE CHECK (LaunchDate <= CURDATE())  -- Cannot be future
            );

            -- These fail (domain integrity):
            INSERT INTO Products VALUES (1, 'Laptop', -500, 10, 4.5, 'Active', '2024-01-01');
            -- ‚ùå ERROR: Price cannot be negative

            INSERT INTO Products VALUES (2, 'Mouse', 25.99, -5, 4.0, 'Active', '2024-01-01');
            -- ‚ùå ERROR: Quantity cannot be negative

            INSERT INTO Products VALUES (3, 'Keyboard', 75.00, 20, 6.5, 'Active', '2024-01-01');
            -- ‚ùå ERROR: Rating must be between 0 and 5

            INSERT INTO Products VALUES (4, 'Monitor', 299.99, 15, 4.5, 'Pending', '2024-01-01');
            -- ‚ùå ERROR: Invalid status (not in ENUM)

            INSERT INTO Products VALUES (5, 'Webcam', 89.99, 8, 4.2, 'Active', '2026-01-01');
            -- ‚ùå ERROR: LaunchDate cannot be in future

            -- This works:
            INSERT INTO Products VALUES (6, 'Headphones', 49.99, 30, 4.5, 'Active', '2024-01-15');
            -- ‚úì All constraints satisfied

            -- -----------------------------------------------------------
            -- 4. User-Defined Integrity (Business Rules)
            -- -----------------------------------------------------------
            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                CustomerID INT NOT NULL,
                OrderDate DATE NOT NULL,
                ShipDate DATE,
                TotalAmount DECIMAL(10,2) CHECK (TotalAmount > 0),
                Discount DECIMAL(5,2) CHECK (Discount >= 0 AND Discount <= 100),
                
                -- Business rule: Ship date must be on or after order date
                CHECK (ShipDate IS NULL OR ShipDate >= OrderDate),
                
                -- Business rule: Large orders require approval
                RequiresApproval BOOLEAN GENERATED ALWAYS AS (TotalAmount > 10000) STORED
            );

            -- These fail (user-defined constraints):
            INSERT INTO Orders VALUES 
            (1, 101, '2024-01-15', '2024-01-10', 500.00, 5.00, FALSE);
            -- ‚ùå ERROR: ShipDate cannot be before OrderDate

            INSERT INTO Orders VALUES 
            (2, 102, '2024-01-15', '2024-01-20', 750.00, 150.00, FALSE);
            -- ‚ùå ERROR: Discount cannot exceed 100%

            -- This works:
            INSERT INTO Orders VALUES 
            (3, 103, '2024-01-15', '2024-01-18', 12000.00, 10.00, FALSE);
            -- ‚úì Success! RequiresApproval automatically set to TRUE (> 10000)

            -- -----------------------------------------------------------
            -- 5. UNIQUE Constraints (No Duplicates)
            -- -----------------------------------------------------------
            CREATE TABLE Users (
                UserID INT PRIMARY KEY,
                Username VARCHAR(50) UNIQUE NOT NULL,
                Email VARCHAR(100) UNIQUE NOT NULL,
                Phone VARCHAR(15)
            );

            -- This fails:
            INSERT INTO Users VALUES (1, 'john_doe', 'john@co.com', '555-1234');
            INSERT INTO Users VALUES (2, 'john_doe', 'jane@co.com', '555-5678');
            -- ‚ùå ERROR: Duplicate username

            INSERT INTO Users VALUES (2, 'jane_doe', 'john@co.com', '555-5678');
            -- ‚ùå ERROR: Duplicate email

            -- -----------------------------------------------------------
            -- 6. Table-Level Constraints (Multiple Columns)
            -- -----------------------------------------------------------
            CREATE TABLE Enrollments (
                StudentID INT,
                CourseID INT,
                Semester VARCHAR(20),
                Grade CHAR(2),
                
                PRIMARY KEY (StudentID, CourseID, Semester),  -- Composite PK
                
                -- Business rule: Grade must be valid
                CHECK (Grade IN ('A', 'A-', 'B+', 'B', 'B-', 'C+', 'C', 'C-', 'D', 'F')),
                
                -- Business rule: Cannot enroll in same course twice in same semester
                UNIQUE (StudentID, CourseID, Semester)
            );

            -- This fails:
            INSERT INTO Enrollments VALUES (1001, 201, '2024-Spring', 'Z');
            -- ‚ùå ERROR: Invalid grade

            INSERT INTO Enrollments VALUES (1001, 201, '2024-Spring', 'A');
            INSERT INTO Enrollments VALUES (1001, 201, '2024-Spring', 'B');
            -- ‚ùå ERROR: Student already enrolled in this course this semester</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Database vs Application-Level Integrity
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Database-Level (Codd's Rule 10) ‚úì</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Application-Level ‚ùå</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Location</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Database schema</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Application code</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Enforcement</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Automatic by DBMS</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Manual in each app</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Consistency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">All apps follow same rules</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">May vary across apps</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Bypass Risk</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cannot be bypassed</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Can be bypassed (bugs, direct access)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Maintenance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Change once in DB</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Change in all apps</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Performance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Optimized by DBMS</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Varies by implementation</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Reliability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Highly reliable</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Depends on code quality</td>
                        </tr>
                    </table>
                    
                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- BAD: Application-level validation only ‚ùå
            // Application code (Python)
            def add_employee(emp_id, name, salary):
                if salary <= 0:  # Validation in app
                    raise ValueError("Salary must be positive")
                db.execute("INSERT INTO Employees VALUES (?, ?, ?)", 
                        (emp_id, name, salary))

            // Problem: Different apps may have different validation logic
            // Problem: Direct SQL access bypasses validation
            // Problem: Bugs in app code can allow invalid data

            -- GOOD: Database-level constraint ‚úì
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100) NOT NULL,
                Salary DECIMAL(10,2) CHECK (Salary > 0)  -- Enforced by DBMS
            );

            // Application code (simpler, validation guaranteed)
            def add_employee(emp_id, name, salary):
                db.execute("INSERT INTO Employees VALUES (?, ?, ?)", 
                        (emp_id, name, salary))
                # Database automatically validates salary > 0
                # Any violation raises database error</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-cogs"></i>
                        Advanced Integrity Constraints
                    </div>
                    <div class="example-box">
                        <pre><code>-- Complex CHECK constraints
            CREATE TABLE Accounts (
                AccountID INT PRIMARY KEY,
                AccountType ENUM('Savings', 'Checking', 'Investment'),
                Balance DECIMAL(15,2),
                InterestRate DECIMAL(5,2),
                MinBalance DECIMAL(15,2),
                
                -- Savings accounts must have interest
                CHECK (AccountType != 'Savings' OR InterestRate IS NOT NULL),
                
                -- Investment accounts must have minimum balance
                CHECK (AccountType != 'Investment' OR MinBalance >= 10000),
                
                -- Balance must meet minimum
                CHECK (Balance >= COALESCE(MinBalance, 0))
            );

            -- Triggers for complex business rules
            DELIMITER //
            CREATE TRIGGER validate_transaction
            BEFORE INSERT ON Transactions
            FOR EACH ROW
            BEGIN
                DECLARE account_balance DECIMAL(15,2);
                
                -- Get current balance
                SELECT Balance INTO account_balance 
                FROM Accounts 
                WHERE AccountID = NEW.AccountID;
                
                -- Check sufficient funds for withdrawal
                IF NEW.TransactionType = 'Withdrawal' AND 
                NEW.Amount > account_balance THEN
                    SIGNAL SQLSTATE '45000' 
                    SET MESSAGE_TEXT = 'Insufficient funds';
                END IF;
                
                -- Check daily withdrawal limit
                IF NEW.TransactionType = 'Withdrawal' THEN
                    DECLARE daily_total DECIMAL(15,2);
                    
                    SELECT COALESCE(SUM(Amount), 0) INTO daily_total
                    FROM Transactions
                    WHERE AccountID = NEW.AccountID
                    AND TransactionType = 'Withdrawal'
                    AND DATE(TransactionDate) = CURDATE();
                    
                    IF daily_total + NEW.Amount > 5000 THEN
                        SIGNAL SQLSTATE '45000' 
                        SET MESSAGE_TEXT = 'Daily withdrawal limit exceeded';
                    END IF;
                END IF;
            END //
            DELIMITER ;

            -- Assertions (not widely supported, but part of SQL standard)
            -- CREATE ASSERTION positive_balance
            -- CHECK (NOT EXISTS (
            --     SELECT * FROM Accounts WHERE Balance < 0
            -- ));</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why is database-level integrity better than application-level?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <ol>
                                    <li><strong>Single Source of Truth:</strong>
                                        <ul>
                                            <li>Rules defined once in database</li>
                                            <li>All applications automatically follow same rules</li>
                                            <li>No inconsistency between apps</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Cannot Be Bypassed:</strong>
                                        <ul>
                                            <li>Direct SQL access still enforces rules</li>
                                            <li>Database admin tools enforce rules</li>
                                            <li>No way to "accidentally" violate constraints</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Easier Maintenance:</strong>
                                        <ul>
                                            <li>Change rule once in database</li>
                                            <li>No need to update multiple applications</li>
                                            <li>Reduced risk of missing an app</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Performance Optimized:</strong>
                                        <ul>
                                            <li>DBMS optimizes constraint checking</li>
                                            <li>Uses indexes for FK validation</li>
                                            <li>More efficient than app-level checks</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Data Protection:</strong>
                                        <ul>
                                            <li>Even buggy apps can't corrupt data</li>
                                            <li>Protects against programming errors</li>
                                            <li>Safety net for data integrity</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens when a constraint is violated?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>When a constraint is violated, the DBMS:</strong></p>
                                
                                <ol>
                                    <li><strong>Rejects the Operation:</strong>
                                        <ul>
                                            <li>INSERT, UPDATE, or DELETE is rolled back</li>
                                            <li>No partial changes applied</li>
                                            <li>Database remains in consistent state</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Returns Error:</strong>
                                        <ul>
                                            <li>Error code indicating which constraint failed</li>
                                            <li>Error message describing the violation</li>
                                            <li>Application can catch and handle error</li>
                                        </ul>
                                    </li>
                                </ol>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Try to insert invalid data
            INSERT INTO Products VALUES (1, 'Laptop', -500, 10);

            -- Result:
            -- ERROR 3819 (HY000): Check constraint 'products_chk_1' is violated.

            -- In application code:
            try:
                cursor.execute("INSERT INTO Products VALUES (?, ?, ?, ?)", 
                            (1, 'Laptop', -500, 10))
            except IntegrityError as e:
                print(f"Constraint violation: {e}")
                # Handle error appropriately
                # Maybe show user-friendly message</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>In Transactions:</strong></p>
                                <ul>
                                    <li>Constraint violation causes statement to fail</li>
                                    <li>Transaction can continue or rollback</li>
                                    <li>Ensures ACID properties maintained</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you temporarily disable constraints?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, but should be done VERY carefully!</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Disable foreign key checks (MySQL)
            SET FOREIGN_KEY_CHECKS = 0;

            -- Perform operations that might violate constraints
            -- (e.g., bulk data load, table reorganization)
            TRUNCATE TABLE Employees;
            LOAD DATA INFILE 'employees.csv' INTO TABLE Employees;

            -- Re-enable checks
            SET FOREIGN_KEY_CHECKS = 1;

            -- Disable all constraints (SQL Server)
            ALTER TABLE Employees NOCHECK CONSTRAINT ALL;

            -- Re-enable
            ALTER TABLE Employees CHECK CONSTRAINT ALL;</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>When to disable constraints:</strong></p>
                                <ul>
                                    <li>‚úì Bulk data loading from trusted source</li>
                                    <li>‚úì Database migration/reorganization</li>
                                    <li>‚úì Performance-critical batch operations</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Risks:</strong></p>
                                <ul>
                                    <li>‚ùå Can introduce invalid data</li>
                                    <li>‚ùå Can corrupt database integrity</li>
                                    <li>‚ùå Hard to fix after the fact</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong></p>
                                <ul>
                                    <li>Only disable when absolutely necessary</li>
                                    <li>Always re-enable immediately after</li>
                                    <li>Validate data after re-enabling</li>
                                    <li>Use within transaction if possible</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Integrity Independence</span>
                        <span class="keyword-tag">Codd's Rule 10</span>
                        <span class="keyword-tag">Constraints</span>
                        <span class="keyword-tag">Entity Integrity</span>
                        <span class="keyword-tag">Referential Integrity</span>
                        <span class="keyword-tag">Domain Integrity</span>
                        <span class="keyword-tag">CHECK Constraints</span>
                        <span class="keyword-tag">Foreign Keys</span>
                        <span class="keyword-tag">Business Rules</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 45: What is Rule 11 - Distribution Independence? -->
            <div class="question-content" id="q45">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 11: Distribution Independence?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 11: Distribution Independence</strong> states that users and application programs should NOT be aware of whether the database is distributed across multiple physical locations. The system should work the same whether data is centralized or distributed.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Principle:</strong></p>
                        <p>Data distribution (where data physically resides) should be transparent to users and applications. Queries should work identically whether data is on one server or spread across multiple servers.</p>
                        
                        <p style="margin-top: 1rem;"><strong>What is a Distributed Database?</strong></p>
                        <ul>
                            <li>Data stored across multiple physical locations</li>
                            <li>Connected via network</li>
                            <li>Appears as single logical database to users</li>
                            <li>Can be geographically distributed</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Types of Distribution:</strong></p>
                        <ul>
                            <li><strong>Fragmentation:</strong> Data split horizontally/vertically across nodes</li>
                            <li><strong>Replication:</strong> Same data copied to multiple locations</li>
                            <li><strong>Hybrid:</strong> Combination of fragmentation and replication</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why This Matters:</strong></p>
                        <ul>
                            <li><strong>Scalability:</strong> Can distribute load across servers</li>
                            <li><strong>Performance:</strong> Data closer to users</li>
                            <li><strong>Availability:</strong> Redundancy for fault tolerance</li>
                            <li><strong>Flexibility:</strong> Can redistribute without changing apps</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Distribution Independence Visualization
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 550" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Distribution Independence</text>
                            
                            <!-- Application Layer -->
                            <rect x="250" y="60" width="300" height="60" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            <text x="400" y="90" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">Application / User</text>
                            <text x="400" y="110" font-size="11" fill="#333" text-anchor="middle">SELECT * FROM Customers WHERE City = 'NYC'</text>
                            
                            <!-- Distribution Layer (Transparent) -->
                            <rect x="200" y="150" width="400" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                            <text x="400" y="175" font-size="12" font-weight="bold" fill="#92400e" text-anchor="middle">Distribution Layer (Transparent to User)</text>
                            
                            <!-- Arrow -->
                            <path d="M 400 190 L 400 220" stroke="#0284c7" stroke-width="3" marker-end="url(#arrow26)"/>
                            
                            <!-- Distributed Data -->
                            <rect x="50" y="230" width="700" height="290" fill="#f0f9ff" stroke="#0284c7" stroke-width="2" rx="5"/>
                            <text x="400" y="260" font-size="14" font-weight="bold" fill="#0c4a6e" text-anchor="middle">Distributed Database (3 Geographic Locations)</text>
                            
                            <!-- Server 1: US East -->
                            <rect x="80" y="280" width="200" height="210" fill="#d1fae5" stroke="#10b981" stroke-width="2" rx="5"/>
                            <text x="180" y="310" font-size="13" font-weight="bold" fill="#065f46" text-anchor="middle">Server 1: US East</text>
                            <text x="90" y="335" font-size="11" fill="#333">Customers (ID 1-10000)</text>
                            <text x="90" y="355" font-size="10" fill="#333">‚Ä¢ NYC customers</text>
                            <text x="90" y="375" font-size="10" fill="#333">‚Ä¢ Boston customers</text>
                            
                            <rect x="90" y="400" width="180" height="70" fill="white" stroke="#10b981" stroke-width="1" rx="3"/>
                            <text x="180" y="420" font-size="10" fill="#333" text-anchor="middle">Customers Table</text>
                            <text x="100" y="440" font-size="9" fill="#666">ID: 1-10000</text>
                            <text x="100" y="455" font-size="9" fill="#666">City: NYC, Boston</text>
                            
                            <!-- Server 2: US West -->
                            <rect x="300" y="280" width="200" height="210" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            <text x="400" y="310" font-size="13" font-weight="bold" fill="#1e40af" text-anchor="middle">Server 2: US West</text>
                            <text x="310" y="335" font-size="11" fill="#333">Customers (ID 10001-20000)</text>
                            <text x="310" y="355" font-size="10" fill="#333">‚Ä¢ LA customers</text>
                            <text x="310" y="375" font-size="10" fill="#333">‚Ä¢ SF customers</text>
                            
                            <rect x="310" y="400" width="180" height="70" fill="white" stroke="#3b82f6" stroke-width="1" rx="3"/>
                            <text x="400" y="420" font-size="10" fill="#333" text-anchor="middle">Customers Table</text>
                            <text x="320" y="440" font-size="9" fill="#666">ID: 10001-20000</text>
                            <text x="320" y="455" font-size="9" fill="#666">City: LA, SF</text>
                            
                            <!-- Server 3: Europe -->
                            <rect x="520" y="280" width="200" height="210" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                            <text x="620" y="310" font-size="13" font-weight="bold" fill="#92400e" text-anchor="middle">Server 3: Europe</text>
                            <text x="530" y="335" font-size="11" fill="#333">Customers (ID 20001-30000)</text>
                            <text x="530" y="355" font-size="10" fill="#333">‚Ä¢ London customers</text>
                            <text x="530" y="375" font-size="10" fill="#333">‚Ä¢ Paris customers</text>
                            
                            <rect x="530" y="400" width="180" height="70" fill="white" stroke="#f59e0b" stroke-width="1" rx="3"/>
                            <text x="620" y="420" font-size="10" fill="#333" text-anchor="middle">Customers Table</text>
                            <text x="540" y="440" font-size="9" fill="#666">ID: 20001-30000</text>
                            <text x="540" y="455" font-size="9" fill="#666">City: London, Paris</text>
                            
                            <!-- Key Point -->
                            <rect x="150" y="535" width="500" height="10" fill="#d1fae5" stroke="#10b981" stroke-width="1" rx="3"/>
                            <text x="400" y="545" font-size="11" font-weight="bold" fill="#065f46" text-anchor="middle">User sees ONE logical database, unaware of distribution!</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow26" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#0284c7"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Distribution Independence Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- User's Query (same regardless of distribution)
            SELECT CustomerID, CustomerName, City, TotalOrders
            FROM Customers
            WHERE City = 'NYC'
            ORDER BY TotalOrders DESC
            LIMIT 10;

            -- -----------------------------------------------------------
            -- Behind the Scenes (Transparent to User)
            -- -----------------------------------------------------------

            -- Scenario 1: Centralized Database (All data on one server)
            -- Database executes query on single server
            -- Returns results directly

            -- Scenario 2: Horizontally Partitioned (By City)
            -- Server 1 (US East): NYC, Boston customers
            -- Server 2 (US West): LA, SF customers
            -- Server 3 (Europe): London, Paris customers

            -- Query execution:
            -- 1. Query optimizer determines NYC customers on Server 1
            -- 2. Sends query only to Server 1
            -- 3. Server 1 returns results
            -- 4. No need to query other servers

            -- Scenario 3: Replicated (Same data on all servers)
            -- All servers have complete copy of Customers table
            -- Query optimizer chooses nearest/least-loaded server
            -- Executes query on chosen server
            -- Returns results

            -- Scenario 4: Hybrid (Partitioned + Replicated)
            -- Primary data partitioned by region
            -- Replicated to local servers for performance
            -- Query router sends to appropriate partition
            -- Falls back to replicas if primary unavailable

            -- USER SEES SAME RESULT IN ALL SCENARIOS! ‚úì

            -- -----------------------------------------------------------
            -- Example: Multi-Site Query (Requires Joining Distributed Data)
            -- -----------------------------------------------------------

            -- Query spans multiple sites
            SELECT 
                c.CustomerName,
                o.OrderID,
                o.TotalAmount
            FROM Customers c
            JOIN Orders o ON c.CustomerID = o.CustomerID
            WHERE o.OrderDate > '2024-01-01';

            -- Behind the scenes:
            -- Customers table on Server 1 (US East)
            -- Orders table on Server 2 (US West)

            -- Distributed query execution:
            -- 1. Query optimizer creates distributed execution plan
            -- 2. Server 1: SELECT CustomerID, CustomerName FROM Customers
            -- 3. Server 2: SELECT OrderID, CustomerID, TotalAmount FROM Orders WHERE ...
            -- 4. Results transferred over network
            -- 5. JOIN performed at coordinator node
            -- 6. Final result returned to user

            -- User unaware of distribution complexity! ‚úì

            -- -----------------------------------------------------------
            -- Example: Transparent Failover
            -- -----------------------------------------------------------

            -- Query during normal operation
            SELECT * FROM Products WHERE Category = 'Electronics';
            -- Executes on primary server

            -- Primary server fails
            -- Same query now executes on replica server (automatically)
            SELECT * FROM Products WHERE Category = 'Electronics';
            -- Returns same results from replica
            -- User experiences brief delay but no error ‚úì

            -- -----------------------------------------------------------
            -- Example: Load Balancing
            -- -----------------------------------------------------------

            -- Query 1 from User A
            SELECT * FROM Customers WHERE State = 'CA';
            -- Routes to Server 1 (least loaded)

            -- Query 2 from User B (simultaneous)
            SELECT * FROM Customers WHERE State = 'NY';
            -- Routes to Server 2 (least loaded)

            -- Both users get fast response
            -- Distribution system balances load automatically ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Challenges in Achieving Distribution Independence
                    </div>
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Distributed Transactions:</strong>
                                <ul>
                                    <li>ACID properties across multiple servers</li>
                                    <li>Two-phase commit protocol overhead</li>
                                    <li>Network latency affects performance</li>
                                    <li>Partial failures complicate recovery</li>
                                </ul>
                            </li>
                            
                            <li><strong>CAP Theorem Constraints:</strong>
                                <ul>
                                    <li>Cannot have Consistency + Availability + Partition Tolerance all at once</li>
                                    <li>Must trade off between properties</li>
                                    <li>Different consistency levels (eventual vs strong)</li>
                                </ul>
                            </li>
                            
                            <li><strong>Query Performance:</strong>
                                <ul>
                                    <li>Cross-site joins are expensive</li>
                                    <li>Network latency adds overhead</li>
                                    <li>Data transfer costs</li>
                                    <li>Complex query optimization needed</li>
                                </ul>
                            </li>
                            
                            <li><strong>Data Consistency:</strong>
                                <ul>
                                    <li>Keeping replicas synchronized</li>
                                    <li>Handling concurrent updates</li>
                                    <li>Conflict resolution strategies</li>
                                    <li>Replication lag issues</li>
                                </ul>
                            </li>
                            
                            <li><strong>Administrative Complexity:</strong>
                                <ul>
                                    <li>Managing multiple servers</li>
                                    <li>Monitoring distributed system</li>
                                    <li>Backup and recovery more complex</li>
                                    <li>Security across sites</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Distribution Independence vs CAP Theorem
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Relationship Between Rule 11 and CAP Theorem:</strong></p>
                        
                        <p style="margin-top: 1rem;"><strong>Codd's Rule 11 (Distribution Independence):</strong></p>
                        <ul>
                            <li>Assumes strong consistency across distributed nodes</li>
                            <li>Distribution should be transparent (no tradeoffs visible to user)</li>
                            <li>System behaves as if centralized</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>CAP Theorem Reality:</strong></p>
                        <ul>
                            <li><strong>C (Consistency):</strong> All nodes see same data at same time</li>
                            <li><strong>A (Availability):</strong> Every request gets response</li>
                            <li><strong>P (Partition Tolerance):</strong> System works despite network failures</li>
                            <li><strong>Limitation:</strong> Can only achieve 2 out of 3</li>
                        </ul>
                        
                        <div class="scenario-box" style="margin-top: 1rem;">
                            <h4>The Conflict:</h4>
                            <p><strong>Rule 11</strong> assumes perfect distribution independence (user sees no difference), which implies:</p>
                            <ul>
                                <li>Strong consistency (C)</li>
                                <li>Always available (A)</li>
                                <li>Works during partitions (P)</li>
                            </ul>
                            
                            <p style="margin-top: 1rem;"><strong>CAP Theorem</strong> says this is impossible! In distributed systems:</p>
                            <ul>
                                <li><strong>CA Systems:</strong> Consistent + Available, but not partition tolerant (single-site databases)</li>
                                <li><strong>CP Systems:</strong> Consistent + Partition tolerant, but not always available (traditional RDBMS clusters)</li>
                                <li><strong>AP Systems:</strong> Available + Partition tolerant, but eventually consistent (NoSQL databases)</li>
                            </ul>
                            
                            <p style="margin-top: 1rem;"><strong>Conclusion:</strong></p>
                            <p>Complete distribution independence (as Codd envisioned) is theoretically impossible in true distributed systems. Modern distributed databases make tradeoffs explicit:</p>
                            <ul>
                                <li>Eventual consistency models (BASE)</li>
                                <li>Configurable consistency levels</li>
                                <li>Different guarantees for different operations</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Do modern databases achieve full distribution independence?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No, complete distribution independence is extremely difficult to achieve.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Traditional RDBMS (MySQL, PostgreSQL with replication):</strong></p>
                                <ul>
                                    <li>‚úì Basic replication for read scaling</li>
                                    <li>‚úì Failover capabilities</li>
                                    <li>‚ùå Limited support for distributed writes</li>
                                    <li>‚ùå Manual shard management if needed</li>
                                    <li>‚ùå Applications often need to know about replicas</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Distributed SQL (CockroachDB, Google Spanner):</strong></p>
                                <ul>
                                    <li>‚úì Better distribution transparency</li>
                                    <li>‚úì Automatic sharding</li>
                                    <li>‚úì Strong consistency across nodes</li>
                                    <li>‚ö† Performance tradeoffs visible to users</li>
                                    <li>‚ö† Latency depends on geography</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>NoSQL Databases (Cassandra, MongoDB):</strong></p>
                                <ul>
                                    <li>‚úì Excellent horizontal scaling</li>
                                    <li>‚úì Geographic distribution</li>
                                    <li>‚ùå Eventual consistency (not transparent)</li>
                                    <li>‚ùå Different query model than SQL</li>
                                    <li>‚ùå Applications must handle consistency issues</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Reality:</strong> Most systems require applications to make tradeoffs visible:</p>
                                <ul>
                                    <li>Choose consistency level per query</li>
                                    <li>Handle replication lag</li>
                                    <li>Retry failed operations</li>
                                    <li>Design around eventual consistency</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does distribution affect ACID properties?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Distribution makes ACID much harder to maintain:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Property</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Single Server</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Distributed System</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Atomicity</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Easy (single commit)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Hard (2-phase commit needed)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Consistency</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Immediate</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Delayed (replication lag)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Isolation</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Standard isolation levels</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Complex (distributed locking)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Durability</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Write to one disk</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Must write to multiple nodes</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Two-Phase Commit (2PC):</strong></p>
                                <ul>
                                    <li>Ensures atomicity across distributed nodes</li>
                                    <li>All nodes must agree to commit</li>
                                    <li>High latency (multiple network round-trips)</li>
                                    <li>Blocks if coordinator fails</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Alternative: BASE Properties:</strong></p>
                                <ul>
                                    <li><strong>B</strong>asically <strong>A</strong>vailable</li>
                                    <li><strong>S</strong>oft state</li>
                                    <li><strong>E</strong>ventual consistency</li>
                                    <li>Relaxes ACID for better scalability</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does Rule 11 relate to data independence (Rules 8 & 9)?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>All three rules aim for transparency and independence:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Rule</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Independence From</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Examples</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 8: Physical</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Storage details</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Indexes, file org, compression</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 9: Logical</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Schema structure</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Table splits, columns, datatypes</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 11: Distribution</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Data location</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Sharding, replication, geography</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Together they provide:</strong></p>
                                <ul>
                                    <li>Complete abstraction from implementation details</li>
                                    <li>Applications work with logical data model only</li>
                                    <li>System can evolve without breaking apps</li>
                                    <li>Scalability and flexibility</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Difficulty Ranking:</strong></p>
                                <ol>
                                    <li>Physical Independence (Easiest) ‚úì</li>
                                    <li>Distribution Independence (Medium) ‚ö†</li>
                                    <li>Logical Independence (Hardest) ‚ùå</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Distribution Independence</span>
                        <span class="keyword-tag">Codd's Rule 11</span>
                        <span class="keyword-tag">Distributed Database</span>
                        <span class="keyword-tag">Location Transparency</span>
                        <span class="keyword-tag">Data Fragmentation</span>
                        <span class="keyword-tag">Data Replication</span>
                        <span class="keyword-tag">CAP Theorem</span>
                        <span class="keyword-tag">Two-Phase Commit</span>
                        <span class="keyword-tag">Geographic Distribution</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 46: What is Rule 12 - Non-subversion Rule? -->
            <div class="question-content" id="q46">
                <div class="question-header">
                    <h1 class="question-title">What is Codd's Rule 12: Non-subversion Rule?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 7 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Rule 12: Non-subversion Rule</strong> states that if a database system provides a low-level (record-at-a-time) interface, that interface must NOT be able to bypass the integrity constraints and business rules defined in the higher-level (relational) language.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Principle:</strong></p>
                        <p>No backdoor access to data that bypasses security, integrity constraints, or relational rules. Even if low-level APIs exist, they must still enforce all database rules.</p>
                        
                        <p style="margin-top: 1rem;"><strong>What This Means:</strong></p>
                        <ul>
                            <li>Cannot bypass integrity constraints through any interface</li>
                            <li>All access paths must enforce database rules</li>
                            <li>No "direct file access" that skips validation</li>
                            <li>Prevents corruption through alternative interfaces</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why This Rule Exists:</strong></p>
                        <ul>
                            <li><strong>Data Integrity:</strong> Prevent corruption through backdoors</li>
                            <li><strong>Security:</strong> All access must go through security checks</li>
                            <li><strong>Consistency:</strong> Constraints enforced universally</li>
                            <li><strong>Reliability:</strong> No way to accidentally break rules</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Violations of the Non-subversion Rule
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Bad Example 1: Direct File Access</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Database has constraint:
            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Salary DECIMAL(10,2) CHECK (Salary > 0)  -- Must be positive
            );

            -- ‚ùå VIOLATION: Directly edit database files
            -- Some systems allow direct file manipulation
            -- Edit /data/employees.ibd binary file
            -- Insert record with Salary = -5000
            -- Bypasses CHECK constraint! ‚ùå

            -- This violates Rule 12:
            -- Low-level file access subverted integrity constraint</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Bad Example 2: Proprietary Low-Level API</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Database has foreign key:
            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                CustomerID INT,
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
            );

            -- ‚ùå VIOLATION: System provides low-level API
            -- That bypasses relational constraints
            db.directInsert("Orders", {
                "OrderID": 1,
                "CustomerID": 999  // Customer 999 doesn't exist
            });
            -- If this succeeds, Rule 12 is violated! ‚ùå
            -- Low-level API subverted referential integrity</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Bad Example 3: Admin Tools Bypassing Rules</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Database has NOT NULL constraint:
            CREATE TABLE Products (
                ProductID INT PRIMARY KEY,
                ProductName VARCHAR(100) NOT NULL
            );

            -- ‚ùå VIOLATION: Admin mode allows NULL insertion
            -- Special "maintenance mode" bypasses constraints
            INSERT INTO Products VALUES (1, NULL);  -- Admin mode allows this
            -- Violates Rule 12! ‚ùå
            -- Even admin tools must enforce constraints</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        Correct Implementation (Following Rule 12)
                    </div>
                    <div class="example-box">
                        <pre><code>-- ‚úì CORRECT: All interfaces enforce constraints

            -- High-level SQL interface
            INSERT INTO Employees VALUES (1, 'John', -5000);
            -- ‚ùå ERROR: Check constraint violated

            -- Low-level C API
            MYSQL_BIND bind[3];
            // ... setup bind parameters ...
            mysql_stmt_bind_param(stmt, bind);
            mysql_stmt_execute(stmt);  // Inserts with Salary = -5000
            -- ‚ùå ERROR: Check constraint violated (Same error!)

            -- Direct admin tools
            mysqlcheck --check-only employees;
            -- Reports constraint violations, cannot bypass

            -- Bulk load interface
            LOAD DATA INFILE 'employees.csv' INTO TABLE Employees;
            -- ‚ùå Rows with negative salary rejected
            -- Constraint still enforced!

            -- ‚úì All interfaces enforce same rules
            -- No way to bypass constraints
            -- Rule 12 satisfied!

            -- -----------------------------------------------------------
            -- Even Maintenance Operations Follow Rules
            -- -----------------------------------------------------------

            -- Backup/Restore preserves constraints
            mysqldump employees > backup.sql
            mysql < backup.sql
            -- Constraints recreated automatically ‚úì

            -- Table repair operations
            REPAIR TABLE Employees;
            -- Validates constraints during repair ‚úì

            -- Index rebuilding
            ALTER TABLE Employees ADD INDEX idx_name (Name);
            -- Cannot create index that violates constraints ‚úì

            -- -----------------------------------------------------------
            -- Proper Way to Handle Special Cases
            -- -----------------------------------------------------------

            -- If you REALLY need to bypass constraints temporarily:
            -- 1. Must be explicit
            -- 2. Must be temporary
            -- 3. Must document reason
            -- 4. Must validate afterward

            SET FOREIGN_KEY_CHECKS = 0;  -- Explicit disabling
            -- ... perform maintenance ...
            SET FOREIGN_KEY_CHECKS = 1;  -- Re-enable

            -- Validate data integrity afterward
            SELECT * FROM Orders o
            WHERE NOT EXISTS (
                SELECT 1 FROM Customers c WHERE c.CustomerID = o.CustomerID
            );
            -- Check for orphaned records ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        How Modern RDBMS Implement Rule 12
                    </div>
                    
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Single Enforcement Layer:</strong>
                                <ul>
                                    <li>All interfaces route through same validation engine</li>
                                    <li>Constraints checked at storage engine level</li>
                                    <li>No API can bypass this layer</li>
                                </ul>
                            </li>
                            
                            <li><strong>File-Level Protection:</strong>
                                <ul>
                                    <li>Database files in proprietary format</li>
                                    <li>Cannot be edited directly with text editors</li>
                                    <li>Checksums detect corruption</li>
                                    <li>Must use DBMS to access data</li>
                                </ul>
                            </li>
                            
                            <li><strong>API Consistency:</strong>
                                <ul>
                                    <li>All APIs (SQL, ODBC, JDBC, native) enforce constraints</li>
                                    <li>No "special" API that bypasses rules</li>
                                    <li>Admin tools use same validation</li>
                                </ul>
                            </li>
                            
                            <li><strong>Transaction System:</strong>
                                <ul>
                                    <li>All modifications go through transaction manager</li>
                                    <li>Constraints validated before commit</li>
                                    <li>Rollback on violation</li>
                                </ul>
                            </li>
                            
                            <li><strong>Audit and Logging:</strong>
                                <ul>
                                    <li>All constraint violations logged</li>
                                    <li>Cannot silently bypass rules</li>
                                    <li>Tracks attempts to violate constraints</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why did Codd include this rule?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Historical Context:</strong> In the 1970s-80s, many database systems provided both:</p>
                                <ul>
                                    <li>High-level relational interface (SQL)</li>
                                    <li>Low-level navigational interface (for "performance")</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>The Problem:</strong></p>
                                <ul>
                                    <li>Low-level interfaces often bypassed integrity rules</li>
                                    <li>Programmers could corrupt data using low-level API</li>
                                    <li>Defeated the purpose of having constraints</li>
                                    <li>Made data integrity unreliable</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Codd's Point:</strong></p>
                                <ul>
                                    <li>If a system claims to be relational, ALL interfaces must be relational</li>
                                    <li>Cannot have a "backdoor" that breaks relational rules</li>
                                    <li>Integrity must be guaranteed, not optional</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Historical Example: Hierarchical databases
            -- High-level: "Safe" SQL-like interface
            -- Low-level: Direct pointer-based navigation
            --            Could bypass constraints for "speed"
            --            Codd said: This is not truly relational! ‚ùå</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can DBAs ever bypass constraints?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>In most systems: Yes, but with explicit action and risk.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>When DBA Bypass is Allowed:</strong></p>
                                <ul>
                                    <li>Data migration from legacy systems</li>
                                    <li>Emergency recovery operations</li>
                                    <li>Database reorganization</li>
                                    <li>Performance-critical bulk operations</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>How it Works (MySQL Example):</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Explicitly disable constraints
            SET FOREIGN_KEY_CHECKS = 0;
            SET UNIQUE_CHECKS = 0;

            -- Perform operation
            LOAD DATA INFILE 'large_dataset.csv' INTO TABLE Orders;

            -- Re-enable constraints
            SET FOREIGN_KEY_CHECKS = 1;
            SET UNIQUE_CHECKS = 1;

            -- MUST validate data afterward!
            -- Check for orphaned foreign keys
            SELECT COUNT(*) FROM Orders o
            WHERE NOT EXISTS (
                SELECT 1 FROM Customers c 
                WHERE c.CustomerID = o.CustomerID
            );
            -- If count > 0: Data is corrupt! Must fix!</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Important Notes:</strong></p>
                                <ul>
                                    <li>‚úì Disabling is explicit (not a backdoor)</li>
                                    <li>‚úì Temporary for specific operation</li>
                                    <li>‚úì DBA takes responsibility</li>
                                    <li>‚ùå Not a violation of Rule 12 because it's intentional, documented, and validated</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What about database corruption from hardware failure?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Hardware corruption is NOT a violation of Rule 12.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Why?</strong></p>
                                <ul>
                                    <li>Hardware failure is external to the DBMS</li>
                                    <li>Not an "interface" that bypasses rules</li>
                                    <li>Cannot be prevented by software alone</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>How RDBMS Handle Corruption:</strong></p>
                                <ol>
                                    <li><strong>Detection:</strong>
                                        <ul>
                                            <li>Checksums on data pages</li>
                                            <li>Regular integrity checks</li>
                                            <li>Transaction log validation</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Prevention:</strong>
                                        <ul>
                                            <li>Write-ahead logging</li>
                                            <li>Atomic writes</li>
                                            <li>Redundancy (RAID, replication)</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Recovery:</strong>
                                        <ul>
                                            <li>Restore from backup</li>
                                            <li>Replay transaction logs</li>
                                            <li>Repair corrupted pages</li>
                                        </ul>
                                    </li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Key Difference:</strong></p>
                                <ul>
                                    <li>Rule 12: No SOFTWARE interface can bypass constraints</li>
                                    <li>Hardware failure: External physical problem</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Non-subversion Rule</span>
                        <span class="keyword-tag">Codd's Rule 12</span>
                        <span class="keyword-tag">No Backdoors</span>
                        <span class="keyword-tag">Integrity Enforcement</span>
                        <span class="keyword-tag">All Interfaces</span>
                        <span class="keyword-tag">Universal Validation</span>
                        <span class="keyword-tag">Low-Level APIs</span>
                        <span class="keyword-tag">Data Protection</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 47: Why are Codd's Rules still relevant today? -->
            <div class="question-content" id="q47">
                <div class="question-header">
                    <h1 class="question-title">Why are Codd's 12 Rules Still Relevant Today?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Conceptual</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p>Codd's 12 Rules, published in 1985, remain highly relevant today because they define the fundamental principles that make relational databases powerful, reliable, and maintainable. While technology has evolved, the core principles still guide modern database design.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Reasons for Continued Relevance:</strong></p>
                        <ul>
                            <li><strong>Timeless Principles:</strong> Address fundamental data management challenges</li>
                            <li><strong>Data Integrity:</strong> More important than ever with critical applications</li>
                            <li><strong>Standard Benchmark:</strong> Still used to evaluate RDBMS quality</li>
                            <li><strong>Design Guidelines:</strong> Help architects make sound decisions</li>
                            <li><strong>Educational Value:</strong> Teach proper database concepts</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-double"></i>
                        Why Each Rule Remains Important Today
                    </div>
                    
                    <div class="explanation-text">
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <tr style="background: #dbeafe;">
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6; text-align: left;">Rule</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6; text-align: left;">Modern Relevance</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 0: Foundation</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Defines what "relational" means; prevents vendor marketing hype</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 1: Information</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Tables remain the best way to organize structured data</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 2: Guaranteed Access</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Primary keys critical for data integrity and APIs (REST, GraphQL)</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 3: NULL Handling</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Missing data still common; proper NULL handling prevents bugs</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 4: Active Catalog</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Metadata-driven apps, code generation, DevOps automation rely on this</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 5: Data Sub-language</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SQL universally used; declarative queries still best for complex operations</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 6: View Updating</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Views provide security, abstraction layers for microservices</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 7: Set Operations</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Performance crucial; set-based ops far faster than row-by-row</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 8: Physical Independence</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cloud migration, storage optimization without app changes</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 9: Logical Independence</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Agile development, continuous schema evolution essential</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 10: Integrity Independence</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Data quality, compliance, preventing corruption in microservices</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 11: Distribution</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cloud, multi-region, global apps require transparent distribution</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 12: Non-subversion</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Security, data governance, audit requirements demand this</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-globe"></i>
                        Modern Applications of Codd's Principles
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Cloud Databases</h4>
                        <ul>
                            <li><strong>Physical Independence:</strong> Move between AWS, Azure, GCP without app changes</li>
                            <li><strong>Distribution Independence:</strong> Multi-region deployment transparent</li>
                            <li><strong>Integrity Independence:</strong> Constraints enforced globally</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Microservices Architecture</h4>
                        <ul>
                            <li><strong>Views:</strong> Each service has own view of shared data</li>
                            <li><strong>Logical Independence:</strong> Services evolve independently</li>
                            <li><strong>Integrity at Database:</strong> Prevents inconsistency across services</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Data Privacy & Compliance (GDPR, CCPA)</h4>
                        <ul>
                            <li><strong>Guaranteed Access:</strong> Can identify and retrieve all user data</li>
                            <li><strong>NULL Handling:</strong> Distinguish unknown from inapplicable data</li>
                            <li><strong>Integrity Constraints:</strong> Enforce privacy rules at database level</li>
                            <li><strong>Views:</strong> Hide PII from unauthorized users</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. DevOps & Automation</h4>
                        <ul>
                            <li><strong>Active Catalog:</strong> Infrastructure as code, schema versioning</li>
                            <li><strong>Set Operations:</strong> Bulk operations for deployments</li>
                            <li><strong>Physical Independence:</strong> Automated scaling without code changes</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">5. AI/ML Data Pipelines</h4>
                        <ul>
                            <li><strong>NULL Treatment:</strong> Critical for data quality in ML</li>
                            <li><strong>Set-Based Ops:</strong> Efficient batch processing</li>
                            <li><strong>Catalog:</strong> Data discovery and lineage tracking</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Codd's Rules vs Modern Realities
                    </div>
                    
                    <div class="scenario-box">
                        <h4>Where Rules Apply Fully ‚úì</h4>
                        <ul>
                            <li><strong>Traditional OLTP:</strong> Banking, e-commerce, ERP systems</li>
                            <li><strong>Data Integrity Critical:</strong> Financial, healthcare, legal systems</li>
                            <li><strong>Complex Queries:</strong> Reporting, analytics, business intelligence</li>
                            <li><strong>Multi-User Systems:</strong> Concurrency, ACID transactions essential</li>
                        </ul>
                        
                        <h4 style="margin-top: 1.5rem;">Where Rules May Be Relaxed ‚ö†</h4>
                        <ul>
                            <li><strong>NoSQL Systems:</strong> Eventual consistency, schema flexibility</li>
                            <li><strong>Big Data:</strong> CAP theorem tradeoffs, BASE properties</li>
                            <li><strong>Time-Series Data:</strong> Write-optimized, append-only</li>
                            <li><strong>Cache Layers:</strong> Redis, Memcached for performance</li>
                        </ul>
                        
                        <h4 style="margin-top: 1.5rem;">Hybrid Approach (Common Today)</h4>
                        <ul>
                            <li>‚úì Relational DB for critical transactional data (Codd's rules)</li>
                            <li>‚úì NoSQL for specific use cases (search, caching, logs)</li>
                            <li>‚úì Data warehouse for analytics (relaxed some rules for performance)</li>
                            <li>‚úì Each tool chosen for its strengths</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Lessons from Codd's Rules for Modern Development
                    </div>
                    
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Data Integrity Matters:</strong>
                                <ul>
                                    <li>Don't rely solely on application logic</li>
                                    <li>Enforce constraints at database level</li>
                                    <li>Prevents bugs, corruption, security issues</li>
                                </ul>
                            </li>
                            
                            <li><strong>Abstraction is Powerful:</strong>
                                <ul>
                                    <li>Physical/logical/distribution independence reduces coupling</li>
                                    <li>Systems can evolve without breaking</li>
                                    <li>Same principle applies to APIs, services</li>
                                </ul>
                            </li>
                            
                            <li><strong>Declarative > Procedural:</strong>
                                <ul>
                                    <li>SQL's declarative nature makes optimization possible</li>
                                    <li>Modern: React (declarative UI), Infrastructure as Code</li>
                                    <li>Specify WHAT, let system determine HOW</li>
                                </ul>
                            </li>
                            
                            <li><strong>Standards Enable Interoperability:</strong>
                                <ul>
                                    <li>SQL standard enables tool ecosystem</li>
                                    <li>Similar: HTTP, REST, JSON standards</li>
                                    <li>Don't reinvent wheels unnecessarily</li>
                                </ul>
                            </li>
                            
                            <li><strong>Consistency Over Cleverness:</strong>
                                <ul>
                                    <li>Uniform treatment (NULLs, integrity) prevents surprises</li>
                                    <li>Predictable behavior more valuable than edge-case optimization</li>
                                    <li>Applies to APIs, coding standards, architectures</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Codd's Rules Relevance</span>
                        <span class="keyword-tag">Timeless Principles</span>
                        <span class="keyword-tag">Data Integrity</span>
                        <span class="keyword-tag">Modern Applications</span>
                        <span class="keyword-tag">Cloud Databases</span>
                        <span class="keyword-tag">Microservices</span>
                        <span class="keyword-tag">Compliance</span>
                        <span class="keyword-tag">Abstraction Layers</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 48: How Do Modern RDBMS Relate to Codd's Rules? -->
            <div class="question-content" id="q48">
                <div class="question-header">
                    <h1 class="question-title">How Do Modern RDBMS Relate to Codd's 12 Rules?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 12 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>The Reality:</strong> No commercial RDBMS fully satisfies all of Codd's 12 rules. Modern databases make practical trade-offs between theoretical purity and real-world performance, usability, and features.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why This Happens:</strong></p>
                        <ul>
                            <li><strong>Performance:</strong> Some rules hurt performance (e.g., no ordering)</li>
                            <li><strong>Usability:</strong> Users demand features that violate rules (e.g., NULLs)</li>
                            <li><strong>Compatibility:</strong> SQL standard differs from Codd's ideal</li>
                            <li><strong>Market Demands:</strong> Features sell, theoretical purity doesn't</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Key Insight:</strong> Modern RDBMS are "mostly relational" - they satisfy most rules and violate some intentionally for practical reasons. This doesn't make them bad; it makes them useful.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-database"></i>
                        Modern RDBMS Scorecard
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Rule</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">PostgreSQL</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">MySQL</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Oracle</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">SQL Server</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 0: Foundation</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 1: Information</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 2: Guaranteed Access</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 3: Systematic NULL</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 4: Dynamic Catalog</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 5: Comprehensive Language</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 6: View Updating</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 7: High-level Operations</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 8: Physical Independence</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 9: Logical Independence</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 10: Integrity Independence</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 11: Distribution Independence</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">‚úó</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">‚úó</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">‚úó</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rule 12: Non-subversion</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">‚ö†</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>Score</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>8/12</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>7/12</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>8.5/12</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;color: black"><strong>8/12</strong></td>
                        </tr>
                    </table>
                    
                    <p style="margin-top: 1rem; font-size: 0.9em; color: white;">
                        Legend: ‚úì = Fully satisfies | ‚ö† = Partially satisfies | ‚úó = Does not satisfy
                    </p>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Common Violations & Why They Exist
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Violation 1: NULL Handling (Rule 3)</h4>
                        <p><strong>Codd's Ideal:</strong> NULLs should be handled systematically and uniformly.</p>
                        <p><strong>Reality:</strong> SQL's three-valued logic causes inconsistencies.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- NULL Inconsistencies in Modern RDBMS

            -- Case 1: NULL in comparisons
            SELECT * FROM employees WHERE salary > 50000;
            -- Does NOT return rows where salary IS NULL
            -- NULL is neither > nor <= 50000

            SELECT * FROM employees WHERE salary <= 50000;
            -- Also does NOT return NULL salaries
            -- Inconsistent with mathematical logic!

            -- Case 2: NULL in aggregates
            SELECT AVG(salary) FROM employees;
            -- Ignores NULLs (doesn't count them)
            -- But COUNT(*) includes rows with NULLs
            -- Inconsistent behavior!

            -- Case 3: NULL in UNIQUE constraints
            -- Most databases allow multiple NULLs in UNIQUE column
            INSERT INTO users (id, email) VALUES (1, NULL);
            INSERT INTO users (id, email) VALUES (2, NULL);  -- Allowed!
            -- Violates uniqueness principle
            -- NULL ‚â† NULL but treated as non-duplicate

            -- Why This Exists:
            -- ‚úì Users demand NULLs (unknown vs doesn't exist)
            -- ‚úì SQL standard adopted three-valued logic
            -- ‚úì Changing it now would break millions of applications
            -- ‚ö† Codd actually opposed this but lost the battle

            -- Modern Workaround:
            -- PostgreSQL: NULLS NOT DISTINCT in unique indexes
            CREATE UNIQUE INDEX idx_email ON users (email) 
            NULLS NOT DISTINCT;
            -- Now only one NULL allowed ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Violation 2: View Updating (Rule 6)</h4>
                        <p><strong>Codd's Ideal:</strong> All theoretically updatable views should be updatable.</p>
                        <p><strong>Reality:</strong> Most complex views are not updatable.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- View Updating Limitations

            -- Simple view (updatable):
            CREATE VIEW active_employees AS
            SELECT * FROM employees WHERE status = 'active';

            UPDATE active_employees SET salary = 60000 WHERE id = 123;
            -- Works! ‚úì

            -- Join view (not updatable):
            CREATE VIEW employee_departments AS
            SELECT e.id, e.name, d.department_name
            FROM employees e
            JOIN departments d ON e.department_id = d.id;

            UPDATE employee_departments SET department_name = 'IT' WHERE id = 123;
            -- ERROR: Cannot update view with join ‚ùå

            -- Aggregate view (not updatable):
            CREATE VIEW department_stats AS
            SELECT department_id, COUNT(*) as emp_count, AVG(salary) as avg_salary
            FROM employees
            GROUP BY department_id;

            UPDATE department_stats SET avg_salary = 70000 WHERE department_id = 1;
            -- ERROR: Cannot update aggregate view ‚ùå

            -- Why This Exists:
            -- ‚ö† Ambiguity: What does updating a join mean?
            -- ‚ö† Performance: Would require complex logic
            -- ‚ö† Most users don't need updatable views
            -- ‚úì Workaround: INSTEAD OF triggers (PostgreSQL, SQL Server)</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Violation 3: Distribution Independence (Rule 11)</h4>
                        <p><strong>Codd's Ideal:</strong> Distribution should be transparent to users.</p>
                        <p><strong>Reality:</strong> Traditional RDBMS are not designed for distribution.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Distribution Challenges

            -- Single PostgreSQL Instance:
            SELECT * FROM orders WHERE customer_id = 123;
            -- Fast, simple ‚úì

            -- Sharded Across Servers (manual sharding):
            -- Orders for customer 1-1000: Server 1
            -- Orders for customer 1001-2000: Server 2
            -- Orders for customer 2001-3000: Server 3

            -- Application must know distribution:
            if customer_id <= 1000:
                query_server_1()
            elif customer_id <= 2000:
                query_server_2()
            else:
                query_server_3()

            -- NOT transparent to user! ‚ùå

            -- Cross-shard query:
            SELECT COUNT(*) FROM orders WHERE order_date = '2024-01-01';
            -- Must query all 3 servers and combine results
            -- Complex and slow ‚ö†

            -- Why This Exists:
            -- ‚Ä¢ Traditional RDBMS designed for single server
            -- ‚Ä¢ Distribution added as afterthought (replication)
            -- ‚Ä¢ True distributed SQL is recent (Spanner, CockroachDB)

            -- Modern Solutions:
            -- CockroachDB, YugabyteDB: Distribution transparent ‚úì
            -- But they're newer, not "traditional" RDBMS</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Violation 4: Logical Independence (Rule 9)</h4>
                        <p><strong>Codd's Ideal:</strong> Applications should not be affected by logical schema changes.</p>
                        <p><strong>Reality:</strong> Schema changes often break applications.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Logical Independence Violations

            -- Original schema:
            CREATE TABLE employees (
                id INT PRIMARY KEY,
                name VARCHAR(100),
                email VARCHAR(100)
            );

            -- Application code:
            SELECT * FROM employees;
            -- Returns: id, name, email

            -- Add new column:
            ALTER TABLE employees ADD COLUMN phone VARCHAR(20);

            -- Same query now returns:
            -- id, name, email, phone
            -- Application parsing by column position breaks! ‚ùå

            -- Split name column:
            ALTER TABLE employees 
            DROP COLUMN name,
            ADD COLUMN first_name VARCHAR(50),
            ADD COLUMN last_name VARCHAR(50);

            -- Old queries break:
            SELECT name FROM employees;
            -- ERROR: Column 'name' doesn't exist ‚ùå

            -- Views help but don't solve completely:
            CREATE VIEW employees_compat AS
            SELECT id, 
                first_name || ' ' || last_name AS name,
                email
            FROM employees;

            -- But: Performance overhead, complexity

            -- Why This Exists:
            -- ‚Ä¢ SQL exposes schema directly to applications
            -- ‚Ä¢ No true abstraction layer
            -- ‚Ä¢ "SELECT *" considered bad practice for this reason
            -- ‚úì Best Practice: Always specify columns explicitly</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-tools"></i>
                        Intentional Trade-offs
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">Trade-off 1: Performance Over Purity</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Codd's Model: No duplicate rows
            -- Reality: SQL allows duplicates for performance

            -- Codd's ideal:
            -- All queries automatically eliminate duplicates
            -- Every result is a proper relation (set)

            -- SQL reality:
            SELECT department_id FROM employees;
            -- May return duplicates! ‚ö†
            -- dept_id: 1, 1, 2, 1, 3, 2

            -- Must explicitly use DISTINCT:
            SELECT DISTINCT department_id FROM employees;
            -- Returns: 1, 2, 3 ‚úì

            -- Why?
            -- Duplicate elimination is expensive:
            -- - Requires sorting or hashing
            -- - O(n log n) complexity
            -- - In large datasets: minutes of extra time

            -- Users want control:
            -- Sometimes duplicates matter (counting)
            -- Sometimes performance matters more than purity

            -- Trade-off: Flexibility over strict relational model ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Trade-off 2: Usability Over Theory</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Codd opposed NULLs, SQL embraced them

            -- Real-world scenario:
            CREATE TABLE employees (
                id INT PRIMARY KEY,
                name VARCHAR(100) NOT NULL,
                middle_name VARCHAR(50),  -- May not exist!
                email VARCHAR(100) NOT NULL,
                phone VARCHAR(20)  -- May not be provided yet
            );

            -- Without NULLs:
            -- Option 1: Don't insert row until all data available
            --   Problem: Can't create partial records ‚ùå
            -- Option 2: Use empty strings
            --   Problem: '' is different from unknown ‚ùå
            -- Option 3: Use special value like 'N/A'
            --   Problem: Type checking fails, messy ‚ùå

            -- With NULLs:
            INSERT INTO employees (id, name, email) 
            VALUES (1, 'John Doe', 'john@example.com');
            -- middle_name = NULL (unknown)
            -- phone = NULL (not provided yet)
            -- Clean and practical ‚úì

            -- Users overwhelmingly prefer NULLs
            -- Despite theoretical problems</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Trade-off 3: Features Over Rules</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Modern RDBMS add non-relational features

            -- JSON columns (PostgreSQL, MySQL):
            CREATE TABLE products (
                id INT PRIMARY KEY,
                name VARCHAR(100),
                attributes JSONB  -- Not relational! ‚ö†
            );

            INSERT INTO products VALUES 
            (1, 'Laptop', '{"color": "black", "weight": "2kg"}');

            -- Query JSON:
            SELECT * FROM products 
            WHERE attributes->>'color' = 'black';

            -- This violates relational model!
            -- Nested structures, not first normal form
            -- But users love it for flexibility ‚úì

            -- Arrays (PostgreSQL):
            CREATE TABLE posts (
                id INT PRIMARY KEY,
                title TEXT,
                tags TEXT[]  -- Array! Not relational! ‚ö†
            );

            -- Full-text search:
            CREATE TABLE documents (
                id INT PRIMARY KEY,
                content TEXT,
                search_vector TSVECTOR  -- Special type for search
            );

            -- Geographical data (PostGIS):
            CREATE TABLE locations (
                id INT PRIMARY KEY,
                name TEXT,
                coordinates GEOMETRY  -- Spatial data type
            );

            -- These violate Codd's rules but add value:
            -- ‚úì Solve real problems
            -- ‚úì Better than alternative (separate NoSQL db)
            -- ‚úì Hybrid approach: Best of both worlds</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-chart-bar"></i>
                        Modern RDBMS Evolution
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">PostgreSQL: Most "Relational"</h4>
                        <ul>
                            <li>‚úì Strictest adherence to SQL standards</li>
                            <li>‚úì Best NULL handling (NULLS NOT DISTINCT)</li>
                            <li>‚úì Sophisticated constraints and triggers</li>
                            <li>‚úì Strong ACID guarantees</li>
                            <li>‚ö† But adds non-relational features (JSON, arrays) for practicality</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">MySQL: Practical Over Pure</h4>
                        <ul>
                            <li>‚úì Easy to use and fast</li>
                            <li>‚ö† Historical leniency (silent truncation, type coercion)</li>
                            <li>‚ö† Some ACID violations in older versions (MyISAM)</li>
                            <li>‚úì InnoDB engine more compliant</li>
                            <li>‚úì Improving with each version</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Oracle: Enterprise Features</h4>
                        <ul>
                            <li>‚úì Strong compliance with most rules</li>
                            <li>‚úì Advanced features (materialized views, partitioning)</li>
                            <li>‚úì Best distribution support (Oracle RAC)</li>
                            <li>‚ö† Proprietary extensions violate portability</li>
                            <li>üí∞ Cost is a factor</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">SQL Server: Balance</h4>
                        <ul>
                            <li>‚úì Good standards compliance</li>
                            <li>‚úì Strong integration with Microsoft ecosystem</li>
                            <li>‚úì Excellent tooling and management</li>
                            <li>‚ö† T-SQL extensions (non-standard but useful)</li>
                            <li>‚úì Enterprise features competitive with Oracle</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        The Bottom Line
                    </div>
                    
                    <div style="padding: 1rem; background: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 4px;">
                        <p style="margin: 0; font-weight: bold; color: #1e40af;">Practical Reality:</p>
                        <p style="margin: 0.5rem 0 0 0; color: #1e40af;">Modern RDBMS are "mostly relational" by design, not accident. They make intentional trade-offs:</p>
                        <ul style="margin: 0.5rem 0 0 1rem; color: #1e40af;">
                            <li><strong>Performance:</strong> Allow duplicates, don't auto-eliminate</li>
                            <li><strong>Usability:</strong> Support NULLs despite theoretical issues</li>
                            <li><strong>Flexibility:</strong> Add non-relational features (JSON, arrays)</li>
                            <li><strong>Practicality:</strong> Solve real problems over theoretical purity</li>
                        </ul>
                        <p style="margin: 0.5rem 0 0 0; color: #1e40af; font-weight: bold;">These aren't bugs‚Äîthey're features that make databases usable in the real world!</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Modern RDBMS</span>
                        <span class="keyword-tag">Codd's Rules Compliance</span>
                        <span class="keyword-tag">Practical Trade-offs</span>
                        <span class="keyword-tag">NULL Handling</span>
                        <span class="keyword-tag">View Updating</span>
                        <span class="keyword-tag">Distribution Independence</span>
                        <span class="keyword-tag">SQL Standard</span>
                        <span class="keyword-tag">Performance vs Purity</span>
                        <span class="keyword-tag">Hybrid Features</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 49: What is the Practical Importance of the Relational Model? -->
            <div class="question-content" id="q49">
                <div class="question-header">
                    <h1 class="question-title">What is the Practical Importance of the Relational Model?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 13 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Why the Relational Model Still Dominates
                    </div>
                    <div class="definition-box">
                        <p>After 50+ years (since 1970), the <strong>relational model remains the dominant database paradigm</strong>. Despite the rise of NoSQL, graph databases, and other alternatives, relational databases handle the majority of enterprise data worldwide.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The Numbers:</strong></p>
                        <ul>
                            <li>~80% of enterprise databases are relational (2024)</li>
                            <li>$50+ billion annual RDBMS market</li>
                            <li>Millions of applications built on RDBMS</li>
                            <li>Every major company uses RDBMS extensively</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Key Insight:</strong> The relational model succeeded not because it's perfect, but because it solves real-world problems better than alternatives in most scenarios. Its combination of simplicity, flexibility, and rigor is hard to beat.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-star"></i>
                        Core Practical Benefits
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Data Independence</h4>
                        <p><strong>Separation of logical and physical layers</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Application sees logical structure:
            SELECT name, email FROM customers WHERE city = 'New York';

            -- Behind the scenes, database can:
            -- ‚Ä¢ Use index on city column
            -- ‚Ä¢ Store data across multiple files
            -- ‚Ä¢ Use different storage engines
            -- ‚Ä¢ Compress data
            -- ‚Ä¢ Partition by region
            -- ‚Ä¢ All WITHOUT changing application code! ‚úì

            -- Compare to file-based storage (pre-relational):
            -- Application must know:
            -- ‚Ä¢ File format
            -- ‚Ä¢ Index structure
            -- ‚Ä¢ Storage location
            -- Change any of these ‚Üí Rewrite application ‚ùå

            -- Real-world impact:
            -- Company upgrades from HDD to SSD
            -- Or: Moves data to different datacenter
            -- Or: Changes indexing strategy
            -- Relational: Zero application changes needed ‚úì
            -- File-based: Every application must be updated ‚ùå

            -- This is HUGE for enterprise systems!
            -- Thousands of applications, decades of code
            -- Data independence = Maintainability ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Ad-hoc Querying</h4>
                        <p><strong>Answer unexpected questions without programming</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- CEO asks: "Which products sold best in Q4 in California?"

            -- With RDBMS (5 minutes):
            SELECT p.product_name, SUM(o.quantity) as total_sold
            FROM orders o
            JOIN order_items oi ON o.order_id = oi.order_id
            JOIN products p ON oi.product_id = p.product_id
            WHERE o.order_date BETWEEN '2023-10-01' AND '2023-12-31'
            AND o.state = 'CA'
            GROUP BY p.product_name
            ORDER BY total_sold DESC
            LIMIT 10;

            -- Result in seconds! ‚úì

            -- Without RDBMS (hierarchical, network models):
            -- 1. Check if query supported by existing access paths
            -- 2. If not: Write custom program
            -- 3. Compile and deploy program
            -- 4. Run program
            -- 5. Get results
            -- Time: Hours to days ‚ùå

            -- Real-world scenarios:

            -- Marketing: "Show me customers who bought X but not Y"
            SELECT customer_id, name FROM customers
            WHERE customer_id IN (
                SELECT DISTINCT customer_id FROM orders WHERE product_id = 'X'
            )
            AND customer_id NOT IN (
                SELECT DISTINCT customer_id FROM orders WHERE product_id = 'Y'
            );

            -- Finance: "Revenue by region, excluding returns"
            SELECT region, SUM(amount) - SUM(return_amount) as net_revenue
            FROM sales
            GROUP BY region;

            -- Operations: "Average delivery time by carrier"
            SELECT carrier, AVG(DATEDIFF(delivered_date, order_date)) as avg_days
            FROM orders
            WHERE delivered_date IS NOT NULL
            GROUP BY carrier;

            -- All answered in minutes, no programming! ‚úì
            -- This flexibility is invaluable in business ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Data Integrity</h4>
                        <p><strong>Built-in constraints prevent data corruption</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Database enforces business rules automatically

            CREATE TABLE orders (
                order_id INT PRIMARY KEY,  -- Uniqueness ‚úì
                customer_id INT NOT NULL,  -- Required field ‚úì
                order_date DATE NOT NULL,
                total_amount DECIMAL(10,2) CHECK (total_amount >= 0),  -- No negative ‚úì
                status VARCHAR(20) CHECK (status IN ('pending', 'shipped', 'delivered')),
                FOREIGN KEY (customer_id) REFERENCES customers(customer_id)  -- Referential integrity ‚úì
            );

            -- Benefits:

            -- 1. Prevent invalid data:
            INSERT INTO orders VALUES (1, NULL, '2024-01-01', 100.00, 'pending');
            -- ERROR: customer_id cannot be NULL ‚úì

            INSERT INTO orders VALUES (2, 999, '2024-01-01', -50.00, 'shipped');
            -- ERROR: total_amount must be >= 0 ‚úì

            -- 2. Prevent orphaned records:
            DELETE FROM customers WHERE customer_id = 123;
            -- ERROR: Cannot delete, orders exist for this customer ‚úì

            -- 3. Ensure data consistency:
            INSERT INTO orders VALUES (3, 456, '2024-01-01', 100.00, 'invalid_status');
            -- ERROR: status must be pending, shipped, or delivered ‚úì

            -- Without database constraints (application-only validation):
            -- ‚ùå Bugs in code = corrupted data
            -- ‚ùå Multiple applications = inconsistent validation
            -- ‚ùå Direct database access bypasses validation
            -- ‚ùå Data corruption accumulates over time

            -- With database constraints:
            -- ‚úì Enforced regardless of application
            -- ‚úì Works for all access methods (app, admin tools, scripts)
            -- ‚úì Self-documenting (constraints show business rules)
            -- ‚úì Performance optimized (database-level enforcement)

            -- Real-world impact:
            -- E-commerce site with 5 applications (web, mobile, admin, API, batch)
            -- All automatically enforce same rules ‚úì
            -- One place to update business logic ‚úì
            -- Data integrity guaranteed ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. ACID Transactions</h4>
                        <p><strong>Reliable, consistent operations</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Bank transfer: Move $1000 from Account A to Account B

            START TRANSACTION;

            UPDATE accounts SET balance = balance - 1000 WHERE account_id = 'A';
            UPDATE accounts SET balance = balance + 1000 WHERE account_id = 'B';

            COMMIT;

            -- ACID guarantees:
            -- Atomicity: Both updates or neither ‚úì
            -- Consistency: Total money unchanged ‚úì
            -- Isolation: Other transactions don't see partial state ‚úì
            -- Durability: Permanent after commit ‚úì

            -- Without ACID (file-based system):
            -- Write to file A: balance -= 1000
            -- üí• CRASH!
            -- Write to file B never happens
            -- Result: $1000 disappeared! ‚ùå

            -- Real-world scenarios where ACID is critical:

            -- E-commerce checkout:
            START TRANSACTION;
            INSERT INTO orders (customer_id, total) VALUES (123, 299.99);
            UPDATE inventory SET stock = stock - 1 WHERE product_id = 456;
            INSERT INTO payments (order_id, amount) VALUES (1001, 299.99);
            COMMIT;
            -- All succeed or all fail ‚úì

            -- Employee transfer between departments:
            START TRANSACTION;
            UPDATE employees SET department_id = 2 WHERE employee_id = 789;
            UPDATE department_budgets SET headcount = headcount + 1 WHERE dept_id = 2;
            UPDATE department_budgets SET headcount = headcount - 1 WHERE dept_id = 1;
            COMMIT;
            -- Consistent state maintained ‚úì

            -- Inventory synchronization:
            START TRANSACTION;
            UPDATE warehouse_a SET stock = stock - 10 WHERE product_id = 101;
            UPDATE warehouse_b SET stock = stock + 10 WHERE product_id = 101;
            COMMIT;
            -- Total stock conserved ‚úì

            -- This level of reliability is nearly impossible without RDBMS!</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">5. Declarative Query Language (SQL)</h4>
                        <p><strong>Say WHAT you want, not HOW to get it</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- SQL (Declarative):
            SELECT name, salary 
            FROM employees 
            WHERE department = 'IT' AND salary > 50000
            ORDER BY salary DESC;

            -- You specify:
            -- ‚Ä¢ WHAT data you want (name, salary)
            -- ‚Ä¢ WHAT conditions (IT dept, salary > 50k)
            -- ‚Ä¢ HOW to sort it (by salary descending)

            -- Database figures out HOW to execute:
            -- ‚Ä¢ Which indexes to use
            -- ‚Ä¢ Join algorithms
            -- ‚Ä¢ Query plan optimization
            -- ‚Ä¢ Parallel execution
            -- All automatically! ‚úì

            -- Compare to procedural (pre-relational):
            open_file("employees.dat")
            for each record in file:
                read record into memory
                if record.department == "IT":
                    if record.salary > 50000:
                        add record to results
            sort results by salary descending
            return results

            -- Problems:
            -- ‚ùå 20+ lines vs 3 lines
            -- ‚ùå Must know file structure
            -- ‚ùå Must implement sorting
            -- ‚ùå No optimization
            -- ‚ùå Harder to maintain

            -- Real-world impact:

            -- Complex report (50+ lines of SQL):
            -- Procedural code: 1000+ lines
            -- SQL: 50 lines
            -- Development time: Days vs hours ‚úì
            -- Maintenance: Nightmare vs manageable ‚úì

            -- Query optimization:
            -- Database automatically chooses best execution plan
            -- Uses statistics, indexes, cost-based optimization
            -- Adapts to data growth and changes
            -- No manual tuning required (usually) ‚úì

            -- Business value:
            -- Business analysts can write queries ‚úì
            -- Less dependency on programmers ‚úì
            -- Faster insights ‚úì
            -- Lower development costs ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-history"></i>
                        Comparing Database Models
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Hierarchical</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Network</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Relational</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">NoSQL</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Structure</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Tree</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Graph</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Tables</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Varies</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Ad-hoc Queries</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">Limited</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">Difficult</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">Excellent</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">Limited</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Data Independence</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">Poor</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">Poor</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">Excellent</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">Good</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>ACID Support</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">Limited</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">Limited</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">Full</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">Varies</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Scalability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; color: black;">Vertical</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black">Vertical</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black">Vertical</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black">Horizontal</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Schema</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Rigid</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Rigid</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Defined</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Flexible</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Learning Curve</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Steep</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Steep</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Moderate</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Varies</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>When to Use</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Legacy systems</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Legacy systems</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Most applications</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Specific use cases</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-briefcase"></i>
                        Real-World Use Cases
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">When Relational Model is PERFECT:</h4>
                        
                        <p style="margin-top: 1rem;"><strong>1. Financial Systems</strong></p>
                        <ul>
                            <li>‚úì ACID transactions essential</li>
                            <li>‚úì Complex relationships (accounts, transactions, customers)</li>
                            <li>‚úì Ad-hoc reporting critical</li>
                            <li>‚úì Data integrity non-negotiable</li>
                            <li>Example: Banking core systems, payment processing</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>2. Enterprise Resource Planning (ERP)</strong></p>
                        <ul>
                            <li>‚úì Multiple integrated modules</li>
                            <li>‚úì Complex joins across entities</li>
                            <li>‚úì Referential integrity important</li>
                            <li>‚úì Business rule enforcement</li>
                            <li>Example: SAP, Oracle ERP, Microsoft Dynamics</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>3. E-commerce</strong></p>
                        <ul>
                            <li>‚úì Inventory management (ACID)</li>
                            <li>‚úì Order processing (transactions)</li>
                            <li>‚úì Customer relationships</li>
                            <li>‚úì Reporting and analytics</li>
                            <li>Example: Amazon orders, Shopify stores</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>4. Healthcare Systems</strong></p>
                        <ul>
                            <li>‚úì Patient data integrity critical</li>
                            <li>‚úì Complex relationships (patients, doctors, appointments, prescriptions)</li>
                            <li>‚úì Regulatory compliance (HIPAA)</li>
                            <li>‚úì Audit trails</li>
                            <li>Example: Electronic Health Records (EHR)</li>
                        </ul>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">When to Consider Alternatives:</h4>
                        
                        <p style="margin-top: 1rem;"><strong>NoSQL is Better For:</strong></p>
                        <ul>
                            <li><strong>Social media feeds:</strong> High write volume, eventual consistency OK</li>
                            <li><strong>Caching:</strong> Simple key-value, speed critical</li>
                            <li><strong>Time-series data:</strong> Append-only, simple queries</li>
                            <li><strong>Document storage:</strong> Flexible schema, nested data</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Graph Databases for:</strong></p>
                        <ul>
                            <li><strong>Social networks:</strong> Friend relationships</li>
                            <li><strong>Recommendation engines:</strong> Connection analysis</li>
                            <li><strong>Fraud detection:</strong> Pattern matching</li>
                        </ul>
                        
                        <div style="padding: 1rem; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 4px; margin-top: 1.5rem;">
                            <p style="margin: 0; font-weight: bold; color: #92400e;">Reality Check:</p>
                            <p style="margin: 0.5rem 0 0 0; color: #92400e;">Most companies use BOTH relational and NoSQL databases. Relational for core business logic, NoSQL for specific high-scale scenarios. It's not either/or‚Äîit's choosing the right tool for each job!</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-trophy"></i>
                        Why the Relational Model Won
                    </div>
                    
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Mathematical Foundation:</strong> Based on set theory and predicate logic, providing solid theoretical ground</li>
                            <li><strong>Simplicity:</strong> Tables are intuitive, easy to understand and explain</li>
                            <li><strong>Flexibility:</strong> Can model almost any domain without restructuring</li>
                            <li><strong>Query Power:</strong> SQL enables complex operations with simple syntax</li>
                            <li><strong>Data Independence:</strong> Decouples applications from physical storage</li>
                            <li><strong>Standard Language:</strong> SQL became universal, enabling portability</li>
                            <li><strong>Tool Ecosystem:</strong> Decades of tools, libraries, expertise</li>
                            <li><strong>Proven Reliability:</strong> Handles critical enterprise data for 50+ years</li>
                            <li><strong>Continuous Evolution:</strong> Adapts (adds JSON, full-text search, etc.) without abandoning core principles</li>
                            <li><strong>Training and Skills:</strong> Millions of developers know SQL, huge talent pool</li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Relational Model Importance</span>
                        <span class="keyword-tag">Data Independence</span>
                        <span class="keyword-tag">Ad-hoc Queries</span>
                        <span class="keyword-tag">ACID Transactions</span>
                        <span class="keyword-tag">Declarative SQL</span>
                        <span class="keyword-tag">Data Integrity</span>
                        <span class="keyword-tag">Enterprise Systems</span>
                        <span class="keyword-tag">Database History</span>
                        <span class="keyword-tag">Practical Benefits</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 70: What is ACID? -->
            <div class="question-content" id="q70">
                <div class="question-header">
                    <h1 class="question-title">What does ACID stand for in RDBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-brain"></i> Expert Level</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>ACID</strong> is an acronym that stands for four critical properties that guarantee reliable processing of database transactions:</p>
                        
                        <ul style="margin-top: 1rem;">
                            <li><strong>A - Atomicity:</strong> All or nothing - a transaction either completes entirely or doesn't happen at all</li>
                            <li><strong>C - Consistency:</strong> Database moves from one valid state to another valid state</li>
                            <li><strong>I - Isolation:</strong> Concurrent transactions don't interfere with each other</li>
                            <li><strong>D - Durability:</strong> Once committed, changes are permanent even if system crashes</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;">Think of ACID as the <strong>safety net</strong> for your database. These properties ensure that your data remains accurate, consistent, and reliable even when things go wrong - system crashes, power failures, concurrent users, or application errors. ACID is what makes relational databases trustworthy for critical applications like banking, healthcare, and e-commerce.</p>
                        
                        <p style="margin-top: 1rem;">These properties were formally defined by <strong>Theo H√§rder and Andreas Reuter</strong> in 1983, though the concepts existed earlier in database research. Today, ACID compliance is a hallmark of traditional relational databases and distinguishes them from many NoSQL systems.</p>
                    </div>

                    <div class="keyword-tags">
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Atomicity</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Consistency</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Isolation</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Durability</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Transaction Safety</span>
                        <span class="keyword-tag"><i class="fas fa-tag"></i> Data Integrity</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Scenario: Bank Transaction
                    </div>
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-university"></i> Money Transfer Between Accounts
                        </div>
                        
                        <p><strong>Scenario:</strong> You're transferring $500 from your checking account to your savings account using online banking.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The Transaction Involves Two Operations:</strong></p>
                        <div class="code-example">
                            <pre><code class="language-sql">BEGIN TRANSACTION;

-- Step 1: Deduct $500 from checking account
UPDATE Accounts 
SET balance = balance - 500 
WHERE account_id = 'CHK-12345';

-- Step 2: Add $500 to savings account
UPDATE Accounts 
SET balance = balance + 500 
WHERE account_id = 'SAV-67890';

COMMIT;</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>How ACID Properties Protect This Transaction:</strong></p>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444;">
                            <p><strong>üî¥ Atomicity (All or Nothing):</strong></p>
                            <p>Imagine the system crashes right after deducting $500 from your checking but BEFORE adding it to savings. Without atomicity, your $500 would simply vanish!</p>
                            <p><strong>ACID Protection:</strong> Both operations are treated as ONE atomic unit. If the system crashes, the entire transaction is rolled back - your checking account still has the $500. Either both updates happen, or neither does.</p>
                        </div>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(234, 179, 8, 0.1); border-left: 4px solid #eab308;">
                            <p><strong>üü° Consistency (Valid State to Valid State):</strong></p>
                            <p>Your bank has a rule: "No account can have a negative balance." What if you only have $300 in checking but try to transfer $500?</p>
                            <p><strong>ACID Protection:</strong> The transaction violates the consistency rule, so it's rejected before execution. The database won't allow you to move from a valid state (positive balance) to an invalid state (negative balance). Constraints are enforced!</p>
                        </div>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6;">
                            <p><strong>üîµ Isolation (No Interference):</strong></p>
                            <p>Suppose you and your spouse both try to transfer money from the same checking account simultaneously - you're transferring $500, and they're transferring $300. The account has $800.</p>
                            <p><strong>Without Isolation:</strong> Both transactions might read the balance as $800, then both subtract their amounts, potentially causing incorrect final balance.</p>
                            <p><strong>ACID Protection:</strong> Transactions are isolated. One completes fully before the other sees any changes. No race conditions or inconsistencies from concurrent access.</p>
                        </div>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981;">
                            <p><strong>üü¢ Durability (Permanent Changes):</strong></p>
                            <p>Your transaction completes successfully, you see "Transfer Complete" on your screen. Suddenly, the bank's server crashes 2 seconds later. Is your money safe?</p>
                            <p><strong>ACID Protection:</strong> Once you see "committed," that transaction is permanently recorded. Even if every server crashes, when the system restarts, your transfer will still be there. Changes are written to persistent storage and logged before returning success.</p>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        Visual Understanding
                    </div>
                    <div class="image-container">
                        <svg width="900" height="700" viewBox="0 0 900 700">
                            <!-- Background -->
                            <rect width="900" height="700" fill="#1e293b"/>
                            
                            <!-- Title -->
                            <text x="450" y="35" font-size="26" fill="#0ea5e9" text-anchor="middle" font-weight="bold">ACID Properties: Transaction Safety</text>
                            
                            <!-- Four quadrants for ACID -->
                            
                            <!-- Atomicity (Top Left) -->
                            <rect x="30" y="60" width="410" height="300" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="3" rx="12"/>
                            <text x="235" y="95" font-size="22" fill="#ef4444" text-anchor="middle" font-weight="bold">‚öõÔ∏è ATOMICITY</text>
                            <text x="235" y="120" font-size="14" fill="#cbd5e1" text-anchor="middle" font-style="italic">"All or Nothing"</text>
                            
                            <!-- Atomicity diagram -->
                            <rect x="60" y="140" width="150" height="80" fill="#334155" stroke="#ef4444" stroke-width="2" rx="8"/>
                            <text x="135" y="165" font-size="13" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Operation 1</text>
                            <text x="135" y="185" font-size="11" fill="#94a3b8" text-anchor="middle">Deduct $500</text>
                            <text x="135" y="205" font-size="11" fill="#10b981" text-anchor="middle">‚úÖ Success</text>
                            
                            <text x="235" y="190" font-size="16" fill="#ef4444" font-weight="bold">+</text>
                            
                            <rect x="260" y="140" width="150" height="80" fill="#334155" stroke="#ef4444" stroke-width="2" rx="8"/>
                            <text x="335" y="165" font-size="13" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Operation 2</text>
                            <text x="335" y="185" font-size="11" fill="#94a3b8" text-anchor="middle">Add $500</text>
                            <text x="335" y="205" font-size="11" fill="#ef4444" text-anchor="middle">‚ùå Failed</text>
                            
                            <text x="235" y="250" font-size="16" fill="#ef4444" font-weight="bold">‚Üì</text>
                            
                            <rect x="100" y="270" width="270" height="70" fill="rgba(239, 68, 68, 0.2)" stroke="#ef4444" stroke-width="2" rx="8"/>
                            <text x="235" y="295" font-size="13" fill="#ef4444" text-anchor="middle" font-weight="bold">ENTIRE TRANSACTION ROLLED BACK</text>
                            <text x="235" y="320" font-size="11" fill="#94a3b8" text-anchor="middle">Both operations undone - no partial changes!</text>
                            
                            <!-- Consistency (Top Right) -->
                            <rect x="460" y="60" width="410" height="300" fill="rgba(234, 179, 8, 0.1)" stroke="#eab308" stroke-width="3" rx="12"/>
                            <text x="665" y="95" font-size="22" fill="#eab308" text-anchor="middle" font-weight="bold">‚öñÔ∏è CONSISTENCY</text>
                            <text x="665" y="120" font-size="14" fill="#cbd5e1" text-anchor="middle" font-style="italic">"Valid State to Valid State"</text>
                            
                            <!-- Consistency diagram -->
                            <circle cx="550" cy="200" r="60" fill="#334155" stroke="#10b981" stroke-width="3"/>
                            <text x="550" y="195" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">Valid State</text>
                            <text x="550" y="215" font-size="10" fill="#94a3b8" text-anchor="middle">All constraints</text>
                            <text x="550" y="230" font-size="10" fill="#94a3b8" text-anchor="middle">satisfied ‚úì</text>
                            
                            <path d="M 610 200 L 720 200" stroke="#eab308" stroke-width="3" marker-end="url(#arrowyellow)"/>
                            <text x="665" y="190" font-size="11" fill="#eab308" text-anchor="middle" font-weight="bold">Transaction</text>
                            
                            <circle cx="780" cy="200" r="60" fill="#334155" stroke="#10b981" stroke-width="3"/>
                            <text x="780" y="195" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">Valid State</text>
                            <text x="780" y="215" font-size="10" fill="#94a3b8" text-anchor="middle">All constraints</text>
                            <text x="780" y="230" font-size="10" fill="#94a3b8" text-anchor="middle">still satisfied ‚úì</text>
                            
                            <text x="665" y="280" font-size="11" fill="#94a3b8" text-anchor="middle">Examples of constraints:</text>
                            <text x="665" y="300" font-size="10" fill="#94a3b8" text-anchor="middle">‚Ä¢ Balance >= 0</text>
                            <text x="665" y="318" font-size="10" fill="#94a3b8" text-anchor="middle">‚Ä¢ Foreign keys valid</text>
                            <text x="665" y="336" font-size="10" fill="#94a3b8" text-anchor="middle">‚Ä¢ Unique constraints maintained</text>
                            
                            <!-- Isolation (Bottom Left) -->
                            <rect x="30" y="380" width="410" height="300" fill="rgba(59, 130, 246, 0.1)" stroke="#3b82f6" stroke-width="3" rx="12"/>
                            <text x="235" y="415" font-size="22" fill="#3b82f6" text-anchor="middle" font-weight="bold">üîí ISOLATION</text>
                            <text x="235" y="440" font-size="14" fill="#cbd5e1" text-anchor="middle" font-style="italic">"No Interference"</text>
                            
                            <!-- Isolation diagram -->
                            <rect x="60" y="460" width="160" height="70" fill="rgba(59, 130, 246, 0.2)" stroke="#3b82f6" stroke-width="2" rx="8"/>
                            <text x="140" y="485" font-size="12" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Transaction A</text>
                            <text x="140" y="505" font-size="10" fill="#94a3b8" text-anchor="middle">Reading/Writing</text>
                            <text x="140" y="520" font-size="10" fill="#94a3b8" text-anchor="middle">Account Data</text>
                            
                            <rect x="250" y="460" width="160" height="70" fill="rgba(139, 92, 246, 0.2)" stroke="#8b5cf6" stroke-width="2" rx="8"/>
                            <text x="330" y="485" font-size="12" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Transaction B</text>
                            <text x="330" y="505" font-size="10" fill="#94a3b8" text-anchor="middle">Reading/Writing</text>
                            <text x="330" y="520" font-size="10" fill="#94a3b8" text-anchor="middle">Account Data</text>
                            
                            <line x1="140" y1="540" x2="140" y2="570" stroke="#ef4444" stroke-width="3"/>
                            <line x1="120" y1="570" x2="160" y2="570" stroke="#ef4444" stroke-width="3"/>
                            <text x="235" y="565" font-size="24" fill="#ef4444" font-weight="bold">‚äó</text>
                            <line x1="330" y1="540" x2="330" y2="570" stroke="#ef4444" stroke-width="3"/>
                            <line x1="310" y1="570" x2="350" y2="570" stroke="#ef4444" stroke-width="3"/>
                            
                            <text x="235" y="600" font-size="12" fill="#94a3b8" text-anchor="middle">Transactions isolated from each other</text>
                            <text x="235" y="620" font-size="12" fill="#94a3b8" text-anchor="middle">No dirty reads or race conditions</text>
                            <text x="235" y="655" font-size="11" fill="#3b82f6" text-anchor="middle" font-weight="bold">Serializable execution guaranteed</text>
                            
                            <!-- Durability (Bottom Right) -->
                            <rect x="460" y="380" width="410" height="300" fill="rgba(16, 185, 129, 0.1)" stroke="#10b981" stroke-width="3" rx="12"/>
                            <text x="665" y="415" font-size="22" fill="#10b981" text-anchor="middle" font-weight="bold">üíæ DURABILITY</text>
                            <text x="665" y="440" font-size="14" fill="#cbd5e1" text-anchor="middle" font-style="italic">"Permanent Changes"</text>
                            
                            <!-- Durability diagram -->
                            <rect x="500" y="460" width="140" height="60" fill="rgba(16, 185, 129, 0.2)" stroke="#10b981" stroke-width="2" rx="8"/>
                            <text x="570" y="485" font-size="12" fill="#cbd5e1" text-anchor="middle" font-weight="bold">COMMIT</text>
                            <text x="570" y="505" font-size="10" fill="#94a3b8" text-anchor="middle">Transaction</text>
                            <text x="570" y="520" font-size="10" fill="#94a3b8" text-anchor="middle">Successful</text>
                            
                            <path d="M 640 490 L 710 490" stroke="#10b981" stroke-width="3" marker-end="url(#arrowgreen)"/>
                            
                            <rect x="710" y="460" width="130" height="80" fill="#334155" stroke="#10b981" stroke-width="2" rx="8"/>
                            <text x="775" y="485" font-size="28" text-anchor="middle">üíæ</text>
                            <text x="775" y="510" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Persistent</text>
                            <text x="775" y="528" font-size="11" fill="#cbd5e1" text-anchor="middle" font-weight="bold">Storage</text>
                            
                            <!-- Crash scenario -->
                            <rect x="520" y="560" width="280" height="100" fill="rgba(239, 68, 68, 0.15)" stroke="#ef4444" stroke-width="2" rx="8" stroke-dasharray="5,5"/>
                            <text x="660" y="585" font-size="14" fill="#ef4444" text-anchor="middle" font-weight="bold">üí• SYSTEM CRASH!</text>
                            <text x="660" y="610" font-size="11" fill="#94a3b8" text-anchor="middle">Power failure, server crash,</text>
                            <text x="660" y="628" font-size="11" fill="#94a3b8" text-anchor="middle">disk failure, network outage</text>
                            <text x="660" y="650" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">‚úÖ Data still safe and recoverable!</text>
                            
                            <defs>
                                <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
                                </marker>
                                <marker id="arrowyellow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#eab308"/>
                                </marker>
                            </defs>
                        </svg>
                        <p class="image-caption">ACID properties work together to ensure transaction safety and data integrity</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Practical Example: E-commerce Order Processing
                    </div>
                    
                    <div class="scenario-box">
                        <div class="scenario-title">
                            <i class="fas fa-shopping-cart"></i> Complete Order Transaction
                        </div>
                        
                        <p><strong>Scenario:</strong> Customer places an order on Amazon for a laptop worth $1000</p>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Complete Transaction with ACID Guarantees</span>
                            </div>
                            <pre><code class="language-sql">-- Begin transaction
BEGIN TRANSACTION;

-- Step 1: Check inventory availability
SELECT quantity 
FROM Inventory 
WHERE product_id = 'LAPTOP-001' AND warehouse_id = 'WH-NY'
FOR UPDATE;  -- Lock the row to prevent concurrent modifications

-- If available, reserve inventory
UPDATE Inventory
SET quantity = quantity - 1,
    reserved = reserved + 1
WHERE product_id = 'LAPTOP-001' 
  AND warehouse_id = 'WH-NY'
  AND quantity > 0;  -- Consistency check

-- Step 2: Process payment
UPDATE CustomerAccounts
SET balance = balance - 1000
WHERE customer_id = 'CUST-12345'
  AND balance >= 1000;  -- Consistency: sufficient funds

-- If payment fails, rollback happens automatically

-- Step 3: Create order record
INSERT INTO Orders (order_id, customer_id, product_id, amount, status)
VALUES ('ORD-98765', 'CUST-12345', 'LAPTOP-001', 1000, 'CONFIRMED');

-- Step 4: Create shipping record
INSERT INTO Shipping (order_id, address, status)
VALUES ('ORD-98765', '123 Main St, NY', 'PENDING');

-- Step 5: Update loyalty points
UPDATE CustomerLoyalty
SET points = points + 100
WHERE customer_id = 'CUST-12345';

-- All operations successful - make it permanent
COMMIT;

-- ACID in action:
-- ‚öõÔ∏è  Atomicity: All 5 operations succeed or none do
-- ‚öñÔ∏è  Consistency: Balance never goes negative, inventory never oversold
-- üîí Isolation: Other transactions don't see partial states
-- üíæ Durability: Once committed, order survives any crash</code></pre>
                        </div>
                        
                        <div class="highlight-box" style="margin-top: 1rem; padding: 1rem; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6;">
                            <p><strong>üéØ What Happens If Something Goes Wrong?</strong></p>
                            <ul>
                                <li><strong>Payment fails:</strong> ROLLBACK - inventory is unreserved, no order created</li>
                                <li><strong>System crashes after payment:</strong> Transaction log ensures either full rollback or full commit on recovery</li>
                                <li><strong>Another customer buys last item simultaneously:</strong> Isolation ensures only one succeeds</li>
                                <li><strong>Power failure after commit:</strong> Durability guarantees the order is safe</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        ACID Properties Comparison
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>What It Guarantees</th>
                                    <th>Without It, You'd Have</th>
                                    <th>Implementation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Atomicity</strong></td>
                                    <td>Transaction completes fully or not at all - no partial execution</td>
                                    <td>Partial updates, lost money, incomplete operations, corrupted data</td>
                                    <td>Transaction logs, rollback mechanisms, two-phase commit</td>
                                </tr>
                                <tr>
                                    <td><strong>Consistency</strong></td>
                                    <td>Database remains in valid state; all constraints and rules enforced</td>
                                    <td>Constraint violations, negative balances, orphaned records, invalid data</td>
                                    <td>Constraint checking, triggers, validation rules, referential integrity</td>
                                </tr>
                                <tr>
                                    <td><strong>Isolation</strong></td>
                                    <td>Concurrent transactions don't interfere; appears to execute sequentially</td>
                                    <td>Race conditions, dirty reads, lost updates, inconsistent data views</td>
                                    <td>Locking mechanisms, MVCC (Multi-Version Concurrency Control), isolation levels</td>
                                </tr>
                                <tr>
                                    <td><strong>Durability</strong></td>
                                    <td>Committed changes survive system failures permanently</td>
                                    <td>Data loss on crashes, unreliable transactions, inability to recover</td>
                                    <td>Write-ahead logging (WAL), disk persistence, backup systems, replication</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why are ACID properties critical for banking systems but not for social media likes?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Excellent question! This highlights when ACID is essential versus when it's overkill.</strong></p>
                                
                                <p><strong>Banking Systems - ACID is Critical:</strong></p>
                                <ul>
                                    <li><strong>Financial Accuracy:</strong> Every cent must be accounted for. If someone transfers $1000, exactly $1000 must move - not $999, not $1001.</li>
                                    <li><strong>Legal Requirements:</strong> Banks are legally required to maintain accurate records. Audit trails must be perfect.</li>
                                    <li><strong>Zero Tolerance for Loss:</strong> Imagine telling a customer "sorry, your $50,000 transfer disappeared due to a server crash." Unacceptable!</li>
                                    <li><strong>Atomicity Crucial:</strong> Money transfer involves multiple accounts - can't deduct from one without crediting the other.</li>
                                    <li><strong>Consistency Required:</strong> Business rules like "balance cannot be negative" must never be violated.</li>
                                </ul>
                                
                                <p><strong>Social Media Likes - ACID is Overkill:</strong></p>
                                <ul>
                                    <li><strong>Eventual Consistency is Fine:</strong> If your "like" takes 2 seconds to show up, no harm done. You don't lose money or face legal issues.</li>
                                    <li><strong>Scale Over Accuracy:</strong> Facebook handles billions of likes per day. Strict ACID would be too slow and expensive.</li>
                                    <li><strong>Acceptable Loss:</strong> If a like is lost due to a crash before being written to disk, it's annoying but not catastrophic. User can just click again.</li>
                                    <li><strong>Performance Priority:</strong> Better to show approximate like counts quickly than exact counts slowly.</li>
                                    <li><strong>BASE Properties Sufficient:</strong> Basically Available, Soft state, Eventual consistency - good enough for non-critical data.</li>
                                </ul>
                                
                                <p><strong>The Trade-off:</strong></p>
                                <p>ACID provides strong guarantees but sacrifices some performance and scalability. For financial transactions, medical records, inventory management - ACID is non-negotiable. For content feeds, likes, comments, views - eventual consistency and higher throughput often make more sense.</p>
                                
                                <p><strong>Interesting Hybrid:</strong> Many modern systems use ACID for critical operations (payments) and BASE for non-critical ones (recommendations). This is called <strong>polyglot persistence</strong>.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you have atomicity without durability? Give an example.</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, technically you can! Though it's a dangerous combination. Let me explain:</strong></p>
                                
                                <p><strong>Atomicity Without Durability - What It Means:</strong></p>
                                <p>A transaction could complete entirely (all or nothing) within a session, but if the system crashes immediately after commit, those changes might not survive. This can happen when:</p>
                                
                                <ul>
                                    <li><strong>In-Memory Databases:</strong> Like Redis or Memcached in pure in-memory mode without persistence</li>
                                    <li><strong>Async Writes:</strong> System confirms commit before actually writing to disk</li>
                                    <li><strong>Write Buffers:</strong> Changes sit in memory buffers before being flushed to disk</li>
                                </ul>
                                
                                <p><strong>Real Example - Redis:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-redis">-- Redis transaction (atomic but not durable by default)
MULTI
DECRBY account:1234 500
INCRBY account:5678 500
EXEC

-- This is atomic (both operations or neither)
-- But if Redis crashes before the next save, changes are lost!
-- Redis prioritizes speed over durability</code></pre>
                                </div>
                                
                                <p><strong>Another Example - MySQL with Delayed Persistence:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Configure MySQL for speed (dangerous!)
SET innodb_flush_log_at_trx_commit = 2;
-- Now commits don't immediately flush to disk
-- Transaction is atomic but might not be durable

BEGIN TRANSACTION;
UPDATE accounts SET balance = balance - 100 WHERE id = 1;
UPDATE accounts SET balance = balance + 100 WHERE id = 2;
COMMIT;  -- Returns success immediately

-- If system crashes within 1 second, changes might be lost!
-- But during execution, it was atomic (both updates or neither)</code></pre>
                                </div>
                                
                                <p><strong>Why This is Dangerous:</strong></p>
                                <ul>
                                    <li>User sees "Success" but data might vanish on crash</li>
                                    <li>Creates false confidence in transaction completion</li>
                                    <li>Can lead to financial discrepancies</li>
                                    <li>Violates user expectations</li>
                                </ul>
                                
                                <p><strong>When It's Acceptable:</strong></p>
                                <ul>
                                    <li><strong>Caching layers:</strong> Temporary data that can be regenerated</li>
                                    <li><strong>Session state:</strong> User sessions that can be re-established</li>
                                    <li><strong>Analytics buffers:</strong> Where perfect accuracy isn't critical</li>
                                    <li><strong>Development/testing:</strong> Where performance matters more than durability</li>
                                </ul>
                                
                                <p><strong>Bottom Line:</strong> For production financial systems, you need BOTH atomicity AND durability. But for caching, sessions, or non-critical data, atomic-but-not-durable can be acceptable for performance gains.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does a database ensure ACID properties during a system crash?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is where the magic of transaction logs and recovery mechanisms comes in!</strong></p>
                                
                                <p><strong>The Write-Ahead Log (WAL) Protocol:</strong></p>
                                <p>This is the foundation of crash recovery in most databases. The rule is simple but powerful:</p>
                                <blockquote><strong>"All changes must be written to the log BEFORE they're written to the actual data files."</strong></blockquote>
                                
                                <p><strong>Step-by-Step: What Happens During a Transaction</strong></p>
                                
                                <p><strong>1. Transaction Begins:</strong></p>
                                <div class="code-example">
                                    <pre><code>BEGIN TRANSACTION;
UPDATE accounts SET balance = balance - 500 WHERE id = 100;
UPDATE accounts SET balance = balance + 500 WHERE id = 200;</code></pre>
                                </div>
                                
                                <p><strong>2. Changes Written to Log First:</strong></p>
                                <pre style="background: #1e293b; padding: 1rem; border-left: 3px solid #3b82f6; color: #cbd5e1;">
Transaction Log (Written to Disk):
[BEGIN TX-12345]
[UPDATE accounts WHERE id=100: old_value=1000, new_value=500]
[UPDATE accounts WHERE id=200: old_value=2000, new_value=2500]
[COMMIT TX-12345] ‚Üê THIS IS THE CRITICAL MOMENT!
</pre>
                                
                                <p><strong>3. Commit Protocol:</strong></p>
                                <ul>
                                    <li><strong>Log entry written to disk:</strong> All transaction details permanently recorded</li>
                                    <li><strong>Commit marker added:</strong> "COMMIT TX-12345" written to log</li>
                                    <li><strong>Log flushed to disk:</strong> Operating system forced to actually write to physical disk (not just cache)</li>
                                    <li><strong>Success returned to application:</strong> Only NOW does user see "Transaction Complete"</li>
                                    <li><strong>Actual data files updated:</strong> This happens afterward, asynchronously</li>
                                </ul>
                                
                                <p><strong>Crash Scenarios and Recovery:</strong></p>
                                
                                <p><strong>Scenario 1: Crash BEFORE Commit</strong></p>
                                <pre style="background: #1e293b; padding: 1rem; border-left: 3px solid #ef4444; color: #cbd5e1;">
Log shows:
[BEGIN TX-12345]
[UPDATE accounts WHERE id=100: old_value=1000, new_value=500]
[UPDATE accounts WHERE id=200: old_value=2000, new_value=2500]
üí• CRASH! (no COMMIT marker)

Recovery Action: UNDO (Rollback)
- Restore account 100 to 1000
- Restore account 200 to 2000
- Transaction never happened - Atomicity preserved! ‚öõÔ∏è
</pre>
                                
                                <p><strong>Scenario 2: Crash AFTER Commit (but before data file update)</strong></p>
                                <pre style="background: #1e293b; padding: 1rem; border-left: 3px solid #10b981; color: #cbd5e1;">
Log shows:
[BEGIN TX-12345]
[UPDATE accounts WHERE id=100: old_value=1000, new_value=500]
[UPDATE accounts WHERE id=200: old_value=2000, new_value=2500]
[COMMIT TX-12345] ‚Üê Commit is on disk!
üí• CRASH! (before updating actual data files)

Recovery Action: REDO (Replay)
- Apply account 100 change: 1000 ‚Üí 500
- Apply account 200 change: 2000 ‚Üí 2500
- Transaction restored - Durability preserved! üíæ
</pre>
                                
                                <p><strong>The ARIES Recovery Algorithm:</strong></p>
                                <p>Most modern databases use a sophisticated recovery algorithm called ARIES (Algorithm for Recovery and Isolation Exploiting Semantics). It has three phases:</p>
                                
                                <ul>
                                    <li><strong>Analysis Phase:</strong> Scan the log to determine which transactions were active during crash</li>
                                    <li><strong>Redo Phase:</strong> Replay ALL logged operations from the last checkpoint, even for uncommitted transactions</li>
                                    <li><strong>Undo Phase:</strong> Roll back operations of transactions that didn't commit</li>
                                </ul>
                                
                                <p><strong>Additional Mechanisms:</strong></p>
                                <ul>
                                    <li><strong>Checkpoints:</strong> Periodically, the database forces all dirty pages to disk and marks log position. Recovery can start from the last checkpoint instead of beginning of time.</li>
                                    <li><strong>Buffer Pool:</strong> In-memory pages are marked "dirty" when modified. Background processes gradually flush them to disk.</li>
                                    <li><strong>Log Sequence Numbers (LSN):</strong> Every log entry and data page has an LSN to track exactly what's been applied.</li>
                                </ul>
                                
                                <p><strong>Real-World Example - PostgreSQL:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- PostgreSQL crash recovery sequence
1. Server restarts after crash
2. Reads pg_wal/ directory (Write-Ahead Log)
3. Finds last checkpoint: "Checkpoint at LSN 50000"
4. Replays all WAL entries from LSN 50000 to end
5. For committed transactions: REDO changes
6. For uncommitted transactions: UNDO changes
7. Database is now consistent!
8. Server ready to accept connections

-- Check recovery status:
SELECT pg_last_wal_replay_lsn();
-- Shows last replayed log position</code></pre>
                                </div>
                                
                                <p><strong>Why This Works:</strong></p>
                                <ul>
                                    <li><strong>Atomicity:</strong> UNDO ensures partial transactions are rolled back</li>
                                    <li><strong>Consistency:</strong> Only valid, complete transactions are applied</li>
                                    <li><strong>Isolation:</strong> Recovery doesn't involve user transactions</li>
                                    <li><strong>Durability:</strong> REDO ensures committed transactions survive</li>
                                </ul>
                                
                                <p><strong>The Key Insight:</strong> The transaction log is the source of truth, not the data files! Data files are just a cache of the log. This is why databases can recover from any crash as long as the log survives.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between Consistency in ACID vs Consistency in CAP theorem?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is a fantastic question because "consistency" means completely different things in these two contexts! This confuses a lot of people.</strong></p>
                                
                                <p><strong>Consistency in ACID (Transaction Consistency):</strong></p>
                                <p>This is about <strong>correctness of data and maintaining database integrity constraints</strong>. It means:</p>
                                <ul>
                                    <li>Database moves from one <strong>valid state</strong> to another valid state</li>
                                    <li>All <strong>business rules and constraints</strong> are satisfied</li>
                                    <li><strong>Referential integrity</strong> is maintained</li>
                                    <li><strong>Data type constraints</strong> are enforced</li>
                                    <li>No constraint violations occur</li>
                                </ul>
                                
                                <p><strong>Example:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- ACID Consistency example
CREATE TABLE Accounts (
    account_id INT PRIMARY KEY,
    balance DECIMAL(10,2) CHECK (balance >= 0),  -- Constraint
    customer_id INT REFERENCES Customers(id)      -- Referential integrity
);

-- This transaction maintains ACID consistency:
BEGIN TRANSACTION;
UPDATE Accounts SET balance = balance - 100 WHERE account_id = 1;
UPDATE Accounts SET balance = balance + 100 WHERE account_id = 2;
COMMIT;

-- Both balances stay non-negative (constraint satisfied)
-- Foreign keys remain valid
-- Total money in system unchanged
-- = ACID Consistency maintained! ‚úÖ</code></pre>
                                </div>
                                
                                <hr style="margin: 1.5rem 0; border-color: #475569;">
                                
                                <p><strong>Consistency in CAP (Data Consistency Across Nodes):</strong></p>
                                <p>This is about <strong>all nodes in a distributed system seeing the same data at the same time</strong>. It means:</p>
                                <ul>
                                    <li>All replicas have <strong>identical copies</strong> of data</li>
                                    <li>Reads return the <strong>most recent write</strong> (linearizability)</li>
                                    <li>No stale data served to clients</li>
                                    <li>Single, up-to-date view of data across cluster</li>
                                </ul>
                                
                                <p><strong>Example:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- CAP Consistency example
-- Database replicated across 3 servers in different cities

-- User writes to Server A (New York)
UPDATE users SET email = 'new@email.com' WHERE id = 100;

-- Question: If user immediately reads from Server B (London),
-- do they see the new email or old email?

-- STRONG Consistency (CAP-C): User ALWAYS sees new email
-- Even if it means waiting for replication or blocking reads

-- WEAK Consistency: User MIGHT see old email temporarily
-- Faster but stale data possible

-- This is CAP consistency - about replica synchronization
-- Nothing to do with constraints or business rules!</code></pre>
                                </div>
                                
                                <hr style="margin: 1.5rem 0; border-color: #475569;">
                                
                                <p><strong>Side-by-Side Comparison:</strong></p>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Aspect</th>
                                                <th>ACID Consistency</th>
                                                <th>CAP Consistency</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Context</strong></td>
                                                <td>Single database transaction</td>
                                                <td>Distributed system with replicas</td>
                                            </tr>
                                            <tr>
                                                <td><strong>What It Means</strong></td>
                                                <td>Database rules and constraints are never violated</td>
                                                <td>All nodes show the same data simultaneously</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Scope</strong></td>
                                                <td>Data correctness and integrity</td>
                                                <td>Data replication and synchronization</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Example Violation</strong></td>
                                                <td>Balance goes negative, foreign key broken</td>
                                                <td>Node A shows $500, Node B shows $400</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Enforced By</strong></td>
                                                <td>Constraints, triggers, transaction logic</td>
                                                <td>Replication protocols, consensus algorithms</td>
                                            </tr>
                                            <tr>
                                                <td><strong>When Checked</strong></td>
                                                <td>At transaction commit</td>
                                                <td>On every read operation</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <p style="margin-top: 1.5rem;"><strong>Can You Have Both?</strong></p>
                                <p>Yes! Modern distributed SQL databases like Google Spanner, CockroachDB try to provide both:</p>
                                <ul>
                                    <li><strong>ACID Consistency:</strong> Transaction constraints enforced</li>
                                    <li><strong>CAP Consistency:</strong> Strong consistency across replicas</li>
                                </ul>
                                <p>But this comes with trade-offs in availability and performance (as CAP theorem predicts).</p>
                                
                                <p><strong>Key Takeaway:</strong></p>
                                <ul>
                                    <li><strong>ACID Consistency:</strong> "Is my data valid according to business rules?"</li>
                                    <li><strong>CAP Consistency:</strong> "Do all servers show the same data right now?"</li>
                                </ul>
                                <p>Completely different concerns! Unfortunately, the same word causes endless confusion in discussions about distributed databases.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Do NoSQL databases support ACID? Why or why not?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The short answer: It depends on the NoSQL database and what you mean by "support." Let me explain the nuances:</strong></p>
                                
                                <p><strong>Traditional NoSQL Position (Early 2010s):</strong></p>
                                <p>Early NoSQL databases deliberately <strong>sacrificed ACID for scalability and performance</strong>. They embraced BASE properties instead:</p>
                                <ul>
                                    <li><strong>B</strong>asically Available: System appears to work most of the time</li>
                                    <li><strong>S</strong>oft state: Data might be in inconsistent state temporarily</li>
                                    <li><strong>E</strong>ventual consistency: All replicas will sync... eventually</li>
                                </ul>
                                
                                <p><strong>Modern Reality (2020s):</strong></p>
                                <p>Many NoSQL databases now offer varying levels of ACID support! Here's the current landscape:</p>
                                
                                <p><strong>‚úÖ NoSQL with Full ACID (at document/row level):</strong></p>
                                <ul>
                                    <li><strong>MongoDB 4.0+:</strong> Multi-document ACID transactions</li>
                                    <li><strong>DynamoDB:</strong> ACID transactions within single partition</li>
                                    <li><strong>FoundationDB:</strong> Full ACID across distributed system</li>
                                    <li><strong>ArangoDB:</strong> ACID transactions</li>
                                </ul>
                                
                                <div class="code-example">
                                    <pre><code class="language-javascript">// MongoDB ACID transaction example
session = db.getMongo().startSession();
session.startTransaction();

try {
    // Multiple documents, ACID guaranteed
    db.accounts.updateOne(
        {_id: "account1"}, 
        {$inc: {balance: -100}},
        {session}
    );
    
    db.accounts.updateOne(
        {_id: "account2"},
        {$inc: {balance: 100}},
        {session}
    );
    
    session.commitTransaction();  // Atomic, consistent, isolated, durable!
} catch (error) {
    session.abortTransaction();  // Full rollback
}
</code></pre>
                                </div>
                                
                                <p><strong>‚ö†Ô∏è NoSQL with Partial ACID:</strong></p>
                                <ul>
                                    <li><strong>Cassandra:</strong> ACID at row level, eventual consistency across nodes</li>
                                    <li><strong>Redis:</strong> Atomic operations, but durability is configurable/optional</li>
                                    <li><strong>HBase:</strong> ACID at row level only</li>
                                </ul>
                                
                                <p><strong>‚ùå NoSQL without ACID:</strong></p>
                                <ul>
                                    <li><strong>Memcached:</strong> Pure cache, no durability</li>
                                    <li><strong>Early Riak:</strong> Eventual consistency focus</li>
                                    <li><strong>Early DynamoDB:</strong> Eventually consistent reads</li>
                                </ul>
                                
                                <p><strong>Why NoSQL Initially Avoided ACID:</strong></p>
                                
                                <p><strong>1. Scalability Trade-off:</strong></p>
                                <p>ACID requires coordination across nodes. In distributed systems:</p>
                                <ul>
                                    <li><strong>Atomicity:</strong> Needs two-phase commit ‚Üí slow network coordination</li>
                                    <li><strong>Consistency:</strong> Requires consensus ‚Üí high latency</li>
                                    <li><strong>Isolation:</strong> Needs distributed locking ‚Üí contention and deadlocks</li>
                                    <li><strong>Durability:</strong> Wait for replication ‚Üí slower writes</li>
                                </ul>
                                
                                <p><strong>2. CAP Theorem Constraints:</strong></p>
                                <p>In distributed systems, you can only have 2 of 3:</p>
                                <ul>
                                    <li><strong>C</strong>onsistency (all nodes see same data)</li>
                                    <li><strong>A</strong>vailability (system always responds)</li>
                                    <li><strong>P</strong>artition tolerance (works despite network failures)</li>
                                </ul>
                                <p>Early NoSQL chose AP (availability + partition tolerance) over C (consistency). ACID generally requires strong consistency.</p>
                                
                                <p><strong>3. Use Case Differences:</strong></p>
                                <ul>
                                    <li><strong>ACID needed:</strong> Banking, finance, inventory, bookings</li>
                                    <li><strong>ACID overkill:</strong> Social media feeds, logs, analytics, caching</li>
                                </ul>
                                
                                <p><strong>The Great Irony:</strong></p>
                                <p>As NoSQL databases matured and users demanded more features, they started adding:</p>
                                <ul>
                                    <li>SQL-like query languages</li>
                                    <li>ACID transactions</li>
                                    <li>Strong consistency options</li>
                                    <li>Referential integrity (sometimes)</li>
                                </ul>
                                
                                <p>Meanwhile, traditional SQL databases added NoSQL features:</p>
                                <ul>
                                    <li>JSON document support (PostgreSQL, MySQL)</li>
                                    <li>Horizontal scaling (Vitess, Citus)</li>
                                    <li>Key-value stores within SQL</li>
                                </ul>
                                
                                <p><strong>Real Example - Cassandra Evolution:</strong></p>
                                <div class="code-example">
                                    <pre><code class="language-sql">-- Early Cassandra (2010): No ACID, eventual consistency
INSERT INTO users (id, name) VALUES (1, 'Alice');
-- Eventually propagates to all nodes, no guarantees

-- Modern Cassandra (2023): Optional consistency levels
INSERT INTO users (id, name) VALUES (1, 'Alice');
-- Can specify: QUORUM, ALL, LOCAL_QUORUM
-- Trade-off performance for stronger consistency

-- Lightweight Transactions (LWT) - ACID-like
INSERT INTO users (id, name) VALUES (1, 'Alice') IF NOT EXISTS;
-- Uses Paxos consensus - slower but ACID guarantees!</code></pre>
                                </div>
                                
                                <p><strong>When to Use ACID vs BASE:</strong></p>
                                <ul>
                                    <li><strong>Use ACID when:</strong> Money involved, legal requirements, zero tolerance for inconsistency</li>
                                    <li><strong>Use BASE when:</strong> Social features, analytics, caching, high write throughput needed</li>
                                </ul>
                                
                                <p><strong>Bottom Line:</strong> The NoSQL vs SQL / ACID vs BASE distinction is blurring. Modern databases offer flexibility - you choose the trade-off based on your use case. It's no longer black and white!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 71: What are ACID Properties? -->
            <div class="question-content" id="q71">
                <div class="question-header">
                    <h1 class="question-title">What are ACID Properties in DBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>ACID</strong> is a set of properties that guarantee reliable processing of database transactions. ACID stands for <strong>Atomicity, Consistency, Isolation, and Durability</strong>.</p>
                        
                        <p style="margin-top: 1rem;"><strong>What is a Transaction?</strong></p>
                        <p>A transaction is a sequence of one or more database operations (reads/writes) that are treated as a single logical unit of work. Either ALL operations succeed, or NONE of them do.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Example Transaction: Bank Transfer
            START TRANSACTION;

            -- Step 1: Deduct from Account A
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';

            -- Step 2: Add to Account B
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';

            COMMIT;  -- Make changes permanent
            -- OR
            ROLLBACK;  -- Undo all changes</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Why ACID Matters:</strong></p>
                        <ul>
                            <li><strong>Data Integrity:</strong> Ensures database remains in consistent state</li>
                            <li><strong>Reliability:</strong> Guarantees transactions complete correctly</li>
                            <li><strong>Concurrency:</strong> Allows multiple users safely</li>
                            <li><strong>Fault Tolerance:</strong> Recovers from crashes/failures</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-check"></i>
                        ACID Properties Overview
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 600" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="20" font-weight="bold" fill="#1e40af" text-anchor="middle">ACID Properties</text>
                            
                            <!-- Atomicity -->
                            <rect x="50" y="80" width="320" height="120" fill="#dbeafe" stroke="#3b82f6" stroke-width="3" rx="5"/>
                            <text x="210" y="110" font-size="16" font-weight="bold" fill="#1e40af" text-anchor="middle">A - Atomicity</text>
                            <text x="210" y="135" font-size="12" fill="#333" text-anchor="middle">"All or Nothing"</text>
                            <text x="70" y="160" font-size="11" fill="#333">‚Ä¢ Transaction completes fully</text>
                            <text x="70" y="180" font-size="11" fill="#333">‚Ä¢ Or rolls back entirely</text>
                            
                            <!-- Consistency -->
                            <rect x="430" y="80" width="320" height="120" fill="#d1fae5" stroke="#10b981" stroke-width="3" rx="5"/>
                            <text x="590" y="110" font-size="16" font-weight="bold" fill="#065f46" text-anchor="middle">C - Consistency</text>
                            <text x="590" y="135" font-size="12" fill="#333" text-anchor="middle">"Valid State to Valid State"</text>
                            <text x="450" y="160" font-size="11" fill="#333">‚Ä¢ All constraints satisfied</text>
                            <text x="450" y="180" font-size="11" fill="#333">‚Ä¢ No integrity violations</text>
                            
                            <!-- Isolation -->
                            <rect x="50" y="240" width="320" height="120" fill="#fef3c7" stroke="#f59e0b" stroke-width="3" rx="5"/>
                            <text x="210" y="270" font-size="16" font-weight="bold" fill="#92400e" text-anchor="middle">I - Isolation</text>
                            <text x="210" y="295" font-size="12" fill="#333" text-anchor="middle">"Concurrent Transactions Independent"</text>
                            <text x="70" y="320" font-size="11" fill="#333">‚Ä¢ Transactions don't interfere</text>
                            <text x="70" y="340" font-size="11" fill="#333">‚Ä¢ Appears to execute serially</text>
                            
                            <!-- Durability -->
                            <rect x="430" y="240" width="320" height="120" fill="#fecaca" stroke="#dc2626" stroke-width="3" rx="5"/>
                            <text x="590" y="270" font-size="16" font-weight="bold" fill="#991b1b" text-anchor="middle">D - Durability</text>
                            <text x="590" y="295" font-size="12" fill="#333" text-anchor="middle">"Permanent Once Committed"</text>
                            <text x="450" y="320" font-size="11" fill="#333">‚Ä¢ Survives system crashes</text>
                            <text x="450" y="340" font-size="11" fill="#333">‚Ä¢ Written to persistent storage</text>
                            
                            <!-- Transaction Flow -->
                            <rect x="150" y="400" width="500" height="160" fill="#f0f9ff" stroke="#0284c7" stroke-width="2" rx="5"/>
                            <text x="400" y="430" font-size="14" font-weight="bold" fill="#0c4a6e" text-anchor="middle">Transaction Lifecycle</text>
                            
                            <!-- Flow boxes -->
                            <rect x="170" y="450" width="100" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="3"/>
                            <text x="220" y="475" font-size="11" fill="#1e40af" text-anchor="middle">BEGIN</text>
                            
                            <path d="M 270 470 L 300 470" stroke="#0284c7" stroke-width="2" marker-end="url(#arrow27)"/>
                            
                            <rect x="300" y="450" width="100" height="40" fill="#d1fae5" stroke="#10b981" stroke-width="2" rx="3"/>
                            <text x="350" y="475" font-size="11" fill="#065f46" text-anchor="middle">EXECUTE</text>
                            
                            <path d="M 400 470 L 430 470" stroke="#0284c7" stroke-width="2" marker-end="url(#arrow27)"/>
                            
                            <rect x="430" y="450" width="100" height="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="3"/>
                            <text x="480" y="475" font-size="11" fill="#92400e" text-anchor="middle">VALIDATE</text>
                            
                            <path d="M 530 470 L 560 470" stroke="#0284c7" stroke-width="2" marker-end="url(#arrow27)"/>
                            
                            <rect x="560" y="450" width="80" height="40" fill="#d1fae5" stroke="#10b981" stroke-width="2" rx="3"/>
                            <text x="600" y="475" font-size="11" fill="#065f46" text-anchor="middle">COMMIT</text>
                            
                            <!-- Rollback path -->
                            <path d="M 480 490 L 480 520 L 220 520 L 220 490" stroke="#dc2626" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow28)"/>
                            <text x="350" y="535" font-size="10" fill="#dc2626" text-anchor="middle">ROLLBACK (on error)</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow27" markerWidth="1" markerHeight="1" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#0284c7"/>
                                </marker>
                                <marker id="arrow28" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#dc2626"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Real-World Example: Bank Transfer
                    </div>
                    <div class="example-box">
                        <pre><code>-- Scenario: Transfer $500 from Account A to Account B
            -- Both accounts start with $1000

            -- Initial State
            SELECT * FROM Accounts;
            -- AccountID | Balance
            -- A         | 1000
            -- B         | 1000

            -- -----------------------------------------------------------
            -- Transaction WITH ACID Properties ‚úì
            -- -----------------------------------------------------------
            START TRANSACTION;

            -- Atomicity: Both operations or none
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';  -- A: 1000 ‚Üí 500
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';  -- B: 1000 ‚Üí 1500

            -- Consistency: Total money remains $2000 (500 + 1500)
            -- Isolation: Other transactions don't see intermediate state
            -- Durability: Once committed, changes permanent

            COMMIT;

            -- Final State
            SELECT * FROM Accounts;
            -- AccountID | Balance
            -- A         | 500
            -- B         | 1500

            -- -----------------------------------------------------------
            -- What if System Crashes Mid-Transaction? (Testing Atomicity)
            -- -----------------------------------------------------------
            START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';  -- A: 1000 ‚Üí 500
            -- CRASH HERE! (Power failure, system crash, etc.)
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';  -- Never executes

            -- After Recovery:
            SELECT * FROM Accounts;
            -- AccountID | Balance
            -- A         | 1000  ‚Üê Rolled back! ‚úì
            -- B         | 1000  ‚Üê Unchanged
            -- ACID ensures no money lost!

            -- -----------------------------------------------------------
            -- What WITHOUT ACID Properties? ‚ùå
            -- -----------------------------------------------------------
            -- Without Atomicity:
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';  -- A: 1000 ‚Üí 500
            -- CRASH!
            -- A loses $500, B doesn't receive it
            -- Money disappears! Data corruption! ‚ùå

            -- Without Consistency:
            UPDATE Accounts SET Balance = -100 WHERE AccountID = 'A';  -- Negative balance allowed ‚ùå
            -- Violates business rule

            -- Without Isolation:
            -- Transaction 1: Transfer $500 A ‚Üí B
            -- Transaction 2: Transfer $300 A ‚Üí C (runs simultaneously)
            -- Both read A = $1000
            -- Both try to deduct, leaving A = $200 instead of -$300 or proper validation ‚ùå

            -- Without Durability:
            COMMIT;  -- Transaction commits
            -- CRASH immediately after
            -- On restart, changes lost! ‚ùå
            -- User thinks transfer completed, but it didn't</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-ol"></i>
                        ACID Properties Quick Reference
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Property</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Meaning</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Example</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Violation Impact</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Atomicity</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">All or nothing</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Both debit and credit succeed, or both fail</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Money disappears or appears from nowhere</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Consistency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Valid state to valid state</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Total balance remains constant</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Constraints violated, invalid data</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Isolation</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Concurrent transactions independent</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Two transfers don't interfere</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lost updates, dirty reads, race conditions</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Durability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Permanent once committed</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transfer survives system crash</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Committed data lost on failure</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Use Cases Requiring ACID
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">Financial Systems (Critical)</h4>
                        <ul>
                            <li>Banking transactions</li>
                            <li>Payment processing</li>
                            <li>Stock trading</li>
                            <li>Cryptocurrency exchanges</li>
                            <li><strong>Why:</strong> Money must not be lost or created incorrectly</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">E-Commerce</h4>
                        <ul>
                            <li>Order processing</li>
                            <li>Inventory management</li>
                            <li>Shopping cart checkout</li>
                            <li><strong>Why:</strong> Overselling, payment vs inventory sync</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Healthcare</h4>
                        <ul>
                            <li>Patient records</li>
                            <li>Prescription management</li>
                            <li>Test results</li>
                            <li><strong>Why:</strong> Data integrity critical for patient safety</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Airline/Hotel Reservations</h4>
                        <ul>
                            <li>Booking systems</li>
                            <li>Seat/room assignment</li>
                            <li><strong>Why:</strong> Prevent double-booking</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Government Systems</h4>
                        <ul>
                            <li>Tax records</li>
                            <li>Social security</li>
                            <li>Legal documents</li>
                            <li><strong>Why:</strong> Accuracy and accountability required</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Do all databases provide ACID guarantees?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No! Different database systems provide different levels of ACID compliance:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Database Type</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ACID Support</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Traditional RDBMS</strong><br>(MySQL, PostgreSQL, Oracle)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úì Full ACID support</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>NoSQL (MongoDB)</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚ö† ACID for single document<br>Optional for multi-document</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>NoSQL (Cassandra)</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚ùå Eventual consistency (BASE)<br>Trades ACID for availability</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Distributed SQL</strong><br>(CockroachDB, Spanner)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úì ACID across distributed nodes</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>In-Memory</strong><br>(Redis, Memcached)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚ö† Limited (persistence optional)</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Trade-off:</strong> Strict ACID can limit scalability and performance. Some systems sacrifice ACID for speed/availability.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you have partial ACID compliance?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, and many systems do!</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Examples of Partial ACID:</strong></p>
                                
                                <ol>
                                    <li><strong>MySQL MyISAM Engine:</strong>
                                        <ul>
                                            <li>‚úó No Atomicity (no transactions)</li>
                                            <li>‚ö† Limited Consistency</li>
                                            <li>‚úó No Isolation</li>
                                            <li>‚úì Durability (writes to disk)</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>MongoDB (Single Document):</strong>
                                        <ul>
                                            <li>‚úì Atomicity (single doc operations atomic)</li>
                                            <li>‚úì Consistency</li>
                                            <li>‚ö† Isolation (configurable)</li>
                                            <li>‚úì Durability</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Read Replicas:</strong>
                                        <ul>
                                            <li>‚úó Consistency (eventual, not immediate)</li>
                                            <li>‚úì Other properties maintained</li>
                                        </ul>
                                    </li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Why Partial ACID?</strong></p>
                                <ul>
                                    <li>Performance optimization</li>
                                    <li>Scalability requirements</li>
                                    <li>Availability needs</li>
                                    <li>Specific use case tradeoffs</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the performance cost of ACID?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>ACID guarantees come with performance overhead:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Property</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Performance Cost</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Atomicity</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transaction log writes, rollback overhead</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Consistency</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Constraint checking on every write</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Isolation</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Locking, reduced concurrency</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Durability</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Disk I/O for every commit (slow!)</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Performance Impact:</strong></p>
                                <ul>
                                    <li>ACID transactions: ~1,000-10,000 TPS typical</li>
                                    <li>Without ACID: ~100,000+ TPS possible</li>
                                    <li>10-100x performance difference!</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>When to Accept Cost:</strong></p>
                                <ul>
                                    <li>‚úì Financial transactions (correctness > speed)</li>
                                    <li>‚úì Critical data (healthcare, legal)</li>
                                    <li>‚úó Analytics, logs (speed > strict consistency)</li>
                                    <li>‚úó Caching (acceptable to lose on crash)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">ACID Properties</span>
                        <span class="keyword-tag">Atomicity</span>
                        <span class="keyword-tag">Consistency</span>
                        <span class="keyword-tag">Isolation</span>
                        <span class="keyword-tag">Durability</span>
                        <span class="keyword-tag">Transactions</span>
                        <span class="keyword-tag">COMMIT</span>
                        <span class="keyword-tag">ROLLBACK</span>
                        <span class="keyword-tag">Data Integrity</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 72: What are ACID Properties? -->
            <div class="question-content" id="q72">
                <div class="question-header">
                    <h1 class="question-title">What are ACID Properties in DBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Basic</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>ACID</strong> is an acronym that represents four essential properties of database transactions. These properties ensure reliability, consistency, and integrity of data in a database system.</p>
                        
                        <p style="margin-top: 1rem;"><strong>ACID stands for:</strong></p>
                        <ul>
                            <li><strong>A</strong> - <strong>Atomicity:</strong> Transaction is all-or-nothing</li>
                            <li><strong>C</strong> - <strong>Consistency:</strong> Database remains in a valid state</li>
                            <li><strong>I</strong> - <strong>Isolation:</strong> Concurrent transactions don't interfere</li>
                            <li><strong>D</strong> - <strong>Durability:</strong> Committed changes are permanent</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;">These properties guarantee that database <strong>transactions</strong> are processed reliably, even in the face of errors, power failures, or concurrent access.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-atom"></i>
                        1. Atomicity
                    </div>
                    <div class="explanation-text">
                        <p><strong>Atomicity</strong> means that a transaction is treated as a single, indivisible unit of work. Either <strong>ALL operations succeed</strong>, or <strong>ALL operations fail</strong>. There's no in-between.</p>

                        <p style="margin-top: 1rem;"><strong>Analogy:</strong> Think of it like a light switch - it's either ON or OFF, never halfway!</p>

                        <p style="margin-top: 1rem;"><strong>Key Points:</strong></p>
                        <ul>
                            <li>If any part of the transaction fails, the entire transaction is <strong>rolled back</strong></li>
                            <li>Database returns to its state before the transaction started</li>
                            <li>No partial updates remain in the database</li>
                            <li>Ensures data integrity</li>
                        </ul>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- Classic Example: Bank Transfer
            -- Transfer $500 from Account A to Account B

            START TRANSACTION;

            -- Step 1: Deduct $500 from Account A
            UPDATE Accounts 
            SET Balance = Balance - 500 
            WHERE AccountID = 'A';

            -- Step 2: Add $500 to Account B
            UPDATE Accounts 
            SET Balance = Balance + 500 
            WHERE AccountID = 'B';

            COMMIT;  -- Both operations succeed together

            -- What if Step 2 fails?
            START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';  -- ‚úì Success
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';  -- ‚ùå Fails (network error)

            -- ATOMICITY ensures:
            ROLLBACK;  -- Automatically undoes Step 1
            -- Account A still has its original balance
            -- Money doesn't disappear!</code></pre>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- Real-World Example: E-commerce Order
            START TRANSACTION;

            -- Step 1: Create order record
            INSERT INTO Orders (OrderID, CustomerID, TotalAmount) 
            VALUES (12345, 1001, 299.99);

            -- Step 2: Update inventory
            UPDATE Inventory 
            SET Quantity = Quantity - 1 
            WHERE ProductID = 501;

            -- Step 3: Process payment
            INSERT INTO Payments (OrderID, Amount, Status) 
            VALUES (12345, 299.99, 'Pending');

            -- If payment processing fails:
            ROLLBACK;
            -- Order is not created
            -- Inventory is not updated
            -- No partial data in database!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        2. Consistency
                    </div>
                    <div class="explanation-text">
                        <p><strong>Consistency</strong> ensures that a transaction brings the database from one <strong>valid state</strong> to another <strong>valid state</strong>. All database rules, constraints, and triggers must be satisfied.</p>

                        <p style="margin-top: 1rem;"><strong>Analogy:</strong> Like following a recipe - you start with valid ingredients and end with a valid dish. You can't skip steps!</p>

                        <p style="margin-top: 1rem;"><strong>Key Points:</strong></p>
                        <ul>
                            <li>All <strong>integrity constraints</strong> must be maintained</li>
                            <li>All <strong>business rules</strong> must be followed</li>
                            <li>Database must be <strong>logically correct</strong> before and after transaction</li>
                            <li><strong>Foreign keys</strong>, <strong>unique constraints</strong>, <strong>check constraints</strong> all respected</li>
                        </ul>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- Example: Maintaining Consistency in Banking
            CREATE TABLE Accounts (
                AccountID VARCHAR(10) PRIMARY KEY,
                Balance DECIMAL(15,2) NOT NULL,
                AccountType VARCHAR(20),
                CONSTRAINT chk_balance CHECK (Balance >= 0)  -- Consistency Rule!
            );

            -- Transaction 1: Valid - Maintains Consistency
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';  -- Balance: 500 ‚Üí 400
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B';  -- Balance: 300 ‚Üí 400
            COMMIT;  -- ‚úì Total money in system remains constant!

            -- Transaction 2: Invalid - Violates Consistency
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 600 WHERE AccountID = 'A';  -- Balance: 400 ‚Üí -200
            -- ‚ùå ERROR! Violates CHECK constraint (Balance >= 0)
            ROLLBACK;  -- Transaction rejected to maintain consistency</code></pre>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- Example: Foreign Key Consistency
            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                CustomerID INT,
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
            );

            -- Invalid Transaction - Violates Consistency
            START TRANSACTION;
            INSERT INTO Orders VALUES (1001, 999);  -- Customer 999 doesn't exist!
            -- ‚ùå ERROR! Foreign key violation
            ROLLBACK;

            -- Valid Transaction - Maintains Consistency
            START TRANSACTION;
            INSERT INTO Orders VALUES (1001, 101);  -- Customer 101 exists
            COMMIT;  -- ‚úì Consistency maintained!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        3. Isolation
                    </div>
                    <div class="explanation-text">
                        <p><strong>Isolation</strong> ensures that concurrent transactions execute independently without interfering with each other. Each transaction should feel like it's the only one running.</p>

                        <p style="margin-top: 1rem;"><strong>Analogy:</strong> Like having separate lanes on a highway - cars don't bump into each other even though they're moving simultaneously!</p>

                        <p style="margin-top: 1rem;"><strong>Key Points:</strong></p>
                        <ul>
                            <li>Changes made by one transaction are <strong>not visible</strong> to other transactions until committed</li>
                            <li>Prevents <strong>dirty reads</strong>, <strong>non-repeatable reads</strong>, and <strong>phantom reads</strong></li>
                            <li>Uses <strong>locking mechanisms</strong> or <strong>MVCC</strong> (Multi-Version Concurrency Control)</li>
                            <li>Different <strong>isolation levels</strong> provide different guarantees</li>
                        </ul>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- Example: Two Concurrent Transactions
            -- Transaction 1: Booking a flight seat
            START TRANSACTION;
            SELECT AvailableSeats FROM Flights WHERE FlightID = 'FL101';  -- Result: 1 seat
            -- User takes 10 seconds to confirm...
            UPDATE Flights SET AvailableSeats = AvailableSeats - 1 WHERE FlightID = 'FL101';
            COMMIT;

            -- Transaction 2: (starts during Transaction 1's 10-second delay)
            START TRANSACTION;
            SELECT AvailableSeats FROM Flights WHERE FlightID = 'FL101';  -- Result: 1 seat (isolation!)
            -- Without isolation, this could show 0 seats or cause double booking!
            UPDATE Flights SET AvailableSeats = AvailableSeats - 1 WHERE FlightID = 'FL101';
            -- One transaction will succeed, one will fail (or wait)
            COMMIT;</code></pre>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- Isolation Levels Demonstration
            -- Level 1: READ UNCOMMITTED (Lowest isolation - can see uncommitted changes)
            SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'A';  -- Might see uncommitted changes!

            -- Level 2: READ COMMITTED (Can't see uncommitted changes)
            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'A';  -- Only sees committed data

            -- Level 3: REPEATABLE READ (Same data if read multiple times)
            SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'A';  -- Returns 1000
            -- Another transaction updates Account A to 1500 and commits
            SELECT Balance FROM Accounts WHERE AccountID = 'A';  -- Still returns 1000! (Repeatable)

            -- Level 4: SERIALIZABLE (Highest isolation - complete isolation)
            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
            START TRANSACTION;
            SELECT * FROM Accounts WHERE Balance > 1000;  -- Locks the range
            -- Other transactions can't insert/update accounts with Balance > 1000
            COMMIT;</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-save"></i>
                        4. Durability
                    </div>
                    <div class="explanation-text">
                        <p><strong>Durability</strong> guarantees that once a transaction is committed, its changes are <strong>permanent</strong> and will survive any subsequent failures (power outage, crash, etc.).</p>

                        <p style="margin-top: 1rem;"><strong>Analogy:</strong> Like writing with permanent ink - once it's written and dried, it won't wash away!</p>

                        <p style="margin-top: 1rem;"><strong>Key Points:</strong></p>
                        <ul>
                            <li>Committed data is written to <strong>persistent storage</strong> (disk)</li>
                            <li>Uses <strong>transaction logs</strong> (write-ahead logging)</li>
                            <li>Data survives <strong>system crashes</strong>, <strong>power failures</strong></li>
                            <li>Database can be <strong>recovered</strong> to last committed state</li>
                        </ul>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- Example: Payment Transaction
            START TRANSACTION;

            -- Customer pays $100
            INSERT INTO Payments (CustomerID, Amount, PaymentDate) 
            VALUES (1001, 100.00, '2024-11-06');

            -- Update customer balance
            UPDATE Customers 
            SET AccountBalance = AccountBalance - 100 
            WHERE CustomerID = 1001;

            COMMIT;  -- ‚úì Changes written to disk

            -- Even if power fails immediately after COMMIT:
            -- 1. Payment record is PERMANENT
            -- 2. Customer balance update is PERMANENT
            -- 3. Database recovery will restore these changes
            -- 4. No data loss!</code></pre>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- How Durability Works (Behind the scenes)

            -- Step 1: Changes written to Transaction Log (WAL - Write-Ahead Log)
            [Transaction Log]
            Transaction ID: 12345
            Operation: UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A'
            Timestamp: 2024-11-06 10:30:45
            Status: COMMITTED

            -- Step 2: Changes eventually written to actual data files
            -- Step 3: If crash occurs after COMMIT but before data file update:
            --         Database reads transaction log during recovery
            --         Replays committed transactions
            --         Ensures no data loss!

            -- Recovery Process After Crash:
            -- 1. Database starts
            -- 2. Reads transaction log
            -- 3. Identifies committed transactions
            -- 4. Re-applies changes that weren't written to disk
            -- 5. Database fully recovered!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-briefcase"></i>
                        Real-World Scenario - All ACID Properties Together
                    </div>
                    <div class="scenario-box">
                        <h4>Online Shopping Cart Checkout</h4>
                        <p><strong>Scenario:</strong> Customer purchases multiple items totaling $500</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>START TRANSACTION;  -- Begin atomic operation

            -- 1. Create Order Record
            INSERT INTO Orders (OrderID, CustomerID, OrderDate, TotalAmount, Status) 
            VALUES (50001, 1001, '2024-11-06', 500.00, 'Processing');

            -- 2. Insert Order Items
            INSERT INTO Order_Items (OrderID, ProductID, Quantity, Price) VALUES
            (50001, 101, 2, 150.00),
            (50001, 202, 1, 200.00);

            -- 3. Update Inventory (Consistency Rule: Quantity >= 0)
            UPDATE Products 
            SET StockQuantity = StockQuantity - 2 
            WHERE ProductID = 101 AND StockQuantity >= 2;  -- Check constraint!

            UPDATE Products 
            SET StockQuantity = StockQuantity - 1 
            WHERE ProductID = 202 AND StockQuantity >= 1;

            -- 4. Charge Customer Account
            UPDATE Customer_Accounts 
            SET Balance = Balance - 500.00 
            WHERE CustomerID = 1001 AND Balance >= 500.00;  -- Consistency check!

            -- 5. Create Payment Record
            INSERT INTO Payments (OrderID, Amount, PaymentMethod, Status) 
            VALUES (50001, 500.00, 'Credit Card', 'Completed');

            -- 6. Update Loyalty Points
            UPDATE Customers 
            SET LoyaltyPoints = LoyaltyPoints + 50 
            WHERE CustomerID = 1001;

            COMMIT;  -- All or nothing!

            /* ACID Properties in Action:

            ATOMICITY:
            - If ANY step fails (insufficient stock, insufficient balance, payment error)
            - ALL steps are rolled back
            - Customer not charged, inventory not reduced, order not created

            CONSISTENCY:
            - Stock quantity never goes negative (CHECK constraint)
            - Customer balance never goes negative
            - All foreign keys valid
            - Business rules maintained

            ISOLATION:
            - Other customers can't see this order until committed
            - Other transactions can't buy the same items simultaneously
            - Inventory locks prevent overselling

            DURABILITY:
            - Once COMMIT succeeds, order is permanent
            - Even if server crashes immediately after
            - Customer's purchase is safe
            - Can generate invoice, ship product
            */</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Visual Representation - ACID Properties
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 600" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="22" font-weight="bold" fill="white" text-anchor="middle">ACID Properties</text>
                            
                            <!-- Atomicity -->
                            <rect x="50" y="60" width="300" height="120" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="8"/>
                            <text x="200" y="85" font-size="16" font-weight="bold" fill="#1e40af" text-anchor="middle">A - ATOMICITY</text>
                            <text x="200" y="105" font-size="13" fill="#333" text-anchor="middle">"All or Nothing"</text>
                            <text x="70" y="130" font-size="11" fill="#555">‚úì Complete Success</text>
                            <text x="70" y="148" font-size="11" fill="#555">‚úì Complete Failure</text>
                            <text x="70" y="166" font-size="11" fill="#555">‚úó No Partial Updates</text>
                            
                            <!-- Consistency -->
                            <rect x="450" y="60" width="300" height="120" fill="#d1fae5" stroke="#10b981" stroke-width="2" rx="8"/>
                            <text x="600" y="85" font-size="16" font-weight="bold" fill="#065f46" text-anchor="middle">C - CONSISTENCY</text>
                            <text x="600" y="105" font-size="13" fill="#333" text-anchor="middle">"Valid State to Valid State"</text>
                            <text x="470" y="130" font-size="11" fill="#555">‚úì All Constraints Met</text>
                            <text x="470" y="148" font-size="11" fill="#555">‚úì Business Rules Followed</text>
                            <text x="470" y="166" font-size="11" fill="#555">‚úì Data Integrity Maintained</text>
                            
                            <!-- Isolation -->
                            <rect x="50" y="220" width="300" height="120" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="8"/>
                            <text x="200" y="245" font-size="16" font-weight="bold" fill="#92400e" text-anchor="middle">I - ISOLATION</text>
                            <text x="200" y="265" font-size="13" fill="#333" text-anchor="middle">"Concurrent Independence"</text>
                            <text x="70" y="290" font-size="11" fill="#555">‚úì No Interference</text>
                            <text x="70" y="308" font-size="11" fill="#555">‚úì Prevent Conflicts</text>
                            <text x="70" y="326" font-size="11" fill="#555">‚úì Locking Mechanisms</text>
                            
                            <!-- Durability -->
                            <rect x="450" y="220" width="300" height="120" fill="#fce7f3" stroke="#ec4899" stroke-width="2" rx="8"/>
                            <text x="600" y="245" font-size="16" font-weight="bold" fill="#9f1239" text-anchor="middle">D - DURABILITY</text>
                            <text x="600" y="265" font-size="13" fill="#333" text-anchor="middle">"Permanent After Commit"</text>
                            <text x="470" y="290" font-size="11" fill="#555">‚úì Survives Crashes</text>
                            <text x="470" y="308" font-size="11" fill="#555">‚úì Survives Power Loss</text>
                            <text x="470" y="326" font-size="11" fill="#555">‚úì Written to Persistent Storage</text>
                            
                            <!-- Transaction Flow -->
                            <text x="400" y="380" font-size="18" font-weight="bold" fill="white" text-anchor="middle">Transaction Flow</text>
                            
                            <!-- Flow boxes -->
                            <rect x="150" y="400" width="140" height="50" fill="#e0f2fe" stroke="#0284c7" stroke-width="2" rx="5"/>
                            <text x="220" y="420" font-size="12" font-weight="bold" fill="#0c4a6e" text-anchor="middle">START</text>
                            <text x="220" y="437" font-size="10" fill="#0c4a6e" text-anchor="middle">TRANSACTION</text>
                            
                            <path d="M 290 425 L 330 425" stroke="#0284c7" stroke-width="2" marker-end="url(#arrow1)"/>
                            
                            <rect x="330" y="400" width="140" height="50" fill="#e0f2fe" stroke="#0284c7" stroke-width="2" rx="5"/>
                            <text x="400" y="420" font-size="12" font-weight="bold" fill="#0c4a6e" text-anchor="middle">Execute</text>
                            <text x="400" y="437" font-size="10" fill="#0c4a6e" text-anchor="middle">Operations</text>
                            
                            <path d="M 470 425 L 510 425" stroke="#0284c7" stroke-width="2" marker-end="url(#arrow1)"/>
                            
                            <rect x="510" y="400" width="140" height="50" fill="#e0f2fe" stroke="#0284c7" stroke-width="2" rx="5"/>
                            <text x="580" y="420" font-size="12" font-weight="bold" fill="#0c4a6e" text-anchor="middle">COMMIT</text>
                            <text x="580" y="437" font-size="10" fill="#0c4a6e" text-anchor="middle">(Success)</text>
                            
                            <!-- Rollback path -->
                            <path d="M 400 450 L 400 480 L 220 480 L 220 460" stroke="#dc2626" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow2)"/>
                            <text x="300" y="475" font-size="11" fill="#dc2626" text-anchor="middle">ROLLBACK (Failure)</text>
                            
                            <!-- Benefits -->
                            <text x="400" y="530" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Benefits of ACID</text>
                            <text x="400" y="555" font-size="12" fill="white" text-anchor="middle">‚úì Data Reliability   ‚úì Data Integrity   ‚úì Fault Tolerance   ‚úì Concurrent Access</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#0284c7"/>
                                </marker>
                                <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#dc2626"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the difference between COMMIT and ROLLBACK?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6; text-align: left;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6; text-align: left;">COMMIT</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6; text-align: left;">ROLLBACK</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Purpose</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Save changes permanently</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Undo all changes</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>When Used</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transaction successful</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transaction failed or cancelled</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Effect</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Changes become permanent</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Database returns to original state</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Locks</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Released</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Released</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Reversible?</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No (permanent)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">N/A (already undone)</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- COMMIT Example
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B';
            COMMIT;  -- ‚úì Changes saved permanently!

            -- ROLLBACK Example
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';
            -- Oops, realized this is wrong!
            ROLLBACK;  -- ‚úó Changes discarded, Account A unchanged!</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if a system crashes during a transaction?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p>Great question! Here's what happens based on when the crash occurs:</p>
                                
                                <p style="margin-top: 1rem;"><strong>Case 1: Crash BEFORE COMMIT</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';
            -- üí• CRASH HERE (before COMMIT)

            -- After system restarts:
            -- ‚úì Transaction is automatically ROLLED BACK
            -- ‚úì All changes discarded
            -- ‚úì Database returns to state before transaction
            -- ‚úì Both accounts have original balances
            -- This is ATOMICITY in action!</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Case 2: Crash AFTER COMMIT</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';
            COMMIT;  -- ‚úì Transaction committed
            -- üí• CRASH HERE (after COMMIT)

            -- After system restarts:
            -- ‚úì Changes are PERMANENT (already in transaction log)
            -- ‚úì Recovery process replays committed transactions
            -- ‚úì Database restored with all committed changes
            -- This is DURABILITY in action!</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Recovery Process:</strong></p>
                                <ol>
                                    <li><strong>Database reads transaction log (WAL)</strong></li>
                                    <li><strong>Identifies committed transactions</strong></li>
                                    <li><strong>Re-applies changes not yet in data files (REDO)</strong></li>
                                    <li><strong>Rolls back incomplete transactions (UNDO)</strong></li>
                                    <li><strong>Database fully recovered!</strong></li>
                                </ol>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why are ACID properties important?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>ACID properties are crucial for:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>1. Data Reliability</strong></p>
                                <ul>
                                    <li>Guarantees data is accurate and trustworthy</li>
                                    <li>No partial or inconsistent updates</li>
                                    <li>Critical for financial systems</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>2. Business Operations</strong></p>
                                <ul>
                                    <li>Banking: Money transfers must be atomic</li>
                                    <li>E-commerce: Inventory and orders must be consistent</li>
                                    <li>Healthcare: Patient records must be accurate</li>
                                    <li>Airlines: Seat booking must prevent double-booking</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>3. System Recovery</strong></p>
                                <ul>
                                    <li>Recover from crashes without data loss</li>
                                    <li>Restore database to consistent state</li>
                                    <li>Maintain business continuity</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>4. Concurrent Access</strong></p>
                                <ul>
                                    <li>Multiple users can work simultaneously</li>
                                    <li>No data corruption from concurrent operations</li>
                                    <li>Essential for multi-user applications</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Real-World Impact:</strong></p>
                                <p>Without ACID, imagine:</p>
                                <ul>
                                    <li>‚ùå Money deducted from your account but not added to recipient</li>
                                    <li>‚ùå Two people booking the same flight seat</li>
                                    <li>‚ùå Lost transactions after power failure</li>
                                    <li>‚ùå Corrupted data from concurrent updates</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>ACID ensures none of these nightmares occur!</strong></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">ACID Properties</span>
                        <span class="keyword-tag">Atomicity</span>
                        <span class="keyword-tag">Consistency</span>
                        <span class="keyword-tag">Isolation</span>
                        <span class="keyword-tag">Durability</span>
                        <span class="keyword-tag">Transaction</span>
                        <span class="keyword-tag">COMMIT</span>
                        <span class="keyword-tag">ROLLBACK</span>
                        <span class="keyword-tag">Data Integrity</span>
                        <span class="keyword-tag">Concurrent Transactions</span>
                        <span class="keyword-tag">Write-Ahead Log</span>
                        <span class="keyword-tag">Isolation Levels</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 73: Why ACID is Important? -->
            <div class="question-content" id="q73">
                <div class="question-header">
                    <h1 class="question-title">Why ACID is Important?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Core Concept</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 12 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Fundamental</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>ACID is the foundation of reliable database systems</strong> - it's what makes databases trustworthy for critical applications. Without ACID properties, you'd have chaos: incomplete transactions, corrupted data, and lost information would be everyday occurrences. ACID guarantees that your data remains consistent, reliable, and durable even when things go wrong - like system crashes, concurrent users, or network failures.</p>
                        
                        <p style="margin-top: 1rem;">Think of ACID as a safety contract between you and your database. It promises that no matter what happens, your data will always be in a valid, predictable state.</p>
                        
                        <p style="margin-top: 1rem;"><strong>ACID stands for:</strong></p>
                        <ul>
                            <li><strong>A</strong>tomicity - All or nothing execution</li>
                            <li><strong>C</strong>onsistency - Valid state to valid state</li>
                            <li><strong>I</strong>solation - Transactions don't interfere with each other</li>
                            <li><strong>D</strong>urability - Permanent once committed</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        1. Atomicity - "All or Nothing"
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> A transaction either completes entirely or doesn't happen at all - there's no middle ground.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why it matters:</strong> Imagine transferring money between bank accounts. If the debit happens but the credit fails due to a crash, money vanishes into thin air! Atomicity prevents this nightmare by ensuring both operations succeed together or both fail together.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Bank Transfer Example: Atomicity in Action
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Deduct from sender's account
            UPDATE Accounts 
            SET Balance = Balance - 500 
            WHERE AccountID = 'ACC001';

            -- Step 2: Add to receiver's account
            UPDATE Accounts 
            SET Balance = Balance + 500 
            WHERE AccountID = 'ACC002';

            -- If both succeed
            COMMIT;  -- Both changes permanent ‚úì

            -- If any step fails (insufficient funds, network error, crash)
            ROLLBACK;  -- Both changes undone, money conserved ‚úì

            -- -----------------------------------------------------------
            -- What Happens Without Atomicity? DISASTER!
            -- -----------------------------------------------------------

            -- Without ACID, this could happen:
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'ACC001';  -- ‚úì Success
            -- SYSTEM CRASHES HERE! ‚ö°
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'ACC002';  -- Never executed!

            -- Result: $500 vanished! ‚ùå
            -- ACC001: Lost $500
            -- ACC002: Didn't receive $500
            -- Total money in system: DECREASED (Impossible!)

            -- With ACID Atomicity:
            -- Database log before crash: "Transaction started, first update done"
            -- After restart: "Transaction incomplete, ROLLBACK first update"
            -- Result: Both accounts back to original state ‚úì
            -- Total money conserved ‚úì

            -- -----------------------------------------------------------
            -- E-Commerce Order Example
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Create order record
            INSERT INTO Orders (OrderID, CustomerID, TotalAmount, Status)
            VALUES (1001, 123, 150.00, 'PENDING');

            -- Step 2: Reduce inventory
            UPDATE Products 
            SET Stock = Stock - 1 
            WHERE ProductID = 500;

            -- Step 3: Process payment
            INSERT INTO Payments (OrderID, Amount, Status)
            VALUES (1001, 150.00, 'COMPLETED');

            -- Step 4: Update order status
            UPDATE Orders 
            SET Status = 'CONFIRMED' 
            WHERE OrderID = 1001;

            -- All steps succeed or all fail together
            COMMIT;  -- Atomicity ensures all-or-nothing ‚úì

            -- If payment fails:
            -- - Order not created
            -- - Inventory not reduced
            -- - Everything rolled back
            -- Customer can retry safely ‚úì</code></pre>
                    </div>
                    
                    <div class="explanation-text" style="margin-top: 1rem;">
                        <p><strong>Real-world scenario:</strong> In an e-commerce order, atomicity ensures that inventory reduction, order creation, and payment processing all happen together. If payment fails, the inventory isn't reduced and the order isn't created.</p>
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg" style="max-width: 100%; height: auto;">
                            <defs>
                                <linearGradient id="success" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
                                </linearGradient>
                                <linearGradient id="failure" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#dc2626;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            
                            <!-- Success Path -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#10b981" text-anchor="middle">‚úì ALL OPERATIONS SUCCEED - COMMIT</text>
                            <rect x="50" y="50" width="150" height="60" fill="url(#success)" rx="5"/>
                            <text x="125" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Step 1: Deduct</text>
                            
                            <path d="M 200 80 L 250 80" stroke="#10b981" stroke-width="3" marker-end="url(#arrowSuccess)"/>
                            <marker id="arrowSuccess" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
                            </marker>
                            
                            <rect x="250" y="50" width="150" height="60" fill="url(#success)" rx="5"/>
                            <text x="325" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Step 2: Credit</text>
                            
                            <path d="M 400 80 L 450 80" stroke="#10b981" stroke-width="3" marker-end="url(#arrowSuccess)"/>
                            
                            <rect x="450" y="50" width="150" height="60" fill="url(#success)" rx="5"/>
                            <text x="525" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Step 3: Log</text>
                            
                            <path d="M 600 80 L 650 80" stroke="#10b981" stroke-width="3" marker-end="url(#arrowSuccess)"/>
                            
                            <ellipse cx="700" cy="80" rx="50" ry="30" fill="#10b981"/>
                            <text x="700" y="88" font-size="16" fill="white" text-anchor="middle" font-weight="bold">COMMIT</text>
                            
                            <!-- Failure Path -->
                            <text x="400" y="180" font-size="18" font-weight="bold" fill="#ef4444" text-anchor="middle">‚úó ANY OPERATION FAILS - ROLLBACK</text>
                            <rect x="50" y="200" width="150" height="60" fill="url(#failure)" rx="5"/>
                            <text x="125" y="235" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Step 1: Deduct</text>
                            
                            <path d="M 200 230 L 250 230" stroke="#ef4444" stroke-width="3" marker-end="url(#arrowFailure)"/>
                            <marker id="arrowFailure" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#ef4444"/>
                            </marker>
                            
                            <rect x="250" y="200" width="150" height="60" fill="#7f1d1d" rx="5" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5"/>
                            <text x="325" y="228" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Step 2: Credit</text>
                            <text x="325" y="248" font-size="12" fill="#fca5a5" text-anchor="middle">FAILED!</text>
                            
                            <path d="M 400 230 L 450 230" stroke="#ef4444" stroke-width="3" marker-end="url(#arrowFailure)"/>
                            
                            <ellipse cx="525" cy="230" rx="75" ry="30" fill="#ef4444"/>
                            <text x="525" y="238" font-size="16" fill="white" text-anchor="middle" font-weight="bold">ROLLBACK</text>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        2. Consistency - "Rules are Never Broken"
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> Every transaction takes the database from one valid state to another, respecting all defined rules, constraints, and triggers.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why it matters:</strong> Business rules embedded in your database (like "account balance can't be negative" or "every order must have a customer") are always enforced. Consistency prevents data corruption and maintains referential integrity.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Consistency Through Constraints
            -- -----------------------------------------------------------

            CREATE TABLE Accounts (
                AccountID VARCHAR(10) PRIMARY KEY,
                CustomerID INT NOT NULL,
                Balance DECIMAL(15,2) NOT NULL,
                AccountType VARCHAR(20),
                CreatedDate DATE DEFAULT CURRENT_DATE,
                
                -- Consistency Rule 1: Balance cannot be negative
                CONSTRAINT chk_balance CHECK (Balance >= 0),
                
                -- Consistency Rule 2: Must have valid customer
                CONSTRAINT fk_customer FOREIGN KEY (CustomerID) 
                    REFERENCES Customers(CustomerID),
                    
                -- Consistency Rule 3: Account type must be valid
                CONSTRAINT chk_account_type 
                    CHECK (AccountType IN ('SAVINGS', 'CHECKING', 'CREDIT'))
            );

            -- -----------------------------------------------------------
            -- Transaction That Violates Consistency (Will FAIL)
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Current balance: $500
            UPDATE Accounts 
            SET Balance = Balance - 1000 
            WHERE AccountID = 'ACC001';
            -- Tries to set balance to -$500

            COMMIT;  -- This will FAIL! ‚ùå

            -- Database response:
            -- ERROR: Check constraint "chk_balance" violated
            -- Transaction ROLLED BACK automatically
            -- Balance remains $500 ‚úì

            -- -----------------------------------------------------------
            -- Transaction That Maintains Consistency (Will SUCCEED)
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Current balance: $500
            UPDATE Accounts 
            SET Balance = Balance - 400 
            WHERE AccountID = 'ACC001';
            -- Sets balance to $100 (valid!)

            COMMIT;  -- SUCCESS! ‚úì
            -- Balance now $100, all constraints satisfied

            -- -----------------------------------------------------------
            -- Referential Integrity Example
            -- -----------------------------------------------------------

            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                CustomerID INT NOT NULL,
                ProductID INT NOT NULL,
                Quantity INT CHECK (Quantity > 0),
                OrderDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                
                -- Consistency: Order must belong to valid customer
                CONSTRAINT fk_order_customer FOREIGN KEY (CustomerID)
                    REFERENCES Customers(CustomerID),
                    
                -- Consistency: Order must reference valid product
                CONSTRAINT fk_order_product FOREIGN KEY (ProductID)
                    REFERENCES Products(ProductID)
            );

            -- This will FAIL (no such customer)
            INSERT INTO Orders (OrderID, CustomerID, ProductID, Quantity)
            VALUES (1001, 99999, 500, 2);  -- ‚ùå Customer 99999 doesn't exist!

            -- Database response:
            -- ERROR: Foreign key constraint "fk_order_customer" violated
            -- Cannot create orphaned order

            -- This will SUCCEED
            INSERT INTO Orders (OrderID, CustomerID, ProductID, Quantity)
            VALUES (1001, 123, 500, 2);  -- ‚úì Customer 123 exists!

            -- -----------------------------------------------------------
            -- Complex Consistency with Triggers
            -- -----------------------------------------------------------

            -- Business Rule: Total inventory across all warehouses 
            -- must match total units in products table

            DELIMITER $$

            CREATE TRIGGER maintain_inventory_consistency
            AFTER INSERT OR UPDATE OR DELETE ON WarehouseInventory
            FOR EACH ROW
            BEGIN
                -- Recalculate total inventory
                UPDATE Products p
                SET TotalStock = (
                    SELECT COALESCE(SUM(Quantity), 0)
                    FROM WarehouseInventory w
                    WHERE w.ProductID = p.ProductID
                )
                WHERE ProductID = NEW.ProductID OR ProductID = OLD.ProductID;
                
                -- Verify consistency
                IF (SELECT TotalStock FROM Products WHERE ProductID = NEW.ProductID) < 0 THEN
                    SIGNAL SQLSTATE '45000'
                    SET MESSAGE_TEXT = 'Consistency violation: Negative total stock';
                END IF;
            END$$

            DELIMITER ;

            -- Any update to warehouse inventory automatically maintains consistency ‚úì

            -- -----------------------------------------------------------
            -- Multi-Table Consistency Example
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Business Rule: Order total must equal sum of order items

            INSERT INTO Orders (OrderID, CustomerID, TotalAmount)
            VALUES (2001, 456, 250.00);

            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES 
                (2001, 100, 2, 50.00),   -- $100
                (2001, 101, 3, 50.00);   -- $150

            -- Verify consistency
            SELECT 
                o.TotalAmount AS OrderTotal,
                SUM(oi.Quantity * oi.Price) AS ItemsTotal
            FROM Orders o
            JOIN OrderItems oi ON o.OrderID = oi.OrderID
            WHERE o.OrderID = 2001;

            -- OrderTotal = $250, ItemsTotal = $250 ‚úì
            -- Consistent!

            COMMIT;</code></pre>
                    </div>
                    
                    <div class="explanation-text" style="margin-top: 1rem;">
                        <p><strong>Real-world scenario:</strong> In a hospital system, consistency ensures that every prescription references a valid doctor, patient, and medication. You can't accidentally create orphaned prescriptions or assign medications to non-existent patients.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-users"></i>
                        3. Isolation - "Transactions Don't Interfere"
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> Concurrent transactions execute as if they're running alone, even when hundreds of users access the database simultaneously.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why it matters:</strong> Without isolation, you'd get dirty reads (seeing uncommitted changes), lost updates (two users overwriting each other's work), and phantom reads (data appearing/disappearing mid-transaction). Isolation prevents these data anomalies.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Isolation Levels: From Weakest to Strongest
            -- -----------------------------------------------------------

            -- 1. READ UNCOMMITTED (Lowest isolation - allows dirty reads)
            -- Problem: Can see uncommitted changes from other transactions!

            -- Transaction A:
            SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'ACC001';
            -- Returns: $1000

            -- Meanwhile, Transaction B:
            START TRANSACTION;
            UPDATE Accounts SET Balance = 500 WHERE AccountID = 'ACC001';
            -- NOT COMMITTED YET!

            -- Transaction A reads again:
            SELECT Balance FROM Accounts WHERE AccountID = 'ACC001';
            -- Returns: $500 (DIRTY READ! ‚ùå)
            -- Seeing uncommitted data from Transaction B

            -- Transaction B:
            ROLLBACK;  -- Changes undone!

            -- Transaction A thinks balance is $500, but it's actually $1000!
            -- INCONSISTENT! ‚ùå

            -- -----------------------------------------------------------
            -- 2. READ COMMITTED (Prevents dirty reads)
            -- Problem: Non-repeatable reads (value changes during transaction)

            -- Transaction A:
            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'ACC001';
            -- Returns: $1000 ‚úì

            -- Transaction B commits a change:
            UPDATE Accounts SET Balance = 800 WHERE AccountID = 'ACC001';
            COMMIT;

            -- Transaction A reads again:
            SELECT Balance FROM Accounts WHERE AccountID = 'ACC001';
            -- Returns: $800 (DIFFERENT VALUE! ‚ùå)
            -- Non-repeatable read within same transaction

            COMMIT;

            -- -----------------------------------------------------------
            -- 3. REPEATABLE READ (Prevents dirty & non-repeatable reads)
            -- Problem: Phantom reads (new rows appear)

            -- Transaction A:
            SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
            START TRANSACTION;

            -- Read all savings accounts
            SELECT AccountID, Balance 
            FROM Accounts 
            WHERE AccountType = 'SAVINGS';
            -- Returns: 5 accounts

            -- Calculate total
            SELECT SUM(Balance) FROM Accounts WHERE AccountType = 'SAVINGS';
            -- Returns: $50,000

            -- Transaction B inserts new savings account:
            INSERT INTO Accounts VALUES ('ACC999', 789, 10000, 'SAVINGS');
            COMMIT;

            -- Transaction A recalculates:
            SELECT SUM(Balance) FROM Accounts WHERE AccountType = 'SAVINGS';
            -- In some databases: Returns $60,000 (PHANTOM READ! ‚ùå)
            -- New row appeared in result set!

            COMMIT;

            -- -----------------------------------------------------------
            -- 4. SERIALIZABLE (Highest isolation - complete isolation)
            -- Prevents all anomalies: dirty reads, non-repeatable reads, phantoms

            -- Transaction A:
            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
            START TRANSACTION;

            SELECT SUM(Balance) FROM Accounts WHERE AccountType = 'SAVINGS';
            -- Range lock applied ‚úì
            -- Returns: $50,000

            -- Transaction B tries to insert:
            INSERT INTO Accounts VALUES ('ACC999', 789, 10000, 'SAVINGS');
            -- WAITS... Transaction A has range lock

            -- Transaction A recalculates:
            SELECT SUM(Balance) FROM Accounts WHERE AccountType = 'SAVINGS';
            -- Returns: $50,000 (SAME VALUE! ‚úì)
            -- No phantoms!

            COMMIT;  -- A completes

            -- Now Transaction B can proceed:
            COMMIT;  -- B completes

            -- -----------------------------------------------------------
            -- Real-World Example: Booking Last Seat
            -- -----------------------------------------------------------

            -- Without proper isolation: DOUBLE BOOKING!

            -- User A and User B both see 1 seat available
            -- User A: SELECT * FROM Seats WHERE SeatID = '12A';  -- Available: 1
            -- User B: SELECT * FROM Seats WHERE SeatID = '12A';  -- Available: 1
            -- User A: UPDATE Seats SET Available = 0 WHERE SeatID = '12A';
            -- User B: UPDATE Seats SET Available = 0 WHERE SeatID = '12A';
            -- BOTH book same seat! ‚ùå

            -- With SERIALIZABLE isolation: NO DOUBLE BOOKING!

            -- User A:
            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
            START TRANSACTION;

            SELECT Available FROM Seats WHERE SeatID = '12A' FOR UPDATE;
            -- Returns: 1
            -- Row LOCKED ‚úì

            UPDATE Seats SET Available = 0 WHERE SeatID = '12A';
            INSERT INTO Bookings VALUES ('UserA', '12A', NOW());

            COMMIT;  -- Seat booked by User A ‚úì

            -- User B (running simultaneously):
            START TRANSACTION;
            SELECT Available FROM Seats WHERE SeatID = '12A' FOR UPDATE;
            -- WAITS for User A's lock...
            -- After User A commits, User B sees Available = 0
            -- Cannot book! ‚úì

            ROLLBACK;

            -- -----------------------------------------------------------
            -- Lost Update Problem (Prevented by Isolation)
            -- -----------------------------------------------------------

            -- Without isolation:
            -- Initial balance: $1000

            -- Transaction A: Read balance = $1000
            -- Transaction B: Read balance = $1000
            -- Transaction A: Write balance = $900 (deducted $100)
            -- Transaction B: Write balance = $950 (deducted $50)
            -- Final balance: $950 (Lost $100 deduction! ‚ùå)

            -- With isolation (using locking):

            -- Transaction A:
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'ACC001' FOR UPDATE;
            -- Balance = $1000, row LOCKED

            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
            -- Balance = $900

            COMMIT;  -- Lock released

            -- Transaction B:
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'ACC001' FOR UPDATE;
            -- WAITED for Transaction A
            -- Balance = $900 (sees Transaction A's change)

            UPDATE Accounts SET Balance = Balance - 50 WHERE AccountID = 'ACC001';
            -- Balance = $850

            COMMIT;

            -- Final balance: $850 ‚úì
            -- Both deductions applied correctly!</code></pre>
                    </div>
                    
                    <div class="explanation-text" style="margin-top: 1rem;">
                        <p><strong>Real-world scenario:</strong> Two customers trying to book the last seat on a flight. Isolation ensures only one succeeds - the other sees "seat unavailable."</p>
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg" style="max-width: 100%; height: auto;">
                            <!-- Transaction 1 -->
                            <rect x="50" y="50" width="300" height="150" fill="#1e3a8a" rx="5"/>
                            <text x="200" y="80" font-size="16" fill="white" text-anchor="middle" font-weight="bold">TRANSACTION 1</text>
                            <text x="70" y="110" font-size="12" fill="#93c5fd">READ balance = $1000</text>
                            <text x="70" y="135" font-size="12" fill="#93c5fd">CALCULATE new = $1000 - $100</text>
                            <text x="70" y="160" font-size="12" fill="#93c5fd">WRITE balance = $900</text>
                            <text x="70" y="185" font-size="12" fill="#10b981">COMMIT ‚úì</text>
                            
                            <!-- Transaction 2 -->
                            <rect x="450" y="50" width="300" height="150" fill="#7c2d12" rx="5"/>
                            <text x="600" y="80" font-size="16" fill="white" text-anchor="middle" font-weight="bold">TRANSACTION 2</text>
                            <text x="470" y="110" font-size="12" fill="#fca5a5">READ balance = $1000</text>
                            <text x="470" y="135" font-size="12" fill="#fca5a5">CALCULATE new = $1000 - $50</text>
                            <text x="470" y="160" font-size="12" fill="#fca5a5">WAIT... (Transaction 1 locked)</text>
                            <text x="470" y="185" font-size="12" fill="#fca5a5">After T1 commits: READ = $900</text>
                            <text x="470" y="210" font-size="12" fill="#10b981">WRITE balance = $850 ‚úì</text>
                            
                            <!-- Timeline -->
                            <line x1="50" y1="280" x2="750" y2="280" stroke="#64748b" stroke-width="2"/>
                            <text x="400" y="270" font-size="14" fill="#64748b" text-anchor="middle" font-weight="bold">TIME ‚Üí</text>
                            
                            <circle cx="150" cy="280" r="5" fill="#1e3a8a"/>
                            <text x="150" y="310" font-size="11" fill="#1e3a8a" text-anchor="middle">T1 Start</text>
                            
                            <circle cx="300" cy="280" r="5" fill="#7c2d12"/>
                            <text x="300" y="310" font-size="11" fill="#7c2d12" text-anchor="middle">T2 Start</text>
                            
                            <circle cx="500" cy="280" r="5" fill="#10b981"/>
                            <text x="500" y="310" font-size="11" fill="#10b981" text-anchor="middle">T1 Commit</text>
                            
                            <circle cx="650" cy="280" r="5" fill="#10b981"/>
                            <text x="650" y="310" font-size="11" fill="#10b981" text-anchor="middle">T2 Commit</text>
                            
                            <!-- Result -->
                            <rect x="250" y="350" width="300" height="80" fill="#059669" rx="5"/>
                            <text x="400" y="380" font-size="14" fill="white" text-anchor="middle" font-weight="bold">ISOLATION ENSURES:</text>
                            <text x="400" y="405" font-size="13" fill="white" text-anchor="middle">Final Balance = $850</text>
                            <text x="400" y="425" font-size="12" fill="white" text-anchor="middle">(Both debits applied correctly)</text>
                        </svg>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 2rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Isolation Level</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Dirty Reads</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Non-Repeatable Reads</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Phantom Reads</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ UNCOMMITTED</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #ef4444;">Possible ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #ef4444;">Possible ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #ef4444;">Possible ‚ùå</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ COMMITTED</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981;">Prevented ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #ef4444;">Possible ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #ef4444;">Possible ‚ùå</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>REPEATABLE READ</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981;">Prevented ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981;">Prevented ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #ef4444;">Possible ‚ùå</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>SERIALIZABLE</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981;">Prevented ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981;">Prevented ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981;">Prevented ‚úì</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-save"></i>
                        4. Durability - "No Data Loss Ever"
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> Once a transaction commits, the changes are permanent - even if the system crashes immediately after.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why it matters:</strong> Your data survives power failures, system crashes, and hardware failures. This is what makes databases trustworthy for critical applications.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Durability Implementation (Behind the scenes)
            -- -----------------------------------------------------------

            -- Step 1: Transaction executes
            START TRANSACTION;

            UPDATE Orders SET Status = 'SHIPPED' WHERE OrderID = 12345;
            UPDATE Inventory SET Quantity = Quantity - 1 WHERE ProductID = 'PROD789';

            -- Step 2: Before COMMIT, changes written to Write-Ahead Log (WAL)
            -- WAL Entry Format:
            -- [Timestamp] [Transaction ID] [Operation] [Table] [Old Value] [New Value]

            -- WAL entries (written to disk):
            -- 2025-11-14 10:30:15 | TXN-5001 | UPDATE | Orders | Status='PENDING' | Status='SHIPPED'
            -- 2025-11-14 10:30:15 | TXN-5001 | UPDATE | Inventory | Quantity=10 | Quantity=9

            -- This is on disk, not just in memory! ‚úì

            -- Step 3: COMMIT returns success
            COMMIT;  -- Changes now durable ‚úì

            -- Even if system crashes here ‚ö°üí•
            -- On restart, database reads WAL and reapplies committed transactions
            -- Your data is SAFE!

            -- -----------------------------------------------------------
            -- Database Recovery Process
            -- -----------------------------------------------------------

            -- After crash/restart:

            -- 1. Read Write-Ahead Log from disk
            SELECT * FROM WAL_LOG ORDER BY Timestamp;

            -- 2. Identify committed vs uncommitted transactions
            -- Committed: Have COMMIT record in WAL
            -- Uncommitted: No COMMIT record

            -- 3. REDO: Replay committed transactions
            -- Reapply all operations from committed transactions

            -- 4. UNDO: Rollback uncommitted transactions
            -- Reverse operations from uncommitted transactions

            -- Example recovery:
            -- Found: TXN-5001 (COMMITTED) ‚Üí REDO all operations ‚úì
            -- Found: TXN-5002 (NO COMMIT) ‚Üí UNDO all operations ‚úì

            -- -----------------------------------------------------------
            -- Real-World Durability Example
            -- -----------------------------------------------------------

            -- Online Exam Submission
            START TRANSACTION;

            -- Student submits exam
            INSERT INTO ExamSubmissions (StudentID, ExamID, Answers, SubmittedAt)
            VALUES (789, 101, '{"q1":"A","q2":"B",...}', NOW());

            -- Update exam status
            UPDATE Students 
            SET ExamStatus = 'COMPLETED' 
            WHERE StudentID = 789;

            COMMIT;  -- Submission confirmed to student ‚úì

            -- ‚ö° SERVER CRASHES 1 MILLISECOND AFTER COMMIT! ‚ö°

            -- Student sees: "Submission successful" ‚úì
            -- Data written to WAL before COMMIT returned
            -- On server restart: WAL replayed, submission recovered ‚úì
            -- Student's answers are SAFE! ‚úì

            -- -----------------------------------------------------------
            -- Durability Mechanisms
            -- -----------------------------------------------------------

            -- 1. Write-Ahead Logging (WAL)
            -- All changes written to log before data files
            -- Log on persistent storage (disk/SSD)
            -- Fast sequential writes

            -- 2. Checkpoints
            -- Periodically flush in-memory changes to disk
            -- Reduces recovery time

            -- 3. Transaction Log
            -- Permanent record of all database changes
            -- Used for:
            --   - Crash recovery
            --   - Point-in-time recovery
            --   - Replication

            -- 4. Fsync/Flush
            -- Force operating system to write to physical disk
            -- Prevents data loss from OS cache crashes

            -- -----------------------------------------------------------
            -- Durability Configuration (MySQL Example)
            -- -----------------------------------------------------------

            -- innodb_flush_log_at_trx_commit settings:

            -- Value = 1 (SAFEST, default)
            -- Writes and flushes log to disk at each COMMIT
            -- Full ACID compliance ‚úì
            -- Slowest performance

            SET GLOBAL innodb_flush_log_at_trx_commit = 1;

            -- Value = 2 (FASTER, but less durable)
            -- Writes log at each COMMIT, flushes every second
            -- OS crash can lose 1 second of transactions

            SET GLOBAL innodb_flush_log_at_trx_commit = 2;

            -- Value = 0 (FASTEST, risky)
            -- Writes and flushes log every second
            -- Database or OS crash can lose 1 second of transactions

            SET GLOBAL innodb_flush_log_at_trx_commit = 0;

            -- For critical systems: USE VALUE = 1 ‚úì

            -- -----------------------------------------------------------
            -- Point-in-Time Recovery Using Durability
            -- -----------------------------------------------------------

            -- Scenario: Accidental data deletion at 2:30 PM

            -- Step 1: Stop database
            -- Step 2: Restore from last backup (taken at midnight)
            -- Step 3: Replay transaction log from midnight to 2:29 PM
            -- Step 4: Database restored to state just before deletion ‚úì

            -- Transaction log entries:
            -- 00:00:00 - Backup completed
            -- 09:15:23 - Customer order #5001 inserted
            -- 14:25:10 - Product price updated
            -- 14:30:00 - ACCIDENTAL DELETE (we stop here!)

            -- Recovery stops at 14:29:59
            -- Data restored to point before deletion ‚úì

            -- -----------------------------------------------------------
            -- Replication Using Durability
            -- -----------------------------------------------------------

            -- Master database transaction log replicated to slaves

            -- Master:
            START TRANSACTION;
            INSERT INTO Products (ProductID, Name, Price)
            VALUES (999, 'New Product', 99.99);
            COMMIT;  -- Written to transaction log ‚úì

            -- Transaction log entry sent to replicas:
            -- Replica 1: Applies same INSERT ‚úì
            -- Replica 2: Applies same INSERT ‚úì
            -- Replica 3: Applies same INSERT ‚úì

            -- All replicas now have consistent data ‚úì
            -- Durability ensures no data loss even if master fails ‚úì</code></pre>
                    </div>
                    
                    <div class="explanation-text" style="margin-top: 1rem;">
                        <p><strong>Real-world scenario:</strong> During an online exam, if the server crashes right after you submit your answers, durability guarantees your submission is saved and won't be lost.</p>
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 350" xmlns="http://www.w3.org/2000/svg" style="max-width: 100%; height: auto;">
                            <!-- Transaction Flow -->
                            <rect x="50" y="50" width="200" height="80" fill="#3b82f6" rx="5"/>
                            <text x="150" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Transaction</text>
                            <text x="150" y="110" font-size="12" fill="white" text-anchor="middle">UPDATE Orders</text>
                            
                            <path d="M 250 90 L 300 90" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow1)"/>
                            <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#3b82f6"/>
                            </marker>
                            
                            <!-- Write-Ahead Log -->
                            <rect x="300" y="50" width="200" height="80" fill="#8b5cf6" rx="5"/>
                            <text x="400" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Write-Ahead Log</text>
                            <text x="400" y="110" font-size="12" fill="white" text-anchor="middle">(On Disk)</text>
                            
                            <path d="M 500 90 L 550 90" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrow2)"/>
                            <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#8b5cf6"/>
                            </marker>
                            
                            <!-- COMMIT -->
                            <ellipse cx="625" cy="90" rx="75" ry="40" fill="#10b981"/>
                            <text x="625" y="98" font-size="16" fill="white" text-anchor="middle" font-weight="bold">COMMIT</text>
                            
                            <!-- Crash -->
                            <text x="400" y="180" font-size="20" fill="#ef4444" text-anchor="middle" font-weight="bold">‚ö° SYSTEM CRASHES HERE! ‚ö°</text>
                            
                            <!-- Recovery -->
                            <rect x="50" y="220" width="200" height="80" fill="#f59e0b" rx="5"/>
                            <text x="150" y="250" font-size="14" fill="white" text-anchor="middle" font-weight="bold">System Restart</text>
                            <text x="150" y="275" font-size="12" fill="white" text-anchor="middle">Reads WAL</text>
                            
                            <path d="M 250 260 L 300 260" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow3)"/>
                            <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#f59e0b"/>
                            </marker>
                            
                            <!-- Replay -->
                            <rect x="300" y="220" width="200" height="80" fill="#10b981" rx="5"/>
                            <text x="400" y="250" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Replay Transaction</text>
                            <text x="400" y="275" font-size="12" fill="white" text-anchor="middle">Data Recovered ‚úì</text>
                            
                            <path d="M 500 260 L 550 260" stroke="#10b981" stroke-width="3" marker-end="url(#arrow4)"/>
                            <marker id="arrow4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
                            </marker>
                            
                            <!-- Safe -->
                            <ellipse cx="625" cy="260" rx="75" ry="40" fill="#059669"/>
                            <text x="625" y="268" font-size="16" fill="white" text-anchor="middle" font-weight="bold">DATA SAFE</text>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Why ACID Matters - Real Business Impact
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Without ACID:</strong></p>
                        
                        <p style="margin-top: 1rem;"><strong>Banking System:</strong></p>
                        <ul>
                            <li>Money could disappear during transfers</li>
                            <li>Overdrafts could occur even with sufficient checks</li>
                            <li>Account balances could become incorrect</li>
                            <li>Audit trails would be unreliable</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>E-commerce:</strong></p>
                        <ul>
                            <li>Overselling products (more orders than inventory)</li>
                            <li>Ghost orders (payment taken but no order record)</li>
                            <li>Duplicate charges</li>
                            <li>Lost revenue data</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Healthcare:</strong></p>
                        <ul>
                            <li>Lost patient records</li>
                            <li>Medication dosage errors</li>
                            <li>Conflicting appointments</li>
                            <li>Incomplete medical histories</li>
                        </ul>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Complex Multi-Step Transaction with ACID Guarantees
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Check available balance
            SELECT Balance INTO @current_balance 
            FROM Accounts 
            WHERE AccountID = 'ACC001' 
            FOR UPDATE;  -- Lock the row (Isolation) ‚úì

            -- Step 2: Validate business rules (Consistency)
            IF @current_balance >= 1000 THEN
                
                -- Step 3: Deduct from source
                UPDATE Accounts 
                SET Balance = Balance - 1000 
                WHERE AccountID = 'ACC001';
                -- Atomicity: Part 1 of all-or-nothing ‚úì
                
                -- Step 4: Add to destination
                UPDATE Accounts 
                SET Balance = Balance + 1000 
                WHERE AccountID = 'ACC002';
                -- Atomicity: Part 2 of all-or-nothing ‚úì
                
                -- Step 5: Log transaction for audit
                INSERT INTO TransactionLog 
                (FromAccount, ToAccount, Amount, Timestamp, Type) 
                VALUES ('ACC001', 'ACC002', 1000, NOW(), 'TRANSFER');
                -- Atomicity: Part 3 of all-or-nothing ‚úì
                
                -- Step 6: Update daily transfer limit
                UPDATE DailyLimits 
                SET AmountUsed = AmountUsed + 1000 
                WHERE AccountID = 'ACC001' AND Date = CURDATE();
                -- Atomicity: Part 4 of all-or-nothing ‚úì
                
                COMMIT;  
                -- Atomicity: All steps succeeded ‚úì
                -- Consistency: All constraints satisfied ‚úì
                -- Isolation: Other transactions didn't interfere ‚úì
                -- Durability: Changes permanent even if crash now ‚úì
                
            ELSE
                ROLLBACK;  -- Insufficient funds
                -- Atomicity: Nothing changed ‚úì
            END IF;

            -- -----------------------------------------------------------
            -- What ACID Prevents
            -- -----------------------------------------------------------

            -- Scenario 1: Partial Completion (Prevented by Atomicity)
            -- WITHOUT ACID:
            UPDATE Accounts SET Balance = Balance - 1000 WHERE AccountID = 'ACC001';  -- ‚úì
            -- CRASH HERE!
            UPDATE Accounts SET Balance = Balance + 1000 WHERE AccountID = 'ACC002';  -- Never executed
            -- Result: $1000 lost! ‚ùå

            -- WITH ACID:
            -- Transaction incomplete, automatic ROLLBACK on restart ‚úì
            -- No money lost! ‚úì

            -- -----------------------------------------------------------

            -- Scenario 2: Constraint Violation (Prevented by Consistency)
            -- WITHOUT ACID:
            UPDATE Accounts SET Balance = -500 WHERE AccountID = 'ACC001';  -- Negative!
            -- Result: Invalid data in database ‚ùå

            -- WITH ACID:
            -- CHECK constraint prevents negative balance
            -- Transaction ROLLED BACK ‚úì
            -- Data remains valid ‚úì

            -- -----------------------------------------------------------

            -- Scenario 3: Concurrent Modification (Prevented by Isolation)
            -- WITHOUT ACID:
            -- User A reads balance: $1000
            -- User B reads balance: $1000
            -- User A writes: $900 (deducted $100)
            -- User B writes: $950 (deducted $50)
            -- Result: Only $50 deduction applied, lost $100! ‚ùå

            -- WITH ACID:
            -- User A locks row with FOR UPDATE
            -- User B waits
            -- User A commits
            -- User B sees $900 and deducts $50
            -- Final: $850 ‚úì
            -- Both deductions applied! ‚úì

            -- -----------------------------------------------------------

            -- Scenario 4: System Crash (Prevented by Durability)
            -- WITHOUT ACID:
            COMMIT;  -- Returns success to user
            -- CRASH before writing to disk!
            -- Result: User told "success" but data lost! ‚ùå

            -- WITH ACID:
            COMMIT;  -- Writes to WAL first
            -- Then returns success
            -- CRASH after COMMIT
            -- On restart: WAL replayed, data recovered ‚úì
            -- Data safe! ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        ACID Trade-offs and Performance
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>ACID comes with overhead:</strong></p>
                        
                        <ul>
                            <li><strong>Locking:</strong> Reduces concurrency (Isolation) - other transactions must wait</li>
                            <li><strong>Logging:</strong> Extra disk I/O (Durability) - write-ahead log requires additional writes</li>
                            <li><strong>Validation:</strong> Checking constraints (Consistency) - extra computation before commit</li>
                            <li><strong>Coordination:</strong> Multiple writes for single transaction (Atomicity) - orchestration overhead</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Performance vs Correctness:</strong></p>
                        <p>Some applications trade ACID for speed using BASE (Basically Available, Soft state, Eventually consistent) principles:</p>
                        
                        <ul>
                            <li>Social media likes/views - eventual consistency acceptable</li>
                            <li>Analytics dashboards - approximate counts okay</li>
                            <li>Caching layers - stale data tolerable</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;">But for financial, medical, and legal data - <strong>ACID is non-negotiable!</strong></p>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Scenario</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Use ACID?</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Reason</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Bank transactions</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981; font-weight: bold;">YES ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Money must be conserved</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">E-commerce orders</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981; font-weight: bold;">YES ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Prevent overselling</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Medical records</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981; font-weight: bold;">YES ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Patient safety critical</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Social media likes</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #f59e0b; font-weight: bold;">NO ‚úó</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Eventual consistency okay</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Page view counters</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #f59e0b; font-weight: bold;">NO ‚úó</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Approximate counts fine</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Session data</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #f59e0b; font-weight: bold;">NO ‚úó</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Temporary, cache acceptable</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you give up some ACID properties for better performance?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, and this is exactly what NoSQL databases do!</strong> They follow BASE (Basically Available, Soft state, Eventually consistent) principles instead.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Examples:</strong></p>
                                <ul>
                                    <li><strong>MongoDB:</strong> Can sacrifice isolation for speed (allows dirty reads in some configurations)</li>
                                    <li><strong>Cassandra:</strong> Prioritizes availability over consistency (eventual consistency model)</li>
                                    <li><strong>Redis:</strong> Trades durability for performance (in-memory, can lose recent data on crash)</li>
                                    <li><strong>DynamoDB:</strong> Eventually consistent reads by default for better performance</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>The choice depends on your use case:</strong></p>
                                <ul>
                                    <li>Banking, healthcare, financial = Need ACID ‚úì</li>
                                    <li>Social media feeds, analytics = BASE acceptable ‚úì</li>
                                    <li>Most modern systems use BOTH (hybrid approach) ‚úì</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How do distributed databases maintain ACID?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Through distributed transaction protocols:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>1. Two-Phase Commit (2PC):</strong></p>
                                <ul>
                                    <li><strong>Phase 1 (Prepare):</strong> Coordinator asks all nodes "ready to commit?"</li>
                                    <li><strong>Phase 2 (Commit):</strong> If all say yes, coordinator sends final commit command</li>
                                    <li>Problem: Coordinator failure blocks entire transaction</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Two-Phase Commit Example

            -- Coordinator:
            PREPARE TRANSACTION 'TXN-5001';
            -- Ask Node 1: Ready? ‚Üí YES
            -- Ask Node 2: Ready? ‚Üí YES
            -- Ask Node 3: Ready? ‚Üí YES

            -- All nodes ready, proceed:
            COMMIT PREPARED 'TXN-5001';
            -- Node 1: COMMIT ‚úì
            -- Node 2: COMMIT ‚úì
            -- Node 3: COMMIT ‚úì

            -- Transaction complete across all nodes ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>2. Three-Phase Commit (3PC):</strong></p>
                                <ul>
                                    <li>Adds "pre-commit" phase to handle coordinator failures</li>
                                    <li>More resilient but slower</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>3. Paxos/Raft:</strong></p>
                                <ul>
                                    <li>Consensus algorithms ensuring all nodes agree on transaction order</li>
                                    <li>Used by: Google Spanner, CockroachDB, etcd</li>
                                    <li>Provides ACID across distributed systems</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Trade-off:</strong> Distributed ACID is possible but has higher latency and complexity than single-node ACID.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the performance cost of ACID?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>ACID comes with overhead in multiple areas:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>1. Locking Overhead (Isolation):</strong></p>
                                <ul>
                                    <li>Concurrent transactions must wait for locks</li>
                                    <li>Reduced throughput with high contention</li>
                                    <li>Can cause deadlocks that need resolution</li>
                                    <li>Impact: 10-50% performance reduction with high concurrency</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>2. Logging Overhead (Durability):</strong></p>
                                <ul>
                                    <li>Every change written to Write-Ahead Log</li>
                                    <li>Extra disk I/O (fsync calls)</li>
                                    <li>Log files must be maintained and archived</li>
                                    <li>Impact: 20-40% additional write latency</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>3. Validation Overhead (Consistency):</strong></p>
                                <ul>
                                    <li>Check constraints on every write</li>
                                    <li>Foreign key validation requires lookups</li>
                                    <li>Trigger execution</li>
                                    <li>Impact: 5-15% overhead per transaction</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>4. Coordination Overhead (Atomicity):</strong></p>
                                <ul>
                                    <li>Transaction state management</li>
                                    <li>Multi-step commit protocols</li>
                                    <li>Rollback processing when failures occur</li>
                                    <li>Impact: Varies, higher in distributed systems</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Modern Optimizations:</strong></p>
                                <ul>
                                    <li><strong>MVCC (Multi-Version Concurrency Control):</strong> Allows reads without locks</li>
                                    <li><strong>Group Commit:</strong> Batch multiple transactions into single log write</li>
                                    <li><strong>Optimistic Locking:</strong> Assume no conflicts, validate at commit</li>
                                    <li><strong>Read-Only Transactions:</strong> Bypass expensive locking</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Bottom Line:</strong> ACID adds 30-50% overhead compared to no-ACID systems, but for critical data, this cost is absolutely worth it!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does isolation level affect the number of locks?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Higher isolation = more locks = less concurrency but safer:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Isolation Level</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Locks Used</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Concurrency</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ UNCOMMITTED</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Minimal (write locks only)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981;">Highest ‚¨ÜÔ∏è‚¨ÜÔ∏è‚¨ÜÔ∏è</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ COMMITTED</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Short read locks + write locks</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #10b981;">High ‚¨ÜÔ∏è‚¨ÜÔ∏è</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>REPEATABLE READ</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Row locks held until commit</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #f59e0b;">Medium ‚¨ÜÔ∏è</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>SERIALIZABLE</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Range locks + row locks</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd; color: #ef4444;">Lowest ‚¨áÔ∏è</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Example: 100 concurrent users

            -- READ UNCOMMITTED:
            -- Lock wait time: ~50ms average
            -- Throughput: 5000 transactions/second
            -- Risk: Data anomalies possible

            -- READ COMMITTED:
            -- Lock wait time: ~100ms average
            -- Throughput: 3000 transactions/second
            -- Risk: Non-repeatable reads possible

            -- REPEATABLE READ:
            -- Lock wait time: ~200ms average
            -- Throughput: 1500 transactions/second
            -- Risk: Phantom reads possible

            -- SERIALIZABLE:
            -- Lock wait time: ~500ms average
            -- Throughput: 500 transactions/second
            -- Risk: No anomalies, safest ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Recommendation:</strong> Use READ COMMITTED as default, SERIALIZABLE only for critical sections.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens to ACID during a network partition in distributed systems?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is the famous CAP theorem dilemma!</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>CAP Theorem states you can only guarantee 2 of 3:</strong></p>
                                <ul>
                                    <li><strong>C</strong>onsistency (ACID's C) - All nodes see same data</li>
                                    <li><strong>A</strong>vailability - System always responds</li>
                                    <li><strong>P</strong>artition tolerance - Works despite network failures</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>During Network Partition:</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Scenario: Two data centers lose connectivity

            -- ACID Approach (CP - Consistency + Partition tolerance):
            -- US Datacenter: Can't reach EU datacenter
            -- Decision: REJECT writes to maintain consistency
            -- Result: System UNAVAILABLE for cross-region writes ‚ùå
            -- Benefit: No inconsistent data ‚úì

            -- BASE Approach (AP - Availability + Partition tolerance):
            -- US Datacenter: Continues accepting writes
            -- EU Datacenter: Continues accepting writes independently
            -- Result: System AVAILABLE, data inconsistent temporarily ‚úì
            -- Eventually: Network restored, conflicts resolved ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Resolution Strategies:</strong></p>
                                <ol>
                                    <li><strong>Last-Write-Wins:</strong> Use timestamps to resolve conflicts</li>
                                    <li><strong>Version Vectors:</strong> Track causality, merge intelligently</li>
                                    <li><strong>Application-Level Resolution:</strong> Let application decide</li>
                                    <li><strong>CRDTs:</strong> Conflict-free replicated data types</li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Real-World Example:</strong></p>
                                <ul>
                                    <li><strong>Banking:</strong> Choose CP - reject transactions during partition (consistency critical)</li>
                                    <li><strong>Social Media:</strong> Choose AP - accept posts during partition (availability critical)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World ACID Examples
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Example 1: ATM Withdrawal (All ACID Properties)
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Authenticate user
            SELECT AccountID, Balance INTO @account, @balance
            FROM Accounts
            WHERE CardNumber = '1234-5678-9012-3456'
            AND PIN = ENCRYPT('1234')
            FOR UPDATE;  -- Lock account (Isolation) ‚úì

            -- Step 2: Check balance (Consistency)
            IF @balance >= 200 THEN
                
                -- Step 3: Deduct amount
                UPDATE Accounts 
                SET Balance = Balance - 200 
                WHERE AccountID = @account;
                -- Atomicity: Part of all-or-nothing ‚úì
                
                -- Step 4: Dispense cash (external action logged)
                INSERT INTO ATMDispensed 
                (ATMID, AccountID, Amount, Timestamp)
                VALUES ('ATM-001', @account, 200, NOW());
                -- Atomicity: Part of all-or-nothing ‚úì
                
                -- Step 5: Log transaction
                INSERT INTO TransactionLog 
                (AccountID, Type, Amount, Location)
                VALUES (@account, 'WITHDRAWAL', 200, 'ATM-001');
                -- Durability: Written to WAL ‚úì
                
                COMMIT;  -- All ACID properties enforced ‚úì
                -- ATM dispenses cash only after COMMIT
                
            ELSE
                ROLLBACK;  -- Insufficient funds
                -- Atomicity: Nothing changed ‚úì
            END IF;

            -- -----------------------------------------------------------
            -- Example 2: Airline Ticket Booking
            -- -----------------------------------------------------------

            START TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            -- Step 1: Check seat availability
            SELECT SeatsAvailable INTO @available
            FROM Flights
            WHERE FlightID = 'AA-101'
            AND Date = '2025-11-20'
            FOR UPDATE;  -- Prevent double booking (Isolation) ‚úì

            IF @available > 0 THEN
                
                -- Step 2: Create booking
                INSERT INTO Bookings 
                (BookingID, CustomerID, FlightID, SeatNumber, Price)
                VALUES ('BK-5001', 123, 'AA-101', '12A', 299.99);
                -- Consistency: Foreign keys checked ‚úì
                
                -- Step 3: Reduce available seats
                UPDATE Flights 
                SET SeatsAvailable = SeatsAvailable - 1
                WHERE FlightID = 'AA-101';
                -- Atomicity: With booking insertion ‚úì
                
                -- Step 4: Process payment
                INSERT INTO Payments 
                (BookingID, Amount, Status)
                VALUES ('BK-5001', 299.99, 'COMPLETED');
                
                -- Step 5: Send confirmation
                INSERT INTO EmailQueue 
                (CustomerID, Template, BookingID)
                VALUES (123, 'BOOKING_CONFIRM', 'BK-5001');
                
                COMMIT;  -- All changes permanent (Durability) ‚úì
                
            ELSE
                ROLLBACK;  -- No seats available
            END IF;

            -- -----------------------------------------------------------
            -- Example 3: E-Commerce Order Processing
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Validate inventory
            SELECT Stock INTO @stock
            FROM Products
            WHERE ProductID = 500
            FOR UPDATE;  -- Lock product row ‚úì

            IF @stock >= 2 THEN
                
                -- Step 2: Create order
                INSERT INTO Orders 
                (OrderID, CustomerID, TotalAmount, Status)
                VALUES (1001, 456, 150.00, 'PROCESSING');
                
                -- Step 3: Add order items
                INSERT INTO OrderItems 
                (OrderID, ProductID, Quantity, Price)
                VALUES (1001, 500, 2, 75.00);
                
                -- Step 4: Reduce inventory
                UPDATE Products 
                SET Stock = Stock - 2
                WHERE ProductID = 500;
                
                -- Step 5: Reserve shipping
                INSERT INTO ShippingQueue 
                (OrderID, Priority, Warehouse)
                VALUES (1001, 'STANDARD', 'WH-01');
                
                -- Step 6: Charge customer
                INSERT INTO Payments 
                (OrderID, CustomerID, Amount, Status)
                VALUES (1001, 456, 150.00, 'AUTHORIZED');
                
                -- All steps succeed together (Atomicity) ‚úì
                -- All constraints checked (Consistency) ‚úì
                -- Other orders can't interfere (Isolation) ‚úì
                
                COMMIT;  -- Order confirmed (Durability) ‚úì
                
            ELSE
                ROLLBACK;  -- Out of stock
            END IF;</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">ACID properties</span>
                        <span class="keyword-tag">Atomicity</span>
                        <span class="keyword-tag">Consistency</span>
                        <span class="keyword-tag">Isolation levels</span>
                        <span class="keyword-tag">Durability</span>
                        <span class="keyword-tag">Transaction management</span>
                        <span class="keyword-tag">Data integrity</span>
                        <span class="keyword-tag">Concurrent transactions</span>
                        <span class="keyword-tag">Write-Ahead Log</span>
                        <span class="keyword-tag">COMMIT</span>
                        <span class="keyword-tag">ROLLBACK</span>
                        <span class="keyword-tag">Locking mechanisms</span>
                        <span class="keyword-tag">Database reliability</span>
                        <span class="keyword-tag">MVCC</span>
                        <span class="keyword-tag">Two-Phase Commit</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 74: What is Atomicity in ACID? -->
            <div class="question-content" id="q74">
                <div class="question-header">
                    <h1 class="question-title">What is Atomicity in ACID Properties?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Atomicity</strong> ensures that a transaction is treated as a single, indivisible unit of work. Either ALL operations in the transaction are executed successfully, or NONE of them are. There is no partial execution.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The "All or Nothing" Principle:</strong></p>
                        <ul>
                            <li>If all operations succeed ‚Üí Transaction COMMITS (changes become permanent)</li>
                            <li>If any operation fails ‚Üí Transaction ROLLS BACK (all changes undone)</li>
                            <li>No middle ground: Database never left in partial state</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Real-World Analogy:</strong></p>
                        <p>Think of atomicity like a chemical atom (hence the name). An atom is indivisible - you can't split it and still have the same element. Similarly, a transaction is indivisible - you can't partially execute it.</p>
                        
                        <p style="margin-top: 1rem;">Or think of it like an online shopping purchase: Either you complete the entire checkout process (payment + inventory deduction + order creation), or nothing happens. You don't want payment to succeed but inventory to fail!</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Atomicity Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Example 1: Bank Transfer (Classic Example)
            -- -----------------------------------------------------------

            -- Initial State
            SELECT * FROM Accounts;
            -- AccountID | Balance
            -- A         | 1000
            -- B         | 500

            -- Transaction: Transfer $300 from A to B
            START TRANSACTION;

                -- Operation 1: Deduct from A
                UPDATE Accounts SET Balance = Balance - 300 WHERE AccountID = 'A';
                -- A now has 700
                
                -- Operation 2: Add to B
                UPDATE Accounts SET Balance = Balance + 300 WHERE AccountID = 'B';
                -- B now has 800

            COMMIT;  -- Both operations succeed ‚úì

            -- Final State
            SELECT * FROM Accounts;
            -- AccountID | Balance
            -- A         | 700
            -- B         | 800
            -- Total money: 700 + 800 = 1500 ‚úì (preserved)

            -- -----------------------------------------------------------
            -- What if Operation 2 Fails?
            -- -----------------------------------------------------------
            START TRANSACTION;

                UPDATE Accounts SET Balance = Balance - 300 WHERE AccountID = 'A';
                -- A now has 700 (temporarily)
                
                -- ERROR occurs! (e.g., B account locked, network failure, etc.)
                UPDATE Accounts SET Balance = Balance + 300 WHERE AccountID = 'B';
                -- ‚ùå FAILS!

            ROLLBACK;  -- Atomicity kicks in! ‚úì

            -- After Rollback
            SELECT * FROM Accounts;
            -- AccountID | Balance
            -- A         | 1000  ‚Üê Restored!
            -- B         | 500   ‚Üê Unchanged
            -- No money lost or created! ‚úì

            -- -----------------------------------------------------------
            -- Example 2: E-Commerce Order
            -- -----------------------------------------------------------

            -- Scenario: Customer places order for 2 items

            START TRANSACTION;

                -- Step 1: Create order
                INSERT INTO Orders (OrderID, CustomerID, Total) 
                VALUES (1001, 5, 150.00);
                
                -- Step 2: Add order items
                INSERT INTO OrderItems (OrderID, ProductID, Quantity) 
                VALUES (1001, 101, 1);
                
                INSERT INTO OrderItems (OrderID, ProductID, Quantity) 
                VALUES (1001, 102, 1);
                
                -- Step 3: Update inventory
                UPDATE Products SET Stock = Stock - 1 WHERE ProductID = 101;
                UPDATE Products SET Stock = Stock - 1 WHERE ProductID = 102;
                
                -- Step 4: Process payment
                INSERT INTO Payments (OrderID, Amount, Status) 
                VALUES (1001, 150.00, 'Completed');

            COMMIT;  -- All 7 operations succeed ‚úì

            -- If ANY step fails:
            -- - Order not created
            -- - Inventory not reduced
            -- - Payment not processed
            -- All or nothing! ‚úì

            -- -----------------------------------------------------------
            -- Example 3: Atomicity with Constraints
            -- -----------------------------------------------------------

            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100),
                DepartmentID INT,
                Salary DECIMAL(10,2) CHECK (Salary > 0)
            );

            START TRANSACTION;

                INSERT INTO Employees VALUES (1, 'John', 1, 50000);   -- ‚úì
                INSERT INTO Employees VALUES (2, 'Jane', 2, 60000);   -- ‚úì
                INSERT INTO Employees VALUES (3, 'Bob', 3, -5000);    -- ‚ùå Violates CHECK constraint!

            ROLLBACK;  -- Atomicity: ALL inserts rolled back

            SELECT * FROM Employees;
            -- Result: Empty table
            -- John and Jane NOT inserted (even though they were valid)
            -- Because Bob violated constraint, entire transaction fails ‚úì

            -- -----------------------------------------------------------
            -- Example 4: System Crash During Transaction
            -- -----------------------------------------------------------

            -- User initiates transfer
            START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';
            -- A: 1000 ‚Üí 500

            -- üí• SYSTEM CRASHES HERE!
            -- (Power outage, hardware failure, process killed)

            -- Server comes back online...
            -- Database recovery process runs...

            SELECT * FROM Accounts WHERE AccountID = 'A';
            -- AccountID | Balance
            -- A         | 1000  ‚Üê Transaction rolled back automatically! ‚úì

            -- How? Transaction log shows:
            -- - BEGIN TRANSACTION
            -- - UPDATE A (but no COMMIT)
            -- - Recovery sees incomplete transaction ‚Üí ROLLBACK

            -- -----------------------------------------------------------
            -- Example 5: Explicit ROLLBACK
            -- -----------------------------------------------------------

            START TRANSACTION;

            UPDATE Products SET Stock = Stock - 1 WHERE ProductID = 101;

            -- Application logic checks something
            IF (some_condition == false) THEN
                ROLLBACK;  -- Developer decides to abort
                -- Product stock restored ‚úì
            ELSE
                COMMIT;
            END IF;

            -- -----------------------------------------------------------
            -- Example 6: Savepoints (Partial Rollback)
            -- -----------------------------------------------------------

            START TRANSACTION;

            INSERT INTO Orders VALUES (1, 100, '2024-01-01');
            SAVEPOINT sp1;  -- Mark this point

            INSERT INTO OrderItems VALUES (1, 1, 5);
            SAVEPOINT sp2;  -- Another checkpoint

            INSERT INTO OrderItems VALUES (1, 2, 3);
            -- Oops, this was wrong!

            ROLLBACK TO SAVEPOINT sp2;  -- Undo last INSERT only
            -- Order and first item still exist
            -- Only the second item is rolled back

            COMMIT;  -- Commit order + first item ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-cogs"></i>
                        How DBMS Implements Atomicity
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Transaction Log (Write-Ahead Logging - WAL)</h4>
                        <p>Before any change is made to the database, it's first written to a transaction log.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Transaction Log Entries:
            [T1] BEGIN TRANSACTION
            [T1] UPDATE Accounts SET Balance=700 WHERE AccountID='A' (OLD: 1000, NEW: 700)
            [T1] UPDATE Accounts SET Balance=800 WHERE AccountID='B' (OLD: 500, NEW: 800)
            [T1] COMMIT

            -- If crash occurs before COMMIT:
            -- Recovery sees no COMMIT ‚Üí Rolls back using OLD values
            -- If crash occurs after COMMIT:
            -- Recovery sees COMMIT ‚Üí Ensures changes applied</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Shadow Paging</h4>
                        <p>Make changes to a copy of data pages. Original remains untouched until COMMIT.</p>
                        <ul>
                            <li>Create shadow copy of affected pages</li>
                            <li>Make changes to shadow pages</li>
                            <li>On COMMIT: Atomically switch pointers to shadow pages</li>
                            <li>On ROLLBACK: Discard shadow pages, keep original</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Two-Phase Commit (Distributed Transactions)</h4>
                        <p>For transactions spanning multiple databases:</p>
                        <ol>
                            <li><strong>Prepare Phase:</strong> Ask all participants "can you commit?"</li>
                            <li><strong>Commit Phase:</strong> If all say yes, commit everywhere; if any says no, rollback everywhere</li>
                        </ol>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. Undo/Redo Logs</h4>
                        <ul>
                            <li><strong>UNDO log:</strong> Stores old values (for rollback)</li>
                            <li><strong>REDO log:</strong> Stores new values (for recovery after crash)</li>
                            <li>Together ensure atomicity even with crashes</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        What Violates Atomicity?
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Bad Example 1: Manual Commit After Each Step</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- ‚ùå WRONG: Committing after each operation
            UPDATE Accounts SET Balance = Balance - 300 WHERE AccountID = 'A';
            COMMIT;  -- ‚ùå First operation committed

            UPDATE Accounts SET Balance = Balance + 300 WHERE AccountID = 'B';
            -- ERROR occurs here!
            -- Problem: First update already committed!
            -- A lost $300, B didn't receive it
            -- Atomicity violated! ‚ùå</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Bad Example 2: Auto-Commit Mode</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Many database clients enable auto-commit by default
            -- Each statement auto-commits immediately

            SET AUTOCOMMIT = 1;  -- ‚ùå Auto-commit ON

            UPDATE Accounts SET Balance = Balance - 300 WHERE AccountID = 'A';
            -- Immediately committed! ‚ùå

            UPDATE Accounts SET Balance = Balance + 300 WHERE AccountID = 'B';
            -- Fails! But first update already committed ‚ùå

            -- SOLUTION: Disable auto-commit for multi-step operations
            SET AUTOCOMMIT = 0;  -- ‚úì Manual transaction control
            START TRANSACTION;
            -- ... operations ...
            COMMIT;</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Bad Example 3: DDL Statements in Transaction</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- In MySQL, DDL statements cause implicit COMMIT
            START TRANSACTION;

            INSERT INTO Orders VALUES (1, 100, '2024-01-01');
            -- Order inserted but not committed yet

            ALTER TABLE Orders ADD COLUMN Status VARCHAR(20);
            -- ‚ùå Implicit COMMIT happens here!
            -- Previous INSERT now committed

            -- Later error:
            INSERT INTO OrderItems VALUES (1, 999, 5);  -- Invalid product
            -- Fails, but Order already committed! ‚ùå
            -- Atomicity lost!</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between atomicity and consistency?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>They're related but different:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Atomicity</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Consistency</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Focus</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transaction execution</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Database rules/constraints</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Question</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Did ALL operations execute?</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Are ALL constraints satisfied?</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Example</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Both debit AND credit happen</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Total money stays constant</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Violation</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Partial execution</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Constraint violation</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Working Together:</strong></p>
                                <ul>
                                    <li>Atomicity ensures ALL operations execute</li>
                                    <li>Consistency ensures those operations don't violate rules</li>
                                    <li>Both needed for correct transactions</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can a transaction be atomic but still fail?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Atomicity doesn't guarantee success - it guarantees all-or-nothing.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Transaction is atomic (all-or-nothing) but fails
            START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 1000 WHERE AccountID = 'A';
            -- A has only $500! Insufficient funds

            UPDATE Accounts SET Balance = Balance + 1000 WHERE AccountID = 'B';

            -- Check constraint or application logic detects error
            ROLLBACK;  -- ‚úì Atomic: Both operations undone

            -- Result: Transaction failed, but atomically
            -- A still has $500 (not -$500)
            -- B didn't receive $1000
            -- Database in valid state ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Atomicity guarantees:</strong></p>
                                <ul>
                                    <li>‚úì All operations execute, or none do</li>
                                    <li>‚úì No partial state</li>
                                    <li>‚úó Does NOT guarantee transaction will succeed</li>
                                    <li>‚úó Transactions can still fail (and roll back atomically)</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens to atomicity in nested transactions?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Nested transactions are tricky! Most databases don't truly support them.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- What you might WANT:
            START TRANSACTION;  -- Outer transaction
                
                INSERT INTO Orders VALUES (1, 100, '2024-01-01');
                
                START TRANSACTION;  -- Inner transaction
                    INSERT INTO OrderItems VALUES (1, 1, 5);
                COMMIT;  -- Inner commits
                
                -- Error in outer transaction
                ROLLBACK;  -- Outer rolls back

            -- Question: Is inner transaction rolled back too?

            -- Reality in most databases (MySQL, PostgreSQL):
            -- - Only ONE transaction at a time
            -- - Inner START TRANSACTION ignored or causes error
            -- - ROLLBACK affects everything since first BEGIN

            -- Solution: Use SAVEPOINTS instead
            START TRANSACTION;
                
                INSERT INTO Orders VALUES (1, 100, '2024-01-01');
                SAVEPOINT sp1;  -- Mark point
                
                INSERT INTO OrderItems VALUES (1, 1, 5);
                -- Error here
                ROLLBACK TO SAVEPOINT sp1;  -- Undo OrderItems only
                -- Order still exists
                
            COMMIT;  -- Commit Order without OrderItems</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Atomicity</span>
                        <span class="keyword-tag">All or Nothing</span>
                        <span class="keyword-tag">COMMIT</span>
                        <span class="keyword-tag">ROLLBACK</span>
                        <span class="keyword-tag">Transaction Log</span>
                        <span class="keyword-tag">Write-Ahead Logging</span>
                        <span class="keyword-tag">Savepoints</span>
                        <span class="keyword-tag">Indivisible</span>
                        <span class="keyword-tag">Partial Execution</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 75: What is Consistency in ACID? -->
            <div class="question-content" id="q75">
                <div class="question-header">
                    <h1 class="question-title">What is Consistency in ACID Properties?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Consistency</strong> ensures that a transaction brings the database from one valid state to another valid state. All integrity constraints, business rules, and data validation rules must be satisfied before and after the transaction.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The "Valid State to Valid State" Principle:</strong></p>
                        <ul>
                            <li>Before transaction: Database in valid state (all rules satisfied)</li>
                            <li>After transaction: Database still in valid state (all rules still satisfied)</li>
                            <li>During transaction: Temporary violations allowed, but must be fixed before COMMIT</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Types of Consistency Rules:</strong></p>
                        <ul>
                            <li><strong>Database Constraints:</strong> Primary keys, foreign keys, UNIQUE, NOT NULL, CHECK</li>
                            <li><strong>Business Rules:</strong> Account balance ‚â• 0, total debits = total credits</li>
                            <li><strong>Referential Integrity:</strong> References point to valid records</li>
                            <li><strong>Domain Integrity:</strong> Values within allowed ranges</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Real-World Analogy:</strong></p>
                        <p>Think of consistency like a legal contract. Before signing (COMMIT), all terms must be valid and complete. You can't have a partially valid contract - either everything is in order, or the contract is void.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Consistency Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Example 1: Maintaining Total Balance (Business Rule)
            -- -----------------------------------------------------------

            -- Initial State (Consistent)
            SELECT * FROM Accounts;
            -- AccountID | Balance
            -- A         | 1000
            -- B         | 500
            -- Total: 1500 ‚úì

            -- Consistency Rule: Total money must remain constant

            START TRANSACTION;

                -- Transfer $300 from A to B
                UPDATE Accounts SET Balance = Balance - 300 WHERE AccountID = 'A';
                -- Temporarily: A=700, B=500, Total=1200 (inconsistent during transaction)
                
                UPDATE Accounts SET Balance = Balance + 300 WHERE AccountID = 'B';
                -- Now: A=700, B=800, Total=1500 ‚úì (consistent again)

            COMMIT;

            -- Final State (Consistent)
            -- AccountID | Balance
            -- A         | 700
            -- B         | 800
            -- Total: 1500 ‚úì Consistency maintained!

            -- -----------------------------------------------------------
            -- Example 2: CHECK Constraint Enforcement
            -- -----------------------------------------------------------

            CREATE TABLE Products (
                ProductID INT PRIMARY KEY,
                ProductName VARCHAR(100),
                Price DECIMAL(10,2) CHECK (Price > 0),  -- Consistency rule
                Stock INT CHECK (Stock >= 0)             -- Consistency rule
            );

            -- Valid transaction (maintains consistency)
            INSERT INTO Products VALUES (1, 'Laptop', 999.99, 10);
            -- ‚úì Price > 0, Stock >= 0
            -- Consistency maintained ‚úì

            -- Invalid transaction (violates consistency)
            INSERT INTO Products VALUES (2, 'Mouse', -25.00, 5);
            -- ‚ùå ERROR: Check constraint violated (Price must be > 0)
            -- Transaction rolled back
            -- Database remains consistent ‚úì

            -- -----------------------------------------------------------
            -- Example 3: Foreign Key Constraint (Referential Integrity)
            -- -----------------------------------------------------------

            CREATE TABLE Departments (
                DepartmentID INT PRIMARY KEY,
                DepartmentName VARCHAR(100)
            );

            CREATE TABLE Employees (
                EmployeeID INT PRIMARY KEY,
                Name VARCHAR(100),
                DepartmentID INT,
                FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID)
            );

            INSERT INTO Departments VALUES (1, 'IT'), (2, 'HR');

            -- Valid transaction (maintains consistency)
            INSERT INTO Employees VALUES (1, 'John', 1);
            -- ‚úì DepartmentID=1 exists in Departments
            -- Consistency maintained ‚úì

            -- Invalid transaction (violates consistency)
            INSERT INTO Employees VALUES (2, 'Jane', 999);
            -- ‚ùå ERROR: Foreign key constraint violated
            -- DepartmentID=999 doesn't exist in Departments
            -- Transaction rolled back
            -- Database remains consistent ‚úì

            -- -----------------------------------------------------------
            -- Example 4: NOT NULL Constraint
            -- -----------------------------------------------------------

            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                CustomerID INT NOT NULL,  -- Consistency rule
                OrderDate DATE NOT NULL,   -- Consistency rule
                TotalAmount DECIMAL(10,2)
            );

            -- Valid transaction
            INSERT INTO Orders VALUES (1, 100, '2024-01-01', 150.00);
            -- ‚úì All NOT NULL columns have values
            -- Consistency maintained ‚úì

            -- Invalid transaction
            INSERT INTO Orders VALUES (2, NULL, '2024-01-02', 200.00);
            -- ‚ùå ERROR: CustomerID cannot be NULL
            -- Transaction rolled back
            -- Database remains consistent ‚úì

            -- -----------------------------------------------------------
            -- Example 5: UNIQUE Constraint
            -- -----------------------------------------------------------

            CREATE TABLE Users (
                UserID INT PRIMARY KEY,
                Username VARCHAR(50) UNIQUE,  -- Consistency rule
                Email VARCHAR(100) UNIQUE      -- Consistency rule
            );

            INSERT INTO Users VALUES (1, 'john_doe', 'john@example.com');

            -- Invalid transaction (violates consistency)
            INSERT INTO Users VALUES (2, 'john_doe', 'jane@example.com');
            -- ‚ùå ERROR: Duplicate username
            -- Transaction rolled back
            -- Database remains consistent ‚úì

            -- -----------------------------------------------------------
            -- Example 6: Multiple Constraints Together
            -- -----------------------------------------------------------

            CREATE TABLE BankAccounts (
                AccountID VARCHAR(20) PRIMARY KEY,
                CustomerID INT NOT NULL,
                Balance DECIMAL(15,2) CHECK (Balance >= 0),
                AccountType ENUM('Savings', 'Checking') NOT NULL,
                CreatedDate DATE NOT NULL,
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
            );

            -- Consistency Rules:
            -- 1. AccountID is unique (PRIMARY KEY)
            -- 2. CustomerID must exist (FOREIGN KEY)
            -- 3. CustomerID cannot be NULL (NOT NULL)
            -- 4. Balance cannot be negative (CHECK)
            -- 5. AccountType must be valid enum
            -- 6. CreatedDate cannot be NULL

            START TRANSACTION;

                -- All consistency rules satisfied ‚úì
                INSERT INTO BankAccounts VALUES 
                ('ACC001', 1, 1000.00, 'Savings', '2024-01-01');
                
                COMMIT;

            -- What if ANY rule is violated?
            START TRANSACTION;

                INSERT INTO BankAccounts VALUES 
                ('ACC002', 999, -500.00, 'Invalid', NULL);
                -- Violates: Foreign key (999), CHECK (negative), ENUM (Invalid), NOT NULL
                -- ‚ùå Transaction fails

            ROLLBACK;  -- Database remains consistent ‚úì

            -- -----------------------------------------------------------
            -- Example 7: Business Logic Consistency
            -- -----------------------------------------------------------

            -- Business Rule: Cannot withdraw more than account balance

            CREATE TABLE Transactions (
                TransactionID INT PRIMARY KEY AUTO_INCREMENT,
                AccountID VARCHAR(20),
                Amount DECIMAL(15,2),
                TransactionType ENUM('Deposit', 'Withdrawal'),
                TransactionDate DATETIME
            );

            -- Enforce business rule with trigger or application logic
            START TRANSACTION;

                -- Check current balance
                SELECT Balance INTO @current_balance 
                FROM BankAccounts 
                WHERE AccountID = 'ACC001';
                
                -- Attempting to withdraw $1500 from account with $1000
                SET @withdrawal_amount = 1500;
                
                IF @withdrawal_amount > @current_balance THEN
                    -- Consistency violation!
                    ROLLBACK;  -- Reject transaction
                    SIGNAL SQLSTATE '45000' 
                    SET MESSAGE_TEXT = 'Insufficient funds';
                ELSE
                    -- Update balance
                    UPDATE BankAccounts 
                    SET Balance = Balance - @withdrawal_amount 
                    WHERE AccountID = 'ACC001';
                    
                    -- Record transaction
                    INSERT INTO Transactions VALUES 
                    (NULL, 'ACC001', @withdrawal_amount, 'Withdrawal', NOW());
                    
                    COMMIT;  -- Consistency maintained ‚úì
                END IF;

            -- -----------------------------------------------------------
            -- Example 8: Temporary Inconsistency During Transaction
            -- -----------------------------------------------------------

            -- Multiple steps can create temporary inconsistency
            -- But must be consistent at COMMIT time

            START TRANSACTION;

                -- Step 1: Delete department
                DELETE FROM Departments WHERE DepartmentID = 1;
                -- Temporarily inconsistent: Employees reference deleted dept
                
                -- Step 2: Reassign employees
                UPDATE Employees SET DepartmentID = 2 WHERE DepartmentID = 1;
                -- Now consistent again!

            COMMIT;  -- Final state is consistent ‚úì

            -- Database allows temporary inconsistency WITHIN transaction
            -- But enforces consistency at COMMIT time</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        How DBMS Enforces Consistency
                    </div>
                    
                    <div class="explanation-text">
                        <ol>
                            <li><strong>Constraint Checking:</strong>
                                <ul>
                                    <li>Before COMMIT, DBMS validates all constraints</li>
                                    <li>PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK, NOT NULL</li>
                                    <li>If any constraint violated, transaction rolled back</li>
                                </ul>
                            </li>
                            
                            <li><strong>Deferred Constraint Checking:</strong>
                                <ul>
                                    <li>Some constraints can be checked at end of transaction</li>
                                    <li>Allows temporary violations during transaction</li>
                                    <li>Must be consistent before COMMIT</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Deferred constraints (PostgreSQL)
            START TRANSACTION;

            SET CONSTRAINTS ALL DEFERRED;  -- Check at end of transaction

            -- Can temporarily violate constraints
            DELETE FROM Departments WHERE DepartmentID = 1;
            -- Employees still reference dept 1 (temporarily inconsistent)

            UPDATE Employees SET DepartmentID = 2 WHERE DepartmentID = 1;
            -- Fixed before COMMIT

            COMMIT;  -- Constraints checked now, transaction succeeds ‚úì</code></pre>
                                </div>
                            </li>
                            
                            <li><strong>Triggers for Complex Rules:</strong>
                                <ul>
                                    <li>Enforce business logic constraints</li>
                                    <li>Automatically execute on INSERT/UPDATE/DELETE</li>
                                    <li>Can prevent inconsistent state</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Trigger to enforce business rule
            DELIMITER //
            CREATE TRIGGER check_sufficient_funds
            BEFORE UPDATE ON BankAccounts
            FOR EACH ROW
            BEGIN
                IF NEW.Balance < 0 THEN
                    SIGNAL SQLSTATE '45000'
                    SET MESSAGE_TEXT = 'Insufficient funds';
                END IF;
            END //
            DELIMITER ;

            -- Now balance can never be negative ‚úì</code></pre>
                                </div>
                            </li>
                            
                            <li><strong>Cascading Actions:</strong>
                                <ul>
                                    <li>ON DELETE CASCADE, ON UPDATE CASCADE</li>
                                    <li>Automatically maintains referential integrity</li>
                                    <li>Ensures consistency across related tables</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Consistency vs. Application Logic
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Two Levels of Consistency:</strong></p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">1. Database-Level Consistency (DBMS Responsibility)</h4>
                        <ul>
                            <li>Enforced by constraints, triggers, referential integrity</li>
                            <li>Cannot be bypassed</li>
                            <li>Guaranteed by the database</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">2. Application-Level Consistency (Developer Responsibility)</h4>
                        <ul>
                            <li>Business logic rules</li>
                            <li>Complex validation</li>
                            <li>Multi-table constraints</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Database-level: Enforced by DBMS
            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                TotalAmount DECIMAL(10,2) CHECK (TotalAmount > 0)  -- DB enforces ‚úì
            );

            -- Application-level: Developer must enforce
            -- Business rule: "Total order amount must equal sum of item prices"
            -- This requires application logic to calculate and validate

            -- Python example:
            def create_order(items):
                total = sum(item.price * item.quantity for item in items)
                
                # Application enforces consistency
                if total <= 0:
                    raise ValueError("Order total must be positive")
                
                # Insert order with calculated total
                db.execute(
                    "INSERT INTO Orders VALUES (?, ?)",
                    (order_id, total)
                )
                
                # Insert items
                for item in items:
                    db.execute(
                        "INSERT INTO OrderItems VALUES (?, ?, ?, ?)",
                        (order_id, item.id, item.quantity, item.price)
                    )</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Best Practice:</strong></p>
                        <ul>
                            <li>‚úì Put as many rules as possible in database constraints</li>
                            <li>‚úì Use triggers for complex DB-level rules</li>
                            <li>‚úì Application validates before sending to DB</li>
                            <li>‚úì Database is final enforcement layer</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can a database be atomically consistent but logically inconsistent?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Atomicity doesn't guarantee logical consistency.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Transaction is atomic (all-or-nothing) but violates business logic

            START TRANSACTION;

                -- Transfer $500 from A to B
                UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';
                UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';

            COMMIT;  -- ‚úì Atomic: Both operations executed

            -- But what if A only had $300?
            -- Transaction succeeded (atomic)
            -- But A now has -$200 (logically inconsistent!)
            -- Violates business rule: Balance must be >= 0

            -- Solution: Add CHECK constraint
            ALTER TABLE Accounts ADD CONSTRAINT chk_balance CHECK (Balance >= 0);

            -- Now the transaction would fail (maintaining consistency) ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Key Point:</strong></p>
                                <ul>
                                    <li>Atomicity ensures operations complete together</li>
                                    <li>Consistency ensures those operations are valid</li>
                                    <li>Both are needed for correct transactions</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the performance cost of enforcing consistency?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Consistency checks add overhead:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Constraint Type</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Performance Impact</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>NOT NULL</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Minimal (simple check)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>CHECK</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Low (evaluate expression)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>UNIQUE</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Medium (index lookup)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>FOREIGN KEY</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">High (lookup in another table)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Triggers</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Variable (depends on trigger logic)</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>When to relax consistency:</strong></p>
                                <ul>
                                    <li>‚ö† Bulk data loading (disable constraints temporarily)</li>
                                    <li>‚ö† Read replicas (eventual consistency acceptable)</li>
                                    <li>‚ö† Caching layers (stale data tolerable)</li>
                                    <li>‚úì But always maintain consistency in master database!</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How is consistency different in NoSQL databases?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>NoSQL databases often relax consistency for performance/scalability:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Database</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Consistency Model</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>RDBMS</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Strong consistency (ACID)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>MongoDB</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Configurable (strong or eventual)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Cassandra</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Eventual consistency (BASE)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>DynamoDB</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Eventual or strong (configurable)</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Eventual Consistency Example:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- User updates profile in Cassandra
            UPDATE users SET email = 'new@email.com' WHERE user_id = 123;

            -- Read immediately after:
            SELECT email FROM users WHERE user_id = 123;
            -- May return old email! (not yet propagated to all replicas)

            -- Read few seconds later:
            SELECT email FROM users WHERE user_id = 123;
            -- Returns new email ‚úì (eventually consistent)</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Trade-off:</strong> NoSQL sacrifices immediate consistency for higher availability and partition tolerance (CAP theorem).</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Consistency</span>
                        <span class="keyword-tag">Valid State</span>
                        <span class="keyword-tag">Integrity Constraints</span>
                        <span class="keyword-tag">Business Rules</span>
                        <span class="keyword-tag">Foreign Keys</span>
                        <span class="keyword-tag">CHECK Constraints</span>
                        <span class="keyword-tag">Referential Integrity</span>
                        <span class="keyword-tag">Constraint Validation</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 76: What is Isolation in ACID? -->
            <div class="question-content" id="q76">
                <div class="question-header">
                    <h1 class="question-title">What is Isolation in ACID Properties?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 11 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Isolation</strong> ensures that concurrent transactions execute independently without interfering with each other. Each transaction should appear to execute in isolation, as if it's the only transaction running in the system.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The "Independent Execution" Principle:</strong></p>
                        <ul>
                            <li>Multiple transactions can run simultaneously (concurrency)</li>
                            <li>But each transaction is isolated from others</li>
                            <li>Intermediate states of one transaction invisible to others</li>
                            <li>Final result same as if transactions ran serially (one after another)</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why Isolation Matters:</strong></p>
                        <ul>
                            <li><strong>Prevents Interference:</strong> Transactions don't corrupt each other's data</li>
                            <li><strong>Predictability:</strong> Same results whether transactions run together or separately</li>
                            <li><strong>Data Integrity:</strong> No lost updates, dirty reads, or inconsistent results</li>
                            <li><strong>Multi-User Support:</strong> Many users can work simultaneously safely</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Real-World Analogy:</strong></p>
                        <p>Think of isolation like ATM transactions. When two people withdraw money from the same account simultaneously, each ATM transaction is isolated - they don't see each other's intermediate states. The final balance is correct as if transactions happened one after another.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Problems Without Isolation
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">1. Dirty Read (Reading Uncommitted Data)</h4>
                        <p>Transaction reads data written by another transaction that hasn't committed yet.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Initial: Account A has $1000

            -- Transaction 1 (T1)
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'A';
            -- A now has $1500 (uncommitted)

            -- Transaction 2 (T2) - runs concurrently
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Reads $1500 (dirty read!) ‚ùå
            -- T2 makes decisions based on this value

            -- T1 fails and rolls back
            ROLLBACK;  -- A back to $1000

            -- T2's decision was based on WRONG data ($1500)!
            -- T2 processed with invalid information ‚ùå</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">2. Non-Repeatable Read (Inconsistent Reads)</h4>
                        <p>Transaction reads same row twice but gets different values because another transaction modified it.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Transaction 1 (T1)
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Reads $1000

            -- ... T1 does some processing ...

            -- Transaction 2 (T2) - runs concurrently
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A';
            COMMIT;  -- Changes committed

            -- T1 reads again
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Now reads $1500! ‚ùå

            -- Same transaction, same query, different result!
            -- Non-repeatable read problem ‚ùå</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">3. Phantom Read (New Rows Appear)</h4>
                        <p>Transaction executes same query twice but second execution returns additional rows.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Transaction 1 (T1)
            START TRANSACTION;
            SELECT COUNT(*) FROM Accounts WHERE Balance > 1000;
            -- Returns 5 accounts

            -- Transaction 2 (T2) - runs concurrently
            START TRANSACTION;
            INSERT INTO Accounts VALUES ('F', 2000);
            COMMIT;

            -- T1 executes same query again
            SELECT COUNT(*) FROM Accounts WHERE Balance > 1000;
            -- Now returns 6 accounts! ‚ùå

            -- New row "appeared" (phantom read) ‚ùå</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">4. Lost Update</h4>
                        <p>Two transactions read same data, modify it, both commit - one update is lost.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Initial: Product stock = 10

            -- Transaction 1 (T1)
            START TRANSACTION;
            SELECT Stock FROM Products WHERE ProductID = 1;  -- Reads 10
            -- Customer buys 2 items
            UPDATE Products SET Stock = 10 - 2 WHERE ProductID = 1;  -- Sets to 8

            -- Transaction 2 (T2) - runs concurrently
            START TRANSACTION;
            SELECT Stock FROM Products WHERE ProductID = 1;  -- Reads 10 (before T1 commits)
            -- Customer buys 3 items
            UPDATE Products SET Stock = 10 - 3 WHERE ProductID = 1;  -- Sets to 7

            -- Both commit
            COMMIT;  -- T1
            COMMIT;  -- T2

            -- Final stock: 7 ‚ùå
            -- Should be: 10 - 2 - 3 = 5 ‚úì
            -- T1's update lost! ‚ùå</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Isolation Levels
                    </div>
                    
                    <div class="explanation-text">
                        <p>SQL standard defines four isolation levels with different trade-offs between consistency and performance:</p>
                        
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <tr style="background: #dbeafe;">
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;color :black">Isolation Level</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;color :black">Dirty Read</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;color :black">Non-Repeatable</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;color :black">Phantom</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;color :black">Performance</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ UNCOMMITTED</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color :black">Possible ‚ùå</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color :black">Possible ‚ùå</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color :black">Possible ‚ùå</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color :black">Fastest ‚ö°</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ COMMITTED</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color :black">Prevented ‚úì</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color :black">Possible ‚ùå</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color :black">Possible ‚ùå</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color :black">Fast</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>REPEATABLE READ</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color :black">Prevented ‚úì</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color :black">Prevented ‚úì</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color :black">Possible ‚ùå</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color :black">Medium</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>SERIALIZABLE</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color :black">Prevented ‚úì</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color :black">Prevented ‚úì</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color :black">Prevented ‚úì</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color :black">Slowest üêå</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Isolation Level Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- 1. READ UNCOMMITTED (Lowest Isolation)
            -- -----------------------------------------------------------
            -- Allows dirty reads, non-repeatable reads, phantom reads
            -- Fastest but least safe

            -- Set isolation level
            SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

            START TRANSACTION;
                SELECT Balance FROM Accounts WHERE AccountID = 'A';
                -- Can read uncommitted data from other transactions! ‚ùå
            COMMIT;

            -- Use Case: Approximate analytics where exact values don't matter

            -- -----------------------------------------------------------
            -- 2. READ COMMITTED (Default in Most Databases)
            -- -----------------------------------------------------------
            -- Prevents dirty reads
            -- Allows non-repeatable reads and phantom reads

            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;

            START TRANSACTION;
                SELECT Balance FROM Accounts WHERE AccountID = 'A';
                -- Only sees committed data ‚úì
                
                -- Another transaction modifies and commits...
                
                SELECT Balance FROM Accounts WHERE AccountID = 'A';
                -- May get different value (non-repeatable read) ‚ö†
            COMMIT;

            -- Use Case: Most OLTP applications, web apps

            -- -----------------------------------------------------------
            -- 3. REPEATABLE READ (MySQL Default for InnoDB)
            -- -----------------------------------------------------------
            -- Prevents dirty reads and non-repeatable reads
            -- Allows phantom reads

            SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;

            START TRANSACTION;
                SELECT Balance FROM Accounts WHERE AccountID = 'A';
                -- Reads $1000
                
                -- Another transaction updates A to $1500 and commits
                
                SELECT Balance FROM Accounts WHERE AccountID = 'A';
                -- Still reads $1000 ‚úì (repeatable read guaranteed)
                
                -- But phantom reads possible:
                SELECT COUNT(*) FROM Accounts WHERE Balance > 500;
                -- Count may change if new accounts added
            COMMIT;

            -- Use Case: Financial reports, analytics requiring consistency

            -- -----------------------------------------------------------
            -- 4. SERIALIZABLE (Highest Isolation)
            -- -----------------------------------------------------------
            -- Prevents all anomalies
            -- Transactions execute as if serial (one after another)

            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            START TRANSACTION;
                SELECT SUM(Balance) FROM Accounts WHERE DepartmentID = 1;
                -- Result guaranteed consistent
                -- No other transaction can modify these accounts until commit
                
                -- Other transactions may be blocked/wait
            COMMIT;

            -- Use Case: Critical financial transactions, inventory management

            -- -----------------------------------------------------------
            -- Example: Lost Update Prevention
            -- -----------------------------------------------------------

            -- Problem: Two users book last seat simultaneously
            -- Seat availability = 1

            -- ‚ùå WITHOUT proper isolation (READ COMMITTED)
            -- Transaction 1
            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
            START TRANSACTION;
            SELECT Availability FROM Seats WHERE SeatID = '12A';  -- Reads 1
            -- User thinks seat available, proceeds to book
            UPDATE Seats SET Availability = 0 WHERE SeatID = '12A';
            COMMIT;

            -- Transaction 2 (concurrent)
            START TRANSACTION;
            SELECT Availability FROM Seats WHERE SeatID = '12A';  -- Also reads 1!
            -- Both users see availability, both book!
            UPDATE Seats SET Availability = 0 WHERE SeatID = '12A';
            COMMIT;

            -- Result: Double booking! ‚ùå

            -- ‚úì WITH proper isolation (SERIALIZABLE or SELECT FOR UPDATE)
            -- Transaction 1
            START TRANSACTION;
            SELECT Availability FROM Seats WHERE SeatID = '12A' FOR UPDATE;
            -- Locks the row ‚úì
            -- Returns 1

            UPDATE Seats SET Availability = 0 WHERE SeatID = '12A';
            COMMIT;

            -- Transaction 2 (concurrent)
            START TRANSACTION;
            SELECT Availability FROM Seats WHERE SeatID = '12A' FOR UPDATE;
            -- WAITS for Transaction 1 to complete
            -- Once T1 commits, T2 reads 0
            -- T2 sees no availability, cannot book ‚úì
            COMMIT;

            -- Result: No double booking ‚úì

            -- -----------------------------------------------------------
            -- Example: Banking Transfer with Proper Isolation
            -- -----------------------------------------------------------

            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            -- Transaction 1: Transfer $500 from A to B
            START TRANSACTION;
                SELECT Balance FROM Accounts WHERE AccountID = 'A' FOR UPDATE;
                -- Lock A
                
                UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';
                UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';
            COMMIT;

            -- Transaction 2: Transfer $300 from A to C (concurrent)
            START TRANSACTION;
                SELECT Balance FROM Accounts WHERE AccountID = 'A' FOR UPDATE;
                -- WAITS for T1 to release lock on A
                
                -- After T1 commits, T2 proceeds
                UPDATE Accounts SET Balance = Balance - 300 WHERE AccountID = 'A';
                UPDATE Accounts SET Balance = Balance + 300 WHERE AccountID = 'C';
            COMMIT;

            -- Result: Both transfers execute correctly, no lost updates ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lock"></i>
                        How Isolation is Implemented
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Locking Mechanisms</h4>
                        <ul>
                            <li><strong>Shared Lock (S-lock):</strong> Multiple transactions can read, none can write</li>
                            <li><strong>Exclusive Lock (X-lock):</strong> Only one transaction can read/write</li>
                            <li><strong>Lock duration:</strong> Held until transaction commits/rolls back</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Multi-Version Concurrency Control (MVCC)</h4>
                        <p>Used by PostgreSQL, MySQL InnoDB, Oracle:</p>
                        <ul>
                            <li>Each transaction sees a snapshot of database</li>
                            <li>Multiple versions of rows maintained</li>
                            <li>Readers don't block writers, writers don't block readers</li>
                            <li>Better concurrency than locking</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- MVCC Example:
            -- Row has: Current Value = $1000, Version = 5

            -- T1 starts (sees version 5)
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Reads $1000 (version 5)

            -- T2 updates (creates version 6)
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A';
            -- Creates new version: Value = $1500, Version = 6
            COMMIT;

            -- T1 reads again
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Still reads $1000 (version 5) ‚úì
            -- T1 doesn't see T2's changes (isolation maintained)

            COMMIT;</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Timestamp Ordering</h4>
                        <ul>
                            <li>Each transaction assigned timestamp</li>
                            <li>Conflicts resolved based on timestamps</li>
                            <li>Older transactions take precedence</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. Optimistic Concurrency Control</h4>
                        <ul>
                            <li>Assume conflicts are rare</li>
                            <li>No locks during transaction</li>
                            <li>Validate before commit</li>
                            <li>Retry if conflict detected</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Which isolation level should I use?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Scenario</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Recommended Level</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Banking, Financial</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SERIALIZABLE or REPEATABLE READ</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>E-commerce Checkout</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">REPEATABLE READ with SELECT FOR UPDATE</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Social Media Posts</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">READ COMMITTED</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Analytics Dashboard</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">READ UNCOMMITTED (if approximate OK)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Inventory Management</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SERIALIZABLE</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>General Rule:</strong></p>
                                <ul>
                                    <li>‚úì Start with READ COMMITTED (default in most DBs)</li>
                                    <li>‚úì Increase isolation if you encounter concurrency bugs</li>
                                    <li>‚úì Use SELECT FOR UPDATE for critical updates</li>
                                    <li>‚ö† Higher isolation = lower performance</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is SELECT FOR UPDATE?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>SELECT FOR UPDATE locks rows being read, preventing other transactions from modifying them.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Normal SELECT (doesn't lock)
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Other transactions can still modify this row

            -- SELECT FOR UPDATE (locks row)
            SELECT Balance FROM Accounts WHERE AccountID = 'A' FOR UPDATE;
            -- Row locked! Other transactions must wait

            -- Use case: Read-Modify-Write pattern
            START TRANSACTION;

            -- Lock row for update
            SELECT Stock FROM Products WHERE ProductID = 1 FOR UPDATE;
            -- Returns: Stock = 10

            -- Check if enough stock
            IF Stock >= 5 THEN
                -- Update stock
                UPDATE Products SET Stock = Stock - 5 WHERE ProductID = 1;
                COMMIT;  -- Lock released
            ELSE
                ROLLBACK;
            END IF;

            -- Without FOR UPDATE:
            -- Another transaction could modify stock between SELECT and UPDATE
            -- Causing race condition ‚ùå

            -- With FOR UPDATE:
            -- Other transactions wait until this transaction commits ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Variants:</strong></p>
                                <ul>
                                    <li><strong>FOR UPDATE SKIP LOCKED:</strong> Skip rows that are locked</li>
                                    <li><strong>FOR UPDATE NOWAIT:</strong> Fail immediately if row is locked</li>
                                    <li><strong>FOR SHARE:</strong> Allows other reads but prevents writes</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can high isolation cause deadlocks?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Higher isolation levels use more locks, increasing deadlock risk.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Deadlock Example:

            -- Transaction 1
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';
            -- T1 locks A

            -- Transaction 2 (concurrent)
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'B';
            -- T2 locks B

            -- T1 tries to lock B
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B';
            -- WAITS for T2 to release B

            -- T2 tries to lock A
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'A';
            -- WAITS for T1 to release A

            -- DEADLOCK! ‚ö†
            -- Both transactions waiting for each other
            -- Database detects deadlock and aborts one transaction

            -- ERROR 1213: Deadlock detected; transaction rolled back</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Prevention Strategies:</strong></p>
                                <ul>
                                    <li>‚úì Access resources in consistent order</li>
                                    <li>‚úì Keep transactions short</li>
                                    <li>‚úì Use lower isolation when possible</li>
                                    <li>‚úì Implement retry logic for deadlock errors</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Isolation</span>
                        <span class="keyword-tag">Concurrency</span>
                        <span class="keyword-tag">Dirty Read</span>
                        <span class="keyword-tag">Non-Repeatable Read</span>
                        <span class="keyword-tag">Phantom Read</span>
                        <span class="keyword-tag">Lost Update</span>
                        <span class="keyword-tag">Isolation Levels</span>
                        <span class="keyword-tag">SERIALIZABLE</span>
                        <span class="keyword-tag">SELECT FOR UPDATE</span>
                        <span class="keyword-tag">MVCC</span>
                        <span class="keyword-tag">Locking</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- Question 77: What is Durability in ACID? -->
            <div class="question-content" id="q77">
                <div class="question-header">
                    <h1 class="question-title">What is Durability in ACID Properties?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Durability</strong> ensures that once a transaction is committed, its changes are permanent and will survive any subsequent system failures (crashes, power outages, hardware failures). Committed data is never lost.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The "Permanent Once Committed" Principle:</strong></p>
                        <ul>
                            <li>After COMMIT succeeds, changes are guaranteed permanent</li>
                            <li>Data survives system crashes, power failures, disk failures</li>
                            <li>Changes persist even if database restarts immediately after commit</li>
                            <li>No committed transaction can be lost</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why Durability Matters:</strong></p>
                        <ul>
                            <li><strong>Data Safety:</strong> Critical data (payments, orders) never lost</li>
                            <li><strong>Trust:</strong> Users can rely on system to preserve their data</li>
                            <li><strong>Recovery:</strong> Database can recover to consistent state after crash</li>
                            <li><strong>Compliance:</strong> Legal/regulatory requirements for data retention</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Real-World Analogy:</strong></p>
                        <p>Think of durability like signing a legal contract. Once both parties sign (COMMIT), the contract is permanent and binding. Even if the office burns down (system crash), the contract still exists in official records (persistent storage).</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Durability Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Example 1: Basic Durability Guarantee
            -- -----------------------------------------------------------

            -- User transfers money
            START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 1000 WHERE AccountID = 'A';
            UPDATE Accounts SET Balance = Balance + 1000 WHERE AccountID = 'B';

            COMMIT;  -- Transaction committed ‚úì
            -- User sees "Transfer successful!" message

            -- üí• SYSTEM CRASHES 1 millisecond later!
            -- (Power outage, hardware failure, OS crash)

            -- ... Server reboots ...
            -- ... Database recovery process runs ...

            -- Check accounts after recovery:
            SELECT AccountID, Balance FROM Accounts WHERE AccountID IN ('A', 'B');
            -- AccountID | Balance
            -- A         | (original - 1000)  ‚úì Transfer persisted!
            -- B         | (original + 1000)  ‚úì Transfer persisted!

            -- Durability guarantee: Committed transaction survived crash ‚úì

            -- -----------------------------------------------------------
            -- Example 2: Uncommitted Transaction (No Durability Yet)
            -- -----------------------------------------------------------

            START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';

            -- üí• SYSTEM CRASHES before COMMIT!

            -- After recovery:
            SELECT AccountID, Balance FROM Accounts WHERE AccountID IN ('A', 'B');
            -- AccountID | Balance
            -- A         | (original)  ‚úì Changes rolled back
            -- B         | (original)  ‚úì No partial updates

            -- Uncommitted changes NOT durable (correctly discarded) ‚úì

            -- -----------------------------------------------------------
            -- Example 3: Multiple Commits Before Crash
            -- -----------------------------------------------------------

            -- Transaction 1
            START TRANSACTION;
            INSERT INTO Orders VALUES (1, 100, '2024-01-01');
            COMMIT;  -- ‚úì Durable

            -- Transaction 2
            START TRANSACTION;
            INSERT INTO Orders VALUES (2, 101, '2024-01-02');
            COMMIT;  -- ‚úì Durable

            -- Transaction 3 (in progress)
            START TRANSACTION;
            INSERT INTO Orders VALUES (3, 102, '2024-01-03');
            -- üí• CRASH before COMMIT

            -- After recovery:
            SELECT * FROM Orders;
            -- OrderID | CustomerID | OrderDate
            -- 1       | 100        | 2024-01-01  ‚úì Present (committed)
            -- 2       | 101        | 2024-01-02  ‚úì Present (committed)
            -- (no row 3)  ‚úì Not present (uncommitted)

            -- Durability: Only committed transactions survive ‚úì

            -- -----------------------------------------------------------
            -- Example 4: E-Commerce Purchase
            -- -----------------------------------------------------------

            -- User completes checkout
            START TRANSACTION;

            -- Create order
            INSERT INTO Orders (OrderID, CustomerID, Total) 
            VALUES (1001, 5, 299.99);

            -- Deduct inventory
            UPDATE Products SET Stock = Stock - 1 WHERE ProductID = 101;

            -- Process payment
            INSERT INTO Payments (OrderID, Amount, Status) 
            VALUES (1001, 299.99, 'Completed');

            COMMIT;  -- User sees "Order placed successfully!"

            -- Customer receives email confirmation
            -- Customer's credit card charged

            -- üí• DATABASE SERVER CRASHES!

            -- After recovery:
            -- Order 1001 exists ‚úì
            -- Inventory updated ‚úì
            -- Payment recorded ‚úì

            -- All committed data survived!
            -- Customer's order safe ‚úì
            -- Payment not lost ‚úì
            -- Inventory accurate ‚úì

            -- Durability critical for e-commerce! ‚úì

            -- -----------------------------------------------------------
            -- Example 5: Banking ATM Withdrawal
            -- -----------------------------------------------------------

            -- User withdraws $200 at ATM
            START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 200 WHERE AccountID = 'A123';
            INSERT INTO Transactions VALUES (NULL, 'A123', 200, 'Withdrawal', NOW());

            COMMIT;  -- ATM dispenses cash

            -- User takes cash and walks away

            -- üí• BANK'S DATABASE CRASHES!

            -- After recovery:
            -- Balance reduced by $200 ‚úì
            -- Transaction recorded ‚úì

            -- WITHOUT durability:
            -- Cash dispensed but transaction lost ‚ùå
            -- Customer's $200 disappears from account!
            -- Bank loses money!

            -- WITH durability:
            -- Transaction guaranteed permanent after cash dispensed ‚úì

            -- -----------------------------------------------------------
            -- Example 6: Write-Ahead Logging (WAL) in Action
            -- -----------------------------------------------------------

            -- Behind the scenes when you COMMIT:

            START TRANSACTION;
            UPDATE Products SET Price = 99.99 WHERE ProductID = 1;

            -- Step 1: Write to transaction log (on disk)
            -- Log entry: "Transaction T1: UPDATE Products SET Price=99.99 WHERE ProductID=1"
            -- ‚úì Written to disk (durable storage)

            -- Step 2: Update in-memory buffer
            -- ‚úì Fast, but not durable yet

            COMMIT;

            -- Step 3: Write COMMIT record to log (on disk)
            -- Log entry: "Transaction T1: COMMIT"
            -- ‚úì As soon as this is written, transaction is durable!

            -- Step 4: Eventually flush buffer to database file
            -- (Can happen later, asynchronously)

            -- If crash occurs after Step 3 but before Step 4:
            -- Recovery reads log, sees COMMIT, replays update ‚úì
            -- Durability maintained!

            -- -----------------------------------------------------------
            -- Example 7: Checking Durability Configuration
            -- -----------------------------------------------------------

            -- MySQL InnoDB settings
            SHOW VARIABLES LIKE 'innodb_flush_log_at_trx_commit';
            -- Value = 1: Flush log to disk on every COMMIT (full durability) ‚úì
            -- Value = 0: Flush every second (fast, but risk data loss) ‚ö†
            -- Value = 2: Flush to OS cache, rely on OS (medium risk) ‚ö†

            -- PostgreSQL settings
            SHOW synchronous_commit;
            -- on: Wait for WAL flush (full durability) ‚úì
            -- off: Don't wait (faster, but risk data loss) ‚ö†

            -- Recommendation: Keep at safest settings for critical data!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-cogs"></i>
                        How Durability is Implemented
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Write-Ahead Logging (WAL)</h4>
                        <p>Most common technique:</p>
                        <ul>
                            <li>All changes written to log file BEFORE updating database</li>
                            <li>Log written to disk (persistent storage)</li>
                            <li>Log includes UNDO and REDO information</li>
                            <li>COMMIT not returned until log safely on disk</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Transaction execution with WAL:
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1000 WHERE AccountID = 'A';

            -- Behind the scenes:
            -- 1. Write log record: "UPDATE A, OLD=500, NEW=1000"
            --    ‚Üí Flush log to disk
            -- 2. Update in-memory buffer: A = 1000
            -- 3. Don't write to database file yet (buffered)

            COMMIT;

            -- Behind the scenes:
            -- 4. Write log record: "COMMIT"
            --    ‚Üí Flush log to disk ‚Üê DURABILITY POINT!
            -- 5. Return success to user
            -- 6. Later: Flush buffer to database file (asynchronous)

            -- If crash between step 4 and 6:
            -- Recovery reads log, replays "UPDATE A to 1000", sees "COMMIT" ‚úì
            -- Data recovered successfully!</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Force-Write at Commit</h4>
                        <ul>
                            <li>Database forces all changes to disk before COMMIT returns</li>
                            <li>Slower but simpler</li>
                            <li>Rarely used (WAL is more efficient)</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Shadow Paging</h4>
                        <ul>
                            <li>Write changes to new pages (shadows)</li>
                            <li>Keep original pages untouched</li>
                            <li>Atomically switch pointer at commit</li>
                            <li>Original pages become backup</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. Replication for Durability</h4>
                        <ul>
                            <li>Write to multiple servers simultaneously</li>
                            <li>Protects against single server failure</li>
                            <li>Synchronous replication: Wait for replicas before COMMIT</li>
                            <li>Asynchronous replication: Don't wait (faster but less durable)</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">5. Battery-Backed Cache</h4>
                        <ul>
                            <li>Server has battery-backed RAM cache</li>
                            <li>Write to cache (fast)</li>
                            <li>Battery ensures cache survives power outage</li>
                            <li>Cache flushed to disk when power restored</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        Recovery Process (How Durability Works After Crash)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>After a crash, database goes through recovery:</strong></p>
                        
                        <ol>
                            <li><strong>Analysis Phase:</strong>
                                <ul>
                                    <li>Read transaction log from last checkpoint</li>
                                    <li>Identify which transactions committed</li>
                                    <li>Identify which transactions were in progress</li>
                                </ul>
                            </li>
                            
                            <li><strong>REDO Phase:</strong>
                                <ul>
                                    <li>Replay all committed transactions</li>
                                    <li>Ensure all committed changes in database</li>
                                    <li>Guarantees durability ‚úì</li>
                                </ul>
                            </li>
                            
                            <li><strong>UNDO Phase:</strong>
                                <ul>
                                    <li>Roll back uncommitted transactions</li>
                                    <li>Remove any partial changes</li>
                                    <li>Guarantees atomicity ‚úì</li>
                                </ul>
                            </li>
                        </ol>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Transaction Log Contents:
            [T1] BEGIN
            [T1] UPDATE Accounts SET Balance=700 WHERE AccountID='A'
            [T1] COMMIT  ‚Üê Committed!

            [T2] BEGIN
            [T2] UPDATE Accounts SET Balance=800 WHERE AccountID='B'
            [T2] COMMIT  ‚Üê Committed!

            [T3] BEGIN
            [T3] UPDATE Accounts SET Balance=600 WHERE AccountID='C'
            -- NO COMMIT (crashed here)

            -- Recovery Process:
            -- 1. Analysis: T1 and T2 committed, T3 did not
            -- 2. REDO: Replay T1 and T2 (ensure durability) ‚úì
            -- 3. UNDO: Rollback T3 (ensure atomicity) ‚úì

            -- Final State:
            -- A = 700  ‚úì (T1 durable)
            -- B = 800  ‚úì (T2 durable)
            -- C = original value  ‚úì (T3 rolled back)</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the performance cost of durability?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Durability requires disk I/O, which is slow:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Operation</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Typical Latency</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">In-memory operation</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">~0.0001 ms (100 ns)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SSD write</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">~0.1 ms</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">HDD write</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">~10 ms</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Impact:</strong></p>
                                <ul>
                                    <li>Full durability (sync writes): ~100-1000 transactions/second</li>
                                    <li>Relaxed durability (async writes): ~10,000+ transactions/second</li>
                                    <li>10-100x performance difference!</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Optimization Strategies:</strong></p>
                                <ul>
                                    <li>‚úì Use SSD instead of HDD</li>
                                    <li>‚úì Battery-backed cache</li>
                                    <li>‚úì Group commits (multiple transactions in one disk write)</li>
                                    <li>‚ö† Relax durability for non-critical data</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can I trade durability for performance?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, but understand the risks!</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- MySQL: Relax durability for performance
            SET GLOBAL innodb_flush_log_at_trx_commit = 0;
            -- Flush log every second instead of every commit
            -- 10-100x faster ‚ö°
            -- But: Can lose last 1 second of commits if crash ‚ö†

            -- PostgreSQL: Asynchronous commit
            SET synchronous_commit = off;
            -- Don't wait for WAL flush
            -- Much faster ‚ö°
            -- But: Recent commits may be lost if crash ‚ö†</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>When to Relax Durability:</strong></p>
                                <ul>
                                    <li>‚úì Session data (can relogin)</li>
                                    <li>‚úì Cache data (can rebuild)</li>
                                    <li>‚úì Temporary analytics</li>
                                    <li>‚úì High-volume logging</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>When to Keep Full Durability:</strong></p>
                                <ul>
                                    <li>‚úì Financial transactions</li>
                                    <li>‚úì Orders and payments</li>
                                    <li>‚úì User accounts</li>
                                    <li>‚úì Any critical business data</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Does replication guarantee durability?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Depends on replication mode:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Replication Type</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Durability</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Risk</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Synchronous</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">High ‚úì</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Data on multiple servers before COMMIT</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Asynchronous</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;">Medium ‚ö†</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Recent commits may not be replicated yet</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Semi-Sync</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">High ‚úì</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">At least one replica confirms</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong></p>
                                <ul>
                                    <li>‚úì Synchronous replication + WAL for maximum durability</li>
                                    <li>‚úì Protects against both server failure and disk corruption</li>
                                    <li>‚ö† Costs performance (network latency)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Durability</span>
                        <span class="keyword-tag">Persistent Storage</span>
                        <span class="keyword-tag">Write-Ahead Logging</span>
                        <span class="keyword-tag">WAL</span>
                        <span class="keyword-tag">Transaction Log</span>
                        <span class="keyword-tag">Crash Recovery</span>
                        <span class="keyword-tag">REDO</span>
                        <span class="keyword-tag">Force-Write</span>
                        <span class="keyword-tag">Disk Flush</span>
                        <span class="keyword-tag">Permanent</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 78: What are Durability Mechanisms? -->
            <div class="question-content" id="q78">
                <div class="question-header">
                    <h1 class="question-title">What are Durability Mechanisms in Database Systems?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 11 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Durability Mechanisms</strong> are the techniques and technologies databases use to ensure that committed transactions survive system failures, crashes, and power outages. These mechanisms guarantee the "D" in ACID - that once a transaction commits, its changes are permanent.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Challenge:</strong></p>
                        <p>Memory (RAM) is fast but volatile - data lost on crash. Disk is slow but persistent. Durability mechanisms bridge this gap efficiently.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Core Durability Mechanisms:</strong></p>
                        <ol>
                            <li><strong>Write-Ahead Logging (WAL)</strong> - Most common technique</li>
                            <li><strong>Shadow Paging</strong> - Alternative approach</li>
                            <li><strong>Force-Write Policy</strong> - Simple but slow</li>
                            <li><strong>Checkpointing</strong> - Optimize recovery time</li>
                            <li><strong>Replication</strong> - Redundancy for durability</li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-scroll"></i>
                        1. Write-Ahead Logging (WAL)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Write all changes to a log file BEFORE modifying the database. The log is written sequentially to disk (fast), while database updates can be deferred (optimized).</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">How WAL Works:</h4>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Transaction Execution with WAL

            START TRANSACTION;
            UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A';

            -- Behind the scenes:

            -- Step 1: Create log record
            -- Log Entry: [LSN: 1001, TxID: T1, Type: UPDATE, 
            --            Table: Accounts, Key: 'A', 
            --            Old: 1000, New: 1500]

            -- Step 2: Write log to WAL buffer (in memory)

            -- Step 3: Update data in buffer pool (in memory)
            -- Balance changed to 1500 in memory

            -- Database file NOT yet updated (still shows 1000 on disk)

            COMMIT;

            -- Step 4: Flush WAL to disk (synchronous write)
            -- THIS is the durability point! ‚úì
            -- Once WAL on disk, transaction is durable

            -- Step 5: Return success to application

            -- Step 6: Eventually flush buffer pool to database file
            -- (Can happen later, asynchronously)
            -- This is called "checkpoint"

            -- -----------------------------------------------------------
            -- WAL Structure
            -- -----------------------------------------------------------

            -- Transaction Log File Structure:
            [LSN]  [TxID]  [Type]    [Table]    [Key]  [Old Value]  [New Value]
            1001   T1      UPDATE    Accounts   A      1000         1500
            1002   T1      UPDATE    Accounts   B      500          1000
            1003   T1      COMMIT    -          -      -            -
            1004   T2      INSERT    Orders     -      NULL         {order_data}
            1005   T2      COMMIT    -          -      -            -

            -- LSN = Log Sequence Number (unique, monotonically increasing)

            -- -----------------------------------------------------------
            -- Recovery Using WAL
            -- -----------------------------------------------------------

            -- Scenario: Crash after commit but before database file updated

            -- At recovery time:
            -- 1. Read WAL from disk
            -- 2. Identify committed transactions (have COMMIT record)
            -- 3. Identify uncommitted transactions (no COMMIT record)
            -- 4. REDO committed transactions
            -- 5. UNDO uncommitted transactions

            -- Example Recovery:
            -- WAL Contents:
            [1001]  T1  UPDATE  Accounts  A  1000  1500
            [1002]  T1  UPDATE  Accounts  B  500   1000
            [1003]  T1  COMMIT  -- T1 committed ‚úì
            [1004]  T2  UPDATE  Products  1  100   50
            -- [No COMMIT for T2] -- T2 not committed ‚ùå

            -- Recovery Process:
            -- REDO T1: Apply updates (1500 to A, 1000 to B) ‚úì
            -- UNDO T2: Rollback update (keep 100 for Product 1) ‚úì

            -- Database now consistent! ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">WAL Advantages:</h4>
                        <ul>
                            <li>‚úì Sequential writes to log (very fast)</li>
                            <li>‚úì Random writes to database deferred (optimized)</li>
                            <li>‚úì Small log records (only changes, not full pages)</li>
                            <li>‚úì Industry standard (used by most databases)</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">WAL in Popular Databases:</h4>
                        <ul>
                            <li><strong>PostgreSQL:</strong> WAL files in pg_wal directory</li>
                            <li><strong>MySQL InnoDB:</strong> ib_logfile0, ib_logfile1 (redo logs)</li>
                            <li><strong>Oracle:</strong> Redo logs</li>
                            <li><strong>SQL Server:</strong> Transaction log files (.ldf)</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-copy"></i>
                        2. Shadow Paging
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Instead of modifying database pages in place, create "shadow" copies of modified pages. Original pages remain untouched until commit.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Shadow Paging Process

            -- Initial State:
            -- Page Table points to Current Pages
            -- Page 1: [Data A: 1000, Data B: 500]
            -- Page 2: [Data C: 2000, Data D: 1500]

            START TRANSACTION;
            UPDATE DataA SET Value = 1500;

            -- Shadow Paging:
            -- 1. Copy Page 1 to Shadow Page 1
            -- 2. Modify Shadow Page 1 (Value = 1500)
            -- 3. Original Page 1 unchanged

            -- Current State:
            -- Original Page 1: [Data A: 1000, Data B: 500]  ‚Üê Unchanged
            -- Shadow Page 1:   [Data A: 1500, Data B: 500]  ‚Üê Modified copy

            -- Page Table still points to Original Page 1

            COMMIT;

            -- Commit Process:
            -- Atomically update Page Table to point to Shadow Page 1
            -- Single pointer update = atomic commit! ‚úì

            -- After Commit:
            -- Page Table now points to Shadow Page 1
            -- Original Page 1 can be discarded/reused

            -- Durability: Achieved when Page Table update written to disk

            -- -----------------------------------------------------------
            -- Advantages
            -- -----------------------------------------------------------
            -- ‚úì No separate log file needed
            -- ‚úì Easy rollback (just discard shadow pages)
            -- ‚úì Atomic commit (single pointer update)
            -- ‚úì No recovery needed for uncommitted transactions

            -- -----------------------------------------------------------
            -- Disadvantages
            -- -----------------------------------------------------------
            -- ‚ùå More disk I/O (copying entire pages)
            -- ‚ùå Fragmentation (pages scattered on disk)
            -- ‚ùå Garbage collection needed (old pages)
            -- ‚ùå Rarely used in modern databases

            -- Used By: SQLite partially, some embedded databases</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        3. Checkpointing
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Periodically flush all dirty pages (modified in memory) to disk. Reduces recovery time by limiting how much of the log needs to be replayed.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Without Checkpointing:
            -- Transaction Log keeps growing
            -- On crash, must replay ENTIRE log from beginning
            -- If log has 1 million entries, recovery takes hours! ‚ùå

            -- With Checkpointing:

            -- Checkpoint Process:
            -- 1. Flush all dirty pages to database file
            -- 2. Write checkpoint record to log
            -- 3. On recovery, only replay from last checkpoint

            -- Timeline:
            [0:00]    Database starts
            [0:01]    T1 commits (log: entry 1-3)
            [0:02]    T2 commits (log: entry 4-6)
            [0:03]    T3 commits (log: entry 7-9)
            [0:04]    CHECKPOINT! Flush all pages to disk ‚úì
                    Write checkpoint marker at entry 10
            [0:05]    T4 commits (log: entry 11-13)
            [0:06]    T5 commits (log: entry 14-16)
            [0:07]    üí• CRASH!

            -- Recovery:
            -- Start from last checkpoint (entry 10) ‚úì
            -- Only replay entries 11-16
            -- Ignore entries 1-9 (already on disk due to checkpoint)
            -- Fast recovery! ‚úì

            -- -----------------------------------------------------------
            -- Checkpoint Types
            -- -----------------------------------------------------------

            -- 1. Fuzzy Checkpoint (PostgreSQL, MySQL)
            --    Background process continuously flushes dirty pages
            --    Doesn't block transactions
            --    Most common in production

            -- 2. Sharp Checkpoint
            --    Blocks all transactions during checkpoint
            --    Ensures clean consistent point
            --    Causes performance spike

            -- 3. Incremental Checkpoint
            --    Spreads checkpoint work over time
            --    Reduces I/O spike

            -- MySQL InnoDB Example:
            -- Configuration:
            SET GLOBAL innodb_log_checkpoint_now = ON;  -- Force checkpoint

            -- Or automatic based on log size:
            innodb_log_file_size = 256M  -- Checkpoint triggered when 75% full

            -- PostgreSQL Example:
            checkpoint_timeout = 5min  -- Checkpoint every 5 minutes
            max_wal_size = 1GB         -- Or when WAL reaches 1GB</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-server"></i>
                        4. Replication for Durability
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Write data to multiple servers. Protects against single server failure (hardware, disk corruption, etc.).</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Synchronous Replication (Highest Durability)

            -- Application commits transaction
            COMMIT;

            -- Behind the scenes:
            -- 1. Write to local transaction log ‚úì
            -- 2. Send changes to replica server
            -- 3. Wait for replica to write to its log ‚è≥
            -- 4. Replica confirms ‚úì
            -- 5. Return success to application

            -- Durability: Data on 2+ servers before commit returns
            -- If primary crashes, replica has all committed data ‚úì

            -- MySQL Semisynchronous Replication:
            -- Master waits for at least 1 slave to acknowledge

            INSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so';
            SET GLOBAL rpl_semi_sync_master_enabled = 1;
            SET GLOBAL rpl_semi_sync_master_wait_for_slave_count = 1;

            -- PostgreSQL Synchronous Replication:
            synchronous_commit = on
            synchronous_standby_names = 'standby1'

            -- -----------------------------------------------------------
            -- Asynchronous Replication (Lower Durability, Higher Performance)
            -- -----------------------------------------------------------

            COMMIT;

            -- Behind the scenes:
            -- 1. Write to local transaction log ‚úì
            -- 2. Return success immediately ‚ö°
            -- 3. Later: Send changes to replica (asynchronously)

            -- Risk: Recent commits may be lost if primary crashes ‚ö†
            -- Benefit: Much faster (no waiting) ‚ö°

            -- Use Cases:
            -- Synchronous: Financial transactions, critical data
            -- Asynchronous: Analytics, reporting, read replicas

            -- -----------------------------------------------------------
            -- Multi-Region Replication
            -- -----------------------------------------------------------

            -- Data replicated to multiple geographic regions
            -- Survives regional outages (datacenter failure, natural disasters)

            -- Example: AWS RDS Multi-AZ
            -- Primary: US-East-1a
            -- Replica: US-East-1b (synchronous)
            -- If primary AZ fails, automatic failover to replica ‚úì

            -- Example: Google Spanner
            -- Synchronous replication across 3+ datacenters
            -- Can survive datacenter loss ‚úì
            -- Uses Paxos consensus for durability</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-battery-full"></i>
                        5. Battery-Backed Cache
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Use battery-backed RAM as write cache. Fast like RAM, survives power failure like disk.</p>
                        
                        <ul>
                            <li><strong>How it works:</strong> Database writes to battery-backed cache (fast), cache later flushes to disk</li>
                            <li><strong>Power failure:</strong> Battery keeps cache alive, data written to disk when power restored</li>
                            <li><strong>Used in:</strong> Enterprise storage arrays, high-end RAID controllers</li>
                            <li><strong>Cost:</strong> Expensive but significantly improves performance</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Alternative: NVMe with Power Loss Protection</strong></p>
                        <ul>
                            <li>Modern SSDs with capacitors</li>
                            <li>Flush in-flight writes on power loss</li>
                            <li>More affordable than battery-backed cache</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-cogs"></i>
                        Durability Configuration Trade-offs
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- MySQL InnoDB Durability Settings

            -- innodb_flush_log_at_trx_commit
            -- Controls when WAL is flushed to disk

            -- Value = 1 (Default, Full Durability)
            SET GLOBAL innodb_flush_log_at_trx_commit = 1;
            -- Flush log to disk on every COMMIT
            -- Slowest, but fully durable ‚úì
            -- Use for: Financial transactions, critical data

            -- Value = 2 (Medium Durability)
            SET GLOBAL innodb_flush_log_at_trx_commit = 2;
            -- Flush log to OS cache (not disk) on COMMIT
            -- Flush to disk every second
            -- Risk: OS crash loses 1 second of commits ‚ö†
            -- Use for: General applications with some risk tolerance

            -- Value = 0 (Lowest Durability, Highest Performance)
            SET GLOBAL innodb_flush_log_at_trx_commit = 0;
            -- Flush log to disk every second
            -- Risk: Crash loses 1 second of commits ‚ö†‚ö†
            -- Use for: Non-critical data, caching, sessions

            -- -----------------------------------------------------------
            -- PostgreSQL Durability Settings
            -- -----------------------------------------------------------

            -- synchronous_commit
            -- on: Wait for WAL flush (default, full durability)
            -- off: Don't wait for WAL flush (faster, less durable)
            -- local: Wait for local flush only
            -- remote_write: Wait for replica to receive (not flush)
            -- remote_apply: Wait for replica to apply

            SET synchronous_commit = on;  -- Full durability

            -- fsync
            -- Controls whether WAL writes are forced to disk
            -- off = DANGER! Data loss likely on crash ‚ùå
            -- on = Safe (default) ‚úì

            SET fsync = on;

            -- -----------------------------------------------------------
            -- Performance Impact
            -- -----------------------------------------------------------

            -- Benchmark: INSERT 10,000 rows

            -- Full Durability (innodb_flush_log_at_trx_commit=1):
            -- Time: 10 seconds
            -- TPS: 1,000

            -- Relaxed Durability (innodb_flush_log_at_trx_commit=2):
            -- Time: 1 second  
            -- TPS: 10,000
            -- 10x faster! ‚ö°

            -- No Durability (innodb_flush_log_at_trx_commit=0):
            -- Time: 0.5 seconds
            -- TPS: 20,000
            -- 20x faster! ‚ö°‚ö°
            -- But risky! ‚ö†</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Durability Mechanisms</span>
                        <span class="keyword-tag">Write-Ahead Logging</span>
                        <span class="keyword-tag">WAL</span>
                        <span class="keyword-tag">Shadow Paging</span>
                        <span class="keyword-tag">Checkpointing</span>
                        <span class="keyword-tag">Replication</span>
                        <span class="keyword-tag">REDO/UNDO Logs</span>
                        <span class="keyword-tag">Flush to Disk</span>
                        <span class="keyword-tag">Battery-Backed Cache</span>
                        <span class="keyword-tag">LSN</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 79: What is Deadlock in DBMS? -->
            <div class="question-content" id="q79">
                <div class="question-header">
                    <h1 class="question-title">What is Deadlock in DBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>A <strong>Deadlock</strong> is a situation where two or more transactions are waiting for each other to release locks, creating a circular dependency. None of the transactions can proceed, resulting in an infinite wait.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Classic Example:</strong></p>
                        <ul>
                            <li><strong>Transaction 1</strong> locks Resource A and waits for Resource B</li>
                            <li><strong>Transaction 2</strong> locks Resource B and waits for Resource A</li>
                            <li>Both transactions are stuck waiting forever! üîí</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Deadlock Conditions (All 4 must be true):</strong></p>
                        <ul>
                            <li><strong>1. Mutual Exclusion:</strong> Resources cannot be shared</li>
                            <li><strong>2. Hold and Wait:</strong> Transaction holds one resource while waiting for another</li>
                            <li><strong>3. No Preemption:</strong> Resources cannot be forcefully taken away</li>
                            <li><strong>4. Circular Wait:</strong> Circular chain of transactions waiting for resources</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Detailed Explanation with Example
                    </div>
                    <div class="example-box">
                        <pre><code>-- Classic Deadlock Scenario
            -- Two bank accounts: Account A ($1000), Account B ($500)

            -- Transaction 1 (Transfer $100 from A to B):
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';  -- Lock A
            -- [Transaction 2 starts here and locks B]
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B';  -- Waits for B
            COMMIT;

            -- Transaction 2 (Transfer $50 from B to A) - runs simultaneously:
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 50 WHERE AccountID = 'B';   -- Lock B
            -- [Transaction 1 tries to lock B]
            UPDATE Accounts SET Balance = Balance + 50 WHERE AccountID = 'A';   -- Waits for A
            COMMIT;

            -- Result: DEADLOCK! üí•
            -- Transaction 1 holds lock on A, waits for B
            -- Transaction 2 holds lock on B, waits for A
            -- Neither can proceed!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Visual Representation of Deadlock
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 450" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Deadlock Scenario</text>
                            
                            <!-- Transaction 1 -->
                            <rect x="100" y="100" width="180" height="80" fill="#dbeafe" stroke="#3b82f6" stroke-width="3" rx="5"/>
                            <text x="190" y="130" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">Transaction 1</text>
                            <text x="190" y="150" font-size="11" fill="#333" text-anchor="middle">Holds: Resource A</text>
                            <text x="190" y="168" font-size="11" fill="#dc2626" text-anchor="middle">Wants: Resource B</text>
                            
                            <!-- Transaction 2 -->
                            <rect x="520" y="100" width="180" height="80" fill="#fef3c7" stroke="#f59e0b" stroke-width="3" rx="5"/>
                            <text x="610" y="130" font-size="14" font-weight="bold" fill="#92400e" text-anchor="middle">Transaction 2</text>
                            <text x="610" y="150" font-size="11" fill="#333" text-anchor="middle">Holds: Resource B</text>
                            <text x="610" y="168" font-size="11" fill="#dc2626" text-anchor="middle">Wants: Resource A</text>
                            
                            <!-- Resource A -->
                            <circle cx="190" cy="300" r="60" fill="#d1fae5" stroke="#10b981" stroke-width="3"/>
                            <text x="190" y="295" font-size="14" font-weight="bold" fill="#065f46" text-anchor="middle">Resource A</text>
                            <text x="190" y="315" font-size="11" fill="#065f46" text-anchor="middle">(Locked by T1)</text>
                            
                            <!-- Resource B -->
                            <circle cx="610" cy="300" r="60" fill="#fee2e2" stroke="#dc2626" stroke-width="3"/>
                            <text x="610" y="295" font-size="14" font-weight="bold" fill="#991b1b" text-anchor="middle">Resource B</text>
                            <text x="610" y="315" font-size="11" fill="#991b1b" text-anchor="middle">(Locked by T2)</text>
                            
                            <!-- Arrows showing circular wait -->
                            <!-- T1 holds A -->
                            <path d="M 190 180 L 190 240" stroke="#10b981" stroke-width="3" marker-end="url(#arrow13)"/>
                            <text x="210" y="215" font-size="11" fill="#10b981" font-weight="bold">Holds</text>
                            
                            <!-- T1 wants B -->
                            <path d="M 280 140 Q 400 200 550 300" stroke="#dc2626" stroke-width="3" stroke-dasharray="5,5" marker-end="url(#arrow14)"/>
                            <text x="400" y="190" font-size="11" fill="#dc2626" font-weight="bold">Wants</text>
                            
                            <!-- T2 holds B -->
                            <path d="M 610 180 L 610 240" stroke="#dc2626" stroke-width="3" marker-end="url(#arrow14)"/>
                            <text x="630" y="215" font-size="11" fill="#dc2626" font-weight="bold">Holds</text>
                            
                            <!-- T2 wants A -->
                            <path d="M 520 140 Q 400 200 250 300" stroke="#10b981" stroke-width="3" stroke-dasharray="5,5" marker-end="url(#arrow13)"/>
                            <text x="370" y="190" font-size="11" fill="#10b981" font-weight="bold">Wants</text>
                            
                            <!-- Deadlock indicator -->
                            <rect x="250" y="380" width="300" height="50" fill="#fee2e2" stroke="#dc2626" stroke-width="2" rx="5"/>
                            <text x="400" y="410" font-size="15" font-weight="bold" fill="#991b1b" text-anchor="middle">‚ö†Ô∏è DEADLOCK - Circular Wait!</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow13" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#10b981"/>
                                </marker>
                                <marker id="arrow14" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#dc2626"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        Deadlock Prevention Strategies
                    </div>
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Lock Ordering</h4>
                        <p>Always acquire locks in a predefined order.</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- WRONG: Can cause deadlock
            -- Transaction 1: Lock A, then B
            -- Transaction 2: Lock B, then A

            -- CORRECT: Both transactions lock in same order
            -- Transaction 1 & 2: ALWAYS lock A first, then B
            START TRANSACTION;
            SELECT * FROM Accounts WHERE AccountID = 'A' FOR UPDATE;  -- Lock A first
            SELECT * FROM Accounts WHERE AccountID = 'B' FOR UPDATE;  -- Then lock B
            -- Perform operations
            COMMIT;</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Timeout</h4>
                        <p>Set a maximum wait time. If lock not acquired within timeout, rollback.</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Set lock timeout to 5 seconds
            SET innodb_lock_wait_timeout = 5;

            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';
            -- If this waits more than 5 seconds, transaction automatically rolls back
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B';
            COMMIT;</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Deadlock Detection and Recovery</h4>
                        <p>Database detects deadlock and automatically kills one transaction.</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- MySQL automatically detects deadlocks
            -- When deadlock occurs:
            -- 1. Database detects circular wait
            -- 2. Chooses a "victim" transaction (usually smaller one)
            -- 3. Rolls back victim transaction
            -- 4. Other transaction can proceed

            -- Error message when your transaction is killed:
            -- ERROR 1213 (40001): Deadlock found when trying to get lock; 
            -- try restarting transaction

            -- Solution: Retry the transaction
            DELIMITER //
            CREATE PROCEDURE TransferMoney(
                IN from_acc VARCHAR(20),
                IN to_acc VARCHAR(20),
                IN amount DECIMAL(10,2)
            )
            BEGIN
                DECLARE retries INT DEFAULT 3;
                DECLARE done BOOLEAN DEFAULT FALSE;
                
                WHILE retries > 0 AND NOT done DO
                    BEGIN
                        DECLARE CONTINUE HANDLER FOR 1213  -- Deadlock error
                        BEGIN
                            SET retries = retries - 1;
                            IF retries = 0 THEN
                                SIGNAL SQLSTATE '45000' 
                                SET MESSAGE_TEXT = 'Transaction failed after 3 retries';
                            END IF;
                        END;
                        
                        START TRANSACTION;
                        UPDATE Accounts SET Balance = Balance - amount WHERE AccountID = from_acc;
                        UPDATE Accounts SET Balance = Balance + amount WHERE AccountID = to_acc;
                        COMMIT;
                        
                        SET done = TRUE;
                    END;
                END WHILE;
            END //
            DELIMITER ;</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. Minimize Lock Hold Time</h4>
                        <p>Keep transactions short and release locks quickly.</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- BAD: Long-running transaction holds locks
            START TRANSACTION;
            UPDATE Orders SET Status = 'Processing' WHERE OrderID = 1;
            -- ... complex business logic that takes 5 minutes ...
            -- ... external API calls ...
            COMMIT;  -- Locks held for 5 minutes!

            -- GOOD: Quick transaction
            START TRANSACTION;
            UPDATE Orders SET Status = 'Processing' WHERE OrderID = 1;
            COMMIT;  -- Locks released immediately
            -- ... do complex logic outside transaction ...</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Detecting and Monitoring Deadlocks
                    </div>
                    <div class="example-box">
                        <pre><code>-- Check for recent deadlocks (MySQL)
            SHOW ENGINE INNODB STATUS;
            -- Look for "LATEST DETECTED DEADLOCK" section

            -- Enable deadlock logging
            SET GLOBAL innodb_print_all_deadlocks = ON;

            -- View deadlock information from error log
            -- Linux: /var/log/mysql/error.log
            -- Windows: C:\ProgramData\MySQL\MySQL Server 8.0\Data\*.err

            -- Check current lock waits
            SELECT * FROM information_schema.INNODB_TRX;
            SELECT * FROM information_schema.INNODB_LOCKS;
            SELECT * FROM information_schema.INNODB_LOCK_WAITS;</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does the database decide which transaction to kill in a deadlock?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p>The database typically uses these criteria to choose the "victim" transaction:</p>
                                <ol>
                                    <li><strong>Transaction Weight:</strong> Kills the transaction that has done less work (fewer rows modified)</li>
                                    <li><strong>Lock Count:</strong> Kills the transaction holding fewer locks</li>
                                    <li><strong>Age:</strong> May prefer to kill newer transactions</li>
                                    <li><strong>Priority:</strong> Some databases support transaction priorities</li>
                                </ol>
                                <p style="margin-top: 1rem;">The goal is to minimize wasted work by killing the transaction that has invested less resources.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the difference between Deadlock and Livelock?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Deadlock</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Livelock</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>State</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transactions are blocked, waiting</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transactions are active but making no progress</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>CPU Usage</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Low (waiting)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">High (constantly retrying)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Example</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">T1 waits for T2, T2 waits for T1</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">T1 releases lock for T2, T2 releases for T1, repeat forever</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Detection</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Easy to detect</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Harder to detect</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can deadlocks occur with single table operations?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes!</strong> Deadlocks can occur even within a single table when multiple rows are involved.</p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Transaction 1:
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 1;  -- Lock row 1
            -- Transaction 2 starts and locks row 2
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 2;  -- Waits for row 2
            COMMIT;

            -- Transaction 2 (simultaneous):
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance + 50 WHERE AccountID = 2;   -- Lock row 2
            -- Transaction 1 tries to lock row 2
            UPDATE Accounts SET Balance = Balance - 50 WHERE AccountID = 1;   -- Waits for row 1
            COMMIT;

            -- DEADLOCK even though it's the same table!</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Deadlock</span>
                        <span class="keyword-tag">Circular Wait</span>
                        <span class="keyword-tag">Mutual Exclusion</span>
                        <span class="keyword-tag">Hold and Wait</span>
                        <span class="keyword-tag">Lock Ordering</span>
                        <span class="keyword-tag">Deadlock Detection</span>
                        <span class="keyword-tag">Victim Transaction</span>
                        <span class="keyword-tag">Timeout</span>
                        <span class="keyword-tag">Rollback</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 80: What are Isolation Levels in Detail? -->
            <div class="question-content" id="q80">
                <div class="question-header">
                    <h1 class="question-title">What are Isolation Levels in Database Transactions?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 12 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Isolation Levels</strong> define the degree to which transactions are isolated from each other in a concurrent database system. They represent a trade-off between data consistency (correctness) and performance (concurrency).</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why Multiple Isolation Levels?</strong></p>
                        <ul>
                            <li><strong>Performance Trade-off:</strong> Higher isolation = more locks = slower performance</li>
                            <li><strong>Application Needs:</strong> Not all operations need maximum isolation</li>
                            <li><strong>Flexibility:</strong> Choose appropriate level per transaction</li>
                            <li><strong>Cost vs Benefit:</strong> Balance correctness with throughput</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>The Four Standard Isolation Levels (SQL-92):</strong></p>
                        <ol>
                            <li><strong>READ UNCOMMITTED</strong> - Lowest isolation, highest performance</li>
                            <li><strong>READ COMMITTED</strong> - Default in most databases</li>
                            <li><strong>REPEATABLE READ</strong> - MySQL InnoDB default</li>
                            <li><strong>SERIALIZABLE</strong> - Highest isolation, lowest performance</li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Detailed Isolation Level Analysis
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">1. READ UNCOMMITTED (Isolation Level 0)</h4>
                        <p><strong>Description:</strong> Transactions can read uncommitted changes from other transactions (dirty reads allowed).</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>No read locks acquired</li>
                            <li>Allows dirty reads, non-repeatable reads, phantom reads</li>
                            <li>Fastest isolation level</li>
                            <li>Rarely used in production</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- SET ISOLATION LEVEL
            SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

            -- Transaction 1
            START TRANSACTION;
            UPDATE Products SET Price = 999.99 WHERE ProductID = 1;
            -- Not committed yet!

            -- Transaction 2 (concurrent)
            SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
            START TRANSACTION;
            SELECT Price FROM Products WHERE ProductID = 1;
            -- Returns 999.99 (uncommitted value!) ‚ùå
            -- This is a DIRTY READ

            -- T1 rolls back
            ROLLBACK;  -- Price reverts to original

            -- T2 made decision based on invalid data! ‚ùå

            -- Use Cases:
            -- ‚úì Approximate analytics (dashboard counts)
            -- ‚úì Reports where exact values don't matter
            -- ‚úì Temporary data analysis
            -- ‚úó Financial transactions
            -- ‚úó Critical business logic

            -- Performance:
            -- Throughput: HIGHEST (10,000+ TPS)
            -- Lock contention: NONE</code></pre>
                        </div>
                        
                        <h4 style="color: #f59e0b; margin-top: 1.5rem;">2. READ COMMITTED (Isolation Level 1)</h4>
                        <p><strong>Description:</strong> Transactions can only read committed data. Most common default isolation level.</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>Read locks acquired but released immediately after read</li>
                            <li>Prevents dirty reads</li>
                            <li>Allows non-repeatable reads and phantom reads</li>
                            <li>Good balance of consistency and performance</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Default in: PostgreSQL, Oracle, SQL Server
            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;

            -- Transaction 1
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A';
            -- Not committed

            -- Transaction 2 (concurrent)
            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Returns original balance (e.g., 1000) ‚úì
            -- WAITS if T1 holds write lock
            -- Prevents dirty read ‚úì

            COMMIT;  -- T1 commits

            -- T2 reads again
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Now returns 1500 (committed value) ‚úì
            -- But value changed within transaction (non-repeatable read) ‚ö†

            -- Example: Non-repeatable Read Problem
            START TRANSACTION;

            -- Read 1
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Result: 1000

            -- ... application logic ...
            -- Meanwhile, another transaction updates and commits

            -- Read 2 (same transaction)
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Result: 1500  ‚Üê Different value! ‚ö†

            -- This is a NON-REPEATABLE READ
            -- Same query, different results within same transaction

            COMMIT;

            -- Use Cases:
            -- ‚úì Most web applications (default choice)
            -- ‚úì CRUD operations
            -- ‚úì General business logic
            -- ‚ö† Financial reports (may see inconsistent data)
            -- ‚úó Complex multi-step calculations

            -- Performance:
            -- Throughput: HIGH (5,000-10,000 TPS)
            -- Lock contention: LOW</code></pre>
                        </div>
                        
                        <h4 style="color: #3b82f6; margin-top: 1.5rem;">3. REPEATABLE READ (Isolation Level 2)</h4>
                        <p><strong>Description:</strong> Guarantees that if a row is read twice in the same transaction, it will have the same value both times.</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>Read locks held until transaction ends</li>
                            <li>Prevents dirty reads and non-repeatable reads</li>
                            <li>Still allows phantom reads (in theory)</li>
                            <li>MySQL InnoDB prevents phantoms via MVCC</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Default in: MySQL InnoDB
            SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;

            -- Transaction 1
            START TRANSACTION;

            -- Read 1
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Result: 1000
            -- InnoDB creates snapshot of data ‚úì

            -- Transaction 2 (concurrent)
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A';
            COMMIT;  -- T2 commits

            -- Back to Transaction 1
            -- Read 2 (same transaction)
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Result: Still 1000 ‚úì
            -- Repeatable read guaranteed! ‚úì
            -- T1 sees consistent snapshot

            -- Phantom Read Example (Theoretical)
            START TRANSACTION;

            -- Read 1
            SELECT COUNT(*) FROM Orders WHERE CustomerID = 100;
            -- Result: 5 orders

            -- Another transaction inserts new order and commits

            -- Read 2
            SELECT COUNT(*) FROM Orders WHERE CustomerID = 100;
            -- MySQL InnoDB: Still returns 5 ‚úì (prevents phantoms)
            -- Standard REPEATABLE READ: May return 6 ‚ö† (phantom read)

            COMMIT;

            -- Use Cases:
            -- ‚úì Financial reports requiring consistency
            -- ‚úì Multi-step calculations
            -- ‚úì Data export/backup operations
            -- ‚úì Critical business transactions
            -- ‚ö† High-concurrency systems (more locking)

            -- Performance:
            -- Throughput: MEDIUM (1,000-5,000 TPS)
            -- Lock contention: MEDIUM</code></pre>
                        </div>
                        
                        <h4 style="color: #10b981; margin-top: 1.5rem;">4. SERIALIZABLE (Isolation Level 3)</h4>
                        <p><strong>Description:</strong> Highest isolation level. Transactions execute as if running serially (one after another).</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>Range locks on read queries (prevents phantoms)</li>
                            <li>Prevents all read phenomena</li>
                            <li>Complete isolation from other transactions</li>
                            <li>Slowest performance due to extensive locking</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            -- Transaction 1
            START TRANSACTION;

            -- This locks the entire range!
            SELECT SUM(Balance) FROM Accounts WHERE DepartmentID = 1;
            -- Result: 50,000
            -- Range lock on DepartmentID = 1 ‚úì

            -- Transaction 2 (concurrent)
            START TRANSACTION;

            -- Try to insert new account in same department
            INSERT INTO Accounts VALUES ('ACC100', 1, 5000);
            -- BLOCKED! Waits for T1 to finish ‚ö†

            -- Try to update existing account in same department
            UPDATE Accounts SET Balance = 6000 WHERE AccountID = 'ACC001';
            -- BLOCKED! Waits for T1 ‚ö†

            -- Transaction 1 continues
            SELECT SUM(Balance) FROM Accounts WHERE DepartmentID = 1;
            -- Result: Still 50,000 ‚úì
            -- No phantoms, no changes ‚úì

            COMMIT;  -- T1 releases locks

            -- Now T2 can proceed

            -- Use Cases:
            -- ‚úì Critical financial transactions
            -- ‚úì Inventory systems (prevent overselling)
            -- ‚úì Reservation systems (prevent double-booking)
            -- ‚úì Audit-critical operations
            -- ‚úó High-throughput applications
            -- ‚úó Read-heavy workloads

            -- Performance:
            -- Throughput: LOW (100-1,000 TPS)
            -- Lock contention: HIGH
            -- Deadlock risk: HIGHEST

            -- Implementation Techniques:
            -- 1. Two-Phase Locking (2PL)
            -- 2. Timestamp Ordering
            -- 3. Serialization Graph Testing
            -- 4. Optimistic Concurrency Control</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-chart-bar"></i>
                        Isolation Level Comparison Matrix
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem; color:black">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Isolation Level</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Dirty Read</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Non-Repeatable</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Phantom</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Performance</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Typical TPS</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ UNCOMMITTED</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color:black">Yes ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color:black">Yes ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color:black">Yes ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color:black">Fastest ‚ö°</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">10,000+</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ COMMITTED</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color:black">No ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color:black">Yes ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color:black">Yes ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color:black">Fast</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">5,000-10,000</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>REPEATABLE READ</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color:black">No ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color:black">No ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color:black">MySQL: No ‚úì<br>Standard: Yes ‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color:black">Medium</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">1,000-5,000</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>SERIALIZABLE</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color:black">No ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color:black">No ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color:black">No ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color:black">Slowest üêå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">100-1,000</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Setting Isolation Levels
                    </div>
                    <div class="example-box">
                        <pre><code>-- MySQL/MariaDB
            -- Session level (current connection)
            SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;

            -- Transaction level (next transaction only)
            SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;

            -- Global level (all new connections)
            SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;

            -- Check current isolation level
            SELECT @@transaction_isolation;
            -- or
            SELECT @@tx_isolation;  -- Older MySQL versions

            -- PostgreSQL
            -- Session level
            SET SESSION CHARACTERISTICS AS TRANSACTION ISOLATION LEVEL READ COMMITTED;

            -- Transaction level
            BEGIN TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            -- Check current
            SHOW transaction_isolation;

            -- SQL Server
            -- Transaction level
            SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;

            -- Check current
            SELECT CASE transaction_isolation_level 
                WHEN 0 THEN 'Unspecified'
                WHEN 1 THEN 'Read Uncommitted'
                WHEN 2 THEN 'Read Committed'
                WHEN 3 THEN 'Repeatable Read'
                WHEN 4 THEN 'Serializable'
                WHEN 5 THEN 'Snapshot'
            END AS isolation_level
            FROM sys.dm_exec_sessions
            WHERE session_id = @@SPID;

            -- Oracle
            -- Transaction level (implicit)
            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            -- Default is READ COMMITTED
            -- Oracle also has "READ ONLY" mode</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How do I choose the right isolation level?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Decision Framework:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Scenario</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Recommended Level</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Reason</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Analytics dashboard</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">READ UNCOMMITTED</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Speed matters, approximate OK</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Web app CRUD</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">READ COMMITTED</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Good balance, standard choice</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Financial report</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">REPEATABLE READ</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Consistent view needed</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Inventory checkout</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SERIALIZABLE</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Prevent overselling</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Seat booking</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SERIALIZABLE + FOR UPDATE</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No double-booking</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>General Guidelines:</strong></p>
                                <ul>
                                    <li>‚úì Start with READ COMMITTED (default)</li>
                                    <li>‚úì Increase isolation if you see concurrency bugs</li>
                                    <li>‚úì Use SELECT FOR UPDATE for critical updates</li>
                                    <li>‚úì Profile performance impact before changing</li>
                                    <li>‚ö† Higher isolation = lower throughput</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between REPEATABLE READ and SERIALIZABLE?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Key Difference: Phantom Reads</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- REPEATABLE READ (Standard SQL, not MySQL InnoDB)
            START TRANSACTION ISOLATION LEVEL REPEATABLE READ;

            -- Read 1
            SELECT * FROM Orders WHERE CustomerID = 100;
            -- Returns 5 orders

            -- Another transaction:
            INSERT INTO Orders VALUES (6, 100, '2024-01-01');
            COMMIT;

            -- Read 2 (same transaction)
            SELECT * FROM Orders WHERE CustomerID = 100;
            -- May return 6 orders! ‚ö† (phantom read)
            -- Same rows repeatable, but NEW rows can appear

            -- SERIALIZABLE
            START TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            -- Read 1
            SELECT * FROM Orders WHERE CustomerID = 100;
            -- Returns 5 orders
            -- RANGE LOCK on CustomerID = 100 ‚úì

            -- Another transaction tries:
            INSERT INTO Orders VALUES (6, 100, '2024-01-01');
            -- BLOCKED! Cannot insert ‚úì

            -- Read 2
            SELECT * FROM Orders WHERE CustomerID = 100;
            -- Still returns 5 orders ‚úì
            -- No phantoms possible ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>MySQL InnoDB Exception:</strong></p>
                                <ul>
                                    <li>InnoDB's REPEATABLE READ prevents phantoms via MVCC</li>
                                    <li>Acts like SERIALIZABLE for phantom prevention</li>
                                    <li>But still has different locking behavior</li>
                                    <li>SERIALIZABLE adds more aggressive locking</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can different transactions use different isolation levels?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Each transaction can choose its own isolation level.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Session 1: Critical financial transaction
            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
            START TRANSACTION;
            -- Strong consistency ‚úì

            -- Session 2: Analytics query (concurrent)
            SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
            START TRANSACTION;
            -- Fast, approximate data ‚úì

            -- Session 3: Normal CRUD (concurrent)
            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
            START TRANSACTION;
            -- Balanced ‚úì

            -- All three run concurrently!
            -- Each with appropriate isolation for their needs ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Interaction Rules:</strong></p>
                                <ul>
                                    <li>Higher isolation transaction gets priority</li>
                                    <li>Lower isolation may see inconsistent data</li>
                                    <li>Locks held by higher isolation block lower isolation</li>
                                    <li>Each transaction independent in isolation choice</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Isolation Levels</span>
                        <span class="keyword-tag">READ UNCOMMITTED</span>
                        <span class="keyword-tag">READ COMMITTED</span>
                        <span class="keyword-tag">REPEATABLE READ</span>
                        <span class="keyword-tag">SERIALIZABLE</span>
                        <span class="keyword-tag">Dirty Read</span>
                        <span class="keyword-tag">Non-Repeatable Read</span>
                        <span class="keyword-tag">Phantom Read</span>
                        <span class="keyword-tag">Concurrency vs Consistency</span>
                        <span class="keyword-tag">Range Locks</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 81: What is Locking in DBMS? -->
            <div class="question-content" id="q81">
                <div class="question-header">
                    <h1 class="question-title">What is Locking in DBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Locking</strong> is a concurrency control mechanism that prevents multiple transactions from simultaneously accessing the same data item in a way that could cause inconsistencies. It's like putting a "Do Not Disturb" sign on data.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why Locking is Needed:</strong></p>
                        <ul>
                            <li>Prevent simultaneous modifications to the same data</li>
                            <li>Ensure data consistency</li>
                            <li>Implement transaction isolation</li>
                            <li>Maintain database integrity</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Key Concepts:</strong></p>
                        <ul>
                            <li><strong>Lock:</strong> A mechanism to control access to a resource</li>
                            <li><strong>Lock Holder:</strong> Transaction that currently owns the lock</li>
                            <li><strong>Lock Waiter:</strong> Transaction waiting to acquire the lock</li>
                            <li><strong>Lock Release:</strong> Freeing the lock when done</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-ol"></i>
                        Types of Locks
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Shared Lock (S-Lock) / Read Lock</h4>
                        <p>Allows multiple transactions to <strong>read</strong> the same data simultaneously, but prevents writes.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Acquire Shared Lock (Read Lock)
            SELECT * FROM Accounts WHERE AccountID = 1 LOCK IN SHARE MODE;

            -- Multiple transactions can hold shared locks simultaneously
            -- Transaction 1:
            SELECT Balance FROM Accounts WHERE AccountID = 1 LOCK IN SHARE MODE;  -- ‚úì Success

            -- Transaction 2 (simultaneous):
            SELECT Balance FROM Accounts WHERE AccountID = 1 LOCK IN SHARE MODE;  -- ‚úì Success

            -- Transaction 3 (tries to write):
            UPDATE Accounts SET Balance = 2000 WHERE AccountID = 1;  -- ‚ùå Blocked! Waits for S-locks to release</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Exclusive Lock (X-Lock) / Write Lock</h4>
                        <p>Allows only <strong>one transaction</strong> to read or write. Blocks all other access.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Acquire Exclusive Lock (Write Lock)
            SELECT * FROM Accounts WHERE AccountID = 1 FOR UPDATE;

            -- Only ONE transaction can hold exclusive lock
            -- Transaction 1:
            SELECT * FROM Accounts WHERE AccountID = 1 FOR UPDATE;  -- ‚úì Gets X-lock

            -- Transaction 2 (tries to read):
            SELECT * FROM Accounts WHERE AccountID = 1 LOCK IN SHARE MODE;  -- ‚ùå Blocked!

            -- Transaction 3 (tries to write):
            UPDATE Accounts SET Balance = 3000 WHERE AccountID = 1;  -- ‚ùå Blocked!

            -- Both wait until Transaction 1 commits/rolls back</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Update Lock (U-Lock)</h4>
                        <p>Intermediate lock used to prevent deadlocks during UPDATE operations.</p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Update Lock (not directly available in MySQL, concept explanation)
            -- Sequence: Shared ‚Üí Update ‚Üí Exclusive
            -- 
            -- 1. Transaction acquires Update lock (can read, others can read but not update)
            -- 2. Transaction decides to update
            -- 3. Update lock upgraded to Exclusive lock
            -- 4. Update performed
            -- 
            -- Prevents deadlock: Two transactions can't both have Update locks on same resource</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Lock Granularity Levels
                    </div>
                    
                    <div class="explanation-text">
                        <p>Locks can be applied at different levels of granularity:</p>
                        
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <tr style="background: #dbeafe;">
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Level</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Scope</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Concurrency</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Overhead</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Database Lock</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Entire database</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lowest</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lowest</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Table Lock</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Entire table</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Low</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Low</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Page/Block Lock</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Page/block of data</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Medium</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Medium</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Row Lock</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Single row</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">High</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">High</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Column Lock</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Specific column</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Highest</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Highest</td>
                            </tr>
                        </table>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Table-Level Lock
            LOCK TABLES Accounts WRITE;  -- Exclusive lock on entire table
            -- ... perform operations ...
            UNLOCK TABLES;

            -- Row-Level Lock (InnoDB default)
            START TRANSACTION;
            SELECT * FROM Accounts WHERE AccountID = 1 FOR UPDATE;  -- Lock only this row
            -- Other transactions can access other rows
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 1;
            COMMIT;

            -- Check current locks
            SELECT * FROM information_schema.INNODB_LOCKS;
            SELECT * FROM information_schema.INNODB_LOCK_WAITS;</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Lock Compatibility Matrix
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 600 400" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="300" y="30" font-size="16" font-weight="bold" fill="#1e40af" text-anchor="middle">Lock Compatibility Matrix</text>
                            
                            <!-- Matrix -->
                            <rect x="100" y="70" width="400" height="280" fill="none" stroke="#333" stroke-width="2"/>
                            
                            <!-- Headers -->
                            <rect x="100" y="70" width="120" height="60" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="160" y="95" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">Current Lock</text>
                            <text x="160" y="115" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">Requested Lock ‚Üì</text>
                            
                            <!-- Column Headers -->
                            <rect x="220" y="70" width="140" height="60" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="290" y="105" font-size="13" font-weight="bold" fill="#1e40af" text-anchor="middle">Shared (S)</text>
                            
                            <rect x="360" y="70" width="140" height="60" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="430" y="105" font-size="13" font-weight="bold" fill="#1e40af" text-anchor="middle">Exclusive (X)</text>
                            
                            <!-- Row 1: Shared -->
                            <rect x="100" y="130" width="120" height="70" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="160" y="170" font-size="13" font-weight="bold" fill="#1e40af" text-anchor="middle">Shared (S)</text>
                            
                            <rect x="220" y="130" width="140" height="70" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                            <text x="290" y="165" font-size="20" fill="#065f46" text-anchor="middle">‚úì</text>
                            <text x="290" y="185" font-size="11" fill="#065f46" text-anchor="middle">Compatible</text>
                            
                            <rect x="360" y="130" width="140" height="70" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
                            <text x="430" y="165" font-size="20" fill="#991b1b" text-anchor="middle">‚úó</text>
                            <text x="430" y="185" font-size="11" fill="#991b1b" text-anchor="middle">Blocked</text>
                            
                            <!-- Row 2: Exclusive -->
                            <rect x="100" y="200" width="120" height="70" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="160" y="240" font-size="13" font-weight="bold" fill="#1e40af" text-anchor="middle">Exclusive (X)</text>
                            
                            <rect x="220" y="200" width="140" height="70" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
                            <text x="290" y="235" font-size="20" fill="#991b1b" text-anchor="middle">‚úó</text>
                            <text x="290" y="255" font-size="11" fill="#991b1b" text-anchor="middle">Blocked</text>
                            
                            <rect x="360" y="200" width="140" height="70" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
                            <text x="430" y="235" font-size="20" fill="#991b1b" text-anchor="middle">‚úó</text>
                            <text x="430" y="255" font-size="11" fill="#991b1b" text-anchor="middle">Blocked</text>
                            
                            <!-- Row 3: None -->
                            <rect x="100" y="270" width="120" height="80" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="160" y="315" font-size="13" font-weight="bold" fill="#1e40af" text-anchor="middle">None</text>
                            
                            <rect x="220" y="270" width="140" height="80" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                            <text x="290" y="305" font-size="20" fill="#065f46" text-anchor="middle">‚úì</text>
                            <text x="290" y="330" font-size="11" fill="#065f46" text-anchor="middle">Granted</text>
                            
                            <rect x="360" y="270" width="140" height="80" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                            <text x="430" y="305" font-size="20" fill="#065f46" text-anchor="middle">‚úì</text>
                            <text x="430" y="330" font-size="11" fill="#065f46" text-anchor="middle">Granted</text>
                            
                            <!-- Legend -->
                            <text x="300" y="375" font-size="11" fill="#10b981" font-weight="bold" text-anchor="middle">‚úì = Lock granted immediately</text>
                            <text x="300" y="390" font-size="11" fill="#dc2626" font-weight="bold" text-anchor="middle">‚úó = Transaction must wait</text>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Locking Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- Example 1: Explicit Locking in Transaction
            START TRANSACTION;

            -- Acquire exclusive lock on row
            SELECT * FROM Accounts WHERE AccountID = 1 FOR UPDATE;
            -- Row is now locked, no other transaction can modify it

            -- Safe to update
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;

            -- Lock released on COMMIT
            COMMIT;

            -- -----------------------------------------------------------
            -- Example 2: Preventing Race Condition with Locking
            -- -----------------------------------------------------------
            -- BAD: Without locking (race condition)
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 1;  -- Balance = 1000
            -- Another transaction might update here!
            UPDATE Accounts SET Balance = 900 WHERE AccountID = 1;
            COMMIT;

            -- GOOD: With locking
            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 1 FOR UPDATE;  -- Lock + read
            -- No other transaction can modify until we commit
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;
            COMMIT;

            -- -----------------------------------------------------------
            -- Example 3: Shared Lock for Consistent Read
            -- -----------------------------------------------------------
            START TRANSACTION;

            -- Multiple transactions can read simultaneously
            SELECT * FROM Products WHERE CategoryID = 5 LOCK IN SHARE MODE;
            -- Other SELECTs allowed
            -- UPDATEs blocked until this transaction completes

            COMMIT;

            -- -----------------------------------------------------------
            -- Example 4: Table-Level Locking
            -- -----------------------------------------------------------
            -- Lock entire table for bulk operations
            LOCK TABLES Orders WRITE, Order_Items WRITE;

            -- Perform bulk operations (no other transactions can access these tables)
            INSERT INTO Orders SELECT * FROM Temp_Orders;
            INSERT INTO Order_Items SELECT * FROM Temp_Order_Items;

            UNLOCK TABLES;

            -- -----------------------------------------------------------
            -- Example 5: Deadlock Caused by Locking
            -- -----------------------------------------------------------
            -- Transaction 1:
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;  -- Lock row 1
            -- ... delay ...
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 2;  -- Wants row 2
            COMMIT;

            -- Transaction 2 (simultaneous):
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 50 WHERE AccountID = 2;   -- Lock row 2
            -- ... delay ...
            UPDATE Accounts SET Balance = Balance + 50 WHERE AccountID = 1;   -- Wants row 1
            COMMIT;
            -- ‚ö†Ô∏è DEADLOCK! Both wait for each other</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-cogs"></i>
                        Lock Timeout and Wait Strategies
                    </div>
                    <div class="example-box">
                        <pre><code>-- Set lock wait timeout (in seconds)
            SET innodb_lock_wait_timeout = 10;  -- Wait max 10 seconds for lock

            -- Check current timeout
            SHOW VARIABLES LIKE 'innodb_lock_wait_timeout';

            -- Transaction behavior on timeout:
            START TRANSACTION;
            SELECT * FROM Accounts WHERE AccountID = 1 FOR UPDATE;
            -- If can't acquire lock within 10 seconds:
            -- ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction

            -- Lock wait strategies:
            -- 1. NO WAIT: Fail immediately if locked
            -- 2. WAIT: Wait for specified time
            -- 3. SKIP LOCKED: Skip locked rows (MySQL 8.0+)

            -- Skip locked rows example:
            SELECT * FROM Queue 
            WHERE Status = 'Pending' 
            ORDER BY Priority DESC 
            LIMIT 10 
            FOR UPDATE SKIP LOCKED;  -- Skip any locked rows, get unlocked ones</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is Lock Escalation?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Lock Escalation</strong> is when the database automatically converts many fine-grained locks (row locks) into fewer coarse-grained locks (table locks) to reduce overhead.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Why it happens:</strong></p>
                                <ul>
                                    <li>Too many individual locks consume memory</li>
                                    <li>Managing many locks has overhead</li>
                                    <li>Database escalates to reduce resource usage</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Example:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>-- Transaction locks 10,000 rows individually
            UPDATE Orders SET Status = 'Shipped' WHERE OrderDate < '2024-01-01';

            -- Database may escalate:
            -- 10,000 row locks ‚Üí 1 table lock
            -- Pros: Less memory, less overhead
            -- Cons: Reduced concurrency (entire table locked)</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Prevention:</strong></p>
                                <ul>
                                    <li>Keep transactions small</li>
                                    <li>Use appropriate indexes</li>
                                    <li>Batch large updates</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the difference between Pessimistic and Optimistic Locking?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Pessimistic Locking</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Optimistic Locking</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Assumption</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Conflicts will happen</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Conflicts are rare</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Locking</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lock immediately when reading</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No locks, check at commit</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Concurrency</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lower (blocks other transactions)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Higher (no blocking)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Implementation</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT ... FOR UPDATE</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Version column</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Pessimistic Locking
            START TRANSACTION;
            SELECT * FROM Accounts WHERE ID = 1 FOR UPDATE;  -- Lock immediately
            UPDATE Accounts SET Balance = 1500 WHERE ID = 1;
            COMMIT;

            -- Optimistic Locking (using version)
            -- Read
            SELECT Balance, Version FROM Accounts WHERE ID = 1;
            -- Returns: Balance = 1000, Version = 5

            -- Update only if version unchanged
            UPDATE Accounts 
            SET Balance = 1500, Version = 6 
            WHERE ID = 1 AND Version = 5;

            -- If 0 rows updated: version changed, conflict detected, retry</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens when a transaction holds a lock for too long?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Problems:</strong></p>
                                <ul>
                                    <li>‚ùå Other transactions blocked (waiting)</li>
                                    <li>‚ùå Reduced system throughput</li>
                                    <li>‚ùå Increased chance of deadlocks</li>
                                    <li>‚ùå Poor user experience (slow responses)</li>
                                    <li>‚ùå May trigger timeouts in other transactions</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Solutions:</strong></p>
                                <ol>
                                    <li><strong>Keep transactions short:</strong>
                                        <ul>
                                            <li>Acquire lock, do work, release quickly</li>
                                            <li>Don't do slow operations while holding locks</li>
                                        </ul>
                                    </li>
                                    <li><strong>Set appropriate timeouts:</strong>
                                        <ul>
                                            <li>Automatically kill long-running transactions</li>
                                        </ul>
                                    </li>
                                    <li><strong>Monitor locks:</strong>
                                        <ul>
                                            <li>Track long-held locks</li>
                                            <li>Alert on potential issues</li>
                                        </ul>
                                    </li>
                                    <li><strong>Use appropriate isolation levels:</strong>
                                        <ul>
                                            <li>Lower isolation = fewer/shorter locks</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Locking</span>
                        <span class="keyword-tag">Shared Lock</span>
                        <span class="keyword-tag">Exclusive Lock</span>
                        <span class="keyword-tag">Row Lock</span>
                        <span class="keyword-tag">Table Lock</span>
                        <span class="keyword-tag">Lock Granularity</span>
                        <span class="keyword-tag">FOR UPDATE</span>
                        <span class="keyword-tag">LOCK IN SHARE MODE</span>
                        <span class="keyword-tag">Lock Escalation</span>
                        <span class="keyword-tag">Pessimistic Locking</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 82: What are Read Phenomena in Database Transactions? -->
            <div class="question-content" id="q82">
                <div class="question-header">
                    <h1 class="question-title">What are Read Phenomena in Database Transactions?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 11 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Read Phenomena</strong> are anomalies or inconsistencies that can occur when multiple transactions execute concurrently. These phenomena represent different types of data integrity violations that isolation levels are designed to prevent.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The Three Main Read Phenomena (SQL-92 Standard):</strong></p>
                        <ol>
                            <li><strong>Dirty Read:</strong> Reading uncommitted data from another transaction</li>
                            <li><strong>Non-Repeatable Read:</strong> Getting different values when reading the same row twice</li>
                            <li><strong>Phantom Read:</strong> Getting different row counts when executing the same query twice</li>
                        </ol>
                        
                        <p style="margin-top: 1rem;"><strong>Additional Phenomena:</strong></p>
                        <ul>
                            <li><strong>Lost Update:</strong> One transaction's update overwrites another's</li>
                            <li><strong>Write Skew:</strong> Concurrent writes violate integrity constraint</li>
                            <li><strong>Read Skew:</strong> Inconsistent reads across multiple rows</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why Understanding These Matters:</strong></p>
                        <ul>
                            <li>Choose appropriate isolation level</li>
                            <li>Debug concurrency bugs</li>
                            <li>Design robust multi-user systems</li>
                            <li>Interview preparation</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        1. Dirty Read
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> A transaction reads data written by another transaction that has not yet committed (and may roll back).</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why It's Problematic:</strong></p>
                        <ul>
                            <li>Reading data that might be rolled back</li>
                            <li>Making decisions based on invalid data</li>
                            <li>Can propagate errors through system</li>
                            <li>Breaks data integrity guarantees</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Initial State: Account A has $1000

            -- Transaction 1 (T1)
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A';
            -- Balance changed to $1500 (uncommitted)

            -- Transaction 2 (T2) - runs concurrently with READ UNCOMMITTED
            SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
            START TRANSACTION;

            -- Dirty read occurs!
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Returns: $1500 (uncommitted data) ‚ùå

            -- T2 makes decision based on this value
            IF Balance > 1200 THEN
                -- Approve loan based on $1500 balance
                INSERT INTO Loans VALUES (customer_id, 5000, 'Approved');
            END IF;

            COMMIT;  -- T2 commits

            -- T1 encounters error and rolls back
            ROLLBACK;  -- T1 rolls back

            -- Result:
            -- Account A: $1000 (rolled back) ‚úì
            -- Loan: Approved based on $1500 (which never existed!) ‚ùå
            -- Dirty read caused incorrect business decision!

            -- -----------------------------------------------------------
            -- Real-World Example: E-commerce Inventory
            -- -----------------------------------------------------------

            -- Transaction 1: User A attempts purchase
            START TRANSACTION;
            UPDATE Products SET Stock = Stock - 1 WHERE ProductID = 101;
            -- Stock temporarily reduced

            -- Transaction 2: User B checks availability (READ UNCOMMITTED)
            SELECT Stock FROM Products WHERE ProductID = 101;
            -- Sees reduced stock (dirty read)
            -- Shows "1 item left" to User B

            -- T1 fails (payment declined)
            ROLLBACK;

            -- Result:
            -- Stock restored, but User B saw incorrect "low stock" warning
            -- May have rushed to purchase or chosen different product
            -- Business decision based on dirty data ‚ùå

            -- -----------------------------------------------------------
            -- Prevention
            -- -----------------------------------------------------------

            -- Use READ COMMITTED or higher
            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;

            START TRANSACTION;
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Waits if another transaction holds uncommitted changes
            -- Only reads committed data ‚úì

            -- Prevented in: READ COMMITTED, REPEATABLE READ, SERIALIZABLE ‚úì
            -- Allowed in: READ UNCOMMITTED ‚ùå</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-sync-alt"></i>
                        2. Non-Repeatable Read
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> A transaction reads the same row twice and gets different values because another transaction modified and committed the row between the two reads.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why It's Problematic:</strong></p>
                        <ul>
                            <li>Inconsistent data within same transaction</li>
                            <li>Calculations may be incorrect</li>
                            <li>Business logic assumes stable data</li>
                            <li>Reports may show contradictory information</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Transaction 1 (T1) - Generating financial report
            SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
            START TRANSACTION;

            -- Read 1: Get account balance
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Result: $1000

            -- ... T1 does some calculations ...

            -- Transaction 2 (T2) - runs concurrently
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A';
            COMMIT;  -- T2 commits change

            -- Back to T1
            -- Read 2: Get same account balance again
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Result: $1500 ‚ùå (different from first read!)

            -- Problem: T1's calculations inconsistent
            -- Used $1000 for some calculations, $1500 for others
            -- Report shows contradictory data!

            COMMIT;

            -- -----------------------------------------------------------
            -- Real-World Example: Banking Report
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Calculate total assets
            SELECT SUM(Balance) FROM Accounts WHERE Type = 'Savings';
            -- Result: $100,000

            -- Generate detail section (few seconds later)
            SELECT AccountID, Balance FROM Accounts WHERE Type = 'Savings';
            -- Meanwhile, deposits and withdrawals happened
            -- Sum of individual balances: $105,000

            -- Report shows:
            -- Total Assets: $100,000
            -- Detail breakdown sums to: $105,000
            -- Inconsistency! ‚ùå

            COMMIT;

            -- -----------------------------------------------------------
            -- Real-World Example: Seat Reservation
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Check seats available
            SELECT AvailableSeats FROM Flights WHERE FlightID = 123;
            -- Result: 5 seats

            -- Show user available seats, user decides to book

            -- Another user books 3 seats and commits

            -- Proceed with booking
            SELECT AvailableSeats FROM Flights WHERE FlightID = 123;
            -- Result: 2 seats (changed!) ‚ö†

            -- User thought 5 were available, now only 2
            -- Non-repeatable read causes confusion

            COMMIT;

            -- -----------------------------------------------------------
            -- Prevention
            -- -----------------------------------------------------------

            -- Use REPEATABLE READ or SERIALIZABLE
            SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;

            START TRANSACTION;

            -- Read 1
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Result: $1000
            -- Transaction snapshot created ‚úì

            -- Other transactions can modify, but...

            -- Read 2
            SELECT Balance FROM Accounts WHERE AccountID = 'A';
            -- Result: Still $1000 ‚úì
            -- Repeatable read guaranteed!

            COMMIT;

            -- Prevented in: REPEATABLE READ, SERIALIZABLE ‚úì
            -- Allowed in: READ UNCOMMITTED, READ COMMITTED ‚ùå</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-ghost"></i>
                        3. Phantom Read
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> A transaction executes a query twice and gets different numbers of rows because another transaction inserted or deleted rows that match the query's WHERE clause.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why It's Problematic:</strong></p>
                        <ul>
                            <li>Row counts change unexpectedly</li>
                            <li>Aggregate calculations inconsistent</li>
                            <li>Pagination breaks</li>
                            <li>Business rules may be violated</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Transaction 1 (T1) - Generating summary report
            SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
            START TRANSACTION;

            -- Query 1: Count orders for customer
            SELECT COUNT(*) FROM Orders WHERE CustomerID = 100;
            -- Result: 5 orders

            -- Store this count for report header

            -- Transaction 2 (T2) - runs concurrently
            START TRANSACTION;
            INSERT INTO Orders VALUES (6, 100, '2024-01-01', 150.00);
            COMMIT;  -- T2 commits

            -- Back to T1
            -- Query 2: Get order details
            SELECT OrderID, OrderDate, Amount FROM Orders WHERE CustomerID = 100;
            -- Result: 6 orders! ‚ùå (phantom row appeared!)

            -- Problem: Report shows
            -- Header: "Customer has 5 orders"
            -- Detail: Lists 6 orders
            -- Inconsistency! ‚ùå

            COMMIT;

            -- -----------------------------------------------------------
            -- Real-World Example: Salary Statistics
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Calculate average salary
            SELECT AVG(Salary) FROM Employees WHERE DepartmentID = 1;
            -- Result: $75,000 (based on 10 employees)

            -- Generate report narrative
            -- "Department 1 has average salary of $75,000"

            -- Another transaction adds new employee
            INSERT INTO Employees VALUES (11, 'New Hire', 1, 50000);
            COMMIT;

            -- Get employee list for detail
            SELECT COUNT(*), AVG(Salary) FROM Employees WHERE DepartmentID = 1;
            -- Result: 11 employees, average $72,727

            -- Report inconsistency:
            -- Text says average is $75,000
            -- Table shows average is $72,727
            -- Phantom read caused mismatch ‚ùå

            -- -----------------------------------------------------------
            -- Real-World Example: Pagination
            -- -----------------------------------------------------------

            -- User viewing products, page 1
            START TRANSACTION;

            SELECT * FROM Products WHERE Category = 'Electronics' LIMIT 10 OFFSET 0;
            -- Shows products 1-10

            -- User clicks "Next Page"
            -- Meanwhile, another user adds new product at top

            SELECT * FROM Products WHERE Category = 'Electronics' LIMIT 10 OFFSET 10;
            -- Shows products 12-21 (skipped product 11!)
            -- Or shows duplicate (product 10 appears on both pages)
            -- Phantom read causes pagination issue ‚ùå

            COMMIT;

            -- -----------------------------------------------------------
            -- Visual Example
            -- -----------------------------------------------------------

            -- Initial State: Table has rows [1, 2, 3, 4, 5]

            -- Transaction 1
            START TRANSACTION;
            SELECT * FROM Data WHERE Value > 2;
            -- Returns: [3, 4, 5]  (3 rows)

            -- Transaction 2 (concurrent)
            INSERT INTO Data VALUES (6);  -- Value = 6
            COMMIT;

            -- Transaction 1 (same query again)
            SELECT * FROM Data WHERE Value > 2;
            -- Returns: [3, 4, 5, 6]  (4 rows) ‚ö†
            -- Row 6 is a "phantom" - appeared between queries!

            -- -----------------------------------------------------------
            -- Prevention
            -- -----------------------------------------------------------

            -- Use SERIALIZABLE isolation level
            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            START TRANSACTION;

            -- Query 1
            SELECT COUNT(*) FROM Orders WHERE CustomerID = 100;
            -- Result: 5
            -- RANGE LOCK on CustomerID = 100 ‚úì

            -- Another transaction tries to insert
            INSERT INTO Orders VALUES (6, 100, '2024-01-01', 150.00);
            -- BLOCKED! Cannot insert due to range lock ‚úì

            -- Query 2
            SELECT COUNT(*) FROM Orders WHERE CustomerID = 100;
            -- Result: Still 5 ‚úì
            -- No phantoms!

            COMMIT;

            -- MySQL InnoDB Exception:
            -- REPEATABLE READ also prevents phantoms via Next-Key Locks ‚úì

            -- Prevented in: SERIALIZABLE ‚úì
            -- MySQL InnoDB: Also prevented in REPEATABLE READ ‚úì
            -- Allowed in: READ UNCOMMITTED, READ COMMITTED, (standard) REPEATABLE READ ‚ùå</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exchange-alt"></i>
                        4. Lost Update
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> Two transactions read the same data, modify it based on the read value, and both commit - one transaction's update is lost.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Classic Lost Update Example

            -- Initial: Stock = 10

            -- Transaction 1 (T1)
            START TRANSACTION;
            SELECT Stock FROM Products WHERE ProductID = 1;  -- Reads 10
            -- Calculate: new_stock = 10 - 2 = 8

            -- Transaction 2 (T2) - runs concurrently
            START TRANSACTION;
            SELECT Stock FROM Products WHERE ProductID = 1;  -- Reads 10
            -- Calculate: new_stock = 10 - 3 = 7

            -- T1 updates
            UPDATE Products SET Stock = 8 WHERE ProductID = 1;
            COMMIT;

            -- T2 updates (overwrites T1's update!)
            UPDATE Products SET Stock = 7 WHERE ProductID = 1;
            COMMIT;

            -- Final: Stock = 7 ‚ùå
            -- Should be: 10 - 2 - 3 = 5 ‚úì
            -- T1's update lost! ‚ùå

            -- -----------------------------------------------------------
            -- Prevention: Use SELECT FOR UPDATE
            -- -----------------------------------------------------------

            -- Transaction 1
            START TRANSACTION;
            SELECT Stock FROM Products WHERE ProductID = 1 FOR UPDATE;
            -- Locks the row ‚úì
            -- Reads 10

            UPDATE Products SET Stock = Stock - 2 WHERE ProductID = 1;
            COMMIT;

            -- Transaction 2 (concurrent)
            START TRANSACTION;
            SELECT Stock FROM Products WHERE ProductID = 1 FOR UPDATE;
            -- WAITS for T1's lock ‚úì
            -- After T1 commits, reads 8

            UPDATE Products SET Stock = Stock - 3 WHERE ProductID = 1;
            COMMIT;

            -- Final: Stock = 5 ‚úì
            -- Correct! No lost update ‚úì

            -- -----------------------------------------------------------
            -- Alternative: Optimistic Locking
            -- -----------------------------------------------------------

            -- Add version column
            ALTER TABLE Products ADD COLUMN Version INT DEFAULT 0;

            -- Transaction 1
            SELECT Stock, Version FROM Products WHERE ProductID = 1;
            -- Stock = 10, Version = 1

            UPDATE Products 
            SET Stock = 8, Version = 2 
            WHERE ProductID = 1 AND Version = 1;
            -- Success (1 row affected) ‚úì

            -- Transaction 2 (trying to update)
            SELECT Stock, Version FROM Products WHERE ProductID = 1;
            -- Stock = 10, Version = 1

            UPDATE Products 
            SET Stock = 7, Version = 2 
            WHERE ProductID = 1 AND Version = 1;
            -- Fails! (0 rows affected) ‚ùå
            -- Version changed by T1

            -- Retry with new version
            SELECT Stock, Version FROM Products WHERE ProductID = 1;
            -- Stock = 8, Version = 2

            UPDATE Products 
            SET Stock = 5, Version = 3 
            WHERE ProductID = 1 AND Version = 2;
            -- Success! ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Read Phenomena Summary
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Phenomenon</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">What Happens</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Example Impact</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Prevention</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Dirty Read</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Read uncommitted data</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Loan approved based on balance that gets rolled back</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">READ COMMITTED+</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Non-Repeatable Read</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Same row, different values</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Report header shows $100K, details sum to $105K</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">REPEATABLE READ+</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Phantom Read</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Different row count</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Count shows 5, list shows 6 rows</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SERIALIZABLE (or MySQL RR)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Lost Update</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Overwrite another's update</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Stock should be 5, ends up being 7</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SELECT FOR UPDATE</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Read Phenomena</span>
                        <span class="keyword-tag">Dirty Read</span>
                        <span class="keyword-tag">Non-Repeatable Read</span>
                        <span class="keyword-tag">Phantom Read</span>
                        <span class="keyword-tag">Lost Update</span>
                        <span class="keyword-tag">Write Skew</span>
                        <span class="keyword-tag">Read Skew</span>
                        <span class="keyword-tag">Concurrency Anomalies</span>
                        <span class="keyword-tag">SELECT FOR UPDATE</span>
                        <span class="keyword-tag">Optimistic Locking</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 83: What is a Transaction in DBMS? -->
            <div class="question-content" id="q83">
                <div class="question-header">
                    <h1 class="question-title">What is a Transaction in DBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Basic</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 7 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p>A <strong>Transaction</strong> is a <strong>logical unit of work</strong> that contains one or more SQL operations. It represents a complete business operation that must be executed as a single, indivisible unit.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Characteristics:</strong></p>
                        <ul>
                            <li>A transaction is a <strong>sequence of operations</strong> performed as a single unit</li>
                            <li>Either <strong>ALL operations succeed</strong> (COMMIT) or <strong>ALL fail</strong> (ROLLBACK)</li>
                            <li>Must follow <strong>ACID properties</strong> (Atomicity, Consistency, Isolation, Durability)</li>
                            <li>Ensures <strong>data integrity</strong> and <strong>consistency</strong></li>
                            <li>Critical for <strong>concurrent database access</strong></li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Transaction States:</strong></p>
                        <ul>
                            <li><strong>Active:</strong> Transaction is being executed</li>
                            <li><strong>Partially Committed:</strong> Final operation executed, waiting for commit</li>
                            <li><strong>Committed:</strong> Transaction completed successfully</li>
                            <li><strong>Failed:</strong> Transaction cannot proceed</li>
                            <li><strong>Aborted:</strong> Transaction rolled back, database restored</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Detailed Explanation
                    </div>
                    <div class="explanation-text">
                        <p>Think of a transaction as a complete business operation. For example, transferring money from one bank account to another involves multiple steps, but it's ONE transaction. If any step fails, the entire operation must be undone to maintain data consistency.</p>

                        <p style="margin-top: 1rem;"><strong>Transaction Control Commands:</strong></p>
                        <ul>
                            <li><strong>BEGIN TRANSACTION / START TRANSACTION:</strong> Starts a new transaction</li>
                            <li><strong>COMMIT:</strong> Saves all changes permanently</li>
                            <li><strong>ROLLBACK:</strong> Undoes all changes in the transaction</li>
                            <li><strong>SAVEPOINT:</strong> Creates a point to rollback to within a transaction</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Transaction Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- Example 1: Basic Transaction - Bank Transfer
            START TRANSACTION;

            -- Step 1: Deduct $500 from Account A
            UPDATE Accounts 
            SET Balance = Balance - 500 
            WHERE AccountNumber = 'A12345';

            -- Step 2: Add $500 to Account B
            UPDATE Accounts 
            SET Balance = Balance + 500 
            WHERE AccountNumber = 'B67890';

            -- If both steps succeed:
            COMMIT;  -- Changes are permanent

            -- If any step fails:
            ROLLBACK;  -- All changes undone

            -- -----------------------------------------------------------
            -- Example 2: Transaction with Error Handling
            -- -----------------------------------------------------------
            START TRANSACTION;

            -- Check if Account A has sufficient balance
            SELECT @balance := Balance FROM Accounts WHERE AccountNumber = 'A12345';

            IF @balance >= 500 THEN
                -- Deduct from Account A
                UPDATE Accounts SET Balance = Balance - 500 WHERE AccountNumber = 'A12345';
                
                -- Add to Account B
                UPDATE Accounts SET Balance = Balance + 500 WHERE AccountNumber = 'B67890';
                
                -- Insert transaction log
                INSERT INTO Transaction_Log (FromAccount, ToAccount, Amount, TransactionDate)
                VALUES ('A12345', 'B67890', 500, NOW());
                
                COMMIT;  -- Success!
                SELECT 'Transaction completed successfully' as Result;
            ELSE
                ROLLBACK;  -- Insufficient funds
                SELECT 'Insufficient funds' as Result;
            END IF;

            -- -----------------------------------------------------------
            -- Example 3: Using SAVEPOINT
            -- -----------------------------------------------------------
            START TRANSACTION;

            -- Operation 1
            INSERT INTO Orders (OrderID, CustomerID, Amount) 
            VALUES (1001, 101, 150.00);

            SAVEPOINT sp1;  -- Create savepoint

            -- Operation 2
            INSERT INTO Order_Items (OrderID, ProductID, Quantity) 
            VALUES (1001, 501, 2);

            SAVEPOINT sp2;  -- Another savepoint

            -- Operation 3
            UPDATE Inventory SET Quantity = Quantity - 2 WHERE ProductID = 501;

            -- If Operation 3 fails, rollback to sp2 (keep Order and Order_Items)
            -- ROLLBACK TO SAVEPOINT sp2;

            -- If Operation 2 fails, rollback to sp1 (keep only Order)
            -- ROLLBACK TO SAVEPOINT sp1;

            -- If all succeed:
            COMMIT;</code></pre>
                    </div>

                    <div class="example-box" style="margin-top: 1rem;">
                        <pre><code>-- Example 4: E-commerce Order Processing Transaction
            START TRANSACTION;

            -- Step 1: Create order
            INSERT INTO Orders (OrderID, CustomerID, OrderDate, TotalAmount, Status)
            VALUES (5001, 1001, NOW(), 299.99, 'Processing');

            -- Step 2: Add order items
            INSERT INTO Order_Items (OrderID, ProductID, Quantity, Price) VALUES
            (5001, 101, 1, 199.99),
            (5001, 102, 2, 50.00);

            -- Step 3: Update inventory
            UPDATE Products SET StockQuantity = StockQuantity - 1 WHERE ProductID = 101;
            UPDATE Products SET StockQuantity = StockQuantity - 2 WHERE ProductID = 102;

            -- Step 4: Process payment
            INSERT INTO Payments (OrderID, Amount, PaymentMethod, Status)
            VALUES (5001, 299.99, 'Credit Card', 'Completed');

            -- Step 5: Update customer loyalty points
            UPDATE Customers SET LoyaltyPoints = LoyaltyPoints + 30 WHERE CustomerID = 1001;

            -- If all operations succeed:
            COMMIT;

            -- If ANY operation fails:
            -- ROLLBACK;
            -- Everything is undone - no partial order!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Transaction State Diagram
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 400" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Transaction State Diagram</text>
                            
                            <!-- Active State -->
                            <ellipse cx="150" cy="100" rx="80" ry="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="150" y="105" font-size="13" font-weight="bold" fill="#1e40af" text-anchor="middle">ACTIVE</text>
                            
                            <!-- Partially Committed -->
                            <ellipse cx="400" cy="100" rx="100" ry="40" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                            <text x="400" y="95" font-size="13" font-weight="bold" fill="#92400e" text-anchor="middle">PARTIALLY</text>
                            <text x="400" y="110" font-size="13" font-weight="bold" fill="#92400e" text-anchor="middle">COMMITTED</text>
                            
                            <!-- Committed -->
                            <ellipse cx="650" cy="100" rx="80" ry="40" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
                            <text x="650" y="105" font-size="13" font-weight="bold" fill="#065f46" text-anchor="middle">COMMITTED</text>
                            
                            <!-- Failed -->
                            <ellipse cx="400" cy="250" rx="80" ry="40" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
                            <text x="400" y="255" font-size="13" font-weight="bold" fill="#991b1b" text-anchor="middle">FAILED</text>
                            
                            <!-- Aborted -->
                            <ellipse cx="150" cy="350" rx="80" ry="40" fill="#f3f4f6" stroke="#6b7280" stroke-width="2"/>
                            <text x="150" y="355" font-size="13" font-weight="bold" fill="#374151" text-anchor="middle">ABORTED</text>
                            
                            <!-- Arrows -->
                            <path d="M 230 100 L 300 100" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow6)"/>
                            <text x="265" y="90" font-size="10" fill="#3b82f6">Operations</text>
                            
                            <path d="M 500 100 L 570 100" stroke="#10b981" stroke-width="2" marker-end="url(#arrow7)"/>
                            <text x="535" y="90" font-size="10" fill="#10b981">COMMIT</text>
                            
                            <path d="M 400 140 L 400 210" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow8)"/>
                            <text x="410" y="180" font-size="10" fill="#dc2626">Error</text>
                            
                            <path d="M 150 140 L 150 310" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow8)"/>
                            <text x="160" y="225" font-size="10" fill="#dc2626">Error</text>
                            
                            <path d="M 360 270 L 210 340" stroke="#6b7280" stroke-width="2" marker-end="url(#arrow9)"/>
                            <text x="280" y="310" font-size="10" fill="#6b7280">ROLLBACK</text>
                            
                            <!-- Success Path -->
                            <text x="400" y="380" font-size="12" fill="#10b981" font-weight="bold" text-anchor="middle">‚úì Success Path: Active ‚Üí Partially Committed ‚Üí Committed</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow6" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#3b82f6"/>
                                </marker>
                                <marker id="arrow7" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#10b981"/>
                                </marker>
                                <marker id="arrow8" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#dc2626"/>
                                </marker>
                                <marker id="arrow9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#6b7280"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if a transaction fails midway?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p>If a transaction fails at any point, the database automatically performs a <strong>ROLLBACK</strong> to ensure atomicity (all-or-nothing principle).</p>
                                
                                <p style="margin-top: 1rem;"><strong>What happens step by step:</strong></p>
                                <ol>
                                    <li><strong>Failure Detected:</strong> Database detects error (constraint violation, system crash, etc.)</li>
                                    <li><strong>Transaction Marked as Failed:</strong> Transaction enters FAILED state</li>
                                    <li><strong>ROLLBACK Initiated:</strong> Database starts undo process</li>
                                    <li><strong>Changes Reversed:</strong> All modifications since START TRANSACTION are undone</li>
                                    <li><strong>Locks Released:</strong> All locks held by transaction are released</li>
                                    <li><strong>Database Restored:</strong> Database returns to state before transaction started</li>
                                </ol>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountNumber = 'A123';  -- ‚úì Success
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountNumber = 'B456';  -- ‚ùå Fails (account doesn't exist)

            -- Automatic ROLLBACK occurs:
            -- Account A123 balance restored to original value
            -- No changes persisted to database
            -- Transaction aborted</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the difference between COMMIT and ROLLBACK?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">COMMIT</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ROLLBACK</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Purpose</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Save all changes permanently</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Undo all changes</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>When Used</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transaction successful</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transaction failed or cancelled</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Effect</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Changes become permanent</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Database restored to pre-transaction state</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Reversible?</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No (permanent)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">N/A (already undone)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Transaction End</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Yes (transaction ends)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Yes (transaction ends)</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is Auto-commit mode?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Auto-commit mode</strong> means each SQL statement is automatically committed immediately after execution. There's no explicit transaction boundary.</p>
                                
                                <p style="margin-top: 1rem;"><strong>How it works:</strong></p>
                                <ul>
                                    <li>Each INSERT, UPDATE, DELETE is a separate transaction</li>
                                    <li>Changes are immediately permanent</li>
                                    <li>Cannot rollback after execution</li>
                                    <li>Default mode in most databases</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Auto-commit ON (default)
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;
            -- ‚úì Immediately committed, cannot rollback!

            -- Disable auto-commit for transaction control
            SET autocommit = 0;  -- MySQL
            -- or
            SET AUTOCOMMIT OFF;  -- Oracle

            -- Now you control commits
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 2;
            COMMIT;  -- Explicit commit

            -- Re-enable auto-commit
            SET autocommit = 1;</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>When to disable auto-commit:</strong></p>
                                <ul>
                                    <li>Multiple related operations must succeed together</li>
                                    <li>Banking transactions</li>
                                    <li>Order processing</li>
                                    <li>Batch operations</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Transaction</span>
                        <span class="keyword-tag">COMMIT</span>
                        <span class="keyword-tag">ROLLBACK</span>
                        <span class="keyword-tag">SAVEPOINT</span>
                        <span class="keyword-tag">Atomicity</span>
                        <span class="keyword-tag">START TRANSACTION</span>
                        <span class="keyword-tag">Auto-commit</span>
                        <span class="keyword-tag">Transaction States</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 84: What are Transaction States in DBMS? -->
            <div class="question-content" id="q84">
                <div class="question-header">
                    <h1 class="question-title">What are Transaction States in DBMS?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Transaction States</strong> describe the different stages a transaction goes through during its lifecycle, from beginning to completion (or failure). Understanding these states is crucial for managing transactions and ensuring ACID properties.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Five Transaction States:</strong></p>
                        <ol>
                            <li><strong>Active:</strong> Transaction is executing</li>
                            <li><strong>Partially Committed:</strong> Transaction completed execution, waiting for final commit</li>
                            <li><strong>Committed:</strong> Transaction successfully completed, changes permanent</li>
                            <li><strong>Failed:</strong> Transaction encountered error, cannot proceed</li>
                            <li><strong>Aborted:</strong> Transaction rolled back, changes undone</li>
                        </ol>
                        
                        <p style="margin-top: 1rem;"><strong>Why States Matter:</strong></p>
                        <ul>
                            <li><strong>Recovery:</strong> Know which transactions to redo/undo after crash</li>
                            <li><strong>Concurrency:</strong> Manage locks based on transaction state</li>
                            <li><strong>Monitoring:</strong> Track transaction progress and failures</li>
                            <li><strong>Debugging:</strong> Understand why transactions fail</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Transaction State Diagram
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 900 600" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="450" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Transaction State Diagram</text>
                            
                            <!-- Active State -->
                            <rect x="350" y="80" width="200" height="80" fill="#dbeafe" stroke="#3b82f6" stroke-width="3" rx="10"/>
                            <text x="450" y="115" font-size="16" font-weight="bold" fill="#1e40af" text-anchor="middle">Active</text>
                            <text x="450" y="140" font-size="11" fill="#333" text-anchor="middle">Transaction executing</text>
                            
                            <!-- Arrow to Partially Committed -->
                            <path d="M 450 160 L 450 200" stroke="#10b981" stroke-width="3" marker-end="url(#arrow29)"/>
                            <text x="480" y="185" font-size="10" fill="#10b981" font-weight="bold">Read/Write operations complete</text>
                            
                            <!-- Partially Committed State -->
                            <rect x="350" y="210" width="200" height="80" fill="#fef3c7" stroke="#f59e0b" stroke-width="3" rx="10"/>
                            <text x="450" y="245" font-size="16" font-weight="bold" fill="#92400e" text-anchor="middle">Partially Committed</text>
                            <text x="450" y="270" font-size="11" fill="#333" text-anchor="middle">Waiting for final commit</text>
                            
                            <!-- Arrow to Committed (Success) -->
                            <path d="M 550 250 L 680 250" stroke="#10b981" stroke-width="3" marker-end="url(#arrow29)"/>
                            <text x="615" y="240" font-size="10" fill="#10b981" font-weight="bold">Commit successful</text>
                            
                            <!-- Committed State -->
                            <rect x="690" y="210" width="180" height="80" fill="#d1fae5" stroke="#10b981" stroke-width="3" rx="10"/>
                            <text x="780" y="245" font-size="16" font-weight="bold" fill="#065f46" text-anchor="middle">Committed</text>
                            <text x="780" y="270" font-size="11" fill="#333" text-anchor="middle">Changes permanent ‚úì</text>
                            
                            <!-- Arrow to Failed (from Active) -->
                            <path d="M 350 120 L 220 120 L 220 380" stroke="#dc2626" stroke-width="3" marker-end="url(#arrow30)"/>
                            <text x="230" y="250" font-size="10" fill="#dc2626" font-weight="bold">Error during execution</text>
                            
                            <!-- Arrow to Failed (from Partially Committed) -->
                            <path d="M 350 250 L 220 250 L 220 380" stroke="#dc2626" stroke-width="3" marker-end="url(#arrow30)"/>
                            <text x="270" y="315" font-size="10" fill="#dc2626" font-weight="bold">Commit failure</text>
                            
                            <!-- Failed State -->
                            <rect x="130" y="390" width="180" height="80" fill="#fee2e2" stroke="#dc2626" stroke-width="3" rx="10"/>
                            <text x="220" y="425" font-size="16" font-weight="bold" fill="#991b1b" text-anchor="middle">Failed</text>
                            <text x="220" y="450" font-size="11" fill="#333" text-anchor="middle">Cannot proceed</text>
                            
                            <!-- Arrow to Aborted -->
                            <path d="M 220 470 L 220 510 L 450 510 L 450 540" stroke="#dc2626" stroke-width="3" marker-end="url(#arrow30)"/>
                            <text x="335" y="525" font-size="10" fill="#dc2626" font-weight="bold">Rollback initiated</text>
                            
                            <!-- Aborted State -->
                            <rect x="350" y="550" width="200" height="80" fill="#fee2e2" stroke="#dc2626" stroke-width="3" rx="10"/>
                            <text x="450" y="585" font-size="16" font-weight="bold" fill="#991b1b" text-anchor="middle">Aborted</text>
                            <text x="450" y="610" font-size="11" fill="#333" text-anchor="middle">Changes rolled back</text>
                            
                            <!-- Start point -->
                            <circle cx="450" cy="50" r="10" fill="#3b82f6"/>
                            <path d="M 450 60 L 450 80" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow29)"/>
                            <text x="480" y="60" font-size="10" fill="#3b82f6" font-weight="bold">BEGIN</text>
                            
                            <!-- Legend -->
                            <rect x="50" y="50" width="200" height="120" fill="#f0f9ff" stroke="#0284c7" stroke-width="1" rx="5"/>
                            <text x="150" y="75" font-size="12" font-weight="bold" fill="#0c4a6e" text-anchor="middle">Legend</text>
                            <line x1="70" y1="95" x2="120" y2="95" stroke="#10b981" stroke-width="3"/>
                            <text x="130" y="100" font-size="10" fill="#333">Success path</text>
                            <line x1="70" y1="120" x2="120" y2="120" stroke="#dc2626" stroke-width="3"/>
                            <text x="130" y="125" font-size="10" fill="#333">Failure path</text>
                            <text x="70" y="150" font-size="10" fill="#333">Final states:</text>
                            <text x="80" y="165" font-size="9" fill="#10b981">‚Ä¢ Committed (success)</text>
                            <text x="80" y="180" font-size="9" fill="#dc2626">‚Ä¢ Aborted (failure)</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow29" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#10b981"/>
                                </marker>
                                <marker id="arrow30" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#dc2626"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-ol"></i>
                        Detailed State Descriptions
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Active State</h4>
                        <p><strong>Description:</strong> Transaction is currently executing operations (READ, WRITE).</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>Initial state after BEGIN TRANSACTION</li>
                            <li>Can perform database operations</li>
                            <li>Holds locks on resources</li>
                            <li>Can move to Failed state if error occurs</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>START TRANSACTION;  -- Enter ACTIVE state ‚úì

            -- Transaction is ACTIVE while executing:
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';
            -- Still ACTIVE...

            SELECT Balance FROM Accounts WHERE AccountID = 'B';
            -- Still ACTIVE...

            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B';
            -- Still ACTIVE...

            -- Remains ACTIVE until all operations complete</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Partially Committed State</h4>
                        <p><strong>Description:</strong> Transaction has completed all operations but hasn't yet written to permanent storage.</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>All operations executed successfully</li>
                            <li>Changes in memory but not yet durable</li>
                            <li>Waiting for final commit to disk</li>
                            <li>Can still fail (e.g., disk error)</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Operations complete
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B';

            COMMIT;  -- Initiates commit

            -- Enter PARTIALLY COMMITTED state
            -- Writing transaction log to disk...
            -- If disk write succeeds ‚Üí COMMITTED
            -- If disk write fails ‚Üí FAILED</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Committed State</h4>
                        <p><strong>Description:</strong> Transaction successfully completed. Changes are permanent and durable.</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>Final state for successful transaction</li>
                            <li>Changes written to permanent storage</li>
                            <li>Locks released</li>
                            <li>Cannot be undone (except by compensating transaction)</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>COMMIT;  -- Command issued

            -- Transaction log flushed to disk ‚úì
            -- Changes now durable ‚úì
            -- Locks released ‚úì
            -- Enter COMMITTED state ‚úì

            -- Query OK, 1 row affected
            -- Transaction finished successfully</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">4. Failed State</h4>
                        <p><strong>Description:</strong> Transaction encountered error and cannot proceed.</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>Error occurred during execution or commit</li>
                            <li>Cannot continue forward</li>
                            <li>Must be rolled back</li>
                            <li>Temporary state (leads to Aborted)</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';
            -- Deadlock detected! ‚ùå
            -- ERROR 1213: Deadlock found

            -- Enter FAILED state
            -- Transaction cannot proceed
            -- Must rollback to ABORTED state</code></pre>
                        </div>
                        
                        <p style="margin-top: 1rem;"><strong>Common Failure Reasons:</strong></p>
                        <ul>
                            <li>Constraint violation (PRIMARY KEY, FOREIGN KEY, CHECK)</li>
                            <li>Deadlock detected</li>
                            <li>Timeout exceeded</li>
                            <li>Disk full / I/O error</li>
                            <li>Application error</li>
                        </ul>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">5. Aborted State</h4>
                        <p><strong>Description:</strong> Transaction rolled back. All changes undone.</p>
                        
                        <p style="margin-top: 0.5rem;"><strong>Characteristics:</strong></p>
                        <ul>
                            <li>Final state for failed transaction</li>
                            <li>All changes reversed (UNDO)</li>
                            <li>Locks released</li>
                            <li>Database in state as if transaction never happened</li>
                            <li>Transaction can be restarted if desired</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A';
            -- Account A modified (temporarily)

            -- Error occurs
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B';
            -- ERROR!

            ROLLBACK;  -- Explicit rollback
            -- Or automatic rollback if connection lost

            -- Enter ABORTED state
            -- Changes to A undone ‚úì
            -- A back to original balance ‚úì
            -- Locks released ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Transaction State Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Example 1: Successful Transaction (Active ‚Üí Committed)
            -- -----------------------------------------------------------

            -- State: Not started
            SELECT @@transaction_isolation;  -- Check isolation level

            START TRANSACTION;
            -- State: ACTIVE ‚úì

            -- Perform operations (remains ACTIVE)
            INSERT INTO Orders VALUES (1, 100, '2024-01-01', 150.00);
            -- State: ACTIVE ‚úì

            UPDATE Products SET Stock = Stock - 1 WHERE ProductID = 101;
            -- State: ACTIVE ‚úì

            -- Complete operations
            COMMIT;
            -- State: PARTIALLY COMMITTED (briefly)
            -- Transaction log flushed to disk...
            -- State: COMMITTED ‚úì

            -- Query OK, 2 rows affected

            -- -----------------------------------------------------------
            -- Example 2: Failed Transaction (Active ‚Üí Failed ‚Üí Aborted)
            -- -----------------------------------------------------------

            START TRANSACTION;
            -- State: ACTIVE ‚úì

            INSERT INTO Employees VALUES (1, 'John', 1, 50000);
            -- State: ACTIVE ‚úì

            -- This violates PRIMARY KEY (duplicate ID)
            INSERT INTO Employees VALUES (1, 'Jane', 2, 60000);
            -- ERROR 1062: Duplicate entry '1' for key 'PRIMARY'
            -- State: FAILED ‚ùå

            -- Automatic or explicit rollback
            ROLLBACK;
            -- State: ABORTED ‚úì

            -- Both inserts undone
            SELECT COUNT(*) FROM Employees WHERE EmployeeID = 1;
            -- Result: 0 (no rows inserted)

            -- -----------------------------------------------------------
            -- Example 3: Transaction with Error Handling
            -- -----------------------------------------------------------

            -- Python example with proper state handling
            import mysql.connector

            try:
                conn = mysql.connector.connect(...)
                cursor = conn.cursor()
                
                # BEGIN
                conn.start_transaction()
                # State: ACTIVE
                
                # Operations
                cursor.execute("UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'A'")
                # State: ACTIVE
                
                cursor.execute("UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'B'")
                # State: ACTIVE
                
                # COMMIT
                conn.commit()
                # State: PARTIALLY COMMITTED ‚Üí COMMITTED ‚úì
                print("Transaction committed successfully")
                
            except mysql.connector.Error as err:
                # State: FAILED
                print(f"Error: {err}")
                
                # ROLLBACK
                conn.rollback()
                # State: ABORTED
                print("Transaction rolled back")
                
            finally:
                cursor.close()
                conn.close()

            -- -----------------------------------------------------------
            -- Example 4: Monitoring Transaction State
            -- -----------------------------------------------------------

            -- View active transactions (MySQL)
            SELECT * FROM INFORMATION_SCHEMA.INNODB_TRX;
            -- Shows:
            -- trx_id | trx_state | trx_started | trx_query
            -- Shows 'RUNNING' for ACTIVE transactions
            -- Shows 'LOCK WAIT' for blocked transactions

            -- PostgreSQL: View transaction state
            SELECT pid, state, query FROM pg_stat_activity WHERE state = 'active';

            -- -----------------------------------------------------------
            -- Example 5: Long-Running Transaction States
            -- -----------------------------------------------------------

            START TRANSACTION;
            -- State: ACTIVE

            -- Long operation (processes millions of rows)
            UPDATE Products SET Price = Price * 1.10 WHERE Category = 'Electronics';
            -- State: ACTIVE (for potentially minutes!)

            -- Check from another session:
            -- This transaction appears as RUNNING/ACTIVE

            -- Eventually completes
            COMMIT;
            -- State: PARTIALLY COMMITTED ‚Üí COMMITTED

            -- -----------------------------------------------------------
            -- Example 6: Transaction with Savepoint
            -- -----------------------------------------------------------

            START TRANSACTION;
            -- State: ACTIVE

            INSERT INTO Orders VALUES (1, 100, '2024-01-01');
            -- State: ACTIVE

            SAVEPOINT sp1;  -- Create savepoint
            -- State: Still ACTIVE

            INSERT INTO OrderItems VALUES (1, 1, 5);
            -- State: ACTIVE

            -- Error in this operation
            INSERT INTO OrderItems VALUES (1, 999, 3);  -- Invalid product
            -- State: FAILED (for this statement)

            -- Rollback to savepoint (not entire transaction)
            ROLLBACK TO SAVEPOINT sp1;
            -- State: ACTIVE again (transaction continues)

            -- Order still exists, OrderItems removed
            COMMIT;
            -- State: PARTIALLY COMMITTED ‚Üí COMMITTED ‚úì

            -- -----------------------------------------------------------
            -- Example 7: Crash During Different States
            -- -----------------------------------------------------------

            -- Scenario 1: Crash during ACTIVE state
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1000 WHERE AccountID = 'A';
            -- üí• CRASH HERE (before COMMIT)
            -- After recovery: Transaction in ABORTED state
            -- Changes rolled back ‚úì

            -- Scenario 2: Crash during PARTIALLY COMMITTED state
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1000 WHERE AccountID = 'A';
            COMMIT;  -- Issued
            -- Writing to transaction log...
            -- üí• CRASH HERE (after log write but before returning)
            -- After recovery: Transaction in COMMITTED state
            -- Changes preserved ‚úì

            -- Scenario 3: Crash during COMMIT processing
            START TRANSACTION;
            UPDATE Accounts SET Balance = 1000 WHERE AccountID = 'A';
            COMMIT;
            -- üí• CRASH immediately after successful commit
            -- After recovery: Transaction in COMMITTED state
            -- Changes preserved ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if system crashes in each state?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">State at Crash</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Recovery Action</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Final State</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Active</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">UNDO (rollback changes)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Aborted</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Partially Committed</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Check log: REDO if committed, UNDO if not</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Committed or Aborted</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Committed</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">REDO (ensure changes applied)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Committed</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Failed</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">UNDO (rollback changes)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Aborted</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Aborted</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Nothing (already rolled back)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Aborted</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Key Principle:</strong></p>
                                <ul>
                                    <li>Committed transactions are REDONE (durability)</li>
                                    <li>Uncommitted transactions are UNDONE (atomicity)</li>
                                    <li>Recovery ensures ACID properties maintained</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can a transaction return to a previous state?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Generally NO, but with one exception:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Cannot Return:</strong></p>
                                <ul>
                                    <li>‚úó Committed ‚Üí Cannot go back to Active</li>
                                    <li>‚úó Aborted ‚Üí Cannot go back to Active</li>
                                    <li>‚úó Failed ‚Üí Must proceed to Aborted</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Exception - Savepoints:</strong></p>
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>START TRANSACTION;
            -- State: ACTIVE

            INSERT INTO Orders VALUES (1, 100, '2024-01-01');
            SAVEPOINT sp1;

            INSERT INTO OrderItems VALUES (1, 1, 5);
            -- State: ACTIVE

            -- Partial rollback returns to earlier point in ACTIVE state
            ROLLBACK TO SAVEPOINT sp1;
            -- State: Still ACTIVE (but at earlier point) ‚úì

            COMMIT;  -- Can continue from savepoint</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Restart After Abort:</strong></p>
                                <ul>
                                    <li>Once aborted, transaction is finished</li>
                                    <li>Application can start NEW transaction</li>
                                    <li>Not "returning" to state - new transaction lifecycle</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How long does partially committed state last?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Very brief - typically milliseconds!</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Duration depends on:</strong></p>
                                <ul>
                                    <li><strong>Storage speed:</strong> SSD vs HDD (0.1ms vs 10ms)</li>
                                    <li><strong>Write-ahead log size:</strong> How much to flush</li>
                                    <li><strong>Synchronous settings:</strong> Wait for disk confirmation or not</li>
                                    <li><strong>Transaction size:</strong> More changes = more to write</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Typical timing:
            START TRANSACTION;           -- 0ms
            UPDATE ... (10 operations)   -- 5ms (in-memory)
            COMMIT;                      -- Issues commit command

            -- Partially Committed phase:
            -- Write transaction log to disk
            -- SSD: ~0.1-1ms ‚ö°
            -- HDD: ~5-10ms

            -- Committed state reached
            -- Total COMMIT time: 0.1-10ms typically</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Why Users Don't Notice:</strong></p>
                                <ul>
                                    <li>Happens automatically and very fast</li>
                                    <li>From user perspective: COMMIT either succeeds or fails</li>
                                    <li>Internal state useful for recovery, not user interaction</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Transaction States</span>
                        <span class="keyword-tag">Active</span>
                        <span class="keyword-tag">Partially Committed</span>
                        <span class="keyword-tag">Committed</span>
                        <span class="keyword-tag">Failed</span>
                        <span class="keyword-tag">Aborted</span>
                        <span class="keyword-tag">State Diagram</span>
                        <span class="keyword-tag">Transaction Lifecycle</span>
                        <span class="keyword-tag">REDO</span>
                        <span class="keyword-tag">UNDO</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 85: Savepoints in Transactions -->
            <div class="question-content" id="q85">
                <div class="question-header">
                    <h1 class="question-title">Savepoints in Transactions</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Transaction Control</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>Savepoints are markers within a transaction that allow partial rollback</strong> - think of them as "checkpoints" or "bookmarks" that let you undo part of a transaction without discarding all the work. Instead of rolling back an entire transaction, you can roll back to a specific savepoint, keeping all changes made before that point.</p>
                        
                        <p style="margin-top: 1rem;">Imagine writing a long document and creating save points every few paragraphs. If you make a mistake in the last paragraph, you can go back to your last save point without losing everything you wrote before. That's exactly what database savepoints do for transactions!</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Benefits:</strong></p>
                        <ul>
                            <li><strong>Partial Rollback:</strong> Undo specific operations without losing entire transaction</li>
                            <li><strong>Error Recovery:</strong> Handle errors gracefully in complex multi-step operations</li>
                            <li><strong>Nested Logic:</strong> Implement try-catch style error handling in SQL</li>
                            <li><strong>Performance:</strong> Avoid re-executing successful operations after error</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Basic Savepoint Syntax
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Basic Savepoint Commands
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Create a savepoint
            SAVEPOINT savepoint_name;

            -- Perform some operations
            INSERT INTO Table VALUES (...);

            -- Roll back to savepoint (undo operations after savepoint)
            ROLLBACK TO SAVEPOINT savepoint_name;

            -- Release savepoint (remove it, but keep changes)
            RELEASE SAVEPOINT savepoint_name;

            -- Commit entire transaction
            COMMIT;

            -- -----------------------------------------------------------
            -- Simple Example: Bank Transfer with Savepoint
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Deduct from sender
            UPDATE Accounts 
            SET Balance = Balance - 500 
            WHERE AccountID = 'ACC001';

            -- Create savepoint after successful debit
            SAVEPOINT after_debit;

            -- Step 2: Try to credit receiver
            UPDATE Accounts 
            SET Balance = Balance + 500 
            WHERE AccountID = 'ACC002';

            -- If credit fails (account doesn't exist), roll back to savepoint
            -- This keeps the debit but undoes the failed credit
            ROLLBACK TO SAVEPOINT after_debit;

            -- Try alternative action
            UPDATE Accounts 
            SET Balance = Balance + 500 
            WHERE AccountID = 'ACC003';  -- Different account

            COMMIT;  -- Commit entire transaction ‚úì

            -- -----------------------------------------------------------
            -- Savepoint Naming Conventions
            -- -----------------------------------------------------------

            -- Descriptive names help understand transaction flow
            SAVEPOINT before_inventory_update;
            SAVEPOINT after_payment_authorization;
            SAVEPOINT order_items_inserted;
            SAVEPOINT shipping_calculated;

            -- Avoid generic names
            SAVEPOINT sp1;  -- Bad: unclear purpose
            SAVEPOINT temp;  -- Bad: not descriptive</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-sitemap"></i>
                        How Savepoints Work
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Savepoints create a hierarchy of nested rollback points within a transaction.</strong> When you roll back to a savepoint, all changes after that point are undone, but changes before it remain intact.</p>
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg" style="max-width: 100%; height: auto;">
                            <!-- Timeline -->
                            <line x1="50" y1="200" x2="750" y2="200" stroke="#3b82f6" stroke-width="4"/>
                            
                            <!-- Transaction Start -->
                            <circle cx="50" cy="200" r="10" fill="#10b981"/>
                            <text x="50" y="240" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">START</text>
                            <text x="50" y="255" font-size="11" fill="#10b981" text-anchor="middle">TRANSACTION</text>
                            
                            <!-- Operation 1 -->
                            <rect x="120" y="170" width="80" height="60" fill="#3b82f6" rx="5"/>
                            <text x="160" y="205" font-size="11" fill="white" text-anchor="middle" font-weight="bold">Operation 1</text>
                            
                            <!-- Savepoint 1 -->
                            <circle cx="250" cy="200" r="10" fill="#f59e0b"/>
                            <text x="250" y="240" font-size="12" fill="#f59e0b" text-anchor="middle" font-weight="bold">SAVEPOINT</text>
                            <text x="250" y="255" font-size="11" fill="#f59e0b" text-anchor="middle">SP1</text>
                            
                            <!-- Operation 2 -->
                            <rect x="320" y="170" width="80" height="60" fill="#3b82f6" rx="5"/>
                            <text x="360" y="205" font-size="11" fill="white" text-anchor="middle" font-weight="bold">Operation 2</text>
                            
                            <!-- Savepoint 2 -->
                            <circle cx="450" cy="200" r="10" fill="#f59e0b"/>
                            <text x="450" y="240" font-size="12" fill="#f59e0b" text-anchor="middle" font-weight="bold">SAVEPOINT</text>
                            <text x="450" y="255" font-size="11" fill="#f59e0b" text-anchor="middle">SP2</text>
                            
                            <!-- Operation 3 (fails) -->
                            <rect x="520" y="170" width="80" height="60" fill="#ef4444" rx="5" stroke="#dc2626" stroke-width="2" stroke-dasharray="5,5"/>
                            <text x="560" y="200" font-size="11" fill="white" text-anchor="middle" font-weight="bold">Operation 3</text>
                            <text x="560" y="215" font-size="10" fill="white" text-anchor="middle">FAILED!</text>
                            
                            <!-- Rollback arrow -->
                            <path d="M 600 150 Q 525 100 450 150" stroke="#ef4444" stroke-width="3" fill="none" marker-end="url(#arrowRollback)"/>
                            <marker id="arrowRollback" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#ef4444"/>
                            </marker>
                            <text x="525" y="90" font-size="12" fill="#ef4444" text-anchor="middle" font-weight="bold">ROLLBACK TO SP2</text>
                            
                            <!-- Commit -->
                            <circle cx="750" cy="200" r="10" fill="#10b981"/>
                            <text x="750" y="240" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">COMMIT</text>
                            
                            <!-- Result annotation -->
                            <rect x="200" y="320" width="400" height="60" fill="#dbeafe" rx="5" stroke="#3b82f6" stroke-width="2"/>
                            <text x="400" y="345" font-size="13" fill="#1e40af" text-anchor="middle" font-weight="bold">FINAL RESULT:</text>
                            <text x="400" y="365" font-size="12" fill="#1e40af" text-anchor="middle">Operations 1 & 2 committed ‚úì  |  Operation 3 rolled back ‚úì</text>
                        </svg>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Detailed Savepoint Flow Example
            -- -----------------------------------------------------------

            START TRANSACTION;
            -- Transaction begins: Nothing committed yet

            -- Operation 1: Insert customer
            INSERT INTO Customers (CustomerID, Name, Email)
            VALUES (101, 'John Doe', 'john@example.com');
            -- State: 1 operation pending

            SAVEPOINT after_customer_insert;
            -- Savepoint created: Can roll back to here

            -- Operation 2: Create order
            INSERT INTO Orders (OrderID, CustomerID, TotalAmount)
            VALUES (5001, 101, 250.00);
            -- State: 2 operations pending

            SAVEPOINT after_order_insert;
            -- Another savepoint: Can roll back to here too

            -- Operation 3: Try to add order items (FAILS!)
            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES (5001, 99999, 2, 125.00);  -- Product doesn't exist!
            -- Error: Foreign key constraint violation

            -- Roll back to after_order_insert savepoint
            ROLLBACK TO SAVEPOINT after_order_insert;
            -- Result: Order insertion undone
            -- Customer insertion still intact ‚úì

            -- Operation 4: Insert order with valid product
            INSERT INTO Orders (OrderID, CustomerID, TotalAmount)
            VALUES (5002, 101, 180.00);

            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES (5002, 500, 2, 90.00);  -- Valid product

            COMMIT;
            -- Final state:
            -- ‚úì Customer 101 inserted
            -- ‚úó Order 5001 rolled back (invalid product)
            -- ‚úì Order 5002 inserted (valid product)</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Multiple Savepoints
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>You can create multiple savepoints in a single transaction</strong> to create a hierarchy of rollback points. This allows fine-grained control over which parts of a transaction to keep or discard.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Multiple Savepoints Example: E-Commerce Order
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Validate customer
            SELECT CustomerID INTO @customer
            FROM Customers
            WHERE Email = 'customer@example.com';

            SAVEPOINT after_customer_validation;

            -- Step 2: Create order header
            INSERT INTO Orders (OrderID, CustomerID, OrderDate, Status)
            VALUES (6001, @customer, NOW(), 'PROCESSING');

            SAVEPOINT after_order_creation;

            -- Step 3: Add first product
            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES (6001, 100, 2, 50.00);

            UPDATE Products SET Stock = Stock - 2 WHERE ProductID = 100;

            SAVEPOINT after_first_item;

            -- Step 4: Add second product (FAILS - out of stock!)
            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES (6001, 200, 5, 30.00);

            UPDATE Products SET Stock = Stock - 5 WHERE ProductID = 200;
            -- Error: Stock goes negative, constraint violation!

            -- Roll back only the second item
            ROLLBACK TO SAVEPOINT after_first_item;
            -- First item still in order ‚úì
            -- Second item removed ‚úì

            -- Step 5: Add different product instead
            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES (6001, 300, 3, 40.00);

            UPDATE Products SET Stock = Stock - 3 WHERE ProductID = 300;

            SAVEPOINT after_second_item;

            -- Step 6: Calculate shipping
            INSERT INTO Shipping (OrderID, Method, Cost)
            VALUES (6001, 'STANDARD', 10.00);

            -- Step 7: Update order total
            UPDATE Orders 
            SET TotalAmount = (
                SELECT SUM(Quantity * Price) FROM OrderItems WHERE OrderID = 6001
            ) + 10.00
            WHERE OrderID = 6001;

            -- Everything successful, commit all changes
            COMMIT;

            -- Final result:
            -- ‚úì Order created
            -- ‚úì Product 100 (first item) added
            -- ‚úó Product 200 (out of stock) rolled back
            -- ‚úì Product 300 (replacement) added
            -- ‚úì Shipping calculated
            -- ‚úì Order total updated

            -- -----------------------------------------------------------
            -- Nested Savepoints Example
            -- -----------------------------------------------------------

            START TRANSACTION;

            INSERT INTO Logs (Message) VALUES ('Transaction started');

            SAVEPOINT level1;

                INSERT INTO Logs (Message) VALUES ('Level 1 operation');
                
                SAVEPOINT level2;
                
                    INSERT INTO Logs (Message) VALUES ('Level 2 operation');
                    
                    SAVEPOINT level3;
                    
                        INSERT INTO Logs (Message) VALUES ('Level 3 operation - ERROR!');
                        -- Error occurs here
                        
                    ROLLBACK TO SAVEPOINT level3;
                    -- Only level 3 operations rolled back
                    
                -- Continue with level 2
                INSERT INTO Logs (Message) VALUES ('Level 2 continues');
                
            -- Continue with level 1
            INSERT INTO Logs (Message) VALUES ('Level 1 continues');

            COMMIT;

            -- Result:
            -- ‚úì Transaction started
            -- ‚úì Level 1 operation
            -- ‚úì Level 2 operation
            -- ‚úó Level 3 operation (rolled back)
            -- ‚úì Level 2 continues
            -- ‚úì Level 1 continues

            -- -----------------------------------------------------------
            -- Savepoint Hierarchy
            -- -----------------------------------------------------------

            START TRANSACTION;

            INSERT INTO Table1 VALUES (1);  -- Op 1

            SAVEPOINT sp_a;
            INSERT INTO Table1 VALUES (2);  -- Op 2

            SAVEPOINT sp_b;
            INSERT INTO Table1 VALUES (3);  -- Op 3

            SAVEPOINT sp_c;
            INSERT INTO Table1 VALUES (4);  -- Op 4

            -- Scenario 1: Roll back to sp_b
            ROLLBACK TO SAVEPOINT sp_b;
            -- Result: Op 4 and Op 3 undone, Op 1 and Op 2 remain
            -- sp_c is automatically removed (no longer valid)

            -- Scenario 2: Roll back to sp_a
            ROLLBACK TO SAVEPOINT sp_a;
            -- Result: Op 2, Op 3, Op 4 all undone, only Op 1 remains
            -- sp_b and sp_c automatically removed

            -- Important: Rolling back to earlier savepoint removes later ones!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Savepoint Rules and Limitations
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Important rules to understand when working with savepoints:</strong></p>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Rule</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Description</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Example</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Savepoint Scope</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Only exist within active transaction</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lost after COMMIT or ROLLBACK</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Name Collision</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Reusing name overwrites previous savepoint</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Second SAVEPOINT sp1 replaces first</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Rollback Cascade</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Rolling back removes later savepoints</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">ROLLBACK TO sp1 removes sp2, sp3</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>COMMIT Effect</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Commits entire transaction, not just savepoint</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Can't partially commit to savepoint</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>DDL Operations</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">May implicitly commit in some databases</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CREATE TABLE might auto-commit</td>
                        </tr>
                    </table>
                    
                    <div class="example-box" style="margin-top: 1.5rem;">
                        <pre><code>-- -----------------------------------------------------------
            -- Savepoint Rules Examples
            -- -----------------------------------------------------------

            -- Rule 1: Savepoint Scope
            START TRANSACTION;
            SAVEPOINT sp1;
            INSERT INTO Table1 VALUES (1);
            COMMIT;  -- Transaction committed

            -- Trying to use savepoint after COMMIT
            ROLLBACK TO SAVEPOINT sp1;  -- ERROR! ‚ùå
            -- Error: SAVEPOINT sp1 does not exist
            -- Savepoints destroyed after COMMIT

            -- -----------------------------------------------------------

            -- Rule 2: Name Collision
            START TRANSACTION;

            INSERT INTO Table1 VALUES (1);
            SAVEPOINT mypoint;  -- First savepoint

            INSERT INTO Table1 VALUES (2);
            SAVEPOINT mypoint;  -- Overwrites first savepoint!

            INSERT INTO Table1 VALUES (3);

            ROLLBACK TO SAVEPOINT mypoint;
            -- Rolls back to second mypoint (after value 2)
            -- Value 3 removed, values 1 and 2 remain
            -- First mypoint is gone!

            -- -----------------------------------------------------------

            -- Rule 3: Rollback Cascade
            START TRANSACTION;

            INSERT INTO Table1 VALUES (1);
            SAVEPOINT sp1;

            INSERT INTO Table1 VALUES (2);
            SAVEPOINT sp2;

            INSERT INTO Table1 VALUES (3);
            SAVEPOINT sp3;

            INSERT INTO Table1 VALUES (4);

            -- Roll back to sp1
            ROLLBACK TO SAVEPOINT sp1;
            -- Values 2, 3, 4 removed
            -- sp2 and sp3 automatically destroyed!

            -- This will ERROR:
            ROLLBACK TO SAVEPOINT sp2;  -- ERROR! ‚ùå
            -- sp2 no longer exists

            -- -----------------------------------------------------------

            -- Rule 4: COMMIT Commits Everything
            START TRANSACTION;

            INSERT INTO Table1 VALUES (1);
            SAVEPOINT sp1;

            INSERT INTO Table1 VALUES (2);
            SAVEPOINT sp2;

            INSERT INTO Table1 VALUES (3);

            -- Can't partially commit!
            COMMIT;  -- Commits ALL changes (1, 2, 3)

            -- No way to commit only up to sp1
            -- Either commit all or rollback all (or to savepoint)

            -- -----------------------------------------------------------

            -- Rule 5: DDL May Auto-Commit (Database dependent)
            START TRANSACTION;

            INSERT INTO Orders VALUES (1, 100, 'PENDING');
            SAVEPOINT after_insert;

            -- In MySQL, this causes implicit COMMIT:
            CREATE TABLE TempTable (ID INT);  -- Auto-commits transaction! ‚ö†Ô∏è

            -- Savepoint no longer exists:
            ROLLBACK TO SAVEPOINT after_insert;  -- ERROR! ‚ùå

            -- Order INSERT is committed, can't be rolled back!

            -- -----------------------------------------------------------

            -- Correct Way to Use Savepoints
            START TRANSACTION;

            -- Always check if operation succeeded before continuing
            INSERT INTO Table1 VALUES (1);

            SAVEPOINT after_op1;

            -- Try risky operation
            BEGIN
                INSERT INTO Table2 VALUES (2);
                SAVEPOINT after_op2;
            END;

            -- If error, roll back to previous good state
            IF @@ERROR != 0 THEN
                ROLLBACK TO SAVEPOINT after_op1;
                -- Retry or alternative action
            END IF;

            COMMIT;</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Real-World Use Cases
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Use Case 1: Batch Processing with Error Recovery
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Process 100 records
            DECLARE @counter INT = 1;
            DECLARE @errors INT = 0;

            WHILE @counter <= 100
            BEGIN
                -- Create savepoint for each record
                SAVEPOINT before_record_processing;
                
                BEGIN TRY
                    -- Process record
                    INSERT INTO ProcessedData 
                    SELECT * FROM RawData WHERE ID = @counter;
                    
                    -- Validate processed data
                    IF (SELECT Amount FROM ProcessedData WHERE ID = @counter) < 0 THEN
                        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Invalid amount';
                    END IF;
                    
                    -- Success, release savepoint
                    RELEASE SAVEPOINT before_record_processing;
                    
                EXCEPTION
                    -- Error occurred, roll back this record only
                    ROLLBACK TO SAVEPOINT before_record_processing;
                    
                    -- Log error
                    INSERT INTO ErrorLog (RecordID, ErrorMessage, Timestamp)
                    VALUES (@counter, 'Processing failed', NOW());
                    
                    SET @errors = @errors + 1;
                END;
                
                SET @counter = @counter + 1;
            END;

            -- Commit all successfully processed records
            COMMIT;

            -- Summary: 95 records processed, 5 errors logged
            SELECT 
                @counter - @errors AS SuccessfulRecords,
                @errors AS FailedRecords;

            -- -----------------------------------------------------------
            -- Use Case 2: Multi-Stage Order Processing
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Stage 1: Validate and create order
            INSERT INTO Orders (OrderID, CustomerID, Status)
            VALUES (7001, 123, 'VALIDATING');

            SAVEPOINT after_order_creation;

            -- Stage 2: Add order items
            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES 
                (7001, 100, 2, 50.00),
                (7001, 101, 1, 75.00);

            SAVEPOINT after_items_added;

            -- Stage 3: Calculate and apply discounts
            DECLARE @discount DECIMAL(10,2);

            -- Check if customer qualifies for loyalty discount
            IF (SELECT OrderCount FROM Customers WHERE CustomerID = 123) > 10 THEN
                SET @discount = 0.10;  -- 10% discount
                
                UPDATE Orders 
                SET DiscountPercent = @discount,
                    TotalAmount = TotalAmount * (1 - @discount)
                WHERE OrderID = 7001;
            END IF;

            SAVEPOINT after_discount_applied;

            -- Stage 4: Reserve inventory
            UPDATE Products 
            SET Stock = Stock - 2 
            WHERE ProductID = 100;

            UPDATE Products 
            SET Stock = Stock - 1 
            WHERE ProductID = 101;

            -- Check if any product went negative
            IF EXISTS (SELECT 1 FROM Products WHERE Stock < 0) THEN
                -- Insufficient inventory, roll back to after discounts
                ROLLBACK TO SAVEPOINT after_discount_applied;
                
                -- Mark order as pending inventory
                UPDATE Orders 
                SET Status = 'PENDING_INVENTORY' 
                WHERE OrderID = 7001;
                
                COMMIT;
                -- Order created with discount, but inventory not reserved
            ELSE
                -- Inventory reserved successfully
                SAVEPOINT after_inventory_reserved;
                
                -- Stage 5: Process payment
                INSERT INTO Payments (OrderID, Amount, Status)
                VALUES (7001, (SELECT TotalAmount FROM Orders WHERE OrderID = 7001), 'AUTHORIZED');
                
                -- Check payment result
                IF (SELECT Status FROM Payments WHERE OrderID = 7001) = 'AUTHORIZED' THEN
                    -- Success! Update order status
                    UPDATE Orders SET Status = 'CONFIRMED' WHERE OrderID = 7001;
                    COMMIT;
                ELSE
                    -- Payment failed, roll back inventory reservation
                    ROLLBACK TO SAVEPOINT after_discount_applied;
                    
                    UPDATE Orders SET Status = 'PAYMENT_FAILED' WHERE OrderID = 7001;
                    COMMIT;
                    -- Order saved with discount, but inventory not reserved
                END IF;
            END IF;

            -- -----------------------------------------------------------
            -- Use Case 3: Import with Validation Checkpoints
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Import Phase 1: Load raw data
            INSERT INTO StagingTable 
            SELECT * FROM EXTERNAL_FILE;

            SAVEPOINT after_raw_load;

            -- Validation Phase 1: Check for duplicates
            DELETE FROM StagingTable 
            WHERE ID IN (
                SELECT ID FROM StagingTable 
                GROUP BY ID HAVING COUNT(*) > 1
            );

            IF (SELECT COUNT(*) FROM StagingTable) = 0 THEN
                -- All records were duplicates!
                ROLLBACK TO SAVEPOINT after_raw_load;
                RAISE EXCEPTION 'All records are duplicates';
            END IF;

            SAVEPOINT after_duplicate_removal;

            -- Validation Phase 2: Data type validation
            DELETE FROM StagingTable 
            WHERE Email NOT LIKE '%@%.%'
            OR PhoneNumber NOT REGEXP '^[0-9]{10}$';

            SAVEPOINT after_format_validation;

            -- Validation Phase 3: Business rule validation
            DELETE FROM StagingTable 
            WHERE Age < 18 
            OR Balance < 0;

            SAVEPOINT after_business_validation;

            -- Final Import: Move to production table
            INSERT INTO Customers 
            SELECT * FROM StagingTable;

            -- Clear staging table
            TRUNCATE TABLE StagingTable;

            COMMIT;

            -- Result: Multi-stage validation with rollback capability at each stage

            -- -----------------------------------------------------------
            -- Use Case 4: Complex Financial Transaction
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Lock all involved accounts
            SELECT AccountID, Balance 
            FROM Accounts 
            WHERE AccountID IN ('ACC001', 'ACC002', 'ACC003')
            FOR UPDATE;

            SAVEPOINT accounts_locked;

            -- Step 2: Validate all balances
            DECLARE @balance1 DECIMAL(15,2);
            DECLARE @balance2 DECIMAL(15,2);

            SELECT @balance1 = Balance FROM Accounts WHERE AccountID = 'ACC001';
            SELECT @balance2 = Balance FROM Accounts WHERE AccountID = 'ACC002';

            IF @balance1 < 1000 OR @balance2 < 500 THEN
                ROLLBACK TO SAVEPOINT accounts_locked;
                RAISE EXCEPTION 'Insufficient funds';
            END IF;

            SAVEPOINT balances_validated;

            -- Step 3: Perform transfers
            -- Transfer 1: ACC001 -> ACC003 ($1000)
            UPDATE Accounts SET Balance = Balance - 1000 WHERE AccountID = 'ACC001';
            UPDATE Accounts SET Balance = Balance + 1000 WHERE AccountID = 'ACC003';

            SAVEPOINT transfer1_complete;

            -- Transfer 2: ACC002 -> ACC003 ($500)
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'ACC002';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'ACC003';

            SAVEPOINT transfer2_complete;

            -- Step 4: Calculate fees
            DECLARE @fee1 DECIMAL(10,2) = 10.00;
            DECLARE @fee2 DECIMAL(10,2) = 5.00;

            UPDATE Accounts SET Balance = Balance - @fee1 WHERE AccountID = 'ACC001';
            UPDATE Accounts SET Balance = Balance - @fee2 WHERE AccountID = 'ACC002';

            -- Check if fees caused overdraft
            IF EXISTS (SELECT 1 FROM Accounts WHERE AccountID IN ('ACC001', 'ACC002') AND Balance < 0) THEN
                -- Roll back fees only, keep transfers
                ROLLBACK TO SAVEPOINT transfer2_complete;
                
                -- Waive fees
                INSERT INTO FeeWaivers (AccountID, Amount, Reason)
                VALUES ('ACC001', @fee1, 'Insufficient balance for fee');
            END IF;

            -- Step 5: Record transaction log
            INSERT INTO TransactionLog (FromAccount, ToAccount, Amount, Type, Timestamp)
            VALUES 
                ('ACC001', 'ACC003', 1000, 'TRANSFER', NOW()),
                ('ACC002', 'ACC003', 500, 'TRANSFER', NOW());

            COMMIT;

            -- Final result: All transfers completed, fees applied or waived as appropriate</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-chart-bar"></i>
                        Savepoints vs Full Rollback: Performance Comparison
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Savepoints can significantly improve performance in complex transactions by avoiding unnecessary re-execution of successful operations.</strong></p>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Without Savepoints</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">With Savepoints</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Error Recovery</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Roll back entire transaction, restart from beginning</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Roll back to last good state, continue from there ‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Re-execution Cost</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Re-run all operations</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Only re-run failed portion ‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Lock Duration</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Longer (restart causes delays)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Shorter (partial rollback faster) ‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Network Round-trips</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Multiple (new transaction)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Single transaction continues ‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Complexity</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Simple logic</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">More complex (need savepoint management)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Memory Overhead</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Low</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Slightly higher (savepoint tracking)</td>
                        </tr>
                    </table>
                    
                    <div class="example-box" style="margin-top: 1.5rem;">
                        <pre><code>-- -----------------------------------------------------------
            -- Performance Comparison Example
            -- -----------------------------------------------------------

            -- Scenario: Process 1000 records, 50 fail

            -- WITHOUT SAVEPOINTS: Total Time = 15 seconds
            START TRANSACTION;
            -- Process all 1000 records: 10 seconds
            -- 50 failures detected at end
            ROLLBACK;  -- Undo all 1000: 2 seconds

            -- Restart with corrected data
            START TRANSACTION;
            -- Process all 1000 records again: 10 seconds
            COMMIT;  -- Commit: 3 seconds

            -- Total: 10 + 2 + 10 + 3 = 25 seconds ‚ùå

            -- -----------------------------------------------------------

            -- WITH SAVEPOINTS: Total Time = 11 seconds
            START TRANSACTION;

            FOR each record (1 to 1000):
                SAVEPOINT before_record;
                
                -- Process record: 0.01 seconds per record
                -- 950 succeed, 50 fail
                
                IF error THEN
                    ROLLBACK TO SAVEPOINT before_record;  -- 0.001 seconds
                    -- Log error, continue to next record
                ELSE
                    RELEASE SAVEPOINT before_record;
                END IF;
            END FOR;

            COMMIT;  -- Commit 950 successful: 1 second

            -- Total: 10 + 0.05 + 1 = 11.05 seconds ‚úì

            -- Performance Improvement: 56% faster!</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Best Practices
                    </div>
                    
                    <div class="explanation-text">
                        <ol style="line-height: 1.8;">
                            <li><strong>Use Descriptive Names:</strong> Make savepoint names clear and meaningful (e.g., <code>after_inventory_check</code> instead of <code>sp1</code>)</li>
                            
                            <li><strong>Strategic Placement:</strong> Create savepoints after expensive operations or before risky operations</li>
                            
                            <li><strong>Clean Up Savepoints:</strong> Use <code>RELEASE SAVEPOINT</code> to free resources for savepoints you no longer need</li>
                            
                            <li><strong>Document Your Logic:</strong> Comment your savepoint strategy, especially in complex transactions</li>
                            
                            <li><strong>Balance Granularity:</strong> Too many savepoints add overhead, too few reduce flexibility. Find the right balance.</li>
                            
                            <li><strong>Test Rollback Paths:</strong> Ensure your rollback logic works correctly in all error scenarios</li>
                            
                            <li><strong>Avoid in Simple Transactions:</strong> For simple 2-3 operation transactions, savepoints add unnecessary complexity</li>
                            
                            <li><strong>Consider Alternatives:</strong> Sometimes separate transactions or application-level retry logic is simpler</li>
                        </ol>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Best Practice Examples
            -- -----------------------------------------------------------

            -- ‚úì GOOD: Descriptive savepoint names
            START TRANSACTION;

            INSERT INTO Orders VALUES (...);
            SAVEPOINT after_order_insertion;

            UPDATE Inventory SET Stock = Stock - 1;
            SAVEPOINT after_inventory_update;

            INSERT INTO Payments VALUES (...);
            SAVEPOINT after_payment_processing;

            COMMIT;

            -- ‚úó BAD: Generic savepoint names
            START TRANSACTION;
            INSERT INTO Orders VALUES (...);
            SAVEPOINT sp1;  -- What does sp1 represent?

            UPDATE Inventory SET Stock = Stock - 1;
            SAVEPOINT sp2;  -- Unclear purpose

            -- -----------------------------------------------------------

            -- ‚úì GOOD: Strategic savepoint placement
            START TRANSACTION;

            -- Expensive operation: complex calculation
            CALL CalculateOrderTotals(order_id);
            SAVEPOINT after_expensive_calculation;  -- Don't want to redo this!

            -- Risky operation: might fail
            SAVEPOINT before_payment_attempt;
            CALL ProcessPayment(payment_info);

            -- -----------------------------------------------------------

            -- ‚úì GOOD: Resource cleanup
            START TRANSACTION;

            FOR i IN 1..1000 LOOP
                SAVEPOINT process_record;
                
                -- Process record
                INSERT INTO ProcessedData VALUES (i, ...);
                
                -- Success: release savepoint to free memory
                RELEASE SAVEPOINT process_record;
            END LOOP;

            COMMIT;

            -- ‚úó BAD: Never releasing savepoints
            START TRANSACTION;

            FOR i IN 1..1000 LOOP
                SAVEPOINT process_record;  -- Creates 1000 savepoints!
                INSERT INTO ProcessedData VALUES (i, ...);
                -- Never released, memory builds up
            END LOOP;

            -- -----------------------------------------------------------

            -- ‚úì GOOD: Documented savepoint strategy
            START TRANSACTION;

            -- Phase 1: Data validation and staging
            -- Savepoint allows rollback if validation fails
            SAVEPOINT after_validation;

            -- Phase 2: Primary data modifications
            -- Savepoint protects validated data if business logic fails
            SAVEPOINT after_primary_updates;

            -- Phase 3: Auxiliary updates (logs, notifications)
            -- Can be rolled back without affecting core data
            SAVEPOINT after_auxiliary_updates;

            COMMIT;</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between ROLLBACK and ROLLBACK TO SAVEPOINT?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>ROLLBACK vs ROLLBACK TO SAVEPOINT:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ROLLBACK</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ROLLBACK TO SAVEPOINT</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Scope</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Entire transaction</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Partial (to savepoint)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Transaction State</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Ends transaction</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Transaction continues</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Locks</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">All locks released</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Keeps locks before savepoint</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Can Continue?</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No (need new transaction)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Yes (add more operations)</td>
                                    </tr>
                                </table>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Example:
            START TRANSACTION;
            INSERT INTO Table1 VALUES (1);  -- Op 1
            SAVEPOINT sp1;
            INSERT INTO Table1 VALUES (2);  -- Op 2

            -- ROLLBACK: Undoes EVERYTHING
            ROLLBACK;
            -- Result: Op 1 and Op 2 both undone
            -- Transaction ended, must start new one

            -- vs

            START TRANSACTION;
            INSERT INTO Table1 VALUES (1);  -- Op 1
            SAVEPOINT sp1;
            INSERT INTO Table1 VALUES (2);  -- Op 2

            -- ROLLBACK TO SAVEPOINT: Undoes Op 2 only
            ROLLBACK TO SAVEPOINT sp1;
            -- Result: Op 1 remains, Op 2 undone
            -- Transaction still active!
            INSERT INTO Table1 VALUES (3);  -- Can continue
            COMMIT;  -- Op 1 and Op 3 committed</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you nest savepoints? How deep can you go?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, you can nest savepoints!</strong> Most databases support multiple levels of savepoints within a single transaction.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Nesting Depth:</strong></p>
                                <ul>
                                    <li><strong>MySQL/MariaDB:</strong> Supports nested savepoints (practical limit ~100+)</li>
                                    <li><strong>PostgreSQL:</strong> Supports nested savepoints (no explicit limit)</li>
                                    <li><strong>Oracle:</strong> Supports nested savepoints (limit typically 32 levels)</li>
                                    <li><strong>SQL Server:</strong> Savepoint names must be unique (no true nesting)</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Nested Savepoints Example
            START TRANSACTION;

            INSERT INTO Logs VALUES ('Level 0');

            SAVEPOINT level1;
                INSERT INTO Logs VALUES ('Level 1');
                
                SAVEPOINT level2;
                    INSERT INTO Logs VALUES ('Level 2');
                    
                    SAVEPOINT level3;
                        INSERT INTO Logs VALUES ('Level 3');
                        
                        SAVEPOINT level4;
                            INSERT INTO Logs VALUES ('Level 4');
                            -- Error occurs
                            
                        ROLLBACK TO SAVEPOINT level4;
                        -- Only Level 4 undone
                        
                    -- Continue at Level 3
                    INSERT INTO Logs VALUES ('Level 3 continues');
                    
                -- Continue at Level 2
                INSERT INTO Logs VALUES ('Level 2 continues');
                
            COMMIT;

            -- Result:
            -- ‚úì Level 0, 1, 2, 3 committed
            -- ‚úó Level 4 rolled back
            -- ‚úì Continuations committed</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Practical Recommendation:</strong> Keep nesting to 3-5 levels maximum for maintainability. Deeper nesting suggests the transaction might be too complex and should be split.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Do savepoints work with distributed transactions?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>It depends on the database system and transaction protocol:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Local Savepoints (Single Database):</strong></p>
                                <ul>
                                    <li>‚úì Full support in all major databases</li>
                                    <li>‚úì Low overhead, fast rollback</li>
                                    <li>‚úì Simple to implement and use</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Distributed Savepoints (Multiple Databases):</strong></p>
                                <ul>
                                    <li>‚ö†Ô∏è Limited or no support in most systems</li>
                                    <li>‚ö†Ô∏è High coordination overhead if supported</li>
                                    <li>‚ö†Ô∏è Complications with 2-phase commit (2PC)</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Why Distributed Savepoints Are Hard:</strong></p>
                                <ol>
                                    <li><strong>Coordination:</strong> All databases must agree on savepoint state</li>
                                    <li><strong>Network Latency:</strong> Syncing savepoints across network adds delay</li>
                                    <li><strong>Partial Failures:</strong> One database might succeed while another fails</li>
                                    <li><strong>Complexity:</strong> Rollback logic becomes exponentially complex</li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Alternatives for Distributed Systems:</strong></p>
                                <ul>
                                    <li>Use compensating transactions (SAGA pattern)</li>
                                    <li>Application-level checkpointing</li>
                                    <li>Message queues with idempotent operations</li>
                                    <li>Event sourcing for full history tracking</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens to locks when you rollback to a savepoint?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Locks behave differently depending on when they were acquired:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Locks BEFORE Savepoint:</strong></p>
                                <ul>
                                    <li>‚úì RETAINED - locks acquired before savepoint remain active</li>
                                    <li>‚úì Ensures consistency of data read/modified before savepoint</li>
                                    <li>‚úì Transaction can continue using these locks</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Locks AFTER Savepoint:</strong></p>
                                <ul>
                                    <li>‚úó RELEASED - locks acquired after savepoint are freed</li>
                                    <li>‚úó Data modified after savepoint is unlocked</li>
                                    <li>‚úó Other transactions can now access this data</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Lock Behavior Example
            START TRANSACTION;

            -- Acquire lock on Account 1
            SELECT Balance FROM Accounts 
            WHERE AccountID = 'ACC001' 
            FOR UPDATE;
            -- Lock 1: HELD

            SAVEPOINT after_lock1;

            -- Acquire lock on Account 2
            SELECT Balance FROM Accounts 
            WHERE AccountID = 'ACC002' 
            FOR UPDATE;
            -- Lock 2: HELD

            SAVEPOINT after_lock2;

            -- Acquire lock on Account 3
            SELECT Balance FROM Accounts 
            WHERE AccountID = 'ACC003' 
            FOR UPDATE;
            -- Lock 3: HELD

            -- Roll back to after_lock1
            ROLLBACK TO SAVEPOINT after_lock1;

            -- Current lock status:
            -- Lock 1 on ACC001: ‚úì STILL HELD
            -- Lock 2 on ACC002: ‚úó RELEASED
            -- Lock 3 on ACC003: ‚úó RELEASED

            -- Other transactions can now access ACC002 and ACC003
            -- But ACC001 remains locked until COMMIT or ROLLBACK</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Important:</strong> This behavior helps prevent deadlocks and allows partial transaction rollback while maintaining consistency of earlier operations.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Are savepoints ACID compliant?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Savepoints maintain all ACID properties:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Atomicity:</strong></p>
                                <ul>
                                    <li>Rolling back to a savepoint is atomic - either all changes after the savepoint are undone, or none are</li>
                                    <li>The final COMMIT or ROLLBACK applies atomically to all remaining operations</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Consistency:</strong></p>
                                <ul>
                                    <li>Database remains in consistent state after rolling back to savepoint</li>
                                    <li>All constraints are checked at final COMMIT, not at savepoints</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Isolation:</strong></p>
                                <ul>
                                    <li>Other transactions don't see changes until COMMIT (including savepoint operations)</li>
                                    <li>Isolation level applies to entire transaction, not individual savepoints</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Durability:</strong></p>
                                <ul>
                                    <li>Savepoint operations are logged (written to WAL)</li>
                                    <li>After COMMIT, all retained changes (including those before rollback savepoints) are durable</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- ACID with Savepoints Example
            START TRANSACTION;  -- Begin ACID transaction

            -- Operation 1
            INSERT INTO Orders VALUES (1, 100, 'PENDING');
            SAVEPOINT sp1;

            -- Operation 2
            INSERT INTO Orders VALUES (2, 200, 'PENDING');
            SAVEPOINT sp2;

            -- Operation 3 (violates constraint)
            INSERT INTO Orders VALUES (1, 300, 'PENDING');  -- Duplicate ID!

            -- Roll back Operation 3
            ROLLBACK TO SAVEPOINT sp2;

            -- Atomicity: Op 3 completely undone ‚úì
            -- Consistency: No constraint violation ‚úì
            -- Isolation: Other transactions see nothing yet ‚úì

            COMMIT;

            -- Durability: Ops 1 & 2 now permanent ‚úì
            -- All ACID properties maintained!</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Savepoints</span>
                        <span class="keyword-tag">Partial rollback</span>
                        <span class="keyword-tag">ROLLBACK TO SAVEPOINT</span>
                        <span class="keyword-tag">RELEASE SAVEPOINT</span>
                        <span class="keyword-tag">Transaction checkpoints</span>
                        <span class="keyword-tag">Nested transactions</span>
                        <span class="keyword-tag">Error recovery</span>
                        <span class="keyword-tag">Multi-stage transactions</span>
                        <span class="keyword-tag">Transaction control</span>
                        <span class="keyword-tag">Lock retention</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
           
            <!-- Question 86: Transaction Log Role -->
            <div class="question-content" id="q86">
                <div class="question-header">
                    <h1 class="question-title">Transaction Log Role</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Database Internals</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 12 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>The transaction log (also called Write-Ahead Log or WAL) is a sequential record of all changes made to the database.</strong> Think of it as a detailed diary where the database writes down every single change before actually applying it to the data files. This "write-ahead" approach is the foundation of database durability and recovery.</p>
                        
                        <p style="margin-top: 1rem;">Imagine you're renovating a house and keeping a detailed journal of every change - "removed wall between kitchen and dining room," "installed new electrical outlet," "painted bedroom blue." If something goes wrong (like a power outage), you can read this journal and know exactly what was completed and what needs to be redone. That's exactly what the transaction log does for databases!</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Roles of Transaction Log:</strong></p>
                        <ul>
                            <li><strong>Crash Recovery:</strong> Restore database to consistent state after failures</li>
                            <li><strong>Durability Guarantee:</strong> Ensure committed transactions survive crashes</li>
                            <li><strong>Rollback Support:</strong> Undo uncommitted transactions</li>
                            <li><strong>Replication:</strong> Propagate changes to replica databases</li>
                            <li><strong>Point-in-Time Recovery:</strong> Restore database to any past moment</li>
                            <li><strong>Audit Trail:</strong> Track all database modifications</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-cogs"></i>
                        How Transaction Log Works
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Write-Ahead Logging (WAL) Protocol:</strong> The fundamental principle is that log records must be written to stable storage BEFORE the corresponding data pages are modified on disk.</p>
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 900 450" xmlns="http://www.w3.org/2000/svg" style="max-width: 100%; height: auto;">
                            <!-- Transaction Flow -->
                            <rect x="50" y="50" width="180" height="80" fill="#3b82f6" rx="5"/>
                            <text x="140" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">1. Transaction</text>
                            <text x="140" y="105" font-size="12" fill="white" text-anchor="middle">Starts</text>
                            
                            <path d="M 230 90 L 280 90" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow1)"/>
                            <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#3b82f6"/>
                            </marker>
                            
                            <!-- Memory Buffer -->
                            <rect x="280" y="50" width="180" height="80" fill="#8b5cf6" rx="5"/>
                            <text x="370" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">2. Memory Buffer</text>
                            <text x="370" y="105" font-size="12" fill="white" text-anchor="middle">Changes Made</text>
                            
                            <path d="M 460 90 L 510 90" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrow2)"/>
                            <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#8b5cf6"/>
                            </marker>
                            
                            <!-- Write to Log -->
                            <rect x="510" y="50" width="180" height="80" fill="#f59e0b" rx="5"/>
                            <text x="600" y="75" font-size="14" fill="white" text-anchor="middle" font-weight="bold">3. Write to</text>
                            <text x="600" y="95" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Transaction Log</text>
                            <text x="600" y="115" font-size="11" fill="white" text-anchor="middle">(DISK - WAL)</text>
                            
                            <path d="M 690 90 L 740 90" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow3)"/>
                            <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#f59e0b"/>
                            </marker>
                            
                            <!-- Commit -->
                            <ellipse cx="800" cy="90" rx="50" ry="40" fill="#10b981"/>
                            <text x="800" y="98" font-size="14" fill="white" text-anchor="middle" font-weight="bold">COMMIT</text>
                            
                            <!-- Later: Write to Data Files -->
                            <text x="450" y="200" font-size="16" fill="#64748b" text-anchor="middle" font-weight="bold">LATER (Asynchronously):</text>
                            
                            <rect x="280" y="230" width="180" height="80" fill="#059669" rx="5"/>
                            <text x="370" y="260" font-size="14" fill="white" text-anchor="middle" font-weight="bold">4. Write to</text>
                            <text x="370" y="280" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Data Files</text>
                            <text x="370" y="300" font-size="11" fill="white" text-anchor="middle">(DISK - Permanent)</text>
                            
                            <path d="M 460 270 L 510 270" stroke="#059669" stroke-width="3" marker-end="url(#arrow4)"/>
                            <marker id="arrow4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#059669"/>
                            </marker>
                            
                            <rect x="510" y="230" width="180" height="80" fill="#0891b2" rx="5"/>
                            <text x="600" y="265" font-size="14" fill="white" text-anchor="middle" font-weight="bold">5. Checkpoint</text>
                            <text x="600" y="285" font-size="12" fill="white" text-anchor="middle">Mark log as</text>
                            <text x="600" y="300" font-size="12" fill="white" text-anchor="middle">applied</text>
                            
                            <!-- Annotations -->
                            <rect x="50" y="360" width="800" height="70" fill="#dbeafe" rx="5" stroke="#3b82f6" stroke-width="2"/>
                            <text x="450" y="385" font-size="13" fill="#1e40af" text-anchor="middle" font-weight="bold">WHY THIS ORDER MATTERS:</text>
                            <text x="450" y="405" font-size="12" fill="#1e40af" text-anchor="middle">Log written BEFORE commit returns = Durability guaranteed ‚úì</text>
                            <text x="450" y="420" font-size="12" fill="#1e40af" text-anchor="middle">Data files updated later = Performance optimized ‚úì</text>
                        </svg>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Transaction Log Entry Structure
            -- -----------------------------------------------------------

            -- Each log record contains:
            -- 1. Log Sequence Number (LSN) - Unique identifier
            -- 2. Transaction ID (TXN-ID)
            -- 3. Operation Type (INSERT, UPDATE, DELETE, BEGIN, COMMIT, ROLLBACK)
            -- 4. Table Name
            -- 5. Page ID (location in data file)
            -- 6. Before Image (old value) - for UNDO
            -- 7. After Image (new value) - for REDO
            -- 8. Timestamp

            -- Example Transaction Log Entries:

            -- Transaction begins
            LSN: 1001 | TXN-ID: 5001 | OP: BEGIN | Time: 2025-11-14 10:30:00.000

            -- Update operation
            LSN: 1002 | TXN-ID: 5001 | OP: UPDATE | Table: Accounts | Page: 42
            Before: {AccountID: 'ACC001', Balance: 1000.00}
            After:  {AccountID: 'ACC001', Balance: 500.00}
            Time: 2025-11-14 10:30:00.100

            -- Another update
            LSN: 1003 | TXN-ID: 5001 | OP: UPDATE | Table: Accounts | Page: 87
            Before: {AccountID: 'ACC002', Balance: 2000.00}
            After:  {AccountID: 'ACC002', Balance: 2500.00}
            Time: 2025-11-14 10:30:00.150

            -- Transaction commits
            LSN: 1004 | TXN-ID: 5001 | OP: COMMIT | Time: 2025-11-14 10:30:00.200

            -- -----------------------------------------------------------
            -- Write-Ahead Logging Protocol Example
            -- -----------------------------------------------------------

            -- User executes:
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'ACC001';

            -- What happens behind the scenes:

            -- Step 1: Read page from disk (if not in buffer)
            -- Buffer Pool: Load page 42 containing ACC001

            -- Step 2: Modify in memory
            -- Memory: Balance changed from 1000 to 500

            -- Step 3: Create log record
            LOG_RECORD = {
                LSN: 1002,
                TXN_ID: 5001,
                OP: UPDATE,
                Table: Accounts,
                Page: 42,
                Before: 1000.00,
                After: 500.00
            }

            -- Step 4: Write log record to disk (BEFORE data!)
            WRITE_TO_DISK(transaction_log, LOG_RECORD);
            FSYNC(transaction_log);  -- Force to physical disk ‚úì

            -- Step 5: Mark page as dirty in buffer pool
            -- Page 42 in memory marked "dirty" (modified but not yet on disk)

            -- User executes:
            COMMIT;

            -- Step 6: Write COMMIT record to log
            COMMIT_RECORD = {
                LSN: 1004,
                TXN_ID: 5001,
                OP: COMMIT
            }

            WRITE_TO_DISK(transaction_log, COMMIT_RECORD);
            FSYNC(transaction_log);  -- Force to physical disk ‚úì

            -- Step 7: Return success to user
            -- User sees: "Transaction committed successfully"

            -- Step 8: Later (asynchronously), write dirty pages to data files
            -- Background process flushes page 42 to disk
            -- Data files updated ‚úì

            -- -----------------------------------------------------------
            -- Why Write-Ahead Logging Works
            -- -----------------------------------------------------------

            -- Scenario: System crashes right after COMMIT returns

            -- What's on disk:
            -- ‚úì Transaction log: Complete with all changes and COMMIT
            -- ‚úó Data files: May not have the changes yet (still in buffer)

            -- Recovery process:
            -- 1. Database restarts
            -- 2. Reads transaction log from disk
            -- 3. Finds TXN-5001 with COMMIT record
            -- 4. Replays the changes to data files
            -- 5. Data restored! ‚úì

            -- Result: No data lost, transaction durable ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-sync-alt"></i>
                        Role 1: Crash Recovery
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>The transaction log enables automatic recovery after system crashes, power failures, or unexpected shutdowns.</strong> When the database restarts, it uses the log to determine which transactions were committed and which were in-progress.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Crash Recovery Process (ARIES Algorithm)
            -- -----------------------------------------------------------

            -- Scenario: Database crashes while processing transactions

            -- Transaction Log at crash time:
            LSN: 1001 | TXN: 5001 | OP: BEGIN
            LSN: 1002 | TXN: 5001 | OP: UPDATE | Accounts | Before: 1000 | After: 500
            LSN: 1003 | TXN: 5001 | OP: COMMIT  ‚úì Committed

            LSN: 1004 | TXN: 5002 | OP: BEGIN
            LSN: 1005 | TXN: 5002 | OP: INSERT | Orders | Value: {OrderID: 101, ...}
            LSN: 1006 | TXN: 5002 | OP: UPDATE | Inventory | Before: 10 | After: 9
            -- No COMMIT for TXN-5002! ‚ùå In-progress when crashed

            LSN: 1007 | TXN: 5003 | OP: BEGIN
            LSN: 1008 | TXN: 5003 | OP: DELETE | Products | Value: {ProductID: 99}
            LSN: 1009 | TXN: 5003 | OP: COMMIT  ‚úì Committed

            -- SYSTEM CRASHES HERE! ‚ö°

            -- -----------------------------------------------------------
            -- Recovery Phase 1: ANALYSIS
            -- -----------------------------------------------------------

            -- Database restarts and scans transaction log
            -- Goal: Determine which transactions need REDO and which need UNDO

            ANALYSIS_PHASE:
                Read transaction log from last checkpoint to end
                
                -- Build transaction table
                Transaction Table:
                - TXN-5001: COMMITTED (REDO needed)
                - TXN-5002: IN-PROGRESS (UNDO needed)
                - TXN-5003: COMMITTED (REDO needed)
                
                -- Build dirty page table
                Dirty Pages:
                - Page 42 (Accounts)
                - Page 87 (Orders)
                - Page 93 (Inventory)
                - Page 105 (Products)

            -- -----------------------------------------------------------
            -- Recovery Phase 2: REDO
            -- -----------------------------------------------------------

            -- Apply all logged changes (both committed and uncommitted)
            -- Brings database to state just before crash

            REDO_PHASE:
                Starting from last checkpoint LSN
                
                -- Replay TXN-5001 changes
                LSN: 1002 - UPDATE Accounts SET Balance = 500 WHERE AccountID = 'ACC001'
                -- Applied ‚úì
                
                -- Replay TXN-5002 changes (even though uncommitted!)
                LSN: 1005 - INSERT INTO Orders VALUES (101, ...)
                LSN: 1006 - UPDATE Inventory SET Quantity = 9 WHERE ProductID = 'X'
                -- Applied ‚úì
                
                -- Replay TXN-5003 changes
                LSN: 1008 - DELETE FROM Products WHERE ProductID = 99
                -- Applied ‚úì

            -- At this point: Database contains all changes, including uncommitted ones

            -- -----------------------------------------------------------
            -- Recovery Phase 3: UNDO
            -- -----------------------------------------------------------

            -- Roll back uncommitted transactions using BEFORE images

            UNDO_PHASE:
                For each IN-PROGRESS transaction (TXN-5002)
                
                -- Walk backwards through log
                LSN: 1006 - UNDO: UPDATE Inventory SET Quantity = 10 (restore before image)
                LSN: 1005 - UNDO: DELETE FROM Orders WHERE OrderID = 101
                
                -- Write compensation log records (CLRs)
                LSN: 2001 | TXN: 5002 | OP: CLR-UNDO | Compensating LSN: 1006
                LSN: 2002 | TXN: 5002 | OP: CLR-UNDO | Compensating LSN: 1005
                LSN: 2003 | TXN: 5002 | OP: ROLLBACK

            -- Final State After Recovery:
            -- ‚úì TXN-5001: Committed and applied
            -- ‚úó TXN-5002: Rolled back completely
            -- ‚úì TXN-5003: Committed and applied

            -- Database is now in consistent state! ‚úì

            -- -----------------------------------------------------------
            -- Real-World Recovery Example
            -- -----------------------------------------------------------

            -- E-commerce system crashes during order processing

            -- Transaction Log:
            LSN: 5001 | TXN: T1 | BEGIN
            LSN: 5002 | TXN: T1 | INSERT Orders {OrderID: 1001, Amount: 150}
            LSN: 5003 | TXN: T1 | UPDATE Products SET Stock = 8 (Before: 10)
            LSN: 5004 | TXN: T1 | INSERT Payments {OrderID: 1001, Status: 'AUTHORIZED'}
            LSN: 5005 | TXN: T1 | COMMIT ‚úì

            LSN: 5006 | TXN: T2 | BEGIN
            LSN: 5007 | TXN: T2 | INSERT Orders {OrderID: 1002, Amount: 200}
            LSN: 5008 | TXN: T2 | UPDATE Products SET Stock = 5 (Before: 8)
            -- CRASH! No COMMIT for T2

            -- Recovery:
            -- 1. ANALYSIS: T1 = COMMITTED, T2 = IN-PROGRESS
            -- 2. REDO: Replay all changes (both T1 and T2)
            -- 3. UNDO: Roll back T2
            --    - Restore Stock from 5 to 8
            --    - Delete Order 1002

            -- Final state:
            -- ‚úì Order 1001: Confirmed (payment authorized, stock reduced)
            -- ‚úó Order 1002: Rolled back (no order, stock restored)
            -- ‚úì System consistent and available ‚úì

            -- -----------------------------------------------------------
            -- Checkpoint Role in Recovery
            -- -----------------------------------------------------------

            -- Checkpoint: Periodic marker that flushes dirty pages to disk

            -- Without checkpoints:
            -- - Must replay entire log from beginning (slow!)
            -- - Recovery time = hours for large databases

            -- With checkpoints:
            -- - Only replay from last checkpoint
            -- - Recovery time = seconds to minutes

            CREATE CHECKPOINT Process:
                1. Flush all dirty pages from buffer to disk
                2. Write checkpoint record to log
                3. Record: {LSN: 6000, Active_Transactions: [T5, T7], Dirty_Pages: []}
                4. Mark checkpoint as complete

            -- Recovery starts from last complete checkpoint
            -- Only transactions after checkpoint need REDO/UNDO</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        Role 2: Durability Guarantee
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>The transaction log is the mechanism that makes the "D" in ACID possible.</strong> By writing to the log before returning success to the user, databases guarantee that committed transactions survive any failure.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- How Transaction Log Ensures Durability
            -- -----------------------------------------------------------

            -- User Transaction:
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 'ACC002';
            COMMIT;

            -- Database Internal Process:

            -- Step 1: Acquire locks
            LOCK Accounts WHERE AccountID IN ('ACC001', 'ACC002');

            -- Step 2: Apply changes to buffer pool (memory)
            Buffer_Pool['Page_42']['ACC001'].Balance = 900;  -- Was 1000
            Buffer_Pool['Page_87']['ACC002'].Balance = 1100; -- Was 1000

            -- Step 3: Write log records to disk
            WRITE_TO_LOG({
                LSN: 7001,
                TXN: 9001,
                OP: UPDATE,
                Table: Accounts,
                Page: 42,
                Before: 1000,
                After: 900
            });

            WRITE_TO_LOG({
                LSN: 7002,
                TXN: 9001,
                OP: UPDATE,
                Table: Accounts,
                Page: 87,
                Before: 1000,
                After: 1100
            });

            WRITE_TO_LOG({
                LSN: 7003,
                TXN: 9001,
                OP: COMMIT
            });

            -- Step 4: FORCE LOG TO DISK (Critical!)
            FSYNC(transaction_log_file);
            -- This is BLOCKING - waits until physically written to disk
            -- Typically takes 1-10 milliseconds

            -- Step 5: ONLY NOW return success to user
            RETURN "Transaction committed successfully";

            -- Step 6: Release locks
            UNLOCK Accounts WHERE AccountID IN ('ACC001', 'ACC002');

            -- Step 7: Eventually flush pages to data files (background)
            -- This can happen seconds or minutes later
            -- Data files can be updated lazily

            -- -----------------------------------------------------------
            -- Durability in Action: Crash Scenarios
            -- -----------------------------------------------------------

            -- Scenario 1: Crash BEFORE log written to disk
            -- Situation: Changes in memory, log not yet on disk
            START TRANSACTION;
            UPDATE Accounts SET Balance = 500;
            -- Memory changed ‚úì
            -- Log in memory buffer, not on disk yet
            COMMIT;
            -- About to write log to disk...
            -- CRASH! ‚ö°

            -- After restart:
            -- Log on disk: No record of this transaction
            -- Data files: No changes (buffer lost)
            -- Result: Transaction LOST (but that's OK - COMMIT never returned!) ‚úì

            -- -----------------------------------------------------------

            -- Scenario 2: Crash AFTER log written, BEFORE user notified
            -- Situation: Log on disk, but COMMIT not returned yet
            START TRANSACTION;
            UPDATE Accounts SET Balance = 500;
            COMMIT;
            -- Log written to disk ‚úì
            -- COMMIT record on disk ‚úì
            -- About to return success to user...
            -- CRASH! ‚ö°

            -- After restart:
            -- Log on disk: Complete transaction with COMMIT ‚úì
            -- Data files: May not have changes yet
            -- Recovery: Replays log, applies changes ‚úì
            -- Result: Transaction DURABLE, changes recovered! ‚úì

            -- User never got confirmation, but data is safe
            -- Application can query and see transaction succeeded

            -- -----------------------------------------------------------

            -- Scenario 3: Crash AFTER COMMIT returned to user
            -- Situation: User knows transaction succeeded
            START TRANSACTION;
            UPDATE Accounts SET Balance = 500;
            COMMIT;
            -- Log written to disk ‚úì
            -- Success returned to user ‚úì
            -- User sees: "Transaction successful"
            -- CRASH! ‚ö°

            -- After restart:
            -- Log on disk: Complete transaction with COMMIT ‚úì
            -- Recovery: Replays log ‚úì
            -- Result: Transaction DURABLE ‚úì

            -- User's expectation met - transaction survived!

            -- -----------------------------------------------------------
            -- Durability Configuration Options
            -- -----------------------------------------------------------

            -- MySQL: innodb_flush_log_at_trx_commit

            -- Value = 1 (FULL DURABILITY, default)
            SET GLOBAL innodb_flush_log_at_trx_commit = 1;
            -- Log written and flushed to disk at each COMMIT
            -- Slowest but safest
            -- Guarantees: Zero transaction loss ‚úì

            -- Value = 2 (RELAXED DURABILITY)
            SET GLOBAL innodb_flush_log_at_trx_commit = 2;
            -- Log written to OS cache at COMMIT
            -- Flushed to disk every second
            -- Risk: OS crash loses ~1 second of transactions
            -- Database crash: No loss (OS cache survives)

            -- Value = 0 (MINIMAL DURABILITY)
            SET GLOBAL innodb_flush_log_at_trx_commit = 0;
            -- Log written to disk every second (not at COMMIT)
            -- Risk: Database or OS crash loses ~1 second
            -- Fastest but least safe

            -- PostgreSQL: synchronous_commit

            -- synchronous_commit = on (FULL DURABILITY)
            SET synchronous_commit = on;
            -- WAL written and flushed before COMMIT returns

            -- synchronous_commit = off (ASYNC)
            SET synchronous_commit = off;
            -- WAL written asynchronously
            -- Faster but crash can lose recent commits

            -- -----------------------------------------------------------
            -- Group Commit Optimization
            -- -----------------------------------------------------------

            -- Problem: Flushing log for every transaction is slow

            -- Solution: Group Commit
            -- Batch multiple transactions into single disk flush

            -- Example timeline:
            -- Time 0ms: Transaction T1 requests COMMIT
            -- Time 1ms: Transaction T2 requests COMMIT
            -- Time 2ms: Transaction T3 requests COMMIT
            -- Time 3ms: Transaction T4 requests COMMIT
            -- Time 5ms: Single FSYNC for all 4 transactions ‚úì

            -- Benefit: 4x throughput improvement
            -- T1, T2, T3, T4 all committed together
            -- All durable with single disk write ‚úì

            -- Transaction log entries:
            LSN: 8001 | TXN: T1 | COMMIT
            LSN: 8002 | TXN: T2 | COMMIT
            LSN: 8003 | TXN: T3 | COMMIT
            LSN: 8004 | TXN: T4 | COMMIT
            -- Single FSYNC at LSN 8004 makes all durable ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-undo"></i>
                        Role 3: Rollback Support
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Transaction logs store "before images" that allow transactions to be undone.</strong> When a transaction is rolled back, the database uses these before images to restore data to its previous state.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Rollback Using Transaction Log
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Operation 1: Delete customer
            DELETE FROM Customers WHERE CustomerID = 123;
            -- Log record:
            LSN: 9001 | TXN: T1 | OP: DELETE | Table: Customers
            Before: {CustomerID: 123, Name: 'John Doe', Email: 'john@example.com'}
            After: NULL

            -- Operation 2: Update account balance
            UPDATE Accounts SET Balance = 0 WHERE CustomerID = 123;
            -- Log record:
            LSN: 9002 | TXN: T1 | OP: UPDATE | Table: Accounts
            Before: {CustomerID: 123, Balance: 5000.00}
            After: {CustomerID: 123, Balance: 0.00}

            -- Operation 3: Delete orders
            DELETE FROM Orders WHERE CustomerID = 123;
            -- Log record:
            LSN: 9003 | TXN: T1 | OP: DELETE | Table: Orders
            Before: [{OrderID: 1001, ...}, {OrderID: 1002, ...}, {OrderID: 1003, ...}]
            After: NULL

            -- User realizes mistake!
            ROLLBACK;

            -- Rollback process (walks backward through log):

            -- Step 1: UNDO LSN 9003 (restore orders)
            INSERT INTO Orders 
            VALUES 
                (1001, 123, ...),
                (1002, 123, ...),
                (1003, 123, ...);
            -- Orders restored ‚úì

            -- Step 2: UNDO LSN 9002 (restore balance)
            UPDATE Accounts SET Balance = 5000.00 WHERE CustomerID = 123;
            -- Balance restored ‚úì

            -- Step 3: UNDO LSN 9001 (restore customer)
            INSERT INTO Customers VALUES (123, 'John Doe', 'john@example.com');
            -- Customer restored ‚úì

            -- Final state: Everything back to original ‚úì

            -- -----------------------------------------------------------
            -- Long-Running Transaction Rollback
            -- -----------------------------------------------------------

            -- Transaction running for 2 hours with millions of operations
            START TRANSACTION;

            -- Generate 1 million log records
            FOR i IN 1..1000000 LOOP
                INSERT INTO ProcessedData VALUES (i, ...);
                -- LSN: 10001 + i | TXN: T2 | OP: INSERT | Before: NULL | After: {...}
            END LOOP;

            -- User decides to cancel
            ROLLBACK;

            -- Rollback process:
            -- Walk backward through 1 million log entries
            -- Delete all inserted rows using log records

            -- Progress:
            -- 10% rolled back... (100,000 records)
            -- 25% rolled back... (250,000 records)
            -- 50% rolled back... (500,000 records)
            -- 75% rolled back... (750,000 records)
            -- 100% rolled back (1,000,000 records) ‚úì

            -- Note: Rollback can take significant time for large transactions!
            -- Some databases show "Rolling back transaction X% complete"

            -- -----------------------------------------------------------
            -- Savepoint Rollback with Transaction Log
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Phase 1
            INSERT INTO Orders VALUES (1001, 100, 'PENDING');
            -- LSN: 11001 | TXN: T3 | OP: INSERT

            SAVEPOINT after_order;

            -- Phase 2
            INSERT INTO OrderItems VALUES (1001, 500, 2, 50.00);
            -- LSN: 11002 | TXN: T3 | OP: INSERT

            UPDATE Products SET Stock = Stock - 2 WHERE ProductID = 500;
            -- LSN: 11003 | TXN: T3 | OP: UPDATE | Before: 10 | After: 8

            SAVEPOINT after_items;

            -- Phase 3 (error discovered)
            INSERT INTO OrderItems VALUES (1001, 999, 1, 75.00);  -- Invalid product!
            -- LSN: 11004 | TXN: T3 | OP: INSERT

            -- Roll back to savepoint
            ROLLBACK TO SAVEPOINT after_order;

            -- Undo operations from LSN 11004 back to 11002:
            -- UNDO LSN 11004: DELETE FROM OrderItems WHERE OrderID = 1001 AND ProductID = 999
            -- UNDO LSN 11003: UPDATE Products SET Stock = 10 WHERE ProductID = 500
            -- UNDO LSN 11002: DELETE FROM OrderItems WHERE OrderID = 1001 AND ProductID = 500

            -- State after rollback:
            -- ‚úì Order 1001 exists (LSN 11001 not undone)
            -- ‚úó Order items removed (LSN 11002, 11004 undone)
            -- ‚úì Product stock restored (LSN 11003 undone)

            -- Continue transaction with corrected data
            INSERT INTO OrderItems VALUES (1001, 600, 1, 80.00);  -- Valid product
            UPDATE Products SET Stock = Stock - 1 WHERE ProductID = 600;

            COMMIT;

            -- -----------------------------------------------------------
            -- Automatic Rollback on Crash
            -- -----------------------------------------------------------

            -- Transaction in progress when system crashes

            Transaction Log:
            LSN: 12001 | TXN: T4 | BEGIN
            LSN: 12002 | TXN: T4 | UPDATE | Accounts | Before: 1000 | After: 500
            LSN: 12003 | TXN: T4 | INSERT | TransactionLog | Before: NULL | After: {...}
            LSN: 12004 | TXN: T4 | UPDATE | Accounts | Before: 2000 | After: 2500
            -- CRASH! No COMMIT record

            -- Recovery process:
            -- 1. REDO: Apply all changes (brings system to crashed state)
            -- 2. UNDO: Roll back incomplete transaction T4
            --    - UNDO LSN 12004: UPDATE Accounts SET Balance = 2000
            --    - UNDO LSN 12003: DELETE FROM TransactionLog WHERE ...
            --    - UNDO LSN 12002: UPDATE Accounts SET Balance = 1000

            -- Final state: T4 completely rolled back ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-copy"></i>
                        Role 4: Replication
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Transaction logs enable database replication by shipping log entries from master to replica databases.</strong> Replicas apply the same changes, keeping data synchronized across multiple servers.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Log-Based Replication Architecture
            -- -----------------------------------------------------------

            -- Master Database (Primary):
            -- Accepts all write operations
            -- Generates transaction log entries

            -- Replica Databases (Standby):
            -- Receive transaction log from master
            -- Apply same changes to stay synchronized

            -- Replication Process:

            -- Step 1: Transaction on Master
            -- Master Database:
            START TRANSACTION;
            UPDATE Products SET Price = 99.99 WHERE ProductID = 500;
            COMMIT;

            -- Log generated:
            LSN: 15001 | TXN: T5 | BEGIN
            LSN: 15002 | TXN: T5 | UPDATE | Products | Before: 89.99 | After: 99.99
            LSN: 15003 | TXN: T5 | COMMIT

            -- Step 2: Log Shipping to Replicas
            -- Master sends log entries to Replica 1, Replica 2, Replica 3

            -- Step 3: Replicas Apply Changes
            -- Replica 1:
            BEGIN;
            UPDATE Products SET Price = 99.99 WHERE ProductID = 500;
            COMMIT;

            -- Replica 2:
            BEGIN;
            UPDATE Products SET Price = 99.99 WHERE ProductID = 500;
            COMMIT;

            -- Replica 3:
            BEGIN;
            UPDATE Products SET Price = 99.99 WHERE ProductID = 500;
            COMMIT;

            -- Result: All databases have Price = 99.99 ‚úì

            -- -----------------------------------------------------------
            -- Replication Modes
            -- -----------------------------------------------------------

            -- 1. ASYNCHRONOUS REPLICATION (Most common)
            -- Master commits immediately, sends log to replicas later

            Master:
                COMMIT;  -- Returns immediately ‚úì
                -- Log shipped to replicas in background

            Replicas:
                -- Apply changes with slight delay (milliseconds to seconds)
                -- Eventual consistency

            -- Pros: Fast, master not blocked
            -- Cons: Replica may lag behind master

            -- -----------------------------------------------------------

            -- 2. SYNCHRONOUS REPLICATION
            -- Master waits for at least one replica to confirm

            Master:
                COMMIT;
                -- Wait for Replica 1 to acknowledge ‚è≥
                -- Returns after replica confirms ‚úì

            Replicas:
                Replica 1: Apply changes, ACK back to master
                Replica 2: Apply changes asynchronously

            -- Pros: Zero data loss (at least one copy always consistent)
            -- Cons: Slower commits (network latency)

            -- -----------------------------------------------------------

            -- 3. SEMI-SYNCHRONOUS REPLICATION
            -- Master waits for replica to RECEIVE log (not apply it)

            Master:
                COMMIT;
                -- Wait for Replica 1 to receive log ‚è≥
                -- Returns once log safely on replica disk ‚úì

            Replicas:
                Replica 1: Receive log to disk, ACK immediately
                        Apply changes later
                Replica 2: Fully asynchronous

            -- Pros: Good balance of speed and safety
            -- Cons: Still some replication lag

            -- -----------------------------------------------------------
            -- Real-World Replication Example
            -- -----------------------------------------------------------

            -- E-commerce system with global replicas

            -- Master (US-West):
            START TRANSACTION;
            INSERT INTO Orders VALUES (5001, 123, 250.00, 'PENDING');
            UPDATE Inventory SET Stock = Stock - 1 WHERE ProductID = 'PROD-789';
            INSERT INTO Payments VALUES (5001, 250.00, 'AUTHORIZED');
            COMMIT;

            -- Transaction log generated:
            LSN: 20001 | TXN: T10 | BEGIN
            LSN: 20002 | TXN: T10 | INSERT | Orders | {5001, 123, 250.00}
            LSN: 20003 | TXN: T10 | UPDATE | Inventory | Before: 10 | After: 9
            LSN: 20004 | TXN: T10 | INSERT | Payments | {5001, 250.00, 'AUTHORIZED'}
            LSN: 20005 | TXN: T10 | COMMIT

            -- Log shipped to replicas:

            -- Replica 1 (US-East): Latency ~5ms
            -- Applies log at 10:30:00.105

            -- Replica 2 (Europe): Latency ~50ms
            -- Applies log at 10:30:00.150

            -- Replica 3 (Asia): Latency ~150ms
            -- Applies log at 10:30:00.250

            -- Read queries distributed:
            -- User in US-East: Reads from Replica 1 (sees order after 5ms) ‚úì
            -- User in Europe: Reads from Replica 2 (sees order after 50ms) ‚úì
            -- User in Asia: Reads from Replica 3 (sees order after 150ms) ‚úì

            -- All replicas eventually consistent ‚úì

            -- -----------------------------------------------------------
            -- Handling Replication Lag
            -- -----------------------------------------------------------

            -- Problem: User creates order on master, immediately queries replica

            -- Time 0ms: User creates order on master
            INSERT INTO Orders VALUES (6001, 456, 300.00);
            COMMIT;  -- Success returned to user

            -- Time 5ms: User queries replica
            SELECT * FROM Orders WHERE OrderID = 6001;
            -- Result: Empty! Order not replicated yet ‚ùå

            -- Time 50ms: Replication completes
            -- Replica now has order

            -- Solutions:

            -- Solution 1: Read-Your-Writes Consistency
            -- After write, read from master (not replica)
            IF (just_wrote) THEN
                SELECT * FROM Orders WHERE OrderID = 6001;  -- Query master ‚úì
            ELSE
                SELECT * FROM Orders WHERE OrderID = 6001;  -- Query replica
            END IF;

            -- Solution 2: Session Consistency
            -- Track LSN of user's last write
            -- Only query replicas that have reached that LSN
            User_Session.Last_LSN = 20005;
            IF (Replica.Current_LSN >= User_Session.Last_LSN) THEN
                SELECT * FROM Replica;  -- Replica caught up ‚úì
            ELSE
                SELECT * FROM Master;  -- Replica lagging, use master
            END IF;

            -- Solution 3: Stale-Reads-Are-OK
            -- Application accepts eventual consistency
            -- Show message: "Your order is being processed"
            -- Refresh after delay to see order</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-history"></i>
                        Role 5: Point-in-Time Recovery (PITR)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Transaction logs enable restoring databases to any specific moment in time.</strong> This is crucial for recovering from user errors, such as accidentally deleting important data.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Point-in-Time Recovery Process
            -- -----------------------------------------------------------

            -- Scenario: Accidental data deletion at 2:30 PM

            -- Timeline:
            -- 00:00 AM - Full backup taken
            -- 02:30 PM - DISASTER: Someone runs DROP TABLE Orders; ‚ùå
            -- 02:35 PM - Error discovered!

            -- Transaction Log contains:
            LSN: 100000 | Time: 00:00:00 | CHECKPOINT | Backup completed
            LSN: 100001 | Time: 09:15:23 | TXN: T100 | INSERT Orders {1001, ...}
            LSN: 100002 | Time: 09:15:24 | TXN: T100 | COMMIT
            LSN: 100003 | Time: 11:30:45 | TXN: T200 | UPDATE Products ...
            LSN: 100004 | Time: 11:30:46 | TXN: T200 | COMMIT
            ...
            LSN: 150000 | Time: 14:29:59 | TXN: T500 | INSERT Orders {5001, ...}
            LSN: 150001 | Time: 14:30:00 | TXN: T500 | COMMIT
            LSN: 150002 | Time: 14:30:00 | TXN: T501 | DROP TABLE Orders  ‚ùå ACCIDENTAL!
            LSN: 150003 | Time: 14:30:01 | TXN: T501 | COMMIT

            -- Recovery Strategy:
            -- Restore to 14:29:59 (one second before DROP TABLE)

            -- Step 1: Stop database (prevent more changes)
            SHUTDOWN DATABASE;

            -- Step 2: Restore from last backup (00:00 AM)
            RESTORE DATABASE FROM BACKUP 'backup_2025_11_14_00_00.bak';
            -- Database now at midnight state

            -- Step 3: Apply transaction log up to 14:29:59
            RESTORE LOG 'transaction_log.log' 
            WITH STOPAT = '2025-11-14 14:29:59.999';

            -- Replay process:
            -- LSN: 100001 - Applied ‚úì
            -- LSN: 100002 - Applied ‚úì
            -- LSN: 100003 - Applied ‚úì
            -- ...
            -- LSN: 150000 - Applied ‚úì
            -- LSN: 150001 - Applied ‚úì
            -- LSN: 150002 - STOP (past recovery point) ‚úó

            -- Step 4: Database online with data recovered!
            -- Orders table exists with all data up to 14:29:59 ‚úì
            -- DROP TABLE command not applied ‚úì

            -- -----------------------------------------------------------
            -- Continuous Log Archiving
            -- -----------------------------------------------------------

            -- Setup for PITR capability:

            -- 1. Enable continuous log archiving
            -- PostgreSQL:
            SET archive_mode = on;
            SET archive_command = 'cp %p /archive/logs/%f';

            -- MySQL:
            SET GLOBAL log_bin = ON;

            -- 2. Archive logs get copied to safe storage
            -- Transaction Log ‚Üí Archive Directory ‚Üí Cloud Storage

            -- 3. Retention policy
            -- Keep all archived logs for 30 days
            -- Allows recovery to any point in last 30 days

            -- Example archived logs:
            /archive/logs/000001.log  -- 2025-11-01 to 2025-11-02
            /archive/logs/000002.log  -- 2025-11-02 to 2025-11-03
            /archive/logs/000003.log  -- 2025-11-03 to 2025-11-04
            ...
            /archive/logs/000030.log  -- 2025-11-30 to 2025-12-01

            -- -----------------------------------------------------------
            -- Multiple Recovery Scenarios
            -- -----------------------------------------------------------

            -- Scenario 1: Accidental DELETE
            -- Time: 10:30:00 - DELETE FROM Customers WHERE City = 'Boston';
            -- Affected: 5,000 customers deleted

            -- Recovery:
            RESTORE DATABASE FROM BACKUP;
            RESTORE LOG WITH STOPAT = '10:29:59';
            -- All Boston customers restored ‚úì

            -- -----------------------------------------------------------

            -- Scenario 2: Bad UPDATE
            -- Time: 15:45:00 - UPDATE Products SET Price = Price * 10;  -- Oops! 10x instead of 1.1x
            -- Affected: All product prices multiplied by 10

            -- Recovery:
            RESTORE DATABASE FROM BACKUP;
            RESTORE LOG WITH STOPAT = '15:44:59';
            -- Correct prices restored ‚úì

            -- -----------------------------------------------------------

            -- Scenario 3: Ransomware Attack
            -- Time: 03:22:00 - Database encrypted by malware
            -- Attacker demands payment

            -- Recovery:
            RESTORE DATABASE FROM BACKUP;
            RESTORE LOG WITH STOPAT = '03:21:59';
            -- Database restored to before attack ‚úì
            -- No ransom paid ‚úì

            -- -----------------------------------------------------------
            -- Granular Recovery with Table-Level PITR
            -- -----------------------------------------------------------

            -- Some databases support recovering individual tables

            -- Scenario: Need to recover just Orders table to yesterday

            -- Step 1: Create temporary database
            CREATE DATABASE TempRecovery;

            -- Step 2: Restore full backup to temp database
            RESTORE DATABASE TempRecovery FROM BACKUP 'yesterday.bak';

            -- Step 3: Apply logs to yesterday 23:59:59
            RESTORE LOG TO TempRecovery WITH STOPAT = '2025-11-13 23:59:59';

            -- Step 4: Extract Orders table
            INSERT INTO Production.Orders 
            SELECT * FROM TempRecovery.Orders;

            -- Step 5: Drop temp database
            DROP DATABASE TempRecovery;

            -- Result: Orders table recovered to yesterday, rest of database current ‚úì

            -- -----------------------------------------------------------
            -- PITR Best Practices
            -- -----------------------------------------------------------

            -- 1. Regular Full Backups
            -- Take full backup daily or weekly
            BACKUP DATABASE TO 'full_backup_2025_11_14.bak' WITH INIT;

            -- 2. Continuous Log Archiving
            -- Archive logs to separate storage
            -- Protect from primary storage failure

            -- 3. Test Recovery Procedures
            -- Regularly test restoring to different time points
            -- Ensure logs are complete and restorable

            -- 4. Monitor Log Growth
            -- Transaction logs can grow large
            -- Archive and truncate regularly

            -- 5. Retention Policy
            -- Keep sufficient logs for recovery needs
            -- Balance storage cost with recovery window

            -- Example retention:
            -- Full backups: 90 days
            -- Transaction logs: 30 days
            -- Point-in-time recovery possible for last 30 days ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-clipboard-list"></i>
                        Role 6: Audit Trail
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Transaction logs serve as a complete audit trail of all database changes.</strong> This is valuable for compliance, forensics, and understanding data evolution.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Audit Trail from Transaction Log
            -- -----------------------------------------------------------

            -- Query: Who changed customer email on Nov 14?

            SELECT 
                LSN,
                TransactionID,
                Timestamp,
                Username,
                Operation,
                TableName,
                BeforeValue,
                AfterValue
            FROM TransactionLogView
            WHERE TableName = 'Customers'
            AND ColumnName = 'Email'
            AND Timestamp BETWEEN '2025-11-14 00:00:00' AND '2025-11-14 23:59:59'
            ORDER BY Timestamp;

            -- Results:
            -- LSN    | TXN   | Time     | User    | Op     | Before              | After
            -- 50001  | T100  | 10:15:30 | admin   | UPDATE | old@email.com      | new@email.com
            -- 50234  | T150  | 14:22:45 | user123 | UPDATE | alice@example.com  | alice@newdomain.com
            -- 50789  | T200  | 18:45:12 | admin   | UPDATE | bob@test.com       | bob@company.com

            -- Audit trail shows: 3 email changes, by 2 different users ‚úì

            -- -----------------------------------------------------------
            -- Compliance Reporting
            -- -----------------------------------------------------------

            -- Healthcare HIPAA Compliance:
            -- Track all access to patient records

            SELECT 
                PatientID,
                AccessedBy,
                AccessTime,
                Operation,
                IPAddress
            FROM AuditLog
            WHERE PatientID = 'P-12345'
            AND AccessTime >= DATE_SUB(NOW(), INTERVAL 90 DAY)
            ORDER BY AccessTime DESC;

            -- Financial SOX Compliance:
            -- Track all financial transaction modifications

            SELECT 
                TransactionID,
                ModifiedBy,
                ModificationTime,
                OldAmount,
                NewAmount,
                Reason
            FROM FinancialAuditLog
            WHERE ModificationTime >= '2025-01-01'
            AND ABS(NewAmount - OldAmount) > 10000
            ORDER BY ModificationTime;

            -- GDPR Data Access Log:
            -- Track who accessed personal data

            SELECT 
                CustomerID,
                DataType,
                AccessedBy,
                Purpose,
                AccessTime
            FROM DataAccessLog
            WHERE CustomerID IN (
                SELECT CustomerID FROM EUCustomers
            )
            AND AccessTime >= DATE_SUB(NOW(), INTERVAL 1 YEAR);

            -- -----------------------------------------------------------
            -- Forensic Investigation
            -- -----------------------------------------------------------

            -- Scenario: Investigate suspicious account balance changes

            -- Step 1: Find all transactions affecting account
            SELECT *
            FROM TransactionLog
            WHERE TableName = 'Accounts'
            AND AccountID = 'ACC-SUSPICIOUS'
            ORDER BY LSN;

            -- Results reveal pattern:
            -- LSN: 60001 | Time: 01:30:00 | User: admin | Balance: 1000 ‚Üí 500
            -- LSN: 60005 | Time: 01:30:15 | User: admin | Balance: 500 ‚Üí 0
            -- LSN: 60010 | Time: 01:30:30 | User: admin | Balance: 0 ‚Üí 1000
            -- LSN: 60015 | Time: 01:30:45 | User: admin | Balance: 1000 ‚Üí 500

            -- Suspicious: Multiple rapid changes at odd hour ‚ö†Ô∏è

            -- Step 2: Cross-reference with login logs
            SELECT 
                l.Username,
                l.LoginTime,
                l.IPAddress,
                l.Location,
                t.Operation,
                t.Timestamp
            FROM LoginLog l
            JOIN TransactionLog t ON l.Username = t.Username
            WHERE l.Username = 'admin'
            AND l.LoginTime BETWEEN '01:25:00' AND '01:35:00';

            -- Discovery: IP address from unusual location
            -- Normal admin IP: 192.168.1.100 (Office)
            -- Suspicious IP: 203.45.67.89 (Foreign country) ‚ö†Ô∏è

            -- Conclusion: Compromised account, unauthorized access ‚úì

            -- -----------------------------------------------------------
            -- Data Lineage Tracking
            -- -----------------------------------------------------------

            -- Question: How did this record's value change over time?

            SELECT 
                Timestamp,
                Operation,
                Username,
                ProductPrice
            FROM ProductPriceHistory
            WHERE ProductID = 'PROD-500'
            ORDER BY Timestamp;

            -- Timeline:
            -- 2025-01-01 | INSERT | system    | $50.00  (Initial price)
            -- 2025-03-15 | UPDATE | marketing | $45.00  (Spring sale)
            -- 2025-04-01 | UPDATE | marketing | $50.00  (Sale ended)
            -- 2025-06-10 | UPDATE | pricing   | $55.00  (Price increase)
            -- 2025-09-20 | UPDATE | manager   | $49.99  (Competitive adjustment)
            -- 2025-11-14 | UPDATE | system    | $52.50  (Automatic adjustment)

            -- Full history of all changes with reasons ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-tools"></i>
                        Transaction Log Management
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Transaction logs require active management to prevent disk space issues and maintain performance.</strong></p>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Task</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Purpose</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Frequency</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Log Backup</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Archive logs for point-in-time recovery</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Every 15-60 minutes</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Log Truncation</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Remove archived/applied log entries</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">After each log backup</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Checkpoint</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Flush dirty pages, mark log position</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Every 5-15 minutes</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Size Monitoring</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Prevent disk space exhaustion</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Continuous</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Archive Cleanup</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Remove old archived logs</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Per retention policy</td>
                        </tr>
                    </table>
                    
                    <div class="example-box" style="margin-top: 1.5rem;">
                        <pre><code>-- -----------------------------------------------------------
            -- Log Management Commands
            -- -----------------------------------------------------------

            -- MySQL: View transaction log size
            SHOW BINARY LOGS;
            -- Output:
            -- Log_name         | File_size
            -- mysql-bin.000001 | 1073741824  (1 GB)
            -- mysql-bin.000002 | 536870912   (512 MB)
            -- mysql-bin.000003 | 268435456   (256 MB)

            -- Purge old logs
            PURGE BINARY LOGS BEFORE '2025-11-01';
            -- Removes logs older than Nov 1, 2025

            -- PostgreSQL: Monitor WAL size
            SELECT pg_size_pretty(pg_wal_lsn_diff(pg_current_wal_lsn(), '0/0'));
            -- Output: 2500 MB

            -- Archive and switch WAL file
            SELECT pg_switch_wal();

            -- SQL Server: Shrink transaction log
            USE MyDatabase;
            GO
            DBCC SHRINKFILE (MyDatabase_Log, 1000);  -- Shrink to 1000 MB
            GO

            -- Backup transaction log
            BACKUP LOG MyDatabase 
            TO DISK = 'C:\Backups\MyDatabase_Log_2025_11_14.trn'
            WITH INIT;

            -- Oracle: Check redo log size
            SELECT GROUP#, BYTES/1024/1024 AS SIZE_MB, STATUS
            FROM V$LOG;

            -- Add new redo log group
            ALTER DATABASE ADD LOGFILE GROUP 4
            ('redo04a.log', 'redo04b.log') SIZE 1G;

            -- -----------------------------------------------------------
            -- Automated Log Management Script
            -- -----------------------------------------------------------

            -- Daily maintenance script

            -- Step 1: Backup transaction log
            BACKUP LOG ProductionDB
            TO DISK = 'Logs\ProductionDB_' + CONVERT(VARCHAR, GETDATE(), 112) + '.trn';

            -- Step 2: Truncate log after backup
            -- (Automatically happens after log backup in most databases)

            -- Step 3: Check log size
            IF (SELECT size * 8 / 1024 FROM sys.database_files WHERE type = 1) > 5000  -- 5 GB
            BEGIN
                PRINT 'Warning: Transaction log exceeds 5 GB';
                -- Send alert to DBA
                EXEC msdb.dbo.sp_send_dbmail
                    @recipients = 'dba@company.com',
                    @subject = 'Transaction Log Size Alert',
                    @body = 'ProductionDB transaction log exceeds 5 GB threshold';
            END;

            -- Step 4: Remove old archived logs (keep 30 days)
            EXECUTE xp_cmdshell 'forfiles /p "C:\Backups" /m *.trn /d -30 /c "cmd /c del @path"';

            -- -----------------------------------------------------------
            -- Monitoring Queries
            -- -----------------------------------------------------------

            -- Check transaction log space usage
            SELECT 
                name AS DatabaseName,
                log_reuse_wait_desc AS LogReuseWait,
                (size * 8.0 / 1024) AS LogSizeMB,
                (FILEPROPERTY(name, 'SpaceUsed') * 8.0 / 1024) AS LogSpaceUsedMB,
                ((size - FILEPROPERTY(name, 'SpaceUsed')) * 8.0 / 1024) AS LogSpaceFreeMB
            FROM sys.database_files
            WHERE type = 1;  -- Log files only

            -- Identify long-running transactions blocking log truncation
            SELECT 
                s.session_id,
                s.login_name,
                s.host_name,
                t.transaction_begin_time,
                DATEDIFF(SECOND, t.transaction_begin_time, GETDATE()) AS DurationSeconds,
                s.status
            FROM sys.dm_tran_active_transactions t
            JOIN sys.dm_exec_sessions s ON t.session_id = s.session_id
            WHERE t.transaction_type = 1  -- Read/write transaction
            ORDER BY t.transaction_begin_time;

            -- Check replication lag (if using log shipping)
            SELECT 
                secondary_database,
                last_copied_file,
                last_copied_date,
                last_restored_file,
                last_restored_date,
                DATEDIFF(MINUTE, last_restored_date, GETDATE()) AS MinutesBehind
            FROM msdb.dbo.log_shipping_monitor_secondary;</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if the transaction log fills up?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>When the transaction log fills up, the database can no longer accept write operations!</strong> This is a critical situation that requires immediate attention.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Immediate Symptoms:</strong></p>
                                <ul>
                                    <li>All INSERT, UPDATE, DELETE operations fail</li>
                                    <li>Error messages: "The transaction log is full" or "Log file is full"</li>
                                    <li>Applications unable to write data</li>
                                    <li>Read operations (SELECT) continue working</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Why It Happens:</strong></p>
                                <ul>
                                    <li>Long-running transaction preventing log truncation</li>
                                    <li>Replication lag blocking log cleanup</li>
                                    <li>Log backup not running regularly</li>
                                    <li>Log file size limit reached</li>
                                    <li>Disk space exhausted</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Resolution Steps:</strong></p>
                                <ol>
                                    <li><strong>Immediate:</strong> Kill long-running transactions blocking log</li>
                                    <li><strong>Backup log:</strong> Free space by backing up transaction log</li>
                                    <li><strong>Increase size:</strong> Expand log file size or add space</li>
                                    <li><strong>Truncate:</strong> In emergency, truncate log (loses PITR capability)</li>
                                </ol>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Emergency resolution:

            -- Step 1: Backup log to free space
            BACKUP LOG MyDatabase 
            TO DISK = 'emergency_log_backup.trn';

            -- Step 2: If backup fails due to full disk, backup to NULL
            BACKUP LOG MyDatabase TO DISK = 'NUL';

            -- Step 3: Increase log file size
            ALTER DATABASE MyDatabase
            MODIFY FILE (NAME = MyDatabase_Log, SIZE = 10GB);

            -- Step 4: Identify blocking transaction
            SELECT * FROM sys.dm_tran_active_transactions
            ORDER BY transaction_begin_time;

            -- Kill blocking transaction
            KILL <session_id>;</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you disable transaction logging for better performance?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Generally NO for most operations, but there are specific scenarios where minimal logging is possible:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Why You Usually Can't Disable Logging:</strong></p>
                                <ul>
                                    <li>Breaks ACID guarantees (no durability)</li>
                                    <li>No crash recovery possible</li>
                                    <li>Replication stops working</li>
                                    <li>Point-in-time recovery impossible</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Minimally Logged Operations (Compromise):</strong></p>
                                <ul>
                                    <li><strong>Bulk INSERT:</strong> Loading large amounts of data</li>
                                    <li><strong>SELECT INTO:</strong> Creating new tables</li>
                                    <li><strong>Index builds:</strong> CREATE INDEX operations</li>
                                    <li><strong>BCP operations:</strong> Bulk copy program</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Fully logged INSERT (default)
            INSERT INTO LargeTable 
            SELECT * FROM SourceTable;
            -- Every row logged individually (slow but recoverable)

            -- Minimally logged bulk insert
            -- SQL Server:
            INSERT INTO LargeTable WITH (TABLOCK)
            SELECT * FROM SourceTable;
            -- Only extent allocations logged (fast but less recoverable)

            -- Requirements for minimal logging:
            -- 1. Database in SIMPLE or BULK_LOGGED recovery model
            -- 2. Table has no indexes or using TABLOCK
            -- 3. Operation qualifies for minimal logging</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Alternative:</strong> Use separate database with SIMPLE recovery model for non-critical data where minimal logging is acceptable.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How does transaction log performance impact overall database performance?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Transaction log I/O is often the bottleneck for write-heavy databases.</strong> Every committed transaction requires at least one log write (fsync) to disk.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Performance Impact:</strong></p>
                                <ul>
                                    <li><strong>Sequential writes:</strong> Log writes are sequential (good for HDDs)</li>
                                    <li><strong>Fsync delay:</strong> Each fsync takes 1-10ms (limits throughput)</li>
                                    <li><strong>Group commit:</strong> Batching reduces per-transaction overhead</li>
                                    <li><strong>Write amplification:</strong> Small transaction generates log I/O</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Optimization Strategies:</strong></p>
                                <ol>
                                    <li><strong>SSD storage:</strong> Use SSD for transaction log (10x faster fsync)</li>
                                    <li><strong>Dedicated disk:</strong> Separate log from data files</li>
                                    <li><strong>Battery-backed cache:</strong> RAID controller with write cache</li>
                                    <li><strong>Larger transactions:</strong> Batch operations reduce log writes</li>
                                    <li><strong>Async commit:</strong> Trade durability for speed (risky)</li>
                                </ol>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Performance comparison:

            -- Slow: Individual commits (1000 transactions)
            FOR i IN 1..1000 LOOP
                INSERT INTO Table VALUES (i);
                COMMIT;  -- 1000 fsync calls! Slow!
            END LOOP;
            -- Time: 10 seconds (1000 * 10ms fsync)

            -- Fast: Batch commit (1 transaction)
            BEGIN;
            FOR i IN 1..1000 LOOP
                INSERT INTO Table VALUES (i);
            END LOOP;
            COMMIT;  -- 1 fsync call! Fast!
            -- Time: 0.1 seconds (1 * 10ms fsync + insert time)</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between transaction log and binary log?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>These terms are often used interchangeably, but there are subtle differences depending on the database:</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Transaction Log</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Binary Log</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Primary Purpose</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Crash recovery, rollback</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Replication, PITR</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Format</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Physical (page-level changes)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Logical (SQL statements)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Database</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SQL Server, PostgreSQL (WAL), Oracle (Redo)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MySQL</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Required?</strong></td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Always (for ACID)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Optional (for replication)</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>MySQL Specific:</strong></p>
                                <ul>
                                    <li><strong>InnoDB redo log:</strong> Transaction log for crash recovery (physical)</li>
                                    <li><strong>Binary log:</strong> Replication and PITR (logical SQL statements)</li>
                                    <li>Both can be enabled simultaneously</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How long should you keep transaction logs?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Retention depends on your recovery requirements and compliance needs:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Typical Retention Policies:</strong></p>
                                <ul>
                                    <li><strong>Active transaction log:</strong> Keep until next full backup (1-7 days)</li>
                                    <li><strong>Archived logs (PITR):</strong> 7-30 days typical</li>
                                    <li><strong>Compliance/audit:</strong> 1-7 years depending on regulations</li>
                                    <li><strong>Long-term archive:</strong> Compressed storage for legal requirements</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Factors to Consider:</strong></p>
                                <ol>
                                    <li><strong>Recovery Point Objective (RPO):</strong> How much data loss is acceptable?</li>
                                    <li><strong>Storage cost:</strong> Logs consume significant space over time</li>
                                    <li><strong>Compliance requirements:</strong> Legal mandates for retention</li>
                                    <li><strong>Audit needs:</strong> How far back must you trace changes?</li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Recommended Strategy:</strong></p>
                                <ul>
                                    <li><strong>Hot tier:</strong> Last 7 days on fast storage (PITR capability)</li>
                                    <li><strong>Warm tier:</strong> 8-30 days on standard storage (archived)</li>
                                    <li><strong>Cold tier:</strong> 30+ days compressed on cheap storage (compliance)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Transaction log</span>
                        <span class="keyword-tag">Write-Ahead Log (WAL)</span>
                        <span class="keyword-tag">Crash recovery</span>
                        <span class="keyword-tag">Durability</span>
                        <span class="keyword-tag">REDO</span>
                        <span class="keyword-tag">UNDO</span>
                        <span class="keyword-tag">Point-in-Time Recovery (PITR)</span>
                        <span class="keyword-tag">Log Sequence Number (LSN)</span>
                        <span class="keyword-tag">Checkpoint</span>
                        <span class="keyword-tag">Replication</span>
                        <span class="keyword-tag">Before image</span>
                        <span class="keyword-tag">After image</span>
                        <span class="keyword-tag">FSYNC</span>
                        <span class="keyword-tag">Log archiving</span>
                        <span class="keyword-tag">ARIES algorithm</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 87: What is Concurrency Control? -->
            <div class="question-content" id="q87">
                <div class="question-header">
                    <h1 class="question-title">What is Concurrency Control?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 8 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Concurrency Control</strong> is a mechanism used by DBMS to ensure that multiple transactions can execute simultaneously without causing data inconsistencies. It manages the order and timing of transaction execution to maintain database integrity.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Why Concurrency Control is Needed:</strong></p>
                        <ul>
                            <li>Multiple users access database simultaneously</li>
                            <li>Transactions can interfere with each other</li>
                            <li>Need to prevent data inconsistencies</li>
                            <li>Maximize throughput while maintaining correctness</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Problems Without Concurrency Control:</strong></p>
                        <ul>
                            <li><strong>Lost Update:</strong> One transaction's update overwrites another's</li>
                            <li><strong>Dirty Read:</strong> Reading uncommitted data</li>
                            <li><strong>Non-Repeatable Read:</strong> Same query returns different results</li>
                            <li><strong>Phantom Read:</strong> New rows appear between reads</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Concurrency Problems (Examples)
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">1. Lost Update Problem</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Initial: Balance = $1000
            -- Time  Transaction 1              Transaction 2
            -- T1    READ Balance (1000)
            -- T2                               READ Balance (1000)
            -- T3    Balance = 1000 + 100
            -- T4                               Balance = 1000 - 50
            -- T5    WRITE Balance (1100)
            -- T6                               WRITE Balance (950)  -- Overwrites T1's update!
            -- 
            -- Result: Balance = $950 (Transaction 1's update LOST!)
            -- Expected: $1050 (1000 + 100 - 50)</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">2. Dirty Read Problem</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Initial: Balance = $1000
            -- Time  Transaction 1              Transaction 2
            -- T1    START TRANSACTION
            -- T2    UPDATE Balance = 1500
            -- T3                               START TRANSACTION
            -- T4                               READ Balance (1500)  -- Reads uncommitted data!
            -- T5                               COMMIT
            -- T6    ROLLBACK                   -- Transaction 1 rolled back!
            -- 
            -- Result: Transaction 2 used invalid data (1500)
            -- Actual balance should still be $1000</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">3. Non-Repeatable Read Problem</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Time  Transaction 1              Transaction 2
            -- T1    START TRANSACTION
            -- T2    SELECT * WHERE ID=1        -- Returns Balance = 1000
            -- T3                               START TRANSACTION
            -- T4                               UPDATE SET Balance = 2000 WHERE ID=1
            -- T5                               COMMIT
            -- T6    SELECT * WHERE ID=1        -- Returns Balance = 2000
            -- T7    COMMIT
            -- 
            -- Problem: Same SELECT within same transaction returns different results!</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">4. Phantom Read Problem</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Time  Transaction 1                      Transaction 2
            -- T1    START TRANSACTION
            -- T2    SELECT COUNT(*) FROM Orders         -- Returns 10 rows
            --       WHERE Status = 'Pending'
            -- T3                                       START TRANSACTION
            -- T4                                       INSERT INTO Orders 
            --                                          VALUES (..., 'Pending')
            -- T5                                       COMMIT
            -- T6    SELECT COUNT(*) FROM Orders         -- Returns 11 rows
            --       WHERE Status = 'Pending'
            -- T7    COMMIT
            -- 
            -- Problem: New "phantom" row appeared!</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        Concurrency Control Techniques
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Lock-Based Protocols</h4>
                        <p>Use locks to control access to data items.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Types of Locks:</strong></p>
                        <ul>
                            <li><strong>Shared Lock (S):</strong> Multiple transactions can read simultaneously</li>
                            <li><strong>Exclusive Lock (X):</strong> Only one transaction can write</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Shared Lock (Read Lock)
            SELECT * FROM Accounts WHERE AccountID = 1 LOCK IN SHARE MODE;
            -- Multiple transactions can hold shared locks on same row

            -- Exclusive Lock (Write Lock)
            SELECT * FROM Accounts WHERE AccountID = 1 FOR UPDATE;
            -- Only one transaction can hold exclusive lock
            -- Blocks all other locks (shared and exclusive)</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Two-Phase Locking (2PL)</h4>
                        <p>Ensures serializability through two phases:</p>
                        <ul>
                            <li><strong>Growing Phase:</strong> Acquire locks, cannot release any</li>
                            <li><strong>Shrinking Phase:</strong> Release locks, cannot acquire any</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Two-Phase Locking Example
            START TRANSACTION;

            -- GROWING PHASE: Acquire locks
            SELECT * FROM Accounts WHERE AccountID = 1 FOR UPDATE;  -- Lock 1
            SELECT * FROM Accounts WHERE AccountID = 2 FOR UPDATE;  -- Lock 2

            -- Perform operations
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;
            UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 2;

            -- SHRINKING PHASE: Release locks
            COMMIT;  -- All locks released</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Timestamp-Based Protocols</h4>
                        <p>Use timestamps to order transactions.</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Each transaction gets unique timestamp
            -- Transaction with earlier timestamp gets priority
            -- If conflict: abort newer transaction

            -- Example:
            -- T1 (timestamp = 100) reads data item X
            -- T2 (timestamp = 200) tries to write X
            -- Allowed: T2's write occurs "after" T1's read

            -- T3 (timestamp = 150) tries to write X
            -- Rejected: Would violate timestamp order
            -- T3 is aborted and restarted with new timestamp</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. Optimistic Concurrency Control</h4>
                        <p>Assume conflicts are rare. Validate before commit.</p>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Three Phases:
            -- 1. Read Phase: Read data, make local copy
            -- 2. Validation Phase: Check for conflicts
            -- 3. Write Phase: If valid, write changes

            -- Example with version numbers:
            -- Read data with version
            SELECT Balance, Version FROM Accounts WHERE AccountID = 1;
            -- Returns: Balance = 1000, Version = 5

            -- Perform calculations locally
            -- New balance = 1100

            -- Update only if version unchanged
            UPDATE Accounts 
            SET Balance = 1100, Version = 6
            WHERE AccountID = 1 AND Version = 5;

            -- If 0 rows affected: version changed, conflict detected, retry</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Isolation Levels
                    </div>
                    <div class="explanation-text">
                        <p>Isolation levels define the degree to which transactions are isolated from each other:</p>
                        
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <tr style="background: #dbeafe;">
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Isolation Level</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Dirty Read</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Non-Repeatable Read</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Phantom Read</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ UNCOMMITTED</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úó Possible</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úó Possible</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úó Possible</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>READ COMMITTED</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úì Prevented</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úó Possible</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úó Possible</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>REPEATABLE READ</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úì Prevented</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úì Prevented</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úó Possible</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>SERIALIZABLE</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úì Prevented</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úì Prevented</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">‚úì Prevented</td>
                            </tr>
                        </table>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Setting Isolation Level
            -- Session level
            SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;

            -- Transaction level
            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
            START TRANSACTION;
            -- ... queries ...
            COMMIT;

            -- Check current isolation level
            SELECT @@transaction_isolation;</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is the trade-off between isolation levels?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Higher Isolation = More Safety but Less Performance</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Isolation Level</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Safety</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Performance</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Use Case</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">READ UNCOMMITTED</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lowest</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Highest</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Read-only analytics</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">READ COMMITTED</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Medium</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Good</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Most applications (default)</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">REPEATABLE READ</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">High</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lower</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Financial transactions</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SERIALIZABLE</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Highest</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lowest</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Critical operations</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What is Pessimistic vs Optimistic Concurrency Control?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Pessimistic:</strong> Assume conflicts will happen, lock resources proactively</p>
                                <ul>
                                    <li>Locks acquired before accessing data</li>
                                    <li>Blocks other transactions</li>
                                    <li>Good when conflicts are common</li>
                                    <li>Example: Traditional locking</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Optimistic:</strong> Assume conflicts are rare, validate at commit time</p>
                                <ul>
                                    <li>No locks during execution</li>
                                    <li>Validate before commit</li>
                                    <li>Good when conflicts are rare</li>
                                    <li>Example: Version-based concurrency</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>How do you choose the right concurrency control strategy?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Consider these factors:</strong></p>
                                <ol>
                                    <li><strong>Conflict Frequency:</strong>
                                        <ul>
                                            <li>High conflicts ‚Üí Pessimistic locking</li>
                                            <li>Low conflicts ‚Üí Optimistic control</li>
                                        </ul>
                                    </li>
                                    <li><strong>Read/Write Ratio:</strong>
                                        <ul>
                                            <li>Mostly reads ‚Üí Lower isolation, optimistic</li>
                                            <li>Many writes ‚Üí Higher isolation, pessimistic</li>
                                        </ul>
                                    </li>
                                    <li><strong>Response Time Requirements:</strong>
                                        <ul>
                                            <li>Need fast response ‚Üí Lower isolation</li>
                                            <li>Can tolerate delays ‚Üí Higher isolation</li>
                                        </ul>
                                    </li>
                                    <li><strong>Data Criticality:</strong>
                                        <ul>
                                            <li>Financial data ‚Üí SERIALIZABLE</li>
                                            <li>Analytics ‚Üí READ UNCOMMITTED</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Concurrency Control</span>
                        <span class="keyword-tag">Lost Update</span>
                        <span class="keyword-tag">Dirty Read</span>
                        <span class="keyword-tag">Non-Repeatable Read</span>
                        <span class="keyword-tag">Phantom Read</span>
                        <span class="keyword-tag">Isolation Levels</span>
                        <span class="keyword-tag">Locking</span>
                        <span class="keyword-tag">Two-Phase Locking</span>
                        <span class="keyword-tag">Optimistic Control</span>
                        <span class="keyword-tag">Serializable</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 88: How Do Databases Ensure Atomicity? -->
            <div class="question-content" id="q88">
                <div class="question-header">
                    <h1 class="question-title">How Do Databases Ensure Atomicity?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 14 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Understanding Atomicity
                    </div>
                    <div class="definition-box">
                        <p><strong>Atomicity</strong> guarantees that a transaction is treated as a single, indivisible unit of work. Either ALL operations in the transaction succeed, or NONE of them do. There's no middle ground - no partial execution.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The Challenge:</strong></p>
                        <p>A transaction typically involves multiple operations (inserts, updates, deletes) that span multiple disk writes. If the system crashes in the middle, how do we ensure atomicity?</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Mechanisms:</strong></p>
                        <ul>
                            <li><strong>Transaction Logs:</strong> Record of all operations before execution</li>
                            <li><strong>Write-Ahead Logging (WAL):</strong> Log changes before applying them</li>
                            <li><strong>Shadow Paging:</strong> Keep copies of modified pages</li>
                            <li><strong>Undo/Redo Logs:</strong> Enable rollback and recovery</li>
                            <li><strong>Two-Phase Commit:</strong> For distributed transactions</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-list-ol"></i>
                        Core Mechanisms for Ensuring Atomicity
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Write-Ahead Logging (WAL)</h4>
                        <p><strong>The most common method used by modern databases</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Write-Ahead Logging (WAL) Mechanism

            -- Principle: Write changes to LOG before writing to DATABASE

            -- Transaction: Transfer $500 from Account A to Account B

            START TRANSACTION;

            -- Current state:
            -- Account A: $1000
            -- Account B: $2000

            -- Step 1: Write to LOG (not database yet!)
            LOG: <T1, START>
            LOG: <T1, Account_A, old=1000, new=500>
            LOG: <T1, Account_B, old=2000, new=2500>

            -- Step 2: Flush LOG to disk (forced write)
            -- ‚úì Log safely on disk before ANY database changes

            -- Step 3: Update database (in-memory buffers)
            -- In-memory: Account A = 500
            -- In-memory: Account B = 2500

            -- Step 4: Write COMMIT record to log
            LOG: <T1, COMMIT>

            -- Step 5: Flush log to disk
            -- ‚úì Commit record safely on disk

            -- Step 6: Eventually write database pages to disk
            -- (This can happen asynchronously, lazily)

            -- -----------------------------------------------------------
            -- What Happens During Crash?
            -- -----------------------------------------------------------

            -- SCENARIO 1: Crash BEFORE commit written to log
            -- Timeline:
            -- 1. Write changes to log ‚úì
            -- 2. Update in-memory database ‚úì
            -- 3. üí• CRASH before COMMIT written to log

            -- Recovery:
            -- Read log: Find <T1, START> but no <T1, COMMIT>
            -- Transaction incomplete! ‚ùå
            -- Action: ROLLBACK (undo all changes)
            -- Use old values from log:
            --   Account A: Restore to 1000 ‚úì
            --   Account B: Restore to 2000 ‚úì
            -- Result: Transaction aborted, atomicity preserved ‚úì

            -- SCENARIO 2: Crash AFTER commit written to log
            -- Timeline:
            -- 1. Write changes to log ‚úì
            -- 2. Write COMMIT to log ‚úì
            -- 3. Flush log to disk ‚úì
            -- 4. üí• CRASH before database pages written to disk

            -- Recovery:
            -- Read log: Find <T1, START> and <T1, COMMIT>
            -- Transaction complete! ‚úì
            -- But: Database pages may not be updated yet ‚ö†
            -- Action: REDO (re-apply all changes)
            -- Use new values from log:
            --   Account A: Set to 500 ‚úì
            --   Account B: Set to 2500 ‚úì
            -- Result: Transaction committed, atomicity preserved ‚úì

            -- SCENARIO 3: Crash DURING log write
            -- Timeline:
            -- 1. Start writing changes to log
            -- 2. üí• CRASH mid-write (partial log record)

            -- Recovery:
            -- Read log: Find partial/corrupted record
            -- Cannot determine if transaction completed
            -- Action: ABORT transaction ‚úì
            -- Use checksums to detect corruption
            -- Result: Transaction aborted, atomicity preserved ‚úì

            -- -----------------------------------------------------------
            -- WAL Rules (MUST be followed)
            -- -----------------------------------------------------------

            -- Rule 1: Log record must reach disk BEFORE database change
            -- Ensures we can undo if crash occurs

            -- Rule 2: All log records for transaction must reach disk BEFORE commit
            -- Ensures we can redo if crash after commit

            -- Rule 3: Log records must be written in order
            -- Ensures correct undo/redo sequence

            -- -----------------------------------------------------------
            -- Example: PostgreSQL WAL
            -- -----------------------------------------------------------

            -- PostgreSQL transaction:
            BEGIN;
            UPDATE accounts SET balance = 500 WHERE id = 'A';
            UPDATE accounts SET balance = 2500 WHERE id = 'B';
            COMMIT;

            -- Behind the scenes:

            -- 1. Write WAL records:
            WAL Record 1: XID=12345, Type=UPDATE, Table=accounts, 
                        Offset=100, Old=(A,1000), New=(A,500)
            WAL Record 2: XID=12345, Type=UPDATE, Table=accounts,
                        Offset=200, Old=(B,2000), New=(B,2500)
            WAL Record 3: XID=12345, Type=COMMIT

            -- 2. Force WAL to disk (fsync)
            -- 3. Update shared buffers (in-memory)
            -- 4. Mark transaction committed
            -- 5. Lazy write to data files (background writer)

            -- Recovery after crash:
            -- Replay WAL from last checkpoint
            -- For each complete transaction (has COMMIT): Redo
            -- For each incomplete transaction (no COMMIT): Undo
            -- Atomicity guaranteed! ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Shadow Paging</h4>
                        <p><strong>Alternative approach: Keep two versions of pages</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Shadow Paging Mechanism

            -- Idea: Never modify original pages; create shadow copies

            -- Current State:
            -- Page Table: Points to current database pages
            -- Page 1: Account A = $1000
            -- Page 2: Account B = $2000

            -- Transaction starts:
            START TRANSACTION;

            -- Step 1: Copy pages that will be modified (shadow pages)
            -- Shadow Page 1: Copy of Page 1 (Account A = $1000)
            -- Shadow Page 2: Copy of Page 2 (Account B = $2000)

            -- Step 2: Modify shadow pages (NOT original pages)
            -- Shadow Page 1: Account A = $500 ‚úì
            -- Shadow Page 2: Account B = $2500 ‚úì
            -- Original pages unchanged! ‚úì

            -- Step 3: Commit - update page table atomically
            -- Old Page Table:
            --   Entry 1 ‚Üí Page 1 (A=1000)
            --   Entry 2 ‚Üí Page 2 (B=2000)
            -- 
            -- New Page Table (atomic swap):
            --   Entry 1 ‚Üí Shadow Page 1 (A=500)
            --   Entry 2 ‚Üí Shadow Page 2 (B=2500)

            -- Single atomic operation: Write new page table to disk
            -- If this succeeds: Transaction committed ‚úì
            -- If this fails: Original page table still valid ‚úì

            -- -----------------------------------------------------------
            -- Crash Scenarios
            -- -----------------------------------------------------------

            -- SCENARIO 1: Crash BEFORE page table update
            -- Timeline:
            -- 1. Create shadow pages ‚úì
            -- 2. Modify shadow pages ‚úì
            -- 3. üí• CRASH before page table updated

            -- Recovery:
            -- Page table still points to original pages
            -- Shadow pages exist but unreachable
            -- Result: Transaction aborted, atomicity preserved ‚úì
            -- Simply discard shadow pages (garbage collect)

            -- SCENARIO 2: Crash AFTER page table update
            -- Timeline:
            -- 1. Create shadow pages ‚úì
            -- 2. Modify shadow pages ‚úì
            -- 3. Update page table ‚úì (atomic operation succeeded)
            -- 4. üí• CRASH

            -- Recovery:
            -- Page table points to new shadow pages
            -- Result: Transaction committed, atomicity preserved ‚úì
            -- Old pages can be garbage collected

            -- -----------------------------------------------------------
            -- Advantages of Shadow Paging
            -- -----------------------------------------------------------

            -- ‚úì No undo logs needed (original pages preserved)
            -- ‚úì Simple recovery (just check page table)
            -- ‚úì Fast rollback (discard shadow pages)

            -- -----------------------------------------------------------
            -- Disadvantages of Shadow Paging
            -- -----------------------------------------------------------

            -- ‚ùå Fragments disk (pages scattered)
            -- ‚ùå Copying overhead (duplicates data)
            -- ‚ùå Page table updates expensive
            -- ‚ùå Hard to support concurrent transactions
            -- ‚ùå Rarely used in modern databases

            -- -----------------------------------------------------------
            -- Example Implementation
            -- -----------------------------------------------------------

            -- Before transaction:
            Page Table:
            Page ID 100 ‚Üí Physical Block 5000 (Account A)
            Page ID 101 ‚Üí Physical Block 5001 (Account B)

            -- During transaction:
            Shadow Page Table (copy):
            Page ID 100 ‚Üí Physical Block 7000 (Shadow copy, modified)
            Page ID 101 ‚Üí Physical Block 7001 (Shadow copy, modified)

            -- Commit:
            -- Atomic operation: Swap page table pointer
            Master Record:
            Current Page Table ‚Üí Shadow Page Table ‚úì

            -- Now shadow page table is the current one
            -- Old pages (5000, 5001) can be freed</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Undo Logging</h4>
                        <p><strong>Record old values to enable rollback</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Undo Logging

            -- Purpose: Enable transaction rollback by recording old values

            -- Transaction: Update employee salary
            START TRANSACTION;

            -- Current value: salary = $50,000

            -- BEFORE changing database, write UNDO log:
            UNDO LOG: <T1, employee_123, salary, old_value=50000>

            -- Now update database:
            UPDATE employees SET salary = 60000 WHERE id = 123;

            -- Database: salary = $60,000
            -- Undo log: Has old value ($50,000)

            -- If COMMIT:
            COMMIT;
            -- Undo log can be discarded (eventually)
            -- Or kept for MVCC/historical queries

            -- If ROLLBACK:
            ROLLBACK;
            -- Read undo log: old_value = 50000
            -- Restore: UPDATE employees SET salary = 50000 WHERE id = 123;
            -- Result: Database restored to previous state ‚úì

            -- -----------------------------------------------------------
            -- Multiple Operations
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Operation 1: Delete order item
            UNDO LOG: <T1, order_items, row_456, 
                    old_row=(456, 100, 'Product A', 29.99)>
            DELETE FROM order_items WHERE id = 456;

            -- Operation 2: Update order total
            UNDO LOG: <T1, orders, order_100, total, old_value=99.99>
            UPDATE orders SET total = 70.00 WHERE id = 100;

            -- Operation 3: Insert refund
            UNDO LOG: <T1, refunds, row_789, NULL>  -- Was insert (no old value)
            INSERT INTO refunds VALUES (789, 100, 29.99);

            -- Crash or ROLLBACK:
            ROLLBACK;

            -- Recovery reads undo log in REVERSE order:
            -- 1. Delete refund (undo insert)
            --    DELETE FROM refunds WHERE id = 789;
            -- 2. Restore order total
            --    UPDATE orders SET total = 99.99 WHERE id = 100;
            -- 3. Restore order item (undo delete)
            --    INSERT INTO order_items VALUES (456, 100, 'Product A', 29.99);

            -- Result: All changes undone, atomicity preserved ‚úì

            -- -----------------------------------------------------------
            -- Undo Log Rules
            -- -----------------------------------------------------------

            -- Rule 1: Write UNDO record BEFORE changing database
            -- Rule 2: Flush UNDO log to disk BEFORE changing database
            -- Rule 3: Process undo records in REVERSE order during rollback
            -- Rule 4: Keep undo logs until transaction commits

            -- -----------------------------------------------------------
            -- Storage Considerations
            -- -----------------------------------------------------------

            -- Long-running transaction problem:
            START TRANSACTION;

            -- Thousands of operations...
            UPDATE employees SET salary = salary * 1.1 WHERE department = 'Sales';
            -- Affects 10,000 employees
            -- Generates 10,000 undo records!

            -- Undo log grows large ‚ö†
            -- Rollback becomes expensive ‚ö†
            -- Disk space consumed ‚ö†

            -- Solution: Undo log segments, compression, limits on transaction size</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">4. Redo Logging</h4>
                        <p><strong>Record new values to enable recovery after commit</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Redo Logging

            -- Purpose: Re-apply committed transactions after crash

            -- Transaction: Transfer money
            START TRANSACTION;

            -- Operation 1: Deduct from Account A
            -- Write REDO log BEFORE database change:
            REDO LOG: <T1, accounts, account_A, balance, new_value=500>
            -- Update database (might be in-memory only):
            UPDATE accounts SET balance = 500 WHERE id = 'A';

            -- Operation 2: Add to Account B
            REDO LOG: <T1, accounts, account_B, balance, new_value=2500>
            UPDATE accounts SET balance = 2500 WHERE id = 'B';

            -- Write COMMIT to log:
            REDO LOG: <T1, COMMIT>
            -- Flush redo log to disk ‚úì

            -- Now: Transaction is committed ‚úì
            -- But: Database pages might still be in-memory ‚ö†

            -- üí• CRASH before database pages written to disk

            -- Recovery:
            -- 1. Read redo log
            -- 2. Find <T1, COMMIT> - transaction completed ‚úì
            -- 3. Re-apply all changes from redo log:
            --    UPDATE accounts SET balance = 500 WHERE id = 'A';
            --    UPDATE accounts SET balance = 2500 WHERE id = 'B';
            -- 4. Result: Transaction effects restored ‚úì

            -- -----------------------------------------------------------
            -- Redo Log Rules
            -- -----------------------------------------------------------

            -- Rule 1: Write REDO record BEFORE or WITH database change
            -- Rule 2: Flush REDO log to disk BEFORE commit
            -- Rule 3: Commit record must be last in transaction's log
            -- Rule 4: Process redo records in FORWARD order during recovery

            -- -----------------------------------------------------------
            -- Why Redo Logging Allows Delayed Writes
            -- -----------------------------------------------------------

            -- Traditional (no redo):
            COMMIT;
            -- Must flush ALL modified pages to disk immediately ‚è∞
            -- Very slow for large transactions ‚ùå

            -- With redo logging:
            COMMIT;
            -- Flush only REDO LOG to disk ‚ö°
            -- Modified pages can be written lazily (background)
            -- Much faster commits! ‚úì

            -- Example:
            -- Transaction modifies 1000 pages
            -- Without redo: Must write 1000 pages to disk (100 MB) ‚è∞
            -- With redo: Write redo log only (1 MB) ‚ö°
            -- 100x faster! ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">5. Undo/Redo Logging (Combined)</h4>
                        <p><strong>Most modern databases use both undo and redo logs</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Undo/Redo Logging (Combined Approach)

            -- Most modern DBMS use BOTH undo and redo

            -- Why?
            -- UNDO: Needed for rollback (abort transaction)
            -- REDO: Needed for recovery (committed but not yet on disk)

            -- Transaction: Update inventory
            START TRANSACTION;

            -- Current value: stock = 100

            -- Write to log (BOTH old and new values):
            LOG: <T1, inventory, product_456, stock, old=100, new=90>

            -- Update database:
            UPDATE inventory SET stock = 90 WHERE product_id = 456;

            -- -----------------------------------------------------------
            -- Different Crash Scenarios
            -- -----------------------------------------------------------

            -- SCENARIO 1: User issues ROLLBACK (before commit)
            ROLLBACK;
            -- Use UNDO information:
            -- Restore stock to old value: 100 ‚úì

            -- SCENARIO 2: Crash after commit, changes in-memory only
            COMMIT;  -- Log flushed to disk ‚úì
            -- Database pages still in-memory (not flushed) ‚ö†
            üí• CRASH

            -- Recovery:
            -- Use REDO information:
            -- Re-apply change: Set stock to 90 ‚úì

            -- SCENARIO 3: Crash before commit
            -- Transaction incomplete ‚ùå
            -- Use UNDO information:
            -- Restore stock to 100 ‚úì

            -- -----------------------------------------------------------
            -- Combined Log Entry Format
            -- -----------------------------------------------------------

            -- Typical log entry structure:
            LOG ENTRY:
            LSN (Log Sequence Number): 12345678
            Transaction ID: T1
            Type: UPDATE
            Table: inventory
            Row: product_456
            Column: stock
            Old Value: 100
            New Value: 90
            Previous LSN: 12345670 (forms linked list)
            
            -- This single entry supports:
            -- ‚úì Undo (using old value)
            -- ‚úì Redo (using new value)
            -- ‚úì Recovery (using LSN chain)

            -- -----------------------------------------------------------
            -- PostgreSQL Example
            -- -----------------------------------------------------------

            -- PostgreSQL uses UNDO/REDO (via WAL and tuple versioning)

            BEGIN;
            UPDATE products SET price = 29.99 WHERE id = 101;
            COMMIT;

            -- WAL Record contains:
            -- - Transaction ID
            -- - Table OID
            -- - Block number
            -- - Offset
            -- - Old tuple (for undo)
            -- - New tuple (for redo)

            -- Benefits:
            -- ‚úì Fast rollback (undo)
            -- ‚úì Fast recovery (redo)
            -- ‚úì MVCC support (old versions for concurrent reads)
            -- ‚úì Point-in-time recovery

            -- -----------------------------------------------------------
            -- InnoDB (MySQL) Example
            -- -----------------------------------------------------------

            -- InnoDB uses:
            -- - Redo log (for crash recovery)
            -- - Undo log (for rollback and MVCC)

            START TRANSACTION;
            UPDATE accounts SET balance = 1500 WHERE id = 123;
            COMMIT;

            -- Redo log: Records change for recovery
            -- Undo log: Records old value for rollback
            -- Both used together for atomicity ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-sync-alt"></i>
                        Recovery Process Flow
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 600" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Database Recovery Process</text>
                            
                            <!-- Step 1: Crash -->
                            <rect x="300" y="60" width="200" height="60" fill="#fee2e2" stroke="#dc2626" stroke-width="2" rx="5"/>
                            <text x="400" y="85" font-size="14" font-weight="bold" fill="#dc2626" text-anchor="middle">üí• SYSTEM CRASH</text>
                            <text x="400" y="105" font-size="12" fill="#dc2626" text-anchor="middle">Database in inconsistent state</text>
                            
                            <path d="M 400 120 L 400 160" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
                            
                            <!-- Step 2: Restart -->
                            <rect x="300" y="160" width="200" height="60" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            <text x="400" y="185" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">Database Restart</text>
                            <text x="400" y="205" font-size="12" fill="#1e40af" text-anchor="middle">Begin recovery process</text>
                            
                            <path d="M 400 220 L 400 260" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
                            
                            <!-- Step 3: Analysis -->
                            <rect x="300" y="260" width="200" height="60" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            <text x="400" y="285" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">Analysis Phase</text>
                            <text x="400" y="305" font-size="12" fill="#1e40af" text-anchor="middle">Scan logs, identify transactions</text>
                            
                            <path d="M 400 320 L 400 360" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
                            
                            <!-- Step 4: Redo -->
                            <rect x="150" y="360" width="200" height="80" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="5"/>
                            <text x="250" y="390" font-size="14" font-weight="bold" fill="#065f46" text-anchor="middle">Redo Phase</text>
                            <text x="250" y="410" font-size="11" fill="#065f46" text-anchor="middle">Re-apply committed</text>
                            <text x="250" y="425" font-size="11" fill="#065f46" text-anchor="middle">transactions</text>
                            
                            <!-- Step 5: Undo -->
                            <rect x="450" y="360" width="200" height="80" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                            <text x="550" y="390" font-size="14" font-weight="bold" fill="#92400e" text-anchor="middle">Undo Phase</text>
                            <text x="550" y="410" font-size="11" fill="#92400e" text-anchor="middle">Rollback uncommitted</text>
                            <text x="550" y="425" font-size="11" fill="#92400e" text-anchor="middle">transactions</text>
                            
                            <path d="M 350 320 L 250 360" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <path d="M 450 320 L 550 360" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
                            
                            <path d="M 250 440 L 400 480" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <path d="M 550 440 L 400 480" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
                            
                            <!-- Step 6: Complete -->
                            <rect x="300" y="480" width="200" height="60" fill="#d1fae5" stroke="#059669" stroke-width="2" rx="5"/>
                            <text x="400" y="505" font-size="14" font-weight="bold" fill="#065f46" text-anchor="middle">‚úì Recovery Complete</text>
                            <text x="400" y="525" font-size="12" fill="#065f46" text-anchor="middle">Database consistent</text>
                            
                            <!-- Arrow marker definition -->
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <polygon points="0 0, 10 3, 0 6" fill="#475569"/>
                                </marker>
                            </defs>
                            
                            <!-- Legend -->
                            <text x="50" y="570" font-size="12" font-weight="bold" fill="#475569">Key:</text>
                            <rect x="100" y="560" width="15" height="15" fill="#fee2e2" stroke="#dc2626"/>
                            <text x="120" y="572" font-size="11" fill="#475569">Error</text>
                            <rect x="180" y="560" width="15" height="15" fill="#dbeafe" stroke="#3b82f6"/>
                            <text x="200" y="572" font-size="11" fill="#475569">Process</text>
                            <rect x="270" y="560" width="15" height="15" fill="#d1fae5" stroke="#059669"/>
                            <text x="290" y="572" font-size="11" fill="#475569">Success</text>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Comparison of Atomicity Mechanisms
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6; color: black;">Mechanism</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;color: black;">Rollback</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;color: black;">Recovery</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;color: black;">Performance</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;color: black;">Used By</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>WAL (Write-Ahead Log)</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Fast</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Fast</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Excellent</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">PostgreSQL, SQLite</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Shadow Paging</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Very Fast</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Simple</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black;">Poor</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Legacy systems</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Undo Log</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Fast</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black;">Limited</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;color: black;">Good</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MySQL InnoDB</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Redo Log</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;color: black;">None</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Fast</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Excellent</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MySQL InnoDB</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Undo/Redo Combined</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Fast</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Fast</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;color: black;">Best</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Most modern DBMS</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Atomicity</span>
                        <span class="keyword-tag">Write-Ahead Logging</span>
                        <span class="keyword-tag">WAL</span>
                        <span class="keyword-tag">Shadow Paging</span>
                        <span class="keyword-tag">Undo Log</span>
                        <span class="keyword-tag">Redo Log</span>
                        <span class="keyword-tag">Transaction Log</span>
                        <span class="keyword-tag">Crash Recovery</span>
                        <span class="keyword-tag">Rollback</span>
                        <span class="keyword-tag">All-or-Nothing</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

             <!-- Question 89: COMMIT vs ROLLBACK -->
            <div class="question-content" id="q89">
                <div class="question-header">
                    <h1 class="question-title">COMMIT vs ROLLBACK</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Transaction Control</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>COMMIT and ROLLBACK are two opposite but complementary commands that determine the final fate of a database transaction.</strong> Think of them as the "Save" and "Cancel" buttons of database operations - COMMIT makes your changes permanent and visible to everyone, while ROLLBACK discards everything and returns to the starting point as if nothing ever happened.</p>
                        
                        <p style="margin-top: 1rem;">Imagine you're editing a photo - you apply filters, crop, adjust colors. COMMIT is like clicking "Save Changes" - the original is permanently replaced. ROLLBACK is like clicking "Cancel" - all your edits disappear and you're back to the original photo. That's exactly how COMMIT and ROLLBACK work with database transactions!</p>
                        
                        <p style="margin-top: 1rem;"><strong>The Fundamental Difference:</strong></p>
                        <ul>
                            <li><strong>COMMIT:</strong> "I'm happy with these changes, make them permanent and show everyone"</li>
                            <li><strong>ROLLBACK:</strong> "I made a mistake, undo everything and pretend it never happened"</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Side-by-Side Comparison
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">COMMIT</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ROLLBACK</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Primary Purpose</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Finalize and save changes</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Cancel and undo changes</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Data Changes</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Made permanent ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Completely undone ‚úó</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Visibility</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Visible to all users</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Never visible to others</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Durability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Survives crashes (logged to disk)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Nothing to survive (no changes)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Transaction Log</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">COMMIT record written</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">ROLLBACK record written</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Locks</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #dbeafe;">Released immediately</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #dbeafe;">Released immediately</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Reversible?</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">No (permanent)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">N/A (already undone)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Disk I/O</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">High (fsync required)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Low (no durability needed)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Performance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Slower (~5-10ms)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Faster (~1-2ms)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Constraint Checking</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">All constraints validated</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No validation needed</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Trigger Execution</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">After-commit triggers fire</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No triggers fire</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Replication</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Changes replicated</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Nothing replicated</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Recovery</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">REDO applied after crash</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">UNDO applied after crash</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Can Fail?</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Yes (constraint violations, disk full)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Rarely (almost always succeeds)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Use When</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Operations successful</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Error occurred or cancel</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Transaction State After</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">COMMITTED</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">ABORTED</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Practical Examples: COMMIT vs ROLLBACK
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Example 1: Successful Transaction - COMMIT
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Transfer $500 between accounts
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'ACC001';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'ACC002';

            -- Check balances are valid
            SELECT Balance FROM Accounts WHERE AccountID IN ('ACC001', 'ACC002');
            -- ACC001: $500 (was $1000) ‚úì
            -- ACC002: $2500 (was $2000) ‚úì

            -- Everything looks good!
            COMMIT;

            -- What COMMIT does:
            -- 1. Writes COMMIT record to transaction log ‚úì
            -- 2. Forces log to disk (fsync) ‚úì
            -- 3. Makes changes permanent ‚úì
            -- 4. Makes changes visible to all users ‚úì
            -- 5. Releases all locks ‚úì
            -- 6. Marks transaction as COMMITTED ‚úì

            -- Result:
            -- Money successfully transferred ‚úì
            -- Both accounts updated ‚úì
            -- Changes permanent and visible ‚úì

            -- -----------------------------------------------------------
            -- Example 2: Error Detected - ROLLBACK
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Try to transfer $500
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'ACC001';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'ACC002';

            -- Check for negative balance
            DECLARE @balance DECIMAL(10,2);
            SELECT @balance = Balance FROM Accounts WHERE AccountID = 'ACC001';

            IF @balance < 0 THEN
                -- ERROR: Insufficient funds!
                ROLLBACK;
                
                -- What ROLLBACK does:
                -- 1. Walks backward through transaction log ‚úì
                -- 2. Undoes all changes using BEFORE images ‚úì
                -- 3. Restores original balances ‚úì
                -- 4. Releases all locks ‚úì
                -- 5. Marks transaction as ABORTED ‚úì
                
                RAISE ERROR 'Insufficient funds for transfer';
            END IF;

            -- Result:
            -- Transfer cancelled ‚úì
            -- Both accounts restored to original balances ‚úì
            -- No changes visible to anyone ‚úì

            -- -----------------------------------------------------------
            -- Example 3: COMMIT Makes Changes Visible
            -- -----------------------------------------------------------

            -- Session 1:
            START TRANSACTION;
            UPDATE Products SET Price = 99.99 WHERE ProductID = 500;

            -- Session 2 (concurrent):
            SELECT Price FROM Products WHERE ProductID = 500;
            -- Returns: 89.99 (OLD price - doesn't see Session 1's change yet)

            -- Session 1:
            COMMIT;  -- NOW the change becomes visible

            -- Session 2:
            SELECT Price FROM Products WHERE ProductID = 500;
            -- Returns: 99.99 (NEW price - now visible after COMMIT) ‚úì

            -- -----------------------------------------------------------
            -- Example 4: ROLLBACK Keeps Changes Hidden
            -- -----------------------------------------------------------

            -- Session 1:
            START TRANSACTION;
            UPDATE Products SET Price = 99.99 WHERE ProductID = 500;

            -- Session 2 (concurrent):
            SELECT Price FROM Products WHERE ProductID = 500;
            -- Returns: 89.99 (doesn't see Session 1's change)

            -- Session 1:
            ROLLBACK;  -- Changes discarded

            -- Session 2:
            SELECT Price FROM Products WHERE ProductID = 500;
            -- Returns: 89.99 (STILL old price - changes never existed) ‚úì

            -- -----------------------------------------------------------
            -- Example 5: Complex Multi-Table Transaction
            -- -----------------------------------------------------------

            -- COMMIT Scenario (Success):
            START TRANSACTION;

            -- Create order
            INSERT INTO Orders (OrderID, CustomerID, TotalAmount)
            VALUES (1001, 123, 250.00);

            -- Add items
            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES 
                (1001, 500, 2, 50.00),
                (1001, 501, 3, 50.00);

            -- Update inventory
            UPDATE Products SET Stock = Stock - 2 WHERE ProductID = 500;
            UPDATE Products SET Stock = Stock - 3 WHERE ProductID = 501;

            -- Process payment
            INSERT INTO Payments (OrderID, Amount, Status)
            VALUES (1001, 250.00, 'AUTHORIZED');

            -- All successful!
            COMMIT;

            -- Result after COMMIT:
            -- ‚úì Order created
            -- ‚úì Items added
            -- ‚úì Inventory reduced
            -- ‚úì Payment recorded
            -- ‚úì All permanent and visible

            -- -----------------------------------------------------------

            -- ROLLBACK Scenario (Error):
            START TRANSACTION;

            -- Create order
            INSERT INTO Orders (OrderID, CustomerID, TotalAmount)
            VALUES (1002, 456, 300.00);

            -- Add items
            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES 
                (1002, 500, 2, 50.00),
                (1002, 501, 5, 50.00);

            -- Update inventory
            UPDATE Products SET Stock = Stock - 2 WHERE ProductID = 500;
            UPDATE Products SET Stock = Stock - 5 WHERE ProductID = 501;

            -- Check inventory didn't go negative
            IF (SELECT Stock FROM Products WHERE ProductID = 501) < 0 THEN
                -- ERROR: Insufficient stock!
                ROLLBACK;
                RAISE ERROR 'Insufficient inventory for order';
            END IF;

            -- Result after ROLLBACK:
            -- ‚úó Order removed
            -- ‚úó Items removed
            -- ‚úó Inventory restored
            -- ‚úó No payment
            -- ‚úó Nothing permanent, nothing visible

            -- -----------------------------------------------------------
            -- Example 6: Performance Comparison
            -- -----------------------------------------------------------

            -- COMMIT Performance (Slower):
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
            COMMIT;
            -- Time breakdown:
            -- - Update execution: 0.1ms
            -- - Constraint checking: 0.5ms
            -- - Log write: 1ms
            -- - FSYNC (force to disk): 8ms ‚ö†Ô∏è Slowest part!
            -- - Lock release: 0.1ms
            -- Total: ~10ms

            -- ROLLBACK Performance (Faster):
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
            ROLLBACK;
            -- Time breakdown:
            -- - Update execution: 0.1ms
            -- - Undo changes: 0.5ms
            -- - Log write: 0.5ms
            -- - NO FSYNC needed! ‚úì
            -- - Lock release: 0.1ms
            -- Total: ~1.2ms (8x faster!)

            -- Why? ROLLBACK doesn't need durability (no fsync)

            -- -----------------------------------------------------------
            -- Example 7: COMMIT Can Fail
            -- -----------------------------------------------------------

            -- COMMIT with deferred constraint:
            SET CONSTRAINTS ALL DEFERRED;

            START TRANSACTION;

            -- Create order with non-existent customer
            INSERT INTO Orders (OrderID, CustomerID, TotalAmount)
            VALUES (2001, 99999, 150.00);  -- Customer 99999 doesn't exist!

            -- No error yet (constraint deferred)

            COMMIT;  -- FAILS HERE!
            -- Error: Foreign key constraint violation
            -- Transaction automatically ROLLED BACK

            -- Result:
            -- Order not created ‚úó
            -- Transaction aborted ‚úó
            -- Database unchanged ‚úì

            -- -----------------------------------------------------------
            -- Example 8: ROLLBACK Almost Never Fails
            -- -----------------------------------------------------------

            START TRANSACTION;

            UPDATE LargeTable SET Status = 'PROCESSED';
            -- Updates 1 million rows

            -- User cancels:
            ROLLBACK;  -- Always succeeds ‚úì

            -- Walks backward through log
            -- Undoes all 1 million updates
            -- May take time, but will complete ‚úì

            -- Important: You CANNOT cancel a ROLLBACK!
            -- It must complete ‚ö†Ô∏è

            -- -----------------------------------------------------------
            -- Example 9: Partial Operations with Savepoints
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Phase 1: Create customer
            INSERT INTO Customers VALUES (789, 'John Doe');
            SAVEPOINT after_customer;

            -- Phase 2: Create orders (fails)
            INSERT INTO Orders VALUES (3001, 789, 100.00);
            INSERT INTO Orders VALUES (3002, 789, 200.00);
            INSERT INTO Orders VALUES (3003, 999, 300.00);  -- Error: Customer 999 doesn't exist

            -- Partial ROLLBACK to savepoint
            ROLLBACK TO SAVEPOINT after_customer;

            -- Phase 2 retry: Create valid orders
            INSERT INTO Orders VALUES (3001, 789, 100.00);
            INSERT INTO Orders VALUES (3002, 789, 200.00);

            -- Final COMMIT
            COMMIT;

            -- Result:
            -- ‚úì Customer created (Phase 1 kept)
            -- ‚úó Failed orders rolled back (Phase 2 first attempt)
            -- ‚úì Valid orders created (Phase 2 retry)
            -- ‚úì All committed together

            -- Note: ROLLBACK TO SAVEPOINT is partial rollback
            --       ROLLBACK (no savepoint) is complete rollback</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Visual Flow Comparison
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg" style="max-width: 100%; height: auto;">
                            <!-- COMMIT Path -->
                            <text x="250" y="30" font-size="18" fill="#10b981" text-anchor="middle" font-weight="bold">COMMIT PATH (Success)</text>
                            
                            <!-- Start -->
                            <rect x="150" y="50" width="200" height="60" fill="#3b82f6" rx="5"/>
                            <text x="250" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">START TRANSACTION</text>
                            
                            <path d="M 250 110 L 250 150" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow1)"/>
                            <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#3b82f6"/>
                            </marker>
                            
                            <!-- Operations -->
                            <rect x="150" y="150" width="200" height="60" fill="#8b5cf6" rx="5"/>
                            <text x="250" y="175" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Operations</text>
                            <text x="250" y="195" font-size="11" fill="white" text-anchor="middle">INSERT, UPDATE, DELETE</text>
                            
                            <path d="M 250 210 L 250 250" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrow2)"/>
                            <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#8b5cf6"/>
                            </marker>
                            
                            <!-- Validation -->
                            <rect x="150" y="250" width="200" height="60" fill="#f59e0b" rx="5"/>
                            <text x="250" y="275" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Validate</text>
                            <text x="250" y="295" font-size="11" fill="white" text-anchor="middle">Check Constraints</text>
                            
                            <path d="M 250 310 L 250 350" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow3)"/>
                            <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#f59e0b"/>
                            </marker>
                            
                            <!-- Write Log -->
                            <rect x="150" y="350" width="200" height="60" fill="#0891b2" rx="5"/>
                            <text x="250" y="375" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Write to Log</text>
                            <text x="250" y="395" font-size="11" fill="white" text-anchor="middle">FSYNC (slow) ‚ö†Ô∏è</text>
                            
                            <path d="M 250 410 L 250 450" stroke="#0891b2" stroke-width="3" marker-end="url(#arrow4)"/>
                            <marker id="arrow4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#0891b2"/>
                            </marker>
                            
                            <!-- COMMIT -->
                            <ellipse cx="250" cy="490" rx="80" ry="40" fill="#10b981"/>
                            <text x="250" y="500" font-size="16" fill="white" text-anchor="middle" font-weight="bold">COMMIT</text>
                            
                            <path d="M 250 530 L 250 560" stroke="#10b981" stroke-width="3" marker-end="url(#arrow5)"/>
                            <marker id="arrow5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
                            </marker>
                            
                            <!-- Result -->
                            <rect x="150" y="560" width="200" height="40" fill="#059669" rx="5"/>
                            <text x="250" y="585" font-size="13" fill="white" text-anchor="middle" font-weight="bold">‚úì Permanent & Visible</text>
                            
                            <!-- ROLLBACK Path -->
                            <text x="750" y="30" font-size="18" fill="#ef4444" text-anchor="middle" font-weight="bold">ROLLBACK PATH (Cancel)</text>
                            
                            <!-- Start -->
                            <rect x="650" y="50" width="200" height="60" fill="#3b82f6" rx="5"/>
                            <text x="750" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">START TRANSACTION</text>
                            
                            <path d="M 750 110 L 750 150" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow6)"/>
                            <marker id="arrow6" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#3b82f6"/>
                            </marker>
                            
                            <!-- Operations -->
                            <rect x="650" y="150" width="200" height="60" fill="#8b5cf6" rx="5"/>
                            <text x="750" y="175" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Operations</text>
                            <text x="750" y="195" font-size="11" fill="white" text-anchor="middle">INSERT, UPDATE, DELETE</text>
                            
                            <path d="M 750 210 L 750 250" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrow7)"/>
                            <marker id="arrow7" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#8b5cf6"/>
                            </marker>
                            
                            <!-- Error Detected -->
                            <rect x="650" y="250" width="200" height="60" fill="#dc2626" rx="5" stroke="#ef4444" stroke-width="3"/>
                            <text x="750" y="275" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Error Detected!</text>
                            <text x="750" y="295" font-size="11" fill="white" text-anchor="middle">or User Cancels</text>
                            
                            <path d="M 750 310 L 750 350" stroke="#ef4444" stroke-width="3" marker-end="url(#arrow8)"/>
                            <marker id="arrow8" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#ef4444"/>
                            </marker>
                            
                            <!-- Undo Changes -->
                            <rect x="650" y="350" width="200" height="60" fill="#f97316" rx="5"/>
                            <text x="750" y="375" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Undo Changes</text>
                            <text x="750" y="395" font-size="11" fill="white" text-anchor="middle">Walk Log Backward</text>
                            
                            <path d="M 750 410 L 750 450" stroke="#f97316" stroke-width="3" marker-end="url(#arrow9)"/>
                            <marker id="arrow9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#f97316"/>
                            </marker>
                            
                            <!-- ROLLBACK -->
                            <ellipse cx="750" cy="490" rx="80" ry="40" fill="#ef4444"/>
                            <text x="750" y="500" font-size="16" fill="white" text-anchor="middle" font-weight="bold">ROLLBACK</text>
                            
                            <path d="M 750 530 L 750 560" stroke="#ef4444" stroke-width="3" marker-end="url(#arrow10)"/>
                            <marker id="arrow10" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#ef4444"/>
                            </marker>
                            
                            <!-- Result -->
                            <rect x="650" y="560" width="200" height="40" fill="#991b1b" rx="5"/>
                            <text x="750" y="585" font-size="13" fill="white" text-anchor="middle" font-weight="bold">‚úó Discarded & Hidden</text>
                            
                            <!-- Time Comparison -->
                            <rect x="400" y="250" width="200" height="100" fill="#fef3c7" rx="5" stroke="#f59e0b" stroke-width="2"/>
                            <text x="500" y="275" font-size="14" fill="#92400e" text-anchor="middle" font-weight="bold">Performance</text>
                            <text x="500" y="295" font-size="12" fill="#92400e" text-anchor="middle">COMMIT: ~10ms</text>
                            <text x="500" y="315" font-size="12" fill="#92400e" text-anchor="middle">ROLLBACK: ~1-2ms</text>
                            <text x="500" y="335" font-size="11" fill="#92400e" text-anchor="middle" font-style="italic">ROLLBACK is faster!</text>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        When to Use COMMIT vs ROLLBACK
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Decision Guide:</strong></p>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Scenario</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Use</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Reason</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">All operations successful</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5; font-weight: bold;">COMMIT</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Make changes permanent</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Constraint violation detected</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Invalid data, undo everything</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Business rule violated</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Operation not allowed</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">User clicks "Cancel"</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">User changed mind</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Exception thrown in code</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Error occurred, maintain consistency</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Network timeout</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cannot confirm completion</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Insufficient funds/inventory</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Resources unavailable</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Deadlock detected (by DB)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Automatic by database</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Testing/Development</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Don't save test data</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Dry run / Preview</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2; font-weight: bold;">ROLLBACK</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Just checking what would happen</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Partial rollback needed</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7; font-weight: bold;">ROLLBACK TO SAVEPOINT</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Undo part, keep rest</td>
                        </tr>
                    </table>
                    
                    <div class="example-box" style="margin-top: 1.5rem;">
                        <pre><code>-- -----------------------------------------------------------
            -- Standard Error Handling Pattern
            -- -----------------------------------------------------------

            -- Pattern 1: Try-Catch Style (SQL Server, PostgreSQL)
            BEGIN TRY
                START TRANSACTION;
                
                -- Your operations here
                UPDATE Accounts SET Balance = Balance - 1000 WHERE AccountID = 'ACC001';
                UPDATE Accounts SET Balance = Balance + 1000 WHERE AccountID = 'ACC002';
                
                -- If we get here, success!
                COMMIT;  ‚úì
                
            END TRY
            BEGIN CATCH
                -- Error occurred
                IF @@TRANCOUNT > 0
                    ROLLBACK;  ‚úì
                
                -- Log error
                INSERT INTO ErrorLog VALUES (ERROR_MESSAGE(), GETDATE());
                
                -- Re-raise or handle
                THROW;
            END CATCH;

            -- -----------------------------------------------------------

            -- Pattern 2: Manual Checking (MySQL, Oracle)
            START TRANSACTION;

            -- Operation 1
            UPDATE Accounts SET Balance = Balance - 1000 WHERE AccountID = 'ACC001';

            -- Check result
            IF ROW_COUNT() = 0 THEN
                ROLLBACK;  ‚úì
                SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Account not found';
            END IF;

            -- Check business rule
            DECLARE @balance DECIMAL(10,2);
            SELECT @balance = Balance FROM Accounts WHERE AccountID = 'ACC001';

            IF @balance < 0 THEN
                ROLLBACK;  ‚úì
                SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Insufficient funds';
            END IF;

            -- Operation 2
            UPDATE Accounts SET Balance = Balance + 1000 WHERE AccountID = 'ACC002';

            -- All good!
            COMMIT;  ‚úì

            -- -----------------------------------------------------------

            -- Pattern 3: Application-Level (Python/Java/etc)
            try:
                connection.begin()
                
                # Your operations
                cursor.execute("UPDATE Accounts SET Balance = Balance - 1000 WHERE AccountID = 'ACC001'")
                cursor.execute("UPDATE Accounts SET Balance = Balance + 1000 WHERE AccountID = 'ACC002'")
                
                # Validate
                cursor.execute("SELECT Balance FROM Accounts WHERE AccountID = 'ACC001'")
                balance = cursor.fetchone()[0]
                
                if balance < 0:
                    raise Exception("Insufficient funds")
                
                # Success!
                connection.commit()  ‚úì
                
            except Exception as e:
                # Error occurred
                connection.rollback()  ‚úì
                log_error(str(e))
                raise</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you undo a COMMIT?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No! COMMIT is permanent and cannot be undone.</strong> This is by design - once committed, data is durable and other users depend on it.</p>
                                
                                <p style="margin-top: 1rem;"><strong>Why COMMIT Cannot Be Undone:</strong></p>
                                <ul>
                                    <li>Changes become visible to all users immediately</li>
                                    <li>Other transactions may read and depend on the data</li>
                                    <li>Cascading effects (triggers, foreign keys) already executed</li>
                                    <li>Replicas may have already replicated the changes</li>
                                    <li>Transaction log may have been truncated/archived</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Options After Accidental COMMIT:</strong></p>
                                <ol>
                                    <li><strong>Manual Reversal:</strong> Write opposite operations
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>-- Accidentally committed:
            UPDATE Accounts SET Balance = 0 WHERE CustomerID = 123;
            COMMIT;  -- Oops! ‚ùå

            -- Manual fix:
            UPDATE Accounts SET Balance = <original_value> WHERE CustomerID = 123;
            COMMIT;</code></pre>
                                        </div>
                                    </li>
                                    <li><strong>Point-in-Time Recovery:</strong> Restore database to before COMMIT (requires downtime)</li>
                                    <li><strong>Compensating Transaction:</strong> New transaction that reverses the effect</li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Always test in a transaction before committing critical changes. Use <code>SELECT</code> to verify results before <code>COMMIT</code>.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if you COMMIT and ROLLBACK in the same transaction?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The first one wins! You cannot ROLLBACK after COMMIT, and you cannot COMMIT after ROLLBACK.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Scenario 1: COMMIT then ROLLBACK
            START TRANSACTION;
            UPDATE Table1 SET Column1 = 'Value';
            COMMIT;  -- Transaction ends here ‚úì
            ROLLBACK;  -- ERROR! No active transaction ‚ùå

            -- Scenario 2: ROLLBACK then COMMIT
            START TRANSACTION;
            UPDATE Table1 SET Column1 = 'Value';
            ROLLBACK;  -- Transaction ends here ‚úì
            COMMIT;  -- ERROR! No active transaction ‚ùå

            -- Both COMMIT and ROLLBACK:
            -- 1. End the transaction
            -- 2. Release all locks
            -- 3. Make transaction inactive

            -- After either command, the transaction is FINISHED
            -- Cannot issue more commands in same transaction</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Correct Pattern:</strong> Use IF/ELSE or exception handling to ensure only one executes:</p>
                                
                                <div class="example-box" style="margin-top: 0.5rem;">
                                    <pre><code>START TRANSACTION;
            UPDATE Table1 SET Column1 = 'Value';

            IF (some_condition) THEN
                COMMIT;  -- OR this
            ELSE
                ROLLBACK;  -- OR this, never both!
            END IF;</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why is ROLLBACK faster than COMMIT?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>ROLLBACK is faster because it doesn't need to guarantee durability!</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>COMMIT Must Do (Expensive):</strong></p>
                                <ul>
                                    <li>‚úì Validate all constraints</li>
                                    <li>‚úì Execute triggers</li>
                                    <li>‚úì Write COMMIT record to log</li>
                                    <li>‚úì <strong>FSYNC log to disk</strong> (8-10ms) ‚ö†Ô∏è SLOWEST</li>
                                    <li>‚úì Update transaction status</li>
                                    <li>‚úì Notify replicas</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>ROLLBACK Can Skip (Fast):</strong></p>
                                <ul>
                                    <li>‚úó No constraint validation needed</li>
                                    <li>‚úó No triggers fire</li>
                                    <li>‚úó Write ROLLBACK record (minimal)</li>
                                    <li>‚úó <strong>NO FSYNC needed!</strong> ‚úì (No durability required)</li>
                                    <li>‚úì Update transaction status</li>
                                    <li>‚úó Nothing to replicate</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Key Difference:</strong> COMMIT needs fsync (force to disk) because changes must survive crashes. ROLLBACK discards everything, so no disk sync needed!</p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Performance test:
            -- COMMIT: ~10ms (dominated by fsync)
            -- ROLLBACK: ~1-2ms (no fsync)

            -- ROLLBACK is ~5-10x faster! ‚úì</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Exception:</strong> Very large transactions (millions of operations) may make ROLLBACK slow because it must walk backward through the entire log to undo changes.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Do locks stay held during ROLLBACK?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No! Locks are released immediately when ROLLBACK completes, just like COMMIT.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Lock Release Timeline:</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Session 1:
            START TRANSACTION;
            UPDATE Accounts SET Balance = 500 WHERE AccountID = 'ACC001';
            -- ACC001 is LOCKED ‚úì

            -- Session 2 (concurrent):
            UPDATE Accounts SET Balance = 600 WHERE AccountID = 'ACC001';
            -- BLOCKED, waiting for Session 1's lock... ‚è≥

            -- Session 1 decides to rollback:
            ROLLBACK;
            -- 1. Undo changes ‚úì
            -- 2. Release locks ‚úì
            -- 3. Transaction ends ‚úì

            -- Session 2:
            -- Lock IMMEDIATELY released ‚úì
            -- Can now acquire lock and proceed ‚úì
            -- Sees original balance (1000), not 500</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Important Timing:</strong></p>
                                <ul>
                                    <li>COMMIT: Releases locks <strong>after</strong> durability guaranteed (after fsync)</li>
                                    <li>ROLLBACK: Releases locks <strong>after</strong> undo complete</li>
                                    <li>Both release locks at transaction completion ‚úì</li>
                                    <li>No locks remain after transaction ends ‚úì</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>For Long ROLLBACKs:</strong> If rolling back a huge transaction with millions of operations, locks are held until the ROLLBACK completes. Other users must wait. You cannot cancel a ROLLBACK!</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you have a transaction with neither COMMIT nor ROLLBACK?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Technically possible but VERY BAD! The database will eventually clean it up, but it causes major problems in the meantime.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>What Happens (Dangerous):</strong></p>
                                <ul>
                                    <li>Transaction stays ACTIVE indefinitely</li>
                                    <li>Locks held forever (blocks other users) ‚ö†Ô∏è</li>
                                    <li>Transaction log cannot truncate (grows huge) ‚ö†Ô∏è</li>
                                    <li>Memory consumed by transaction state ‚ö†Ô∏è</li>
                                    <li>Database performance degrades severely ‚ö†Ô∏è</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Database Protection Mechanisms:</strong></p>
                                <ol>
                                    <li><strong>Connection Timeout:</strong> After timeout, auto-ROLLBACK</li>
                                    <li><strong>Idle Transaction Killer:</strong> Some databases kill idle transactions</li>
                                    <li><strong>Manual Intervention:</strong> DBA can kill session</li>
                                </ol>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Bad code (forgetting COMMIT/ROLLBACK):
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100;
            -- Oops, program exits here without COMMIT or ROLLBACK!
            -- Transaction stays open! ‚ùå

            -- Correct pattern (always cleanup):
            try:
                connection.begin()
                execute_updates()
                connection.commit()  ‚úì
            except:
                connection.rollback()  ‚úì
            finally:
                connection.close()  # Triggers auto-rollback if still open</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Always explicitly COMMIT or ROLLBACK in try-catch-finally blocks. Never leave transactions hanging!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">COMMIT</span>
                        <span class="keyword-tag">ROLLBACK</span>
                        <span class="keyword-tag">Transaction finalization</span>
                        <span class="keyword-tag">Permanent changes</span>
                        <span class="keyword-tag">Undo changes</span>
                        <span class="keyword-tag">Durability</span>
                        <span class="keyword-tag">FSYNC</span>
                        <span class="keyword-tag">Lock release</span>
                        <span class="keyword-tag">Visibility</span>
                        <span class="keyword-tag">Constraint validation</span>
                        <span class="keyword-tag">Atomicity</span>
                        <span class="keyword-tag">Transaction log</span>
                        <span class="keyword-tag">REDO</span>
                        <span class="keyword-tag">UNDO</span>
                        <span class="keyword-tag">Explicit transaction</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 90: Commit & Rollback Mechanism -->
            <div class="question-content" id="q90">
                <div class="question-header">
                    <h1 class="question-title">Commit & Rollback Mechanism</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Transaction Control</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 11 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>COMMIT and ROLLBACK are the two fundamental commands that control the fate of database transactions.</strong> Think of them as the "save" and "undo" buttons for your database operations. COMMIT makes all changes permanent and visible to other users, while ROLLBACK discards all changes and returns the database to its state before the transaction began.</p>
                        
                        <p style="margin-top: 1rem;">Imagine editing a document - you can make changes, review them, and then either click "Save" to keep them or "Cancel" to discard everything. That's exactly what COMMIT and ROLLBACK do for database transactions, except they're operating on potentially millions of rows across multiple tables with multiple users accessing the same data simultaneously!</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Concepts:</strong></p>
                        <ul>
                            <li><strong>COMMIT:</strong> Finalizes transaction, makes changes permanent and visible</li>
                            <li><strong>ROLLBACK:</strong> Cancels transaction, undoes all changes since BEGIN</li>
                            <li><strong>Implicit Commit:</strong> Automatic commit in certain situations (DDL statements)</li>
                            <li><strong>Explicit Commit:</strong> Manual commit issued by user/application</li>
                            <li><strong>Autocommit:</strong> Each statement commits automatically (default in many systems)</li>
                            <li><strong>Two-Phase Commit:</strong> Distributed transaction coordination</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        COMMIT Mechanism
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>COMMIT is the command that finalizes a transaction and makes all changes permanent.</strong> Once committed, changes survive system crashes and become visible to other users.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Basic COMMIT Syntax
            -- -----------------------------------------------------------

            -- Explicit transaction with COMMIT
            START TRANSACTION;  -- or BEGIN TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'ACC001';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'ACC002';

            COMMIT;  -- Makes both updates permanent ‚úì

            -- -----------------------------------------------------------
            -- What Happens During COMMIT (Internal Process)
            -- -----------------------------------------------------------

            -- User executes:
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
            COMMIT;

            -- Behind the scenes:

            -- Phase 1: PRE-COMMIT (Validation)
            -- Check all constraints
            IF (SELECT Balance FROM Accounts WHERE AccountID = 'ACC001') < 0 THEN
                -- Constraint violation detected
                ROLLBACK;  -- Automatic rollback
                RAISE ERROR 'Balance cannot be negative';
            END IF;

            -- Check all foreign keys
            IF EXISTS (SELECT 1 FROM Orders WHERE CustomerID NOT IN (SELECT CustomerID FROM Customers)) THEN
                ROLLBACK;
                RAISE ERROR 'Foreign key constraint violation';
            END IF;

            -- All validations passed ‚úì

            -- Phase 2: LOGGING
            -- Write transaction log records to disk
            WRITE_LOG({
                LSN: 5001,
                TXN_ID: T1,
                OP: UPDATE,
                Table: Accounts,
                Before: 1000,
                After: 900
            });

            WRITE_LOG({
                LSN: 5002,
                TXN_ID: T1,
                OP: COMMIT
            });

            -- Force log to disk (FSYNC)
            FSYNC(transaction_log);  -- Critical for durability! ‚úì

            -- Phase 3: COMMIT POINT
            -- Transaction is now durable
            -- Even if system crashes here, changes will be recovered ‚úì

            -- Phase 4: RELEASE LOCKS
            -- Free all locks held by this transaction
            RELEASE_LOCKS(T1);
            -- Other transactions can now access the data ‚úì

            -- Phase 5: MARK TRANSACTION COMPLETE
            -- Update transaction status
            TRANSACTION_TABLE[T1].Status = 'COMMITTED';

            -- Phase 6: RETURN SUCCESS
            RETURN 'Transaction committed successfully';

            -- Phase 7: BACKGROUND CLEANUP (Asynchronous)
            -- Eventually write dirty pages to data files
            -- This happens in the background, not blocking COMMIT

            -- -----------------------------------------------------------
            -- COMMIT with Multiple Operations
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Operation 1: Create order
            INSERT INTO Orders (OrderID, CustomerID, TotalAmount, Status)
            VALUES (1001, 123, 250.00, 'PENDING');

            -- Operation 2: Add order items
            INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
            VALUES 
                (1001, 500, 2, 50.00),
                (1001, 501, 3, 50.00);

            -- Operation 3: Update inventory
            UPDATE Products SET Stock = Stock - 2 WHERE ProductID = 500;
            UPDATE Products SET Stock = Stock - 3 WHERE ProductID = 501;

            -- Operation 4: Create payment record
            INSERT INTO Payments (OrderID, Amount, Status)
            VALUES (1001, 250.00, 'AUTHORIZED');

            -- Operation 5: Update customer order count
            UPDATE Customers SET TotalOrders = TotalOrders + 1 WHERE CustomerID = 123;

            -- All or nothing - COMMIT applies to all 5 operations
            COMMIT;

            -- Result:
            -- ‚úì Order created
            -- ‚úì Order items added
            -- ‚úì Inventory updated
            -- ‚úì Payment recorded
            -- ‚úì Customer stats updated
            -- All changes permanent and visible to all users ‚úì

            -- -----------------------------------------------------------
            -- COMMIT and Visibility
            -- -----------------------------------------------------------

            -- Session 1:
            START TRANSACTION;
            UPDATE Products SET Price = 99.99 WHERE ProductID = 500;
            -- Other sessions still see old price (100.00)

            COMMIT;
            -- NOW other sessions see new price (99.99) ‚úì

            -- Session 2 (running concurrently):
            -- Before Session 1 COMMIT:
            SELECT Price FROM Products WHERE ProductID = 500;
            -- Returns: 100.00 (old value, isolation at work)

            -- After Session 1 COMMIT:
            SELECT Price FROM Products WHERE ProductID = 500;
            -- Returns: 99.99 (new value, now visible) ‚úì

            -- -----------------------------------------------------------
            -- Autocommit Mode
            -- -----------------------------------------------------------

            -- Default in MySQL, PostgreSQL, and many others
            -- Each statement auto-commits immediately

            -- Autocommit ON (default):
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
            -- Automatically committed! ‚úì

            -- To disable autocommit:
            SET AUTOCOMMIT = 0;  -- MySQL
            -- or
            BEGIN;  -- PostgreSQL

            -- Now manual COMMIT required:
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
            -- Not committed yet, must manually COMMIT

            COMMIT;  -- Now committed ‚úì

            -- -----------------------------------------------------------
            -- Explicit vs Implicit COMMIT
            -- -----------------------------------------------------------

            -- EXPLICIT COMMIT: User-issued
            START TRANSACTION;
            UPDATE Table1 SET Column1 = 'Value';
            COMMIT;  -- Explicit COMMIT ‚úì

            -- IMPLICIT COMMIT: Automatic in certain situations
            START TRANSACTION;
            UPDATE Table1 SET Column1 = 'Value';

            -- DDL statements cause implicit COMMIT in MySQL:
            CREATE TABLE NewTable (ID INT);  -- Implicitly commits previous UPDATE! ‚ö†Ô∏è

            -- The UPDATE is now committed, even though we didn't say COMMIT
            -- NewTable is created in a new transaction

            -- Other operations causing implicit COMMIT (MySQL):
            -- - CREATE, ALTER, DROP TABLE
            -- - CREATE, DROP DATABASE
            -- - TRUNCATE TABLE
            -- - LOCK TABLES, UNLOCK TABLES
            -- - SET AUTOCOMMIT = 1

            -- Be careful! This can be surprising ‚ö†Ô∏è

            -- -----------------------------------------------------------
            -- COMMIT with Triggers
            -- -----------------------------------------------------------

            -- Trigger that executes on COMMIT
            CREATE TRIGGER after_order_commit
            AFTER INSERT ON Orders
            FOR EACH ROW
            BEGIN
                -- This executes as part of the transaction
                INSERT INTO OrderAuditLog 
                VALUES (NEW.OrderID, NOW(), USER());
            END;

            -- User transaction:
            START TRANSACTION;

            INSERT INTO Orders VALUES (2001, 456, 300.00);
            -- Trigger queued but not executed yet

            COMMIT;
            -- COMMIT executes trigger
            -- Both order insert and audit log insert committed together ‚úì

            -- If COMMIT fails, trigger also rolls back ‚úì

            -- -----------------------------------------------------------
            -- Deferred Constraint Checking
            -- -----------------------------------------------------------

            -- Some databases support deferred constraints
            -- Constraints checked at COMMIT, not during statement

            -- Set constraint to deferred:
            SET CONSTRAINTS ALL DEFERRED;

            START TRANSACTION;

            -- Temporarily violate foreign key
            INSERT INTO Orders (OrderID, CustomerID) 
            VALUES (3001, 999);  -- Customer 999 doesn't exist yet!
            -- No error yet because constraint is deferred

            -- Fix the violation before COMMIT
            INSERT INTO Customers (CustomerID, Name)
            VALUES (999, 'New Customer');

            COMMIT;  -- Constraints checked now
            -- Both inserts succeed because constraint satisfied at COMMIT time ‚úì

            -- -----------------------------------------------------------
            -- COMMIT Performance Considerations
            -- -----------------------------------------------------------

            -- COMMIT involves disk I/O (log flush)
            -- This is the slowest part of transaction processing

            -- Slow: Many small transactions
            FOR i IN 1..1000 LOOP
                START TRANSACTION;
                INSERT INTO Table1 VALUES (i);
                COMMIT;  -- 1000 log flushes! Slow! ‚ùå
            END LOOP;
            -- Time: ~10 seconds (1000 * 10ms)

            -- Fast: Batch into larger transaction
            START TRANSACTION;
            FOR i IN 1..1000 LOOP
                INSERT INTO Table1 VALUES (i);
            END LOOP;
            COMMIT;  -- 1 log flush! Fast! ‚úì
            -- Time: ~0.1 seconds

            -- Performance difference: 100x faster! ‚úì

            -- -----------------------------------------------------------
            -- Group COMMIT Optimization
            -- -----------------------------------------------------------

            -- Database batches multiple COMMITs together

            -- Timeline:
            -- T0ms:   Transaction 1 requests COMMIT
            -- T1ms:   Transaction 2 requests COMMIT
            -- T2ms:   Transaction 3 requests COMMIT
            -- T5ms:   Single FSYNC for all 3 transactions ‚úì

            -- Result: 3 transactions committed with 1 disk write
            -- Throughput: 3x improvement ‚úì

            -- Happens automatically in modern databases
            -- No configuration needed ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-undo"></i>
                        ROLLBACK Mechanism
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>ROLLBACK cancels a transaction and undoes all changes made since the transaction began.</strong> It's like pressing "Undo All" - the database returns to exactly the state it was in before the transaction started.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Basic ROLLBACK Syntax
            -- -----------------------------------------------------------

            -- Transaction that gets rolled back
            START TRANSACTION;

            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'ACC001';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'ACC002';

            -- Oops, made a mistake!
            ROLLBACK;  -- Undoes both updates ‚úì

            -- Result: Both accounts have original balances ‚úì

            -- -----------------------------------------------------------
            -- What Happens During ROLLBACK (Internal Process)
            -- -----------------------------------------------------------

            -- User executes:
            START TRANSACTION;

            UPDATE Accounts SET Balance = 900 WHERE AccountID = 'ACC001';
            -- Log: LSN 6001 | Before: 1000 | After: 900

            INSERT INTO Orders VALUES (1001, 123, 250.00);
            -- Log: LSN 6002 | Before: NULL | After: {1001, 123, 250.00}

            DELETE FROM Products WHERE ProductID = 500;
            -- Log: LSN 6003 | Before: {500, 'Widget', 10} | After: NULL

            -- User decides to cancel:
            ROLLBACK;

            -- Behind the scenes:

            -- Phase 1: REVERSE OPERATIONS (Walk log backwards)

            -- UNDO LSN 6003 (restore deleted product)
            INSERT INTO Products VALUES (500, 'Widget', 10);
            -- Product restored ‚úì

            -- UNDO LSN 6002 (remove inserted order)
            DELETE FROM Orders WHERE OrderID = 1001;
            -- Order removed ‚úì

            -- UNDO LSN 6001 (restore original balance)
            UPDATE Accounts SET Balance = 1000 WHERE AccountID = 'ACC001';
            -- Balance restored ‚úì

            -- Phase 2: WRITE ROLLBACK LOG
            -- Record that transaction was rolled back
            WRITE_LOG({
                LSN: 6004,
                TXN_ID: T1,
                OP: ROLLBACK
            });

            -- Phase 3: RELEASE LOCKS
            -- Free all locks held by transaction
            RELEASE_LOCKS(T1);

            -- Phase 4: CLEAN UP
            -- Mark transaction as aborted
            TRANSACTION_TABLE[T1].Status = 'ABORTED';

            -- Phase 5: RETURN
            RETURN 'Transaction rolled back';

            -- Final state: Everything back to original ‚úì

            -- -----------------------------------------------------------
            -- ROLLBACK with Error Handling
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Step 1: Deduct from source account
            UPDATE Accounts SET Balance = Balance - 1000 WHERE AccountID = 'ACC001';

            -- Step 2: Check if balance went negative
            DECLARE @balance DECIMAL(10,2);
            SELECT @balance = Balance FROM Accounts WHERE AccountID = 'ACC001';

            IF @balance < 0 THEN
                -- Insufficient funds!
                ROLLBACK;
                RAISE ERROR 'Insufficient funds for transfer';
            END IF;

            -- Step 3: Credit destination account
            UPDATE Accounts SET Balance = Balance + 1000 WHERE AccountID = 'ACC002';

            -- Step 4: All good, commit
            COMMIT;

            -- -----------------------------------------------------------
            -- Automatic ROLLBACK on Error
            -- -----------------------------------------------------------

            START TRANSACTION;

            INSERT INTO Orders (OrderID, CustomerID, TotalAmount)
            VALUES (2001, 123, 300.00);

            -- This violates foreign key constraint:
            INSERT INTO OrderItems (OrderID, ProductID, Quantity)
            VALUES (2001, 99999, 2);  -- Product 99999 doesn't exist!

            -- Error: Foreign key constraint violation
            -- Database automatically issues ROLLBACK ‚úì

            -- Result: Order insertion also rolled back
            -- Table is in original state ‚úì

            -- -----------------------------------------------------------
            -- Partial ROLLBACK with Savepoints
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- Phase 1
            INSERT INTO Orders VALUES (3001, 456, 200.00);
            SAVEPOINT after_order;

            -- Phase 2
            INSERT INTO OrderItems VALUES (3001, 500, 2, 50.00);
            SAVEPOINT after_items;

            -- Phase 3 - Error discovered
            INSERT INTO OrderItems VALUES (3001, 999, 1, 100.00);  -- Invalid product!

            -- Roll back only to after_order savepoint
            ROLLBACK TO SAVEPOINT after_order;

            -- State:
            -- ‚úì Order still exists (Phase 1 kept)
            -- ‚úó OrderItems removed (Phase 2 & 3 rolled back)

            -- Fix and continue
            INSERT INTO OrderItems VALUES (3001, 600, 1, 100.00);  -- Valid product

            COMMIT;  -- Order and corrected items committed ‚úì

            -- -----------------------------------------------------------
            -- ROLLBACK and Locks
            -- -----------------------------------------------------------

            -- Session 1:
            START TRANSACTION;

            -- Acquire exclusive lock
            UPDATE Accounts SET Balance = 500 WHERE AccountID = 'ACC001';
            -- ACC001 is LOCKED ‚úì

            -- Session 2 (concurrent):
            UPDATE Accounts SET Balance = 600 WHERE AccountID = 'ACC001';
            -- WAITS for Session 1's lock... ‚è≥

            -- Session 1:
            ROLLBACK;
            -- Releases lock immediately ‚úì

            -- Session 2:
            -- Lock released, can now proceed ‚úì
            -- Sees original balance (1000), not 500

            -- -----------------------------------------------------------
            -- Long-Running Transaction ROLLBACK
            -- -----------------------------------------------------------

            -- Transaction with millions of operations
            START TRANSACTION;

            FOR i IN 1..1000000 LOOP
                INSERT INTO ProcessedData VALUES (i, RANDOM(), NOW());
            END LOOP;

            -- After 30 minutes, user cancels:
            ROLLBACK;

            -- ROLLBACK process:
            -- Walks backward through 1 million log entries
            -- Deletes all 1 million rows

            -- Progress indicator (some databases):
            -- Rolling back: 10% complete (100,000 / 1,000,000)
            -- Rolling back: 25% complete (250,000 / 1,000,000)
            -- Rolling back: 50% complete (500,000 / 1,000,000)
            -- Rolling back: 75% complete (750,000 / 1,000,000)
            -- Rolling back: 100% complete ‚úì

            -- Note: ROLLBACK can take as long as the transaction itself!
            -- You cannot cancel a ROLLBACK ‚ö†Ô∏è

            -- -----------------------------------------------------------
            -- ROLLBACK with Cascading Effects
            -- -----------------------------------------------------------

            -- Foreign key with ON DELETE CASCADE

            CREATE TABLE Customers (
                CustomerID INT PRIMARY KEY,
                Name VARCHAR(100)
            );

            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY,
                CustomerID INT,
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
                    ON DELETE CASCADE
            );

            START TRANSACTION;

            -- Delete customer
            DELETE FROM Customers WHERE CustomerID = 123;
            -- Cascade deletes all orders for customer 123

            -- Oops, wrong customer!
            ROLLBACK;

            -- Result:
            -- ‚úì Customer 123 restored
            -- ‚úì All orders for customer 123 also restored
            -- Cascade ROLLBACK works! ‚úì

            -- -----------------------------------------------------------
            -- ROLLBACK and Triggers
            -- -----------------------------------------------------------

            CREATE TRIGGER before_delete_customer
            BEFORE DELETE ON Customers
            FOR EACH ROW
            BEGIN
                -- Archive customer to history table
                INSERT INTO CustomerHistory 
                SELECT * FROM Customers WHERE CustomerID = OLD.CustomerID;
            END;

            START TRANSACTION;

            DELETE FROM Customers WHERE CustomerID = 456;
            -- Trigger executes, archives to CustomerHistory

            ROLLBACK;

            -- Result:
            -- ‚úì Customer 456 NOT deleted (rolled back)
            -- ‚úì CustomerHistory insert ALSO rolled back
            -- Triggers are part of the transaction! ‚úì

            -- -----------------------------------------------------------
            -- Cannot ROLLBACK DDL in Most Databases
            -- -----------------------------------------------------------

            START TRANSACTION;

            -- DML: Can rollback
            INSERT INTO Table1 VALUES (1);

            -- DDL: Cannot rollback (MySQL, Oracle)
            CREATE TABLE NewTable (ID INT);  -- Implicitly commits!

            -- This ROLLBACK only affects future statements:
            ROLLBACK;

            -- Result:
            -- ‚úó INSERT rolled back
            -- ‚úì NewTable still exists (DDL cannot be rolled back) ‚ö†Ô∏è

            -- Exception: PostgreSQL supports DDL rollback!
            -- PostgreSQL:
            BEGIN;
            CREATE TABLE TestTable (ID INT);
            ROLLBACK;
            -- TestTable does NOT exist ‚úì

            -- -----------------------------------------------------------
            -- Distributed ROLLBACK
            -- -----------------------------------------------------------

            -- Transaction across multiple databases

            -- Database 1:
            START TRANSACTION;
            UPDATE DB1.Accounts SET Balance = Balance - 500 WHERE AccountID = 'ACC001';

            -- Database 2:
            START TRANSACTION;
            UPDATE DB2.Accounts SET Balance = Balance + 500 WHERE AccountID = 'ACC002';

            -- If either fails, both must ROLLBACK:
            IF error_on_DB2 THEN
                ROLLBACK ON DB1;  -- Coordinator issues rollback to DB1
                ROLLBACK ON DB2;  -- Coordinator issues rollback to DB2
            END IF;

            -- Result: Both databases back to original state ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exchange-alt"></i>
                        COMMIT vs ROLLBACK Comparison
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg" style="max-width: 100%; height: auto;">
                            <!-- Transaction Start -->
                            <rect x="50" y="50" width="180" height="80" fill="#3b82f6" rx="5"/>
                            <text x="140" y="85" font-size="14" fill="white" text-anchor="middle" font-weight="bold">START</text>
                            <text x="140" y="105" font-size="12" fill="white" text-anchor="middle">TRANSACTION</text>
                            
                            <!-- Operations -->
                            <rect x="300" y="50" width="180" height="80" fill="#8b5cf6" rx="5"/>
                            <text x="390" y="75" font-size="13" fill="white" text-anchor="middle" font-weight="bold">Operations</text>
                            <text x="390" y="95" font-size="11" fill="white" text-anchor="middle">INSERT, UPDATE,</text>
                            <text x="390" y="110" font-size="11" fill="white" text-anchor="middle">DELETE</text>
                            
                            <path d="M 230 90 L 300 90" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrow1)"/>
                            <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#8b5cf6"/>
                            </marker>
                            
                            <!-- Decision Point -->
                            <path d="M 480 90 L 550 90" stroke="#64748b" stroke-width="3"/>
                            <polygon points="550,30 650,90 550,150" fill="#f59e0b" stroke="#f59e0b" stroke-width="2"/>
                            <text x="600" y="95" font-size="14" fill="white" text-anchor="middle" font-weight="bold">?</text>
                            
                            <!-- COMMIT Path -->
                            <path d="M 650 60 L 720 20" stroke="#10b981" stroke-width="3" marker-end="url(#arrowCommit)"/>
                            <marker id="arrowCommit" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
                            </marker>
                            <text x="685" y="30" font-size="13" fill="#10b981" font-weight="bold">SUCCESS</text>
                            
                            <ellipse cx="800" cy="20" rx="80" ry="20" fill="#10b981"/>
                            <text x="800" y="27" font-size="14" fill="white" text-anchor="middle" font-weight="bold">COMMIT</text>
                            
                            <!-- COMMIT Results -->
                            <rect x="720" y="60" width="160" height="120" fill="#d1fae5" rx="5" stroke="#10b981" stroke-width="2"/>
                            <text x="800" y="85" font-size="12" fill="#065f46" text-anchor="middle" font-weight="bold">‚úì Changes Permanent</text>
                            <text x="800" y="105" font-size="11" fill="#065f46" text-anchor="middle">‚úì Visible to others</text>
                            <text x="800" y="125" font-size="11" fill="#065f46" text-anchor="middle">‚úì Locks released</text>
                            <text x="800" y="145" font-size="11" fill="#065f46" text-anchor="middle">‚úì Cannot undo</text>
                            <text x="800" y="165" font-size="11" fill="#065f46" text-anchor="middle">‚úì Durable</text>
                            
                            <!-- ROLLBACK Path -->
                            <path d="M 650 120 L 720 160" stroke="#ef4444" stroke-width="3" marker-end="url(#arrowRollback)"/>
                            <marker id="arrowRollback" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#ef4444"/>
                            </marker>
                            <text x="685" y="150" font-size="13" fill="#ef4444" font-weight="bold">ERROR/CANCEL</text>
                            
                            <ellipse cx="800" cy="160" rx="80" ry="20" fill="#ef4444"/>
                            <text x="800" y="167" font-size="14" fill="white" text-anchor="middle" font-weight="bold">ROLLBACK</text>
                            
                            <!-- ROLLBACK Results -->
                            <rect x="720" y="200" width="160" height="140" fill="#fee2e2" rx="5" stroke="#ef4444" stroke-width="2"/>
                            <text x="800" y="225" font-size="12" fill="#991b1b" text-anchor="middle" font-weight="bold">‚úó Changes Discarded</text>
                            <text x="800" y="245" font-size="11" fill="#991b1b" text-anchor="middle">‚úó Not visible</text>
                            <text x="800" y="265" font-size="11" fill="#991b1b" text-anchor="middle">‚úì Locks released</text>
                            <text x="800" y="285" font-size="11" fill="#991b1b" text-anchor="middle">‚úì Original state</text>
                            <text x="800" y="305" font-size="11" fill="#991b1b" text-anchor="middle">‚úó Work lost</text>
                            <text x="800" y="325" font-size="11" fill="#991b1b" text-anchor="middle">‚úì Can retry</text>
                            
                            <!-- Timeline -->
                            <line x1="50" y1="420" x2="850" y2="420" stroke="#64748b" stroke-width="2"/>
                            <text x="450" y="410" font-size="13" fill="#64748b" text-anchor="middle" font-weight="bold">TIME ‚Üí</text>
                            
                            <circle cx="140" cy="420" r="5" fill="#3b82f6"/>
                            <text x="140" y="445" font-size="10" fill="#3b82f6" text-anchor="middle">BEGIN</text>
                            
                            <circle cx="390" cy="420" r="5" fill="#8b5cf6"/>
                            <text x="390" y="445" font-size="10" fill="#8b5cf6" text-anchor="middle">Operations</text>
                            
                            <circle cx="800" cy="420" r="5" fill="#10b981"/>
                            <text x="800" y="445" font-size="10" fill="#10b981" text-anchor="middle">COMMIT</text>
                            
                            <text x="450" y="475" font-size="12" fill="#64748b" text-anchor="middle" font-style="italic">or ROLLBACK</text>
                        </svg>
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">COMMIT</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ROLLBACK</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Purpose</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Finalize and save changes</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cancel and discard changes</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Changes</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Made permanent</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">All undone</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Visibility</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Visible to all users</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Never visible to others</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Locks</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Released</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Released</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Durability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Survives crashes (logged to disk)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Nothing to survive (no changes)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Reversible?</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No (permanent)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">N/A (already undone)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Disk I/O</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Yes (log flush required)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Minimal (no durability needed)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Performance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Slower (fsync wait)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Faster (no disk sync)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Use When</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Operations successful</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Error occurred or user cancels</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-network-wired"></i>
                        Two-Phase Commit (Distributed Transactions)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Two-Phase Commit (2PC) is a protocol that coordinates COMMIT across multiple databases to ensure atomicity in distributed transactions.</strong> All databases must agree to commit, or all must rollback.</p>
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Two-Phase Commit Protocol
            -- -----------------------------------------------------------

            -- Scenario: Transfer money between accounts in different databases
            -- Database A: Source account
            -- Database B: Destination account
            -- Coordinator: Transaction manager

            -- Phase 1: PREPARE (Voting Phase)
            -- =========================================

            -- Coordinator to Database A:
            PREPARE TRANSACTION 'TXN-5001';
            -- Database A: "Can I commit these changes?"
            --   - Validates all constraints
            --   - Acquires all locks
            --   - Writes changes to log
            --   - Responds: YES (READY TO COMMIT) or NO (ABORT)

            -- Coordinator to Database B:
            PREPARE TRANSACTION 'TXN-5001';
            -- Database B: "Can I commit these changes?"
            --   - Validates all constraints
            --   - Acquires all locks
            --   - Writes changes to log
            --   - Responds: YES (READY TO COMMIT) or NO (ABORT)

            -- Voting Results:
            -- Database A: YES ‚úì
            -- Database B: YES ‚úì

            -- Phase 2: COMMIT (Decision Phase)
            -- =========================================

            -- If ALL vote YES:
            -- Coordinator to all databases:
            COMMIT PREPARED 'TXN-5001';

            -- Database A: COMMIT changes ‚úì
            -- Database B: COMMIT changes ‚úì

            -- Result: Atomic commit across both databases! ‚úì

            -- -----------------------------------------------------------
            -- Two-Phase Commit: Failure Scenarios
            -- -----------------------------------------------------------

            -- Scenario 1: One Database Votes NO

            -- Phase 1:
            -- Database A: YES ‚úì
            -- Database B: NO ‚ùå (constraint violation)

            -- Phase 2:
            -- Coordinator to all databases:
            ROLLBACK PREPARED 'TXN-5001';

            -- Database A: ROLLBACK ‚úì
            -- Database B: ROLLBACK ‚úì

            -- Result: Both rolled back, atomicity preserved ‚úì

            -- -----------------------------------------------------------

            -- Scenario 2: Coordinator Crashes After Phase 1

            -- Phase 1 Complete:
            -- Database A: YES (waiting for decision) ‚è≥
            -- Database B: YES (waiting for decision) ‚è≥
            -- Coordinator: CRASHED! üí•

            -- Problem: Databases in DOUBT state
            -- - Cannot commit (no confirmation from coordinator)
            -- - Cannot rollback (might have committed elsewhere)
            -- - Locks held indefinitely! ‚ö†Ô∏è

            -- Solution: Timeout and resolution protocol
            -- After timeout (e.g., 30 seconds):
            -- 1. Contact other participants
            -- 2. Check coordinator log
            -- 3. If coordinator recovers, follow its decision
            -- 4. If not, administrator decides: COMMIT or ROLLBACK

            -- -----------------------------------------------------------
            -- Two-Phase Commit Example: Bank Transfer
            -- -----------------------------------------------------------

            -- Coordinator starts distributed transaction:

            -- Step 1: BEGIN on all databases
            BEGIN TRANSACTION 'DIST-TXN-001' ON Database_A;
            BEGIN TRANSACTION 'DIST-TXN-001' ON Database_B;

            -- Step 2: Execute operations
            -- Database A (US Bank):
            UPDATE Accounts SET Balance = Balance - 1000 
            WHERE AccountID = 'US-ACC-001';

            -- Database B (EU Bank):
            UPDATE Accounts SET Balance = Balance + 1000 
            WHERE AccountID = 'EU-ACC-002';

            -- Step 3: PREPARE Phase
            -- Coordinator:
            SEND PREPARE TO Database_A;
            SEND PREPARE TO Database_B;

            -- Database A response:
            --   Check balance not negative ‚úì
            --   Write to log ‚úì
            --   Lock account ‚úì
            --   Response: READY

            -- Database B response:
            --   Check account exists ‚úì
            --   Write to log ‚úì
            --   Lock account ‚úì
            --   Response: READY

            -- Step 4: COMMIT Phase
            -- Coordinator:
            SEND COMMIT TO Database_A;
            SEND COMMIT TO Database_B;

            -- Database A: COMMIT ‚úì
            -- Database B: COMMIT ‚úì

            -- Step 5: Release locks
            -- Both databases release locks ‚úì

            -- Result: Money transferred atomically across continents! ‚úì

            -- -----------------------------------------------------------
            -- Three-Phase Commit (3PC) - Enhanced Protocol
            -- -----------------------------------------------------------

            -- Problem with 2PC: Blocking during coordinator failure
            -- Solution: Add PRE-COMMIT phase

            -- Phase 1: PREPARE
            -- All participants vote YES/NO

            -- Phase 2: PRE-COMMIT (NEW)
            -- Coordinator sends PRE-COMMIT to all
            -- Participants acknowledge
            -- If timeout here, can safely abort

            -- Phase 3: COMMIT
            -- Coordinator sends final COMMIT
            -- All participants commit

            -- Advantage: Non-blocking during coordinator failure
            -- Disadvantage: Higher latency (extra phase)

            -- -----------------------------------------------------------
            -- Distributed COMMIT Performance Impact
            -- -----------------------------------------------------------

            -- Local transaction (single database):
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100;
            COMMIT;
            -- Time: ~10ms (single log flush)

            -- Distributed transaction (2 databases):
            START TRANSACTION;
            UPDATE DB1.Accounts SET Balance = Balance - 100;
            UPDATE DB2.Accounts SET Balance = Balance + 100;
            COMMIT;  -- Two-phase commit!
            -- Time: ~50-100ms (network round-trips + 2 log flushes)

            -- Performance overhead: 5-10x slower ‚ö†Ô∏è

            -- Recommendation: Avoid distributed transactions when possible
            -- Alternative: Use eventual consistency with compensation</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Common Pitfalls and Best Practices
                    </div>
                    
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- Pitfall 1: Forgetting to COMMIT
            -- -----------------------------------------------------------

            -- Problem: Transaction left open indefinitely
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
            -- User closes connection without COMMIT or ROLLBACK!

            -- Result:
            -- ‚ùå Changes never saved
            -- ‚ùå Locks held indefinitely
            -- ‚ùå Other users blocked
            -- ‚ùå Transaction log grows

            -- Solution: Always COMMIT or ROLLBACK
            START TRANSACTION;
            TRY
                UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 'ACC001';
                COMMIT;
            CATCH
                ROLLBACK;
                RAISE;
            END;

            -- -----------------------------------------------------------
            -- Pitfall 2: Long-Running Transactions
            -- -----------------------------------------------------------

            -- Problem: Transaction holds locks for extended period
            START TRANSACTION;

            -- Complex processing that takes 30 minutes
            FOR record IN (SELECT * FROM LargeTable) LOOP
                -- Process each record
                -- Complex calculations
                -- External API calls ‚ö†Ô∏è
                UPDATE ProcessedData SET Status = 'DONE' WHERE ID = record.ID;
            END LOOP;

            COMMIT;  -- Finally!

            -- Problems:
            -- ‚ùå Locks held for 30 minutes
            -- ‚ùå Other users blocked
            -- ‚ùå Transaction log grows huge
            -- ‚ùå Rollback would take forever

            -- Solution: Break into smaller transactions
            FOR record IN (SELECT * FROM LargeTable) LOOP
                START TRANSACTION;
                -- Process record
                UPDATE ProcessedData SET Status = 'DONE' WHERE ID = record.ID;
                COMMIT;  -- Commit frequently ‚úì
            END LOOP;

            -- -----------------------------------------------------------
            -- Pitfall 3: Nested Transactions (Not Supported!)
            -- -----------------------------------------------------------

            -- Problem: Most databases don't support true nested transactions
            START TRANSACTION;  -- Outer transaction

                UPDATE Table1 SET Column1 = 'Value1';
                
                START TRANSACTION;  -- Inner transaction (ERROR or ignored!)
                    UPDATE Table2 SET Column2 = 'Value2';
                COMMIT;  -- What does this commit?
                
            COMMIT;  -- Or this?

            -- Result: Confusing behavior, data loss ‚ùå

            -- Solution: Use savepoints instead
            START TRANSACTION;

                UPDATE Table1 SET Column1 = 'Value1';
                
                SAVEPOINT inner_operation;
                    UPDATE Table2 SET Column2 = 'Value2';
                -- ROLLBACK TO SAVEPOINT inner_operation; if needed
                
            COMMIT;  -- Commits everything ‚úì

            -- -----------------------------------------------------------
            -- Pitfall 4: Mixing DDL and DML
            -- -----------------------------------------------------------

            -- Problem: DDL causes implicit commit in MySQL
            START TRANSACTION;

            INSERT INTO Orders VALUES (1001, 100, 'PENDING');

            CREATE TABLE TempTable (ID INT);  -- Implicit COMMIT! ‚ö†Ô∏è

            -- Oops, found error in order:
            ROLLBACK;

            -- Result:
            -- ‚ùå INSERT was committed (can't be rolled back!)
            -- ‚úì TempTable exists

            -- Solution: Separate DDL from DML
            -- Do DDL outside transactions
            CREATE TABLE TempTable (ID INT);

            -- Then do DML in transaction
            START TRANSACTION;
            INSERT INTO Orders VALUES (1001, 100, 'PENDING');
            COMMIT;

            -- -----------------------------------------------------------
            -- Best Practice 1: Explicit Transaction Boundaries
            -- -----------------------------------------------------------

            -- Good: Clear boundaries
            START TRANSACTION;
                -- All operations here
            COMMIT;

            -- Bad: Unclear boundaries
            UPDATE Table1 SET Column1 = 'Value';  -- Autocommit? Transaction? Unclear!

            -- -----------------------------------------------------------
            -- Best Practice 2: Keep Transactions Short
            -- -----------------------------------------------------------

            -- Good: Quick transaction
            START TRANSACTION;
                UPDATE Accounts SET Balance = Balance - 100;
                INSERT INTO TransactionLog VALUES (...);
            COMMIT;
            -- Duration: Milliseconds ‚úì

            -- Bad: Long transaction
            START TRANSACTION;
                -- Read data
                -- Complex calculations
                -- External API calls
                -- Email sending
                -- Report generation
            COMMIT;
            -- Duration: Minutes ‚ùå

            -- -----------------------------------------------------------
            -- Best Practice 3: Consistent Error Handling
            -- -----------------------------------------------------------

            -- Good: Structured error handling
            START TRANSACTION;
            BEGIN TRY
                -- Operations
                UPDATE Table1 SET Column1 = 'Value';
                UPDATE Table2 SET Column2 = 'Value';
                
                COMMIT;
            EXCEPTION
                ROLLBACK;
                -- Log error
                -- Notify user
                RAISE;
            END;

            -- -----------------------------------------------------------
            -- Best Practice 4: Use Appropriate Isolation Levels
            -- -----------------------------------------------------------

            -- For read-heavy queries that don't need perfect accuracy:
            SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
            SELECT COUNT(*) FROM Orders;  -- Fast, approximate ‚úì

            -- For critical financial operations:
            SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
            START TRANSACTION;
                UPDATE Accounts SET Balance = Balance - 1000;
            COMMIT;  -- Slower but safe ‚úì

            -- -----------------------------------------------------------
            -- Best Practice 5: Monitor Transaction Duration
            -- -----------------------------------------------------------

            -- Set alerts for long-running transactions
            SELECT 
                session_id,
                transaction_begin_time,
                DATEDIFF(SECOND, transaction_begin_time, GETDATE()) AS duration_seconds
            FROM sys.dm_tran_active_transactions
            WHERE DATEDIFF(SECOND, transaction_begin_time, GETDATE()) > 300;  -- 5 minutes

            -- Kill transactions exceeding threshold
            IF duration_seconds > 3600 THEN  -- 1 hour
                KILL session_id;
            END IF;</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What happens if you don't COMMIT or ROLLBACK a transaction?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>This is a serious problem that can cripple database performance!</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Immediate Consequences:</strong></p>
                                <ul>
                                    <li>Transaction remains ACTIVE indefinitely</li>
                                    <li>All locks held by transaction remain locked</li>
                                    <li>Transaction log cannot be truncated (keeps growing)</li>
                                    <li>Other users blocked waiting for locks</li>
                                    <li>Database performance degrades significantly</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>What Database Does:</strong></p>
                                <ul>
                                    <li><strong>Session timeout:</strong> After timeout period, automatically ROLLBACK</li>
                                    <li><strong>Connection close:</strong> On disconnect, automatically ROLLBACK</li>
                                    <li><strong>Idle transaction timeout:</strong> Some databases kill idle transactions</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Always explicitly COMMIT or ROLLBACK in application code, preferably in try-finally or try-catch blocks to ensure cleanup even during exceptions.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you COMMIT part of a transaction?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>No! COMMIT is all-or-nothing for the entire transaction.</strong> However, there are workarounds:</p>
                                
                                <p style="margin-top: 1rem;"><strong>Why Partial COMMIT Doesn't Exist:</strong></p>
                                <ul>
                                    <li>Would break atomicity (the "A" in ACID)</li>
                                    <li>Creates inconsistent states</li>
                                    <li>Makes rollback ambiguous</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Workarounds:</strong></p>
                                <ol>
                                    <li><strong>Multiple Transactions:</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>-- Transaction 1
            START TRANSACTION;
            INSERT INTO Table1 VALUES (1);
            COMMIT;  -- Committed ‚úì

            -- Transaction 2
            START TRANSACTION;
            INSERT INTO Table2 VALUES (2);
            ROLLBACK;  -- Only affects Transaction 2 ‚úì</code></pre>
                                        </div>
                                    </li>
                                    <li><strong>Savepoints:</strong>
                                        <div class="example-box" style="margin-top: 0.5rem;">
                                            <pre><code>START TRANSACTION;
            INSERT INTO Table1 VALUES (1);
            SAVEPOINT sp1;
            INSERT INTO Table2 VALUES (2);
            ROLLBACK TO SAVEPOINT sp1;  -- Keeps Table1 insert
            COMMIT;  -- Commits Table1 only ‚úì</code></pre>
                                        </div>
                                    </li>
                                    <li><strong>Autonomous Transactions:</strong> Some databases (Oracle, PostgreSQL) support independent sub-transactions</li>
                                </ol>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Is COMMIT or ROLLBACK faster?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>ROLLBACK is typically faster than COMMIT!</strong></p>
                                
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="background: #dbeafe;">
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Operation</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">COMMIT</th>
                                        <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ROLLBACK</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Log Write</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Must fsync to disk</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No fsync needed</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Constraint Check</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">All constraints validated</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Skip validation</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Durability</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Must ensure (expensive)</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Not needed</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Typical Time</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">5-10ms</td>
                                        <td style="padding: 0.5rem; border: 1px solid #93c5fd;">1-2ms</td>
                                    </tr>
                                </table>
                                
                                <p style="margin-top: 1rem;"><strong>Why COMMIT is Slower:</strong> COMMIT requires fsync (force to disk) to guarantee durability. ROLLBACK just discards changes - no disk I/O needed!</p>
                                
                                <p style="margin-top: 1rem;"><strong>Exception:</strong> For very large transactions with millions of operations, ROLLBACK can be slow because it must undo all changes by walking backward through the log.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What's the difference between implicit and explicit COMMIT?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>The difference is who triggers the COMMIT - the user or the database:</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Explicit COMMIT:</strong></p>
                                <ul>
                                    <li>User/application explicitly calls COMMIT</li>
                                    <li>Full control over transaction boundaries</li>
                                    <li>Can group multiple statements</li>
                                    <li>Example: <code>START TRANSACTION; ... COMMIT;</code></li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Implicit COMMIT:</strong></p>
                                <ul>
                                    <li>Database automatically commits without user asking</li>
                                    <li>Triggered by certain statements (DDL in MySQL)</li>
                                    <li>Or by autocommit mode (each statement commits)</li>
                                    <li>Example: <code>CREATE TABLE ...</code> auto-commits in MySQL</li>
                                </ul>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Explicit COMMIT:
            START TRANSACTION;
            INSERT INTO Table1 VALUES (1);
            INSERT INTO Table2 VALUES (2);
            COMMIT;  -- User controls when to commit ‚úì

            -- Implicit COMMIT (Autocommit mode):
            -- Each statement commits automatically
            INSERT INTO Table1 VALUES (1);  -- Auto-committed
            INSERT INTO Table2 VALUES (2);  -- Auto-committed
            -- No transaction boundary! ‚ö†Ô∏è

            -- Implicit COMMIT (DDL):
            START TRANSACTION;
            INSERT INTO Table1 VALUES (1);
            CREATE TABLE NewTable (ID INT);  -- Implicit COMMIT! ‚ö†Ô∏è
            -- INSERT is now committed, even without explicit COMMIT</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Best Practice:</strong> Use explicit transactions for critical operations to maintain full control.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can COMMIT fail? What happens then?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! COMMIT can fail, and when it does, the transaction is automatically rolled back.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Common COMMIT Failures:</strong></p>
                                <ol>
                                    <li><strong>Constraint Violation:</strong>
                                        <ul>
                                            <li>Deferred constraint check fails at COMMIT time</li>
                                            <li>Example: Foreign key constraint with DEFERRABLE</li>
                                        </ul>
                                    </li>
                                    <li><strong>Disk Full:</strong>
                                        <ul>
                                            <li>Cannot write to transaction log</li>
                                            <li>COMMIT aborted, transaction rolled back</li>
                                        </ul>
                                    </li>
                                    <li><strong>Deadlock Detected:</strong>
                                        <ul>
                                            <li>Database chooses this transaction as deadlock victim</li>
                                            <li>Automatic rollback</li>
                                        </ul>
                                    </li>
                                    <li><strong>Serialization Failure:</strong>
                                        <ul>
                                            <li>SERIALIZABLE isolation level conflict</li>
                                            <li>Transaction aborted</li>
                                        </ul>
                                    </li>
                                </ol>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Example: Deferred constraint
            SET CONSTRAINTS ALL DEFERRED;

            START TRANSACTION;
            INSERT INTO Orders VALUES (1001, 999);  -- Customer 999 doesn't exist
            -- No error yet (deferred)

            COMMIT;  -- FAILS here!
            -- Error: Foreign key constraint violation
            -- Transaction automatically ROLLED BACK ‚úì

            -- Application must handle:
            TRY
                COMMIT;
            CATCH
                -- COMMIT failed
                -- Transaction already rolled back
                -- Handle error, retry if appropriate
            END;</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Important:</strong> If COMMIT fails, the transaction is automatically rolled back. You don't need to (and shouldn't) call ROLLBACK explicitly.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">COMMIT</span>
                        <span class="keyword-tag">ROLLBACK</span>
                        <span class="keyword-tag">Transaction control</span>
                        <span class="keyword-tag">Autocommit</span>
                        <span class="keyword-tag">Explicit commit</span>
                        <span class="keyword-tag">Implicit commit</span>
                        <span class="keyword-tag">Two-phase commit</span>
                        <span class="keyword-tag">Distributed transaction</span>
                        <span class="keyword-tag">Durability</span>
                        <span class="keyword-tag">FSYNC</span>
                        <span class="keyword-tag">Lock release</span>
                        <span class="keyword-tag">Transaction log</span>
                        <span class="keyword-tag">Atomicity</span>
                        <span class="keyword-tag">Group commit</span>
                    </span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>         

            <!-- Question 91: Real-world ACID Implementation Scenarios -->
            <div class="question-content" id="q91">
                <div class="question-header">
                    <h1 class="question-title">Real-world ACID Implementation Scenarios</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Practical</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 12 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p>Understanding ACID properties theoretically is important, but seeing how they're applied in real-world scenarios is crucial for interviews and practical development. This section covers common business scenarios and how ACID properties ensure correctness.</p>
                        
                        <p style="margin-top: 1rem;"><strong>What We'll Cover:</strong></p>
                        <ul>
                            <li>Banking and financial transactions</li>
                            <li>E-commerce order processing</li>
                            <li>Airline/hotel reservation systems</li>
                            <li>Healthcare record management</li>
                            <li>Multi-step business processes</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-piggy-bank"></i>
                        Scenario 1: Banking - Money Transfer
                    </div>
                    <div class="scenario-box">
                        <h4>Business Requirement:</h4>
                        <p>Transfer $1000 from Account A to Account B. Money must never be lost or duplicated.</p>
                        
                        <h4 style="margin-top: 1rem;">ACID Implementation:</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Database Schema
            CREATE TABLE Accounts (
                AccountID VARCHAR(20) PRIMARY KEY,
                CustomerID INT NOT NULL,
                Balance DECIMAL(15,2) NOT NULL CHECK (Balance >= 0),  -- Consistency
                Currency VARCHAR(3) DEFAULT 'USD',
                FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
            );

            CREATE TABLE Transactions (
                TransactionID INT PRIMARY KEY AUTO_INCREMENT,
                FromAccount VARCHAR(20),
                ToAccount VARCHAR(20),
                Amount DECIMAL(15,2) NOT NULL,
                TransactionDate DATETIME DEFAULT CURRENT_TIMESTAMP,
                Status ENUM('Pending', 'Completed', 'Failed'),
                FOREIGN KEY (FromAccount) REFERENCES Accounts(AccountID),
                FOREIGN KEY (ToAccount) REFERENCES Accounts(AccountID)
            );

            -- Transfer Implementation with Full ACID
            DELIMITER //
            CREATE PROCEDURE TransferMoney(
                IN p_from_account VARCHAR(20),
                IN p_to_account VARCHAR(20),
                IN p_amount DECIMAL(15,2)
            )
            BEGIN
                DECLARE v_from_balance DECIMAL(15,2);
                DECLARE v_transaction_id INT;
                
                DECLARE EXIT HANDLER FOR SQLEXCEPTION
                BEGIN
                    -- Atomicity: Rollback on any error
                    ROLLBACK;
                    SELECT 'Transfer failed' AS Status;
                END;
                
                -- Start transaction (Atomicity)
                START TRANSACTION;
                
                -- Lock source account for update (Isolation)
                SELECT Balance INTO v_from_balance 
                FROM Accounts 
                WHERE AccountID = p_from_account
                FOR UPDATE;
                
                -- Check sufficient funds (Consistency)
                IF v_from_balance < p_amount THEN
                    SIGNAL SQLSTATE '45000' 
                    SET MESSAGE_TEXT = 'Insufficient funds';
                END IF;
                
                -- Deduct from source account
                UPDATE Accounts 
                SET Balance = Balance - p_amount 
                WHERE AccountID = p_from_account;
                
                -- Add to destination account
                UPDATE Accounts 
                SET Balance = Balance + p_amount 
                WHERE AccountID = p_to_account;
                
                -- Record transaction
                INSERT INTO Transactions (FromAccount, ToAccount, Amount, Status)
                VALUES (p_from_account, p_to_account, p_amount, 'Completed');
                
                SET v_transaction_id = LAST_INSERT_ID();
                
                -- Commit transaction (Durability)
                COMMIT;
                
                SELECT 'Transfer successful' AS Status, v_transaction_id AS TransactionID;
            END //
            DELIMITER ;

            -- Usage
            CALL TransferMoney('ACC001', 'ACC002', 1000.00);

            -- ACID Guarantees:
            -- ‚úì Atomicity: Both debit and credit happen, or neither
            -- ‚úì Consistency: Balance never negative, total money conserved
            -- ‚úì Isolation: Concurrent transfers don't interfere
            -- ‚úì Durability: Once committed, transfer permanent even if crash</code></pre>
                        </div>
                        
                        <h4 style="margin-top: 1rem;">What Could Go Wrong Without ACID?</h4>
                        <ul>
                            <li><strong>Without Atomicity:</strong> Money deducted from A but not added to B (lost!)</li>
                            <li><strong>Without Consistency:</strong> A goes negative (overdraft without authorization)</li>
                            <li><strong>Without Isolation:</strong> Two simultaneous transfers from A cause overdraft</li>
                            <li><strong>Without Durability:</strong> Crash after commit loses the transfer</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shopping-cart"></i>
                        Scenario 2: E-Commerce - Order Checkout
                    </div>
                    <div class="scenario-box">
                        <h4>Business Requirement:</h4>
                        <p>Process order: Validate inventory, deduct stock, process payment, create order. All steps must succeed or none should.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- E-Commerce Schema
            CREATE TABLE Products (
                ProductID INT PRIMARY KEY,
                ProductName VARCHAR(200),
                Stock INT NOT NULL CHECK (Stock >= 0),  -- Consistency
                Price DECIMAL(10,2) NOT NULL CHECK (Price > 0)
            );

            CREATE TABLE Orders (
                OrderID INT PRIMARY KEY AUTO_INCREMENT,
                CustomerID INT NOT NULL,
                TotalAmount DECIMAL(10,2),
                OrderStatus ENUM('Pending', 'Paid', 'Shipped', 'Cancelled'),
                CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP
            );

            CREATE TABLE OrderItems (
                OrderItemID INT PRIMARY KEY AUTO_INCREMENT,
                OrderID INT,
                ProductID INT,
                Quantity INT,
                Price DECIMAL(10,2),
                FOREIGN KEY (OrderID) REFERENCES Orders(OrderID),
                FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
            );

            CREATE TABLE Payments (
                PaymentID INT PRIMARY KEY AUTO_INCREMENT,
                OrderID INT UNIQUE,  -- One payment per order
                Amount DECIMAL(10,2),
                PaymentMethod VARCHAR(50),
                Status ENUM('Pending', 'Completed', 'Failed'),
                FOREIGN KEY (OrderID) REFERENCES Orders(OrderID)
            );

            -- Checkout Process with ACID
            DELIMITER //
            CREATE PROCEDURE ProcessCheckout(
                IN p_customer_id INT,
                IN p_product_id INT,
                IN p_quantity INT,
                IN p_payment_method VARCHAR(50)
            )
            BEGIN
                DECLARE v_stock INT;
                DECLARE v_price DECIMAL(10,2);
                DECLARE v_total DECIMAL(10,2);
                DECLARE v_order_id INT;
                
                DECLARE EXIT HANDLER FOR SQLEXCEPTION
                BEGIN
                    ROLLBACK;  -- Atomicity
                    SELECT 'Checkout failed' AS Status;
                END;
                
                START TRANSACTION;
                
                -- Step 1: Check and lock product (Isolation)
                SELECT Stock, Price INTO v_stock, v_price
                FROM Products
                WHERE ProductID = p_product_id
                FOR UPDATE;  -- Lock row
                
                -- Step 2: Validate inventory (Consistency)
                IF v_stock < p_quantity THEN
                    SIGNAL SQLSTATE '45000' 
                    SET MESSAGE_TEXT = 'Insufficient stock';
                END IF;
                
                -- Calculate total
                SET v_total = v_price * p_quantity;
                
                -- Step 3: Create order
                INSERT INTO Orders (CustomerID, TotalAmount, OrderStatus)
                VALUES (p_customer_id, v_total, 'Pending');
                
                SET v_order_id = LAST_INSERT_ID();
                
                -- Step 4: Add order items
                INSERT INTO OrderItems (OrderID, ProductID, Quantity, Price)
                VALUES (v_order_id, p_product_id, p_quantity, v_price);
                
                -- Step 5: Deduct inventory
                UPDATE Products 
                SET Stock = Stock - p_quantity 
                WHERE ProductID = p_product_id;
                
                -- Step 6: Process payment (simulate)
                INSERT INTO Payments (OrderID, Amount, PaymentMethod, Status)
                VALUES (v_order_id, v_total, p_payment_method, 'Completed');
                
                -- Step 7: Update order status
                UPDATE Orders 
                SET OrderStatus = 'Paid' 
                WHERE OrderID = v_order_id;
                
                COMMIT;  -- Durability
                
                SELECT 'Checkout successful' AS Status, v_order_id AS OrderID;
            END //
            DELIMITER ;

            -- Usage
            CALL ProcessCheckout(123, 456, 2, 'Credit Card');

            -- ACID in Action:
            -- ‚úì Atomicity: All 7 steps succeed or all rolled back
            -- ‚úì Consistency: Stock never negative, order always has payment
            -- ‚úì Isolation: Two users can't buy last item simultaneously
            -- ‚úì Durability: Order persists even if server crashes after commit</code></pre>
                        </div>
                        
                        <h4 style="margin-top: 1rem;">Common Pitfalls Without ACID:</h4>
                        <ul>
                            <li><strong>Race condition:</strong> Two users buy last item (overselling)</li>
                            <li><strong>Partial order:</strong> Order created but payment failed</li>
                            <li><strong>Inventory mismatch:</strong> Stock deducted but order cancelled</li>
                            <li><strong>Lost order:</strong> Payment processed but order not recorded</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-plane"></i>
                        Scenario 3: Airline Reservation - Seat Booking
                    </div>
                    <div class="scenario-box">
                        <h4>Business Requirement:</h4>
                        <p>Book seat on flight. No double-booking allowed. Handle concurrent booking attempts.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Airline Schema
            CREATE TABLE Flights (
                FlightID INT PRIMARY KEY,
                FlightNumber VARCHAR(10),
                DepartureDate DATE,
                AvailableSeats INT CHECK (AvailableSeats >= 0)
            );

            CREATE TABLE Seats (
                SeatID INT PRIMARY KEY AUTO_INCREMENT,
                FlightID INT,
                SeatNumber VARCHAR(5),
                IsAvailable BOOLEAN DEFAULT TRUE,
                UNIQUE (FlightID, SeatNumber),  -- Consistency
                FOREIGN KEY (FlightID) REFERENCES Flights(FlightID)
            );

            CREATE TABLE Bookings (
                BookingID INT PRIMARY KEY AUTO_INCREMENT,
                PassengerID INT,
                SeatID INT UNIQUE,  -- One booking per seat
                BookingDate DATETIME DEFAULT CURRENT_TIMESTAMP,
                Status ENUM('Confirmed', 'Cancelled'),
                FOREIGN KEY (SeatID) REFERENCES Seats(SeatID)
            );

            -- Book seat with ACID
            DELIMITER //
            CREATE PROCEDURE BookSeat(
                IN p_passenger_id INT,
                IN p_flight_id INT,
                IN p_seat_number VARCHAR(5)
            )
            BEGIN
                DECLARE v_seat_id INT;
                DECLARE v_is_available BOOLEAN;
                DECLARE v_booking_id INT;
                
                DECLARE EXIT HANDLER FOR SQLEXCEPTION
                BEGIN
                    ROLLBACK;
                    SELECT 'Booking failed' AS Status;
                END;
                
                START TRANSACTION ISOLATION LEVEL SERIALIZABLE;  -- Highest isolation
                
                -- Lock and check seat availability (Isolation)
                SELECT SeatID, IsAvailable INTO v_seat_id, v_is_available
                FROM Seats
                WHERE FlightID = p_flight_id AND SeatNumber = p_seat_number
                FOR UPDATE;  -- Exclusive lock
                
                -- Verify seat available (Consistency)
                IF NOT v_is_available THEN
                    SIGNAL SQLSTATE '45000' 
                    SET MESSAGE_TEXT = 'Seat already booked';
                END IF;
                
                -- Mark seat as booked
                UPDATE Seats 
                SET IsAvailable = FALSE 
                WHERE SeatID = v_seat_id;
                
                -- Decrement available seats on flight
                UPDATE Flights 
                SET AvailableSeats = AvailableSeats - 1 
                WHERE FlightID = p_flight_id;
                
                -- Create booking
                INSERT INTO Bookings (PassengerID, SeatID, Status)
                VALUES (p_passenger_id, v_seat_id, 'Confirmed');
                
                SET v_booking_id = LAST_INSERT_ID();
                
                COMMIT;  -- Durability
                
                SELECT 'Booking confirmed' AS Status, v_booking_id AS BookingID;
            END //
            DELIMITER ;

            -- Concurrent Booking Scenario:
            -- User A and User B try to book seat 12A simultaneously

            -- User A:
            CALL BookSeat(1001, 789, '12A');
            -- Acquires lock on seat 12A
            -- Proceeds to book ‚úì

            -- User B (at same time):
            CALL BookSeat(1002, 789, '12A');
            -- WAITS for User A's lock
            -- After User A commits, User B sees seat unavailable
            -- Booking fails with "Seat already booked" ‚úì

            -- ACID prevents double-booking! ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-hospital"></i>
                        Scenario 4: Healthcare - Prescription Management
                    </div>
                    <div class="scenario-box">
                        <h4>Business Requirement:</h4>
                        <p>Doctor prescribes medication. Check drug interactions, update patient records, notify pharmacy. Critical accuracy required.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Healthcare Schema
            CREATE TABLE Patients (
                PatientID INT PRIMARY KEY,
                PatientName VARCHAR(100),
                DateOfBirth DATE,
                Allergies TEXT
            );

            CREATE TABLE Medications (
                MedicationID INT PRIMARY KEY,
                MedicationName VARCHAR(100),
                Dosage VARCHAR(50),
                Contraindications TEXT
            );

            CREATE TABLE Prescriptions (
                PrescriptionID INT PRIMARY KEY AUTO_INCREMENT,
                PatientID INT,
                DoctorID INT,
                MedicationID INT,
                Dosage VARCHAR(50),
                StartDate DATE,
                EndDate DATE,
                Status ENUM('Active', 'Completed', 'Cancelled'),
                CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (PatientID) REFERENCES Patients(PatientID),
                FOREIGN KEY (MedicationID) REFERENCES Medications(MedicationID)
            );

            CREATE TABLE PrescriptionHistory (
                HistoryID INT PRIMARY KEY AUTO_INCREMENT,
                PrescriptionID INT,
                Action VARCHAR(50),
                ActionDate DATETIME DEFAULT CURRENT_TIMESTAMP,
                PerformedBy INT,
                FOREIGN KEY (PrescriptionID) REFERENCES Prescriptions(PrescriptionID)
            );

            -- Prescribe medication with ACID
            DELIMITER //
            CREATE PROCEDURE PrescribeMedication(
                IN p_patient_id INT,
                IN p_doctor_id INT,
                IN p_medication_id INT,
                IN p_dosage VARCHAR(50),
                IN p_duration_days INT
            )
            BEGIN
                DECLARE v_allergies TEXT;
                DECLARE v_contraindications TEXT;
                DECLARE v_prescription_id INT;
        DECLARE v_end_date DATE;
        
        DECLARE EXIT HANDLER FOR SQLEXCEPTION
        BEGIN
            ROLLBACK;
            SELECT 'Prescription failed' AS Status;
        END;
        
        START TRANSACTION;
        
        -- Get patient allergies (Consistency check)
        SELECT Allergies INTO v_allergies
        FROM Patients
        WHERE PatientID = p_patient_id
        FOR UPDATE;  -- Lock patient record
        
        -- Get medication contraindications
        SELECT Contraindications INTO v_contraindications
        FROM Medications
        WHERE MedicationID = p_medication_id;
        
        -- Validate no drug interactions (Consistency)
        -- (Simplified - in reality, complex interaction checking)
        IF v_allergies LIKE CONCAT('%', v_contraindications, '%') THEN
            SIGNAL SQLSTATE '45000'
            SET MESSAGE_TEXT = 'Drug allergy detected';
        END IF;
        
        -- Calculate end date
        SET v_end_date = DATE_ADD(CURDATE(), INTERVAL p_duration_days DAY);
        
        -- Create prescription
        INSERT INTO Prescriptions (PatientID, DoctorID, MedicationID, Dosage, StartDate, EndDate, Status)
        VALUES (p_patient_id, p_doctor_id, p_medication_id, p_dosage, CURDATE(), v_end_date, 'Active');
        
        SET v_prescription_id = LAST_INSERT_ID();
        
        -- Record in history (Audit trail)
        INSERT INTO PrescriptionHistory (PrescriptionID, Action, PerformedBy)
        VALUES (v_prescription_id, 'Prescribed', p_doctor_id);
        
        COMMIT;  -- Durability
        
        SELECT 'Prescription created' AS Status, v_prescription_id AS PrescriptionID;
    END //
    DELIMITER ;

    -- Critical ACID Properties for Healthcare:
    -- ‚úì Atomicity: All records updated or none
    -- ‚úì Consistency: Drug interactions checked, allergies validated
    -- ‚úì Isolation: Multiple doctors can't create conflicting prescriptions
    -- ‚úì Durability: Prescription survives system crash (legal requirement)</code></pre>
                </div>
            </div>
        </div>

        <div class="content-card">
            <div class="section-title">
                <i class="fas fa-lightbulb"></i>
                Best Practices for ACID Transactions
            </div>
            
            <div class="explanation-text">
                <ol>
                    <li><strong>Keep Transactions Short:</strong>
                        <ul>
                            <li>Minimize time locks are held</li>
                            <li>Reduce contention and deadlocks</li>
                            <li>Better concurrency</li>
                        </ul>
                    </li>
                    
                    <li><strong>Use Appropriate Isolation Level:</strong>
                        <ul>
                            <li>Don't use SERIALIZABLE unless necessary</li>
                            <li>READ COMMITTED sufficient for most cases</li>
                            <li>Use SELECT FOR UPDATE for critical updates</li>
                        </ul>
                    </li>
                    
                    <li><strong>Handle Errors Gracefully:</strong>
                        <ul>
                            <li>Always use exception handlers</li>
                            <li>Explicit ROLLBACK on errors</li>
                            <li>Provide meaningful error messages</li>
                        </ul>
                    </li>
                    
                    <li><strong>Implement Idempotency:</strong>
                        <ul>
                            <li>Same operation can be retried safely</li>
                            <li>Important for network failures</li>
                            <li>Use unique transaction IDs</li>
                        </ul>
                    </li>
                    
                    <li><strong>Monitor and Log:</strong>
                        <ul>
                            <li>Log all transaction outcomes</li>
                            <li>Monitor deadlocks and failures</li>
                            <li>Track long-running transactions</li>
                        </ul>
                    </li>
                    
                    <li><strong>Test Concurrency:</strong>
                        <ul>
                            <li>Simulate concurrent users</li>
                            <li>Test race conditions</li>
                            <li>Verify isolation works</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <div class="content-card">
            <div class="section-title">
                <i class="fas fa-key"></i>
                Keywords to Remember
            </div>
            <div class="keywords-container">
                <span class="keyword-tag">Real-world ACID</span>
                <span class="keyword-tag">Banking Transactions</span>
                <span class="keyword-tag">E-commerce Checkout</span>
                <span class="keyword-tag">Reservation Systems</span>
                <span class="keyword-tag">Healthcare Records</span>
                <span class="keyword-tag">Concurrent Booking</span>
                <span class="keyword-tag">Transaction Best Practices</span>
                <span class="keyword-tag">Stored Procedures</span>
                <span class="keyword-tag">SELECT FOR UPDATE</span>
            </div>
        </div>

        <div class="navigation-buttons">
            <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                <i class="fas fa-arrow-left"></i> Previous
            </button>
            <button class="nav-btn next" onclick="navigateQuestion('next')">
                Next <i class="fas fa-arrow-right"></i>
            </button>
        </div>
            </div>
         
            <!-- Question 92: How is ACID Implemented in Distributed Systems? -->
            <div class="question-content" id="q92">
                <div class="question-header">
                    <h1 class="question-title">How is ACID Implemented in Distributed Systems?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 13 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Expert</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>ACID in Distributed Systems</strong> refers to maintaining ACID properties when transactions span multiple databases, servers, or data centers. This is significantly more challenging than single-node ACID due to network latency, partial failures, and the CAP theorem constraints.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Challenges:</strong></p>
                        <ul>
                            <li><strong>Network Failures:</strong> Nodes may become temporarily unreachable</li>
                            <li><strong>Partial Failures:</strong> Some nodes succeed, others fail</li>
                            <li><strong>Coordination Overhead:</strong> Multiple nodes must agree on commit/abort</li>
                            <li><strong>CAP Theorem:</strong> Can't have Consistency, Availability, and Partition tolerance simultaneously</li>
                            <li><strong>Latency:</strong> Cross-region communication adds milliseconds to seconds</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Solutions:</strong></p>
                        <ol>
                            <li><strong>Two-Phase Commit (2PC)</strong> - Classic distributed transaction protocol</li>
                            <li><strong>Three-Phase Commit (3PC)</strong> - Improved version of 2PC</li>
                            <li><strong>Paxos/Raft Consensus</strong> - Modern consensus algorithms</li>
                            <li><strong>Saga Pattern</strong> - Long-running distributed transactions</li>
                            <li><strong>Distributed ACID Databases</strong> - Google Spanner, CockroachDB</li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        1. Two-Phase Commit (2PC)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Coordinator asks all participants if they can commit. If all say yes, coordinator tells everyone to commit. If any says no, coordinator tells everyone to abort.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Phase 1: Prepare (Voting Phase)</h4>
                        <ul>
                            <li>Coordinator asks: "Can you commit?"</li>
                            <li>Participants respond: "YES" or "NO"</li>
                            <li>If YES, participant must guarantee it can commit</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Phase 2: Commit/Abort (Decision Phase)</h4>
                        <ul>
                            <li>If all voted YES: Coordinator sends COMMIT</li>
                            <li>If any voted NO: Coordinator sends ABORT</li>
                            <li>Participants execute the decision</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Two-Phase Commit Example: Transfer money across banks

            -- Transaction: Transfer $500 from Bank A to Bank B
            -- Involves 2 databases: BankA_DB, BankB_DB

            -- COORDINATOR (Transaction Manager)
            BEGIN DISTRIBUTED TRANSACTION;

            -- Phase 1: PREPARE
            -- Coordinator to BankA_DB: "Can you debit $500 from Account A?"
            -- BankA_DB executes:
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';
            -- Check: Balance >= 0? YES ‚úì
            -- Write to local transaction log
            -- Lock the resources
            -- Response to Coordinator: "YES, I'm prepared" ‚úì

            -- Coordinator to BankB_DB: "Can you credit $500 to Account B?"
            -- BankB_DB executes:
            START TRANSACTION;
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';
            -- Write to local transaction log
            -- Lock the resources
            -- Response to Coordinator: "YES, I'm prepared" ‚úì

            -- Phase 2: COMMIT
            -- Coordinator: Both voted YES, decide to COMMIT
            -- Write COMMIT decision to coordinator log

            -- Coordinator to BankA_DB: "COMMIT"
            -- BankA_DB: Commits transaction, releases locks ‚úì

            -- Coordinator to BankB_DB: "COMMIT"
            -- BankB_DB: Commits transaction, releases locks ‚úì

            -- Transaction complete! ‚úì

            -- -----------------------------------------------------------
            -- 2PC with Failure Scenario
            -- -----------------------------------------------------------

            -- Phase 1: PREPARE
            -- Coordinator to BankA_DB: "Can you debit $500?"
            -- BankA_DB: "YES" ‚úì

            -- Coordinator to BankB_DB: "Can you credit $500?"
            -- BankB_DB: "NO" ‚ùå (e.g., account doesn't exist)

            -- Phase 2: ABORT
            -- Coordinator: One voted NO, decide to ABORT
            -- Write ABORT decision to coordinator log

            -- Coordinator to BankA_DB: "ABORT"
            -- BankA_DB: Rollback transaction, releases locks ‚úì

            -- Coordinator to BankB_DB: "ABORT"
            -- BankB_DB: Rollback transaction ‚úì

            -- Transaction aborted cleanly ‚úì

            -- -----------------------------------------------------------
            -- 2PC Protocol Details
            -- -----------------------------------------------------------

            -- Coordinator State Machine:
            -- 1. INIT: Start transaction
            -- 2. PREPARING: Sent PREPARE to all participants
            -- 3. COMMITTED: All voted YES, sent COMMIT
            -- 4. ABORTED: Any voted NO, sent ABORT

            -- Participant State Machine:
            -- 1. INIT: Received transaction request
            -- 2. PREPARED: Voted YES, waiting for decision
            -- 3. COMMITTED: Received COMMIT, completed
            -- 4. ABORTED: Voted NO or received ABORT

            -- Message Flow:
            -- Coordinator ‚Üí Participant: PREPARE
            -- Participant ‚Üí Coordinator: YES/NO
            -- Coordinator ‚Üí Participant: COMMIT/ABORT
            -- Participant ‚Üí Coordinator: ACK

            -- -----------------------------------------------------------
            -- 2PC Implementation (Pseudo-code)
            -- -----------------------------------------------------------

            -- Coordinator:
            function two_phase_commit(participants):
                transaction_id = generate_id()
                
                // Phase 1: Prepare
                votes = []
                for participant in participants:
                    send_message(participant, "PREPARE", transaction_id)
                    vote = wait_for_response(participant, timeout=10s)
                    if vote == "NO" or timeout:
                        // Abort immediately
                        for p in participants:
                            send_message(p, "ABORT", transaction_id)
                        return ABORTED
                    votes.append(vote)
                
                // All voted YES
                // Phase 2: Commit
                write_log("COMMIT", transaction_id)  // Write decision to disk
                
                for participant in participants:
                    send_message(participant, "COMMIT", transaction_id)
                    wait_for_ack(participant)
                
                return COMMITTED

            -- Participant:
            function handle_prepare(transaction_id):
                try:
                    // Execute transaction locally
                    execute_transaction(transaction_id)
                    
                    // Check if can commit
                    if can_commit():
                        write_log("PREPARED", transaction_id)  // Write to disk
                        acquire_locks()
                        return "YES"
                    else:
                        return "NO"
                except Exception:
                    return "NO"

            function handle_commit(transaction_id):
                commit_transaction(transaction_id)
                release_locks()
                write_log("COMMITTED", transaction_id)
                return "ACK"

            function handle_abort(transaction_id):
                rollback_transaction(transaction_id)
                release_locks()
                write_log("ABORTED", transaction_id)
                return "ACK"</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">2PC Problems:</h4>
                        <ul>
                            <li><strong>Blocking:</strong> If coordinator crashes after PREPARE, participants stuck waiting (resources locked)</li>
                            <li><strong>Single Point of Failure:</strong> Coordinator crash can halt entire system</li>
                            <li><strong>Performance:</strong> Multiple network round trips add latency</li>
                            <li><strong>Not suitable for:</strong> Long-running transactions, high-latency networks</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- 2PC Blocking Problem

            -- Phase 1: PREPARE
            Coordinator ‚Üí BankA: "PREPARE"
            BankA ‚Üí Coordinator: "YES" ‚úì
            BankA now in PREPARED state (locks held, waiting)

            Coordinator ‚Üí BankB: "PREPARE"
            BankB ‚Üí Coordinator: "YES" ‚úì
            BankB now in PREPARED state (locks held, waiting)

            -- üí• COORDINATOR CRASHES HERE!

            -- BankA and BankB stuck in PREPARED state
            -- Resources locked indefinitely! ‚ùå
            -- Cannot commit (no decision from coordinator)
            -- Cannot abort (might violate atomicity if other participant commits)
            -- System blocked! ‚ö†

            -- Solution: Timeout and abort after X minutes
            -- Or: Use 3PC which avoids blocking</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        2. Three-Phase Commit (3PC)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Add an intermediate phase to avoid blocking. Ensures progress even if coordinator fails.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Three Phases:</h4>
                        <ol>
                            <li><strong>CanCommit:</strong> Ask if participants can commit</li>
                            <li><strong>PreCommit:</strong> Tell participants to prepare for commit</li>
                            <li><strong>DoCommit:</strong> Tell participants to actually commit</li>
                        </ol>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Three-Phase Commit Protocol

            -- Phase 1: CanCommit
            Coordinator ‚Üí Participants: "CanCommit?"
            Participants ‚Üí Coordinator: "YES" or "NO"

            -- If any NO: Abort immediately

            -- Phase 2: PreCommit
            Coordinator ‚Üí Participants: "PreCommit"
            -- Participants prepare but don't commit yet
            Participants ‚Üí Coordinator: "ACK"

            -- Phase 3: DoCommit
            Coordinator ‚Üí Participants: "DoCommit"
            Participants commit and release locks
            Participants ‚Üí Coordinator: "DONE"

            -- -----------------------------------------------------------
            -- 3PC Advantage: Non-blocking
            -- -----------------------------------------------------------

            -- If coordinator crashes after PreCommit:
            -- Participants know majority agreed to commit
            -- Can elect new coordinator and proceed
            -- No indefinite blocking! ‚úì

            -- Disadvantage:
            -- More network round trips (slower)
            -- Rarely used in practice
            -- Most systems accept 2PC blocking risk with timeouts</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-users"></i>
                        3. Consensus Algorithms (Paxos/Raft)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Modern alternative to 2PC. Designed for fault tolerance and partition tolerance.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">How Consensus Works:</h4>
                        <ul>
                            <li>Multiple nodes propose values</li>
                            <li>Nodes vote on proposals</li>
                            <li>Majority agreement required</li>
                            <li>Handles failures gracefully</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Raft Consensus Example (Simplified)

            -- Cluster: 5 nodes (Node1, Node2, Node3, Node4, Node5)
            -- Need majority (3 out of 5) to commit

            -- Client submits transaction:
            UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A';

            -- Step 1: Leader (Node1) receives request

            -- Step 2: Leader appends to its log
            [Entry 1: UPDATE Accounts A = 1500]

            -- Step 3: Leader replicates to followers
            Node1 ‚Üí Node2: "Append entry 1"
            Node1 ‚Üí Node3: "Append entry 1"
            Node1 ‚Üí Node4: "Append entry 1"
            Node1 ‚Üí Node5: "Append entry 1"

            -- Step 4: Wait for majority
            Node2 ‚Üí Node1: "ACK" ‚úì
            Node3 ‚Üí Node1: "ACK" ‚úì
            -- Majority reached (3/5: Node1, Node2, Node3) ‚úì

            -- Step 5: Leader commits entry
            -- Entry 1 now committed ‚úì

            -- Step 6: Leader notifies followers to commit
            Node1 ‚Üí All: "Commit entry 1"

            -- Step 7: Apply to state machine
            All nodes execute: UPDATE Accounts SET Balance = 1500 WHERE AccountID = 'A'

            -- Result: Durable across majority of nodes ‚úì

            -- -----------------------------------------------------------
            -- Failure Handling
            -- -----------------------------------------------------------

            -- If Node4 and Node5 crash:
            -- Still have majority (3/5) ‚úì
            -- System continues operating ‚úì

            -- If leader (Node1) crashes:
            -- Election triggered
            -- Node2 or Node3 becomes new leader
            -- System continues with minimal disruption ‚úì

            -- If network partition:
            -- Partition with majority continues
            -- Partition with minority blocks (cannot form quorum)
            -- Prevents split-brain! ‚úì

            -- -----------------------------------------------------------
            -- Used By:
            -- -----------------------------------------------------------
            -- ‚Ä¢ etcd (Raft)
            -- ‚Ä¢ Consul (Raft)
            -- ‚Ä¢ CockroachDB (Raft)
            -- ‚Ä¢ Google Spanner (Paxos variant)
            -- ‚Ä¢ Apache Zookeeper (Zab - similar to Paxos)</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Advantages over 2PC:</h4>
                        <ul>
                            <li>‚úì Non-blocking (can elect new leader)</li>
                            <li>‚úì Fault-tolerant (survives minority failures)</li>
                            <li>‚úì Partition-tolerant</li>
                            <li>‚úì Used in production distributed databases</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book-open"></i>
                        4. Saga Pattern
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Concept:</strong> Break long transaction into sequence of local transactions. Each step has a compensating transaction for rollback.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Saga Pattern Example: E-commerce Order

            -- Traditional Distributed Transaction (2PC):
            BEGIN DISTRIBUTED TRANSACTION;
                -- Service 1: Order Service
                INSERT INTO Orders VALUES (...)
                
                -- Service 2: Inventory Service  
                UPDATE Products SET Stock = Stock - 1
                
                -- Service 3: Payment Service
                CHARGE_CREDIT_CARD(...)
                
                -- Service 4: Shipping Service
                CREATE_SHIPMENT(...)
            COMMIT;

            -- Problem: Long locks across services ‚ùå
            -- What if payment takes 10 seconds? All locked!

            -- -----------------------------------------------------------
            -- Saga Pattern Solution
            -- -----------------------------------------------------------

            -- Saga: Sequence of local transactions

            -- Step 1: Create Order (Order Service)
            Transaction T1:
                INSERT INTO Orders VALUES (1, 'Pending')
                COMMIT;
                
            Compensating Transaction: 
                DELETE FROM Orders WHERE OrderID = 1

            -- Step 2: Reserve Inventory (Inventory Service)
            Transaction T2:
                UPDATE Products SET Stock = Stock - 1 WHERE ProductID = 101
                COMMIT;
                
            Compensating Transaction:
                UPDATE Products SET Stock = Stock + 1 WHERE ProductID = 101

            -- Step 3: Process Payment (Payment Service)
            Transaction T3:
                CHARGE_CREDIT_CARD(amount)
                INSERT INTO Payments VALUES (1, 'Completed')
                COMMIT;
                
            Compensating Transaction:
                REFUND_CREDIT_CARD(amount)
                UPDATE Payments SET Status = 'Refunded'

            -- Step 4: Create Shipment (Shipping Service)
            Transaction T4:
                INSERT INTO Shipments VALUES (1, 'Processing')
                COMMIT;
                
            Compensating Transaction:
                UPDATE Shipments SET Status = 'Cancelled'

            -- -----------------------------------------------------------
            -- Saga Execution - Success Path
            -- -----------------------------------------------------------

            Saga Coordinator:
            1. Execute T1 ‚Üí Success ‚úì
            2. Execute T2 ‚Üí Success ‚úì
            3. Execute T3 ‚Üí Success ‚úì
            4. Execute T4 ‚Üí Success ‚úì

            Result: Order completed! ‚úì

            -- -----------------------------------------------------------
            -- Saga Execution - Failure Path
            -- -----------------------------------------------------------

            Saga Coordinator:
            1. Execute T1 ‚Üí Success ‚úì
            2. Execute T2 ‚Üí Success ‚úì
            3. Execute T3 ‚Üí FAILED! ‚ùå (payment declined)

            Rollback (Execute Compensating Transactions):
            1. Compensate T2 ‚Üí Restore inventory ‚úì
            2. Compensate T1 ‚Üí Delete order ‚úì

            Result: Order cancelled, consistent state ‚úì

            -- -----------------------------------------------------------
            -- Saga Patterns
            -- -----------------------------------------------------------

            -- Choreography (Event-Driven):
            OrderService ‚Üí Creates order ‚Üí Publishes "OrderCreated" event
            InventoryService ‚Üí Listens ‚Üí Reserves inventory ‚Üí Publishes "InventoryReserved"
            PaymentService ‚Üí Listens ‚Üí Processes payment ‚Üí Publishes "PaymentCompleted"

            -- Orchestration (Centralized):
            SagaOrchestrator:
                1. Call OrderService.createOrder()
                2. Call InventoryService.reserveInventory()
                3. Call PaymentService.processPayment()
                4. If any fails: Execute compensations in reverse order

            -- -----------------------------------------------------------
            -- Saga Limitations
            -- -----------------------------------------------------------

            -- ‚úì No long locks (better performance)
            -- ‚úì Services stay independent
            -- ‚ö† Not true ACID (eventual consistency)
            -- ‚ö† Compensations may be visible to users
            -- ‚ö† Complex error handling
            -- ‚ö† Compensations must be idempotent</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-globe"></i>
                        5. Distributed ACID Databases
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Modern databases that provide ACID across distributed nodes:</strong></p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Google Spanner</h4>
                        <ul>
                            <li>Global distributed SQL database</li>
                            <li>Full ACID guarantees across regions</li>
                            <li>Uses TrueTime API (atomic clocks + GPS)</li>
                            <li>External consistency (linearizability)</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">CockroachDB</h4>
                        <ul>
                            <li>Open-source distributed SQL</li>
                            <li>Serializable isolation by default</li>
                            <li>Uses Raft consensus</li>
                            <li>Survives node/datacenter failures</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">YugabyteDB</h4>
                        <ul>
                            <li>PostgreSQL-compatible distributed database</li>
                            <li>ACID transactions across nodes</li>
                            <li>Raft consensus for durability</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- CockroachDB Example

            -- Create distributed table
            CREATE TABLE accounts (
                id UUID PRIMARY KEY,
                balance DECIMAL(15,2)
            ) SPLIT AT VALUES 
                ('00000000-0000-0000-0000-000000000000'),  -- US-East
                ('80000000-0000-0000-0000-000000000000');  -- US-West

            -- Transaction spans multiple nodes
            BEGIN;

            -- Update account in US-East node
            UPDATE accounts SET balance = balance - 500 
            WHERE id = '10000000-0000-0000-0000-000000000000';

            -- Update account in US-West node
            UPDATE accounts SET balance = balance + 500 
            WHERE id = 'a0000000-0000-0000-0000-000000000000';

            COMMIT;

            -- Behind the scenes:
            -- 1. Coordinator node elected
            -- 2. 2PC across participating nodes
            -- 3. Raft consensus for durability
            -- 4. Transaction ACID guaranteed ‚úì

            -- If US-West datacenter fails:
            -- Replicas in other datacenters take over
            -- Transaction continues ‚úì
            -- No data loss ‚úì

            -- -----------------------------------------------------------
            -- Performance Considerations
            -- -----------------------------------------------------------

            -- Local transaction (single region):
            -- Latency: ~1-5ms
            -- Throughput: 10,000+ TPS

            -- Cross-region transaction:
            -- Latency: ~50-200ms (network latency)
            -- Throughput: 100-1,000 TPS

            -- Trade-off: Consistency vs Latency</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        CAP Theorem Impact
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>CAP Theorem:</strong> Can only have 2 of 3: Consistency, Availability, Partition Tolerance</p>
                        
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <tr style="background: #dbeafe;">
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">System Type</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">CAP Choice</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Trade-off</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Traditional RDBMS (Single Node)</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CA (no partitions)</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Not partition-tolerant</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>2PC Distributed ACID</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP (blocks on partition)</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Sacrifices availability</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Google Spanner</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP (mostly)</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">High latency, expensive</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Cassandra/DynamoDB</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">AP (eventual consistency)</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Not immediately consistent</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Distributed ACID</span>
                        <span class="keyword-tag">Two-Phase Commit</span>
                        <span class="keyword-tag">2PC</span>
                        <span class="keyword-tag">Three-Phase Commit</span>
                        <span class="keyword-tag">Paxos</span>
                        <span class="keyword-tag">Raft</span>
                        <span class="keyword-tag">Saga Pattern</span>
                        <span class="keyword-tag">Consensus Algorithms</span>
                        <span class="keyword-tag">Google Spanner</span>
                        <span class="keyword-tag">CAP Theorem</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 93: What are the Limitations of ACID? -->
            <div class="question-content" id="q93">
                <div class="question-header">
                    <h1 class="question-title">What are the Limitations of ACID Properties?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p>While ACID properties provide strong guarantees for data integrity, they come with significant limitations and trade-offs. Understanding these limitations is crucial for choosing the right database architecture and for system design interviews.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Main Categories of Limitations:</strong></p>
                        <ol>
                            <li><strong>Performance</strong> - ACID is expensive</li>
                            <li><strong>Scalability</strong> - Hard to scale horizontally</li>
                            <li><strong>Availability</strong> - May sacrifice availability for consistency</li>
                            <li><strong>Flexibility</strong> - Rigid schema and operations</li>
                            <li><strong>Geographic Distribution</strong> - High latency across regions</li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-tachometer-alt"></i>
                        1. Performance Limitations
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Problem: ACID transactions are slow</h4>
                        
                        <p style="margin-top: 0.5rem;"><strong>Why ACID Is Expensive:</strong></p>
                        <ul>
                            <li><strong>Locking overhead:</strong> Acquiring and releasing locks takes time</li>
                            <li><strong>Disk I/O:</strong> Must write to transaction log (durability)</li>
                            <li><strong>Coordination:</strong> Multiple participants must synchronize</li>
                            <li><strong>Serialization:</strong> Transactions may wait for each other</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Performance Comparison

            -- Scenario: Insert 10,000 rows

            -- WITHOUT ACID (No durability, no transactions):
            for i in 1..10000:
                INSERT INTO Data VALUES (i, 'value');
            -- Time: ~0.5 seconds
            -- Throughput: 20,000 TPS ‚ö°

            -- WITH ACID (Full durability, transactions):
            for i in 1..10000:
                START TRANSACTION;
                INSERT INTO Data VALUES (i, 'value');
                COMMIT;  -- Flush to disk each time
            -- Time: ~10 seconds
            -- Throughput: 1,000 TPS üêå

            -- 20x slower due to ACID guarantees! ‚ö†

            -- -----------------------------------------------------------
            -- Lock Contention Example
            -- -----------------------------------------------------------

            -- Popular product update (high contention):
            -- 1000 users trying to buy same product

            START TRANSACTION ISOLATION LEVEL SERIALIZABLE;
            SELECT Stock FROM Products WHERE ProductID = 1 FOR UPDATE;
            -- First transaction acquires lock ‚úì
            -- Other 999 transactions WAIT ‚è≥

            -- Average wait time: 100ms per transaction
            -- Total time for 1000 transactions: 100 seconds!
            -- Throughput: 10 TPS (terrible!) ‚ùå

            -- Without ACID (eventual consistency):
            -- All 1000 transactions proceed immediately ‚ö°
            -- Throughput: 10,000+ TPS
            -- But: Might oversell product ‚ö†

            -- -----------------------------------------------------------
            -- Durability Cost
            -- -----------------------------------------------------------

            -- Disk write latency:
            -- SSD: ~0.1ms
            -- HDD: ~10ms

            -- Impact on throughput:
            -- With SSD: Max ~10,000 commits/second
            -- With HDD: Max ~100 commits/second

            -- Compare to in-memory (no durability):
            -- In-memory: 1,000,000+ operations/second ‚ö°

            -- 100-10,000x performance difference!

            -- -----------------------------------------------------------
            -- Real-World Impact
            -- -----------------------------------------------------------

            -- Twitter: 500 million tweets/day
            -- = ~5,800 tweets/second average
            -- = ~50,000 tweets/second peak

            -- Full ACID would require:
            -- Massive hardware investment
            -- Or: Accept eventual consistency instead ‚úì

            -- Solution: Relax ACID for non-critical operations
            -- - Tweets: Eventual consistency
            -- - Payments: Full ACID</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">When Performance Limitation Matters:</h4>
                        <ul>
                            <li>High-throughput systems (social media, IoT)</li>
                            <li>Real-time analytics</li>
                            <li>Caching layers</li>
                            <li>Session storage</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-expand-arrows-alt"></i>
                        2. Scalability Limitations
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Problem: Hard to scale ACID horizontally</h4>
                        
                        <p style="margin-top: 0.5rem;"><strong>Vertical Scaling (Scale Up):</strong></p>
                        <ul>
                            <li>‚úì Easier with ACID (single machine)</li>
                            <li>‚ùå Limited by hardware (max CPU, RAM, disk)</li>
                            <li>‚ùå Expensive (doubling capacity may cost 4x)</li>
                            <li>‚ùå Single point of failure</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Horizontal Scaling (Scale Out):</strong></p>
                        <ul>
                            <li>‚úì Unlimited scaling (add more machines)</li>
                            <li>‚úì Cost-effective (use commodity hardware)</li>
                            <li>‚úì Fault-tolerant (no single point of failure)</li>
                            <li>‚ùå Difficult with ACID (requires coordination)</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Scaling ACID Database

            -- Vertical Scaling Example:
            -- Year 1: Server with 16 cores, 64GB RAM
            -- Load: 1,000 TPS ‚úì

            -- Year 2: Load grows to 5,000 TPS
            -- Upgrade: 64 cores, 256GB RAM
            -- Cost: 4x more expensive ‚ö†

            -- Year 3: Load grows to 20,000 TPS
            -- Upgrade: Largest available server (128 cores, 1TB RAM)
            -- Cost: 10x more expensive ‚ö†‚ö†
            -- Still not enough capacity! ‚ùå

            -- -----------------------------------------------------------
            -- Horizontal Scaling Challenge
            -- -----------------------------------------------------------

            -- Sharding (Partition data across servers):

            -- User data partitioned by UserID:
            -- Shard 1 (Server A): UserID 1-1000000
            -- Shard 2 (Server B): UserID 1000001-2000000
            -- Shard 3 (Server C): UserID 2000001-3000000

            -- Single-shard transaction (works well):
            START TRANSACTION;
            UPDATE Users SET Balance = 100 WHERE UserID = 500;  -- Shard 1
            COMMIT;
            -- Fast, local ACID ‚úì

            -- Cross-shard transaction (problem!):
            START TRANSACTION;
            -- Transfer money between users on different shards
            UPDATE Users SET Balance = Balance - 50 WHERE UserID = 500;      -- Shard 1
            UPDATE Users SET Balance = Balance + 50 WHERE UserID = 1500000;  -- Shard 2
            COMMIT;

            -- Requires distributed transaction (2PC):
            -- - Coordinator must coordinate Shard 1 and Shard 2
            -- - Network latency added
            -- - Locks held longer
            -- - Higher failure rate
            -- - Lower throughput ‚ùå

            -- -----------------------------------------------------------
            -- NoSQL Solution (Sacrifice ACID)
            -- -----------------------------------------------------------

            -- MongoDB (Eventual Consistency):
            -- Can easily add more servers
            -- No cross-shard transaction coordination
            -- Throughput: Scales linearly with servers ‚úì
            -- But: No ACID guarantees ‚ö†

            -- Cassandra:
            -- Scales to thousands of nodes
            -- Throughput: Millions of operations/second ‚úì
            -- But: Eventual consistency only ‚ö†

            -- -----------------------------------------------------------
            -- Real Numbers
            -- -----------------------------------------------------------

            -- Single PostgreSQL server:
            -- Max throughput: ~10,000 TPS (with ACID)
            -- Cost: $10,000+/month for high-end hardware

            -- Cassandra cluster (10 nodes):
            -- Throughput: ~100,000 TPS (without ACID)
            -- Cost: $5,000/month (cheaper commodity servers)

            -- Trade-off: 10x throughput, half the cost
            -- But: No strong consistency ‚ö†</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-clock"></i>
                        3. Availability Limitations
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Problem: ACID may reduce availability (CAP theorem)</h4>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- CAP Theorem Impact on ACID

            -- Traditional ACID (Single datacenter):
            -- Availability: 99.9% (43 minutes downtime/month)
            -- If datacenter has network issue: Entire system down ‚ùå

            -- Distributed ACID with Strong Consistency:
            -- Must wait for all replicas to agree
            -- If one replica is slow/unavailable: Entire transaction blocked ‚ö†

            -- Example: Cross-region transaction
            -- Region 1 (US-East): Available ‚úì
            -- Region 2 (US-West): Network partition! ‚ùå

            START TRANSACTION;
            UPDATE Data SET Value = 100;  -- Needs both regions
            COMMIT;

            -- ACID approach (CP - Consistency + Partition tolerance):
            -- Transaction BLOCKED until partition resolved
            -- System unavailable for writes ‚ùå
            -- Availability sacrificed for consistency ‚ö†

            -- BASE approach (AP - Availability + Partition tolerance):
            -- Write to US-East immediately ‚úì
            -- US-West syncs when partition resolved ‚úì
            -- System remains available ‚úì
            -- But: Temporary inconsistency ‚ö†

            -- -----------------------------------------------------------
            -- Deadlock Impact on Availability
            -- -----------------------------------------------------------

            -- High-contention scenario:
            -- Transaction 1: Locks A, tries to lock B
            -- Transaction 2: Locks B, tries to lock A
            -- DEADLOCK! ‚ö†

            -- Database detects deadlock, aborts one transaction
            -- ERROR 1213: Deadlock found
            -- Application must retry

            -- Impact on availability:
            -- User sees error or slow response
            -- Perceived unavailability ‚ö†

            -- Frequency increases with:
            -- - Higher transaction rate
            -- - Higher isolation level
            -- - More complex transactions

            -- Real example: E-commerce site
            -- Black Friday traffic: 100x normal load
            -- Deadlock rate: 5% of transactions ‚ùå
            -- Users see errors and failed checkouts
            -- Lost revenue! üí∞

            -- -----------------------------------------------------------
            -- Maintenance Downtime
            -- -----------------------------------------------------------

            -- Schema changes with ACID:
            ALTER TABLE Users ADD COLUMN email VARCHAR(255);

            -- Problem: Table locked during ALTER
            -- - Large table: Hours of downtime ‚ùå
            -- - No writes allowed during this time
            -- - Planned unavailability required

            -- NoSQL (schema-less):
            -- Just start writing new field
            -- No downtime ‚úì
            -- But: No schema enforcement ‚ö†</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-globe"></i>
                        4. Geographic Distribution Limitations
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Problem: High latency for globally distributed ACID</h4>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Latency Impact

            -- Speed of light limit:
            -- US East to US West: ~60ms round-trip
            -- US to Europe: ~100ms round-trip
            -- US to Asia: ~200ms round-trip

            -- Physics cannot be overcome! ‚ö†

            -- Local transaction (same datacenter):
            START TRANSACTION;
            UPDATE Data SET Value = 100;
            COMMIT;
            -- Latency: 1-5ms ‚úì

            -- Cross-region transaction (US-East to US-West):
            START TRANSACTION;
            UPDATE Data SET Value = 100;
            COMMIT;
            -- Latency: 60-100ms ‚ö†
            -- 20x slower!

            -- Cross-continent transaction (US to Europe):
            START TRANSACTION;
            UPDATE Data SET Value = 100;
            COMMIT;
            -- Latency: 100-150ms ‚ö†‚ö†
            -- 30x slower!

            -- -----------------------------------------------------------
            -- Multi-Region ACID Trade-offs
            -- -----------------------------------------------------------

            -- Option 1: Strong Consistency (Google Spanner)
            -- Every transaction waits for multiple regions
            -- Latency: 100-200ms per transaction
            -- Throughput: Limited by latency
            -- Cost: Very expensive (special hardware, atomic clocks)

            -- Option 2: Single-Region ACID
            -- Fast within region (1-5ms)
            -- But: No geographic redundancy
            -- Region failure = total outage ‚ùå

            -- Option 3: Eventual Consistency (DynamoDB Global Tables)
            -- Write to local region immediately (5ms) ‚úì
            -- Replicate asynchronously to other regions
            -- Reads may be stale (seconds) ‚ö†
            -- But: Low latency + geographic redundancy ‚úì

            -- -----------------------------------------------------------
            -- Real-World Example: Gaming Leaderboard
            -- -----------------------------------------------------------

            -- ACID approach:
            -- Global leaderboard with strong consistency
            -- Player in US updates score
            -- Must sync with servers in EU and Asia
            -- Latency: 200ms+ per update
            -- Player experience: Sluggish ‚ùå

            -- Eventual consistency approach:
            -- Update local region immediately (5ms) ‚úì
            -- Replicate to other regions asynchronously
            -- Leaderboard may be slightly stale (seconds)
            -- Player experience: Fast ‚úì
            -- Trade-off acceptable for gaming ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-tools"></i>
                        5. Operational Complexity
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Problem: ACID systems are complex to operate</h4>
                        
                        <ul>
                            <li><strong>Monitoring:</strong> Must track locks, deadlocks, transaction times</li>
                            <li><strong>Tuning:</strong> Complex isolation levels, timeouts, lock settings</li>
                            <li><strong>Backup/Recovery:</strong> Point-in-time recovery, transaction log management</li>
                            <li><strong>Schema Changes:</strong> Require careful planning (downtime risk)</li>
                            <li><strong>Debugging:</strong> Concurrency bugs hard to reproduce</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Common Operational Challenges

            -- 1. Transaction Log Growth
            -- Transaction log can grow unbounded
            -- Must be archived/truncated regularly
            -- If disk fills: Database stops accepting writes! ‚ùå

            -- 2. Long-Running Transactions
            -- One long transaction blocks others
            -- Must monitor and kill if needed
            SELECT * FROM information_schema.innodb_trx WHERE trx_started < NOW() - INTERVAL 1 HOUR;
            -- Kill long transactions:
            KILL transaction_id;

            -- 3. Deadlock Monitoring
            SHOW ENGINE INNODB STATUS;
            -- Shows recent deadlocks
            -- Must analyze and optimize queries

            -- 4. Lock Escalation
            -- Too many row locks ‚Üí table lock
            -- Can block entire table ‚ùå

            -- 5. Connection Pooling
            -- Each connection = potential transaction
            -- Must tune pool size carefully
            -- Too few: Slow responses
            -- Too many: Resource exhaustion

            -- NoSQL Alternative:
            -- Simpler operational model
            -- No transaction logs to manage
            -- No deadlocks to monitor
            -- But: Less consistency guarantees ‚ö†</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        When ACID Limitations Are Acceptable
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Use Case</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ACID Appropriate?</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Reason</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Banking transactions</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Yes ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Correctness > Performance</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>E-commerce checkout</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Yes ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Prevent overselling, double charging</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Healthcare records</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Yes ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Legal requirements, patient safety</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Social media posts</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Scale + availability more important</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Analytics/logs</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Approximate data acceptable</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Session storage</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Can recreate, speed critical</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Real-time gaming</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Latency kills user experience</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Hybrid Approaches (Best of Both Worlds)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Modern systems use hybrid architectures:</strong></p>
                        
                        <ol>
                            <li><strong>Polyglot Persistence:</strong>
                                <ul>
                                    <li>Critical data: ACID database (PostgreSQL, MySQL)</li>
                                    <li>High-volume data: NoSQL (Cassandra, MongoDB)</li>
                                    <li>Caching: Redis, Memcached</li>
                                    <li>Search: Elasticsearch</li>
                                </ul>
                            </li>
                            
                            <li><strong>Event Sourcing + CQRS:</strong>
                                <ul>
                                    <li>Write side: ACID for event store</li>
                                    <li>Read side: Eventually consistent projections</li>
                                    <li>Best of both worlds ‚úì</li>
                                </ul>
                            </li>
                            
                            <li><strong>Tiered Consistency:</strong>
                                <ul>
                                    <li>Critical operations: Strong consistency</li>
                                    <li>Read-heavy operations: Eventual consistency</li>
                                    <li>Per-operation choice ‚úì</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">ACID Limitations</span>
                        <span class="keyword-tag">Performance Trade-offs</span>
                        <span class="keyword-tag">Scalability Challenges</span>
                        <span class="keyword-tag">Availability vs Consistency</span>
                        <span class="keyword-tag">CAP Theorem</span>
                        <span class="keyword-tag">Latency</span>
                        <span class="keyword-tag">Horizontal Scaling</span>
                        <span class="keyword-tag">Eventual Consistency</span>
                        <span class="keyword-tag">Hybrid Architecture</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- Question 94: What is the difference between ACID and BASE? -->
            <div class="question-content" id="q94">
                <div class="question-header">
                    <h1 class="question-title">What is the Difference Between ACID and BASE?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Conceptual</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>ACID and BASE</strong> are two contrasting approaches to database transaction management. ACID prioritizes consistency and correctness, while BASE prioritizes availability and scalability. The choice between them depends on application requirements.</p>
                        
                        <p style="margin-top: 1rem;"><strong>ACID (Traditional Databases):</strong></p>
                        <ul>
                            <li><strong>A</strong>tomicity - All or nothing</li>
                            <li><strong>C</strong>onsistency - Valid state to valid state</li>
                            <li><strong>I</strong>solation - Transactions don't interfere</li>
                            <li><strong>D</strong>urability - Permanent once committed</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>BASE (NoSQL/Distributed Databases):</strong></p>
                        <ul>
                            <li><strong>B</strong>asically <strong>A</strong>vailable - System available most of the time</li>
                            <li><strong>S</strong>oft state - State may change without input (eventual consistency)</li>
                            <li><strong>E</strong>ventual consistency - System becomes consistent eventually</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>The Trade-off:</strong></p>
                        <p>ACID and BASE represent different points on the consistency-availability spectrum. ACID guarantees strong consistency but may sacrifice availability/scalability. BASE guarantees availability/scalability but may sacrifice immediate consistency.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        ACID vs BASE Comparison
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ACID</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">BASE</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Consistency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Strong, immediate</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Eventual (becomes consistent over time)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Availability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">May be unavailable during failures</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Highly available (always responds)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Scalability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Vertical (scale up)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Horizontal (scale out)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Performance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Slower (locks, coordination)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Faster (no coordination)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Data Model</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Structured (tables, schema)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Flexible (documents, key-value)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Examples</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MySQL, PostgreSQL, Oracle</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cassandra, DynamoDB, Riak</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Best For</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Financial, critical data</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Social media, analytics, logs</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>CAP Choice</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP (Consistency + Partition tolerance)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">AP (Availability + Partition tolerance)</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        ACID vs BASE Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- -----------------------------------------------------------
            -- ACID Example: Bank Transfer (Must be Consistent!)
            -- -----------------------------------------------------------

            -- Traditional RDBMS with ACID
            START TRANSACTION;

            -- Both operations must succeed or both fail (Atomicity)
            UPDATE Accounts SET Balance = Balance - 500 WHERE AccountID = 'A';
            UPDATE Accounts SET Balance = Balance + 500 WHERE AccountID = 'B';

            -- Check constraint ensures consistency
            -- No negative balances allowed (Consistency)

            COMMIT;  -- Changes permanent (Durability)

            -- Other transactions don't see intermediate state (Isolation)
            -- Total money always conserved ‚úì
            -- No user ever sees inconsistent data ‚úì

            -- -----------------------------------------------------------
            -- BASE Example: Social Media Like Count (Eventual Consistency OK)
            -- -----------------------------------------------------------

            -- NoSQL database (Cassandra/DynamoDB style)
            // User clicks "Like" on post
            POST /posts/123/like

            // Response returns immediately (Availability) ‚ö°
            // { "status": "success", "likes": 1001 }

            // Behind the scenes:
            // 1. Write to local node immediately
            // 2. Asynchronously replicate to other nodes
            // 3. Different users may see different like counts temporarily

            // User A (reads from Node 1): Sees 1001 likes
            // User B (reads from Node 2): Sees 1000 likes (not replicated yet)
            // User C (reads from Node 3): Sees 1001 likes

            // Eventually (seconds later):
            // All nodes synchronized, everyone sees 1001 likes ‚úì

            -- Eventual Consistency: OK for social media!
            -- Users don't notice brief inconsistency
            -- System highly available (no single point of failure) ‚úì

            -- -----------------------------------------------------------
            -- ACID: Strong Consistency Example
            -- -----------------------------------------------------------

            -- Booking last seat on flight
            -- ACID ensures no double-booking

            START TRANSACTION ISOLATION LEVEL SERIALIZABLE;

            -- Check availability
            SELECT Availability FROM Seats WHERE SeatID = '12A' FOR UPDATE;
            -- Returns: 1 seat available
            -- Row locked ‚úì

            -- User A proceeds to book
            IF Availability = 1 THEN
                UPDATE Seats SET Availability = 0 WHERE SeatID = '12A';
                INSERT INTO Bookings VALUES (user_a, '12A', NOW());
                COMMIT;
            END IF;

            -- User B tries simultaneously
            START TRANSACTION;
            SELECT Availability FROM Seats WHERE SeatID = '12A' FOR UPDATE;
            -- WAITS for User A's transaction to complete
            -- After User A commits, User B sees Availability = 0
            -- User B cannot book (seat taken) ‚úì

            -- Strong consistency prevents double-booking ‚úì
            -- But: User B had to wait (availability tradeoff)

            -- -----------------------------------------------------------
            -- BASE: Eventual Consistency Example
            -- -----------------------------------------------------------

            -- Product view counter (doesn't need immediate accuracy)

            // Product page viewed
            POST /products/456/view

            // Increment counter on local node (no coordination)
            increment_counter("product:456:views", 1)

            // Response immediate (no waiting for other nodes) ‚ö°
            // { "status": "success" }

            // Different analytics servers may show different counts:
            // Server 1: 10,245 views
            // Server 2: 10,230 views (slightly behind)
            // Server 3: 10,250 views (slightly ahead due to buffering)

            // Eventually all servers converge to same count
            // Difference: Temporary, acceptable for analytics
            // Benefit: Fast, scalable, always available ‚úì

            -- -----------------------------------------------------------
            -- When ACID Fails Without Proper Handling
            -- -----------------------------------------------------------

            -- Distributed system trying to maintain ACID everywhere
            -- Two-phase commit across regions

            -- Node 1 (US): Ready to commit
            -- Node 2 (EU): Ready to commit
            -- Node 3 (Asia): Network partition! Cannot reach coordinator

            -- ACID approach: WAIT for Node 3
            // System becomes UNAVAILABLE ‚ùå
            // Users in US and EU cannot complete transactions
            // Waiting... waiting... timeout after 30 seconds
            // Transaction aborted

            -- BASE approach: Proceed without Node 3
            // US and EU nodes commit immediately ‚úì
            // System remains AVAILABLE ‚úì
            // Node 3 catches up when network restored
            // Eventual consistency maintained ‚úì

            -- -----------------------------------------------------------
            -- Real-World Example: E-Commerce Cart
            -- -----------------------------------------------------------

            -- ACID (Inventory Management):
            START TRANSACTION;

            -- Check stock
            SELECT Stock FROM Products WHERE ProductID = 101 FOR UPDATE;
            -- Stock = 1 (last item!)

            -- User A completes checkout
            UPDATE Products SET Stock = 0 WHERE ProductID = 101;
            INSERT INTO Orders VALUES (...);
            COMMIT;

            -- User B tries to checkout same item
            SELECT Stock FROM Products WHERE ProductID = 101;
            -- Stock = 0
            -- Cannot complete order ‚úì
            -- Strong consistency prevents overselling ‚úì

            -- BASE (Shopping Cart Items):
            // User adds item to cart
            // Cart stored in fast cache (Redis, Memcached)
            // No strong consistency needed
            // Different sessions may see slightly different cart states
            // Eventually consistent when user checks out

            -- -----------------------------------------------------------
            -- Hybrid Approach (Common in Modern Systems)
            -- -----------------------------------------------------------

            -- Critical data: ACID
            -- - Orders (MySQL with ACID)
            -- - Payments (PostgreSQL with ACID)
            -- - Inventory (ACID to prevent overselling)

            -- Non-critical data: BASE
            -- - Product views (DynamoDB)
            -- - User sessions (Redis)
            -- - Search index (Elasticsearch)
            -- - Logs (Cassandra)

            -- Best of both worlds! ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        CAP Theorem Relationship
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>CAP Theorem:</strong> In a distributed system, you can have at most 2 out of 3:</p>
                        <ul>
                            <li><strong>C</strong>onsistency - All nodes see same data at same time</li>
                            <li><strong>A</strong>vailability - System always responds to requests</li>
                            <li><strong>P</strong>artition tolerance - Works despite network failures</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>How ACID and BASE Relate:</strong></p>
                        <ul>
                            <li><strong>ACID systems</strong> typically choose <strong>CP</strong> (Consistency + Partition tolerance)</li>
                            <li><strong>BASE systems</strong> typically choose <strong>AP</strong> (Availability + Partition tolerance)</li>
                        </ul>
                        
                        <div style="text-align: center; margin: 2rem 0;">
                            <svg viewBox="0 0 600 400" style="max-width: 100%; height: auto;">
                                <!-- Triangle -->
                                <path d="M 300 50 L 100 350 L 500 350 Z" fill="none" stroke="#3b82f6" stroke-width="3"/>
                                
                                <!-- Labels at corners -->
                                <text x="300" y="40" font-size="16" font-weight="bold" fill="#1e40af" text-anchor="middle">Consistency (C)</text>
                                <text x="80" y="370" font-size="16" font-weight="bold" fill="#1e40af" text-anchor="middle">Availability (A)</text>
                                <text x="520" y="370" font-size="16" font-weight="bold" fill="#1e40af" text-anchor="middle">Partition Tolerance (P)</text>
                                
                                <!-- ACID region (C+P) -->
                                <circle cx="200" cy="200" r="80" fill="#d1fae5" opacity="0.7" stroke="#10b981" stroke-width="2"/>
                                <text x="200" y="195" font-size="14" font-weight="bold" fill="#065f46" text-anchor="middle">ACID</text>
                                <text x="200" y="215" font-size="11" fill="#333" text-anchor="middle">(CP)</text>
                                
                                <!-- BASE region (A+P) -->
                                <circle cx="400" cy="200" r="80" fill="#fef3c7" opacity="0.7" stroke="#f59e0b" stroke-width="2"/>
                                <text x="400" y="195" font-size="14" font-weight="bold" fill="#92400e" text-anchor="middle">BASE</text>
                                <text x="400" y="215" font-size="11" fill="#333" text-anchor="middle">(AP)</text>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>When should I use ACID vs BASE?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Use ACID when:</strong></p>
                                <ul>
                                    <li>‚úì Financial transactions (money, payments)</li>
                                    <li>‚úì Inventory management (prevent overselling)</li>
                                    <li>‚úì Healthcare records (accuracy critical)</li>
                                    <li>‚úì Legal documents (consistency required)</li>
                                    <li>‚úì Any data where inconsistency causes real problems</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Use BASE when:</strong></p>
                                <ul>
                                    <li>‚úì Social media (likes, comments, views)</li>
                                    <li>‚úì Analytics (approximate counts OK)</li>
                                    <li>‚úì Caching (stale data tolerable)</li>
                                    <li>‚úì Logging (eventual accuracy fine)</li>
                                    <li>‚úì Any data where temporary inconsistency acceptable</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Hybrid Approach (Best):</strong></p>
                                <ul>
                                    <li>‚úì Use ACID for critical data</li>
                                    <li>‚úì Use BASE for high-volume, non-critical data</li>
                                    <li>‚úì Most modern systems use both!</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>What does "eventual consistency" mean in practice?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Eventual consistency means data becomes consistent over time, but not immediately.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>// Real-world example: Twitter follower count

            // User A tweets
            POST /tweets
            // Tweet written to local datacenter (US West)

            // Immediately after:
            // US West datacenter: Shows tweet ‚úì
            // US East datacenter: Doesn't show tweet yet (replicating...)
            // Europe datacenter: Doesn't show tweet yet (replicating...)

            // 100ms later:
            // US East datacenter: Shows tweet ‚úì

            // 500ms later:
            // Europe datacenter: Shows tweet ‚úì

            // Eventually (< 1 second): All datacenters consistent ‚úì

            // Users don't notice because:
            // - Reads from nearest datacenter
            // - Their own writes visible immediately (read-your-writes)
            // - Other users' tweets appear "eventually"
            // - Acceptable delay for social media</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Typical Eventual Consistency Windows:</strong></p>
                                <ul>
                                    <li>Same datacenter: Milliseconds</li>
                                    <li>Cross-region: Seconds</li>
                                    <li>Global distribution: Few seconds</li>
                                </ul>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can you have both ACID and high availability?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes, but with tradeoffs and significant complexity:</strong></p>
                                
                                <ol>
                                    <li><strong>Distributed SQL Databases:</strong>
                                        <ul>
                                            <li>Google Spanner, CockroachDB, YugabyteDB</li>
                                            <li>Provide ACID across distributed nodes</li>
                                            <li>Use sophisticated consensus protocols (Raft, Paxos)</li>
                                            <li>Higher latency than single-node ACID</li>
                                            <li>More expensive to run</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Active-Active Replication:</strong>
                                        <ul>
                                            <li>Multiple master databases</li>
                                            <li>Conflict resolution strategies</li>
                                            <li>Complex to implement correctly</li>
                                        </ul>
                                    </li>
                                    
                                    <li><strong>Trade-offs:</strong>
                                        <ul>
                                            <li>Higher cost (more servers, more complex)</li>
                                            <li>Higher latency (coordination overhead)</li>
                                            <li>More operational complexity</li>
                                        </ul>
                                    </li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>Reality:</strong> You can get close, but physics imposes limits (speed of light, network delays).</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">ACID</span>
                        <span class="keyword-tag">BASE</span>
                        <span class="keyword-tag">Eventual Consistency</span>
                        <span class="keyword-tag">Strong Consistency</span>
                        <span class="keyword-tag">CAP Theorem</span>
                        <span class="keyword-tag">Availability</span>
                        <span class="keyword-tag">Partition Tolerance</span>
                        <span class="keyword-tag">NoSQL</span>
                        <span class="keyword-tag">Distributed Systems</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

<!-- ---------------------New Section ----------- -->
            <!-- Question 167: What is CAP Theorem? -->
            <div class="question-content" id="q167">
                <div class="question-header">
                    <h1 class="question-title">What is CAP Theorem?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>CAP Theorem</strong> (also called Brewer's Theorem) states that in a distributed data system, it is impossible to simultaneously provide all three of the following guarantees:</p>
                        
                        <ul style="margin-top: 1rem;">
                            <li><strong>C</strong>onsistency - All nodes see the same data at the same time</li>
                            <li><strong>A</strong>vailability - Every request receives a response (success or failure)</li>
                            <li><strong>P</strong>artition tolerance - System continues to operate despite network failures</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>The Key Insight:</strong></p>
                        <p>You can only have TWO out of THREE properties simultaneously. When a network partition occurs (which is inevitable in distributed systems), you must choose between consistency and availability.</p>
                        
                        <p style="margin-top: 1rem;"><strong>History:</strong></p>
                        <ul>
                            <li>Proposed by Eric Brewer in 2000</li>
                            <li>Proven as a theorem by Seth Gilbert and Nancy Lynch in 2002</li>
                            <li>Fundamental principle in distributed systems design</li>
                            <li>Guides database architecture decisions</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Why It Matters:</strong></p>
                        <ul>
                            <li>No "perfect" distributed database exists</li>
                            <li>Every system makes trade-offs</li>
                            <li>Understanding CAP helps choose right database</li>
                            <li>Critical for system design interviews</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        CAP Theorem Visual
                    </div>
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 700 550" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="350" y="30" font-size="20" font-weight="bold" fill="#1e40af" text-anchor="middle">CAP Theorem Triangle</text>
                            
                            <!-- Triangle -->
                            <path d="M 350 80 L 150 450 L 550 450 Z" fill="none" stroke="#3b82f6" stroke-width="4"/>
                            
                            <!-- Corner Labels -->
                            <text x="350" y="65" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Consistency (C)</text>
                            <text x="350" y="85" font-size="12" fill="#475569" text-anchor="middle">All nodes see same data</text>
                            
                            <text x="120" y="475" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Availability (A)</text>
                            <text x="120" y="495" font-size="12" fill="#475569" text-anchor="middle">Every request gets response</text>
                            
                            <text x="580" y="475" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Partition Tolerance (P)</text>
                            <text x="580" y="495" font-size="12" fill="#475569" text-anchor="middle">Works despite network failures</text>
                            
                            <!-- CA Region (Top) -->
                            <circle cx="250" cy="265" r="90" fill="#dbeafe" opacity="0.7" stroke="#3b82f6" stroke-width="2"/>
                            <text x="250" y="260" font-size="16" font-weight="bold" fill="#1e3a8a" text-anchor="middle">CA</text>
                            <text x="250" y="280" font-size="11" fill="#1e3a8a" text-anchor="middle">Traditional</text>
                            <text x="250" y="295" font-size="11" fill="#1e3a8a" text-anchor="middle">RDBMS</text>
                            
                            <!-- CP Region (Right) -->
                            <circle cx="450" cy="265" r="90" fill="#fef3c7" opacity="0.7" stroke="#f59e0b" stroke-width="2"/>
                            <text x="450" y="260" font-size="16" font-weight="bold" fill="#92400e" text-anchor="middle">CP</text>
                            <text x="450" y="280" font-size="11" fill="#92400e" text-anchor="middle">MongoDB</text>
                            <text x="450" y="295" font-size="11" fill="#92400e" text-anchor="middle">HBase</text>
                            
                            <!-- AP Region (Bottom) -->
                            <circle cx="350" cy="380" r="90" fill="#d1fae5" opacity="0.7" stroke="#10b981" stroke-width="2"/>
                            <text x="350" y="375" font-size="16" font-weight="bold" fill="#065f46" text-anchor="middle">AP</text>
                            <text x="350" y="395" font-size="11" fill="#065f46" text-anchor="middle">Cassandra</text>
                            <text x="350" y="410" font-size="11" fill="#065f46" text-anchor="middle">DynamoDB</text>
                            
                            <!-- Key Insight Box -->
                            <rect x="50" y="520" width="600" height="25" fill="#fee2e2" stroke="#dc2626" stroke-width="2" rx="5"/>
                            <text x="350" y="538" font-size="13" font-weight="bold" fill="#991b1b" text-anchor="middle">Pick Any Two: You Cannot Have All Three Simultaneously!</text>
                        </svg>
                    </div>
                </div>

                <div class="content-card" style="color: #0d1117;">
                    <div class="section-title" >
                        <i class="fas fa-lightbulb" ></i>
                        Simple Analogy
                    </div>
                    <div class="explanation-text" style="color: black;">
                        <p><strong style="color: white;">The Restaurant Analogy:</strong></p>
                        
                        <p style="margin-top: 1rem; color: white;">Imagine a restaurant chain with locations in different cities, all sharing a menu system:</p>
                        
                        <div class="example-box" style="margin-top: 1rem; background: #f0f9ff; padding: 1rem; border-left: 4px solid #3b82f6;">
                            <p><strong>Consistency (C):</strong></p>
                            <p>All restaurant locations show the same menu at the same time. If New York updates the price of a burger, all locations immediately see the new price.</p>
                            
                            <p style="margin-top: 1rem;"><strong>Availability (A):</strong></p>
                            <p>Every customer who asks for the menu gets a menu, immediately, no waiting. The restaurant never says "sorry, we can't show you the menu right now."</p>
                            
                            <p style="margin-top: 1rem;"><strong>Partition Tolerance (P):</strong></p>
                            <p>Even if the phone lines between cities are cut (network partition), each restaurant location continues to operate and serve customers.</p>
                            
                            <p style="margin-top: 1rem;"><strong>The Problem:</strong></p>
                            <p>If phone lines are cut between New York and Los Angeles:</p>
                            <ul>
                                <li><strong>CA approach:</strong> "We can't operate until phone lines restored" (not partition-tolerant)</li>
                                <li><strong>CP approach:</strong> "We'll keep consistent data, but some locations closed until sync" (not available)</li>
                                <li><strong>AP approach:</strong> "All locations stay open, but menus might differ temporarily" (not consistent)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        CAP in Action - Real Example
                    </div>
                    <div class="example-box">
                        <pre><code>-- Scenario: User Profile System (Distributed Across 3 Datacenters)
            -- User updates profile picture

            -- Datacenter 1 (US-East)
            -- Datacenter 2 (US-West)  
            -- Datacenter 3 (Europe)

            -- Initial State: All datacenters have profile_pic = "old.jpg"

            -- -----------------------------------------------------------
            -- CA System (Consistency + Availability, NO Partition Tolerance)
            -- -----------------------------------------------------------

            -- User in US-East updates profile:
            UPDATE Users SET profile_pic = 'new.jpg' WHERE user_id = 123;

            -- CA System behavior:
            -- 1. Update US-East ‚úì
            -- 2. Synchronously update US-West ‚úì
            -- 3. Synchronously update Europe ‚úì
            -- 4. Return success only when ALL updated ‚úì

            -- Result: All datacenters consistent ‚úì
            -- All requests get response ‚úì

            -- But what if Europe datacenter network fails? üîå
            -- üí• Network Partition!

            -- CA System response:
            -- "Cannot complete update - Europe unreachable"
            -- System becomes UNAVAILABLE ‚ùå
            -- Not Partition Tolerant ‚ùå

            -- Real Example: Traditional single-datacenter MySQL
            -- Works great until network issues occur

            -- -----------------------------------------------------------
            -- CP System (Consistency + Partition Tolerance, NO Availability)
            -- -----------------------------------------------------------

            -- User updates profile:
            UPDATE Users SET profile_pic = 'new.jpg' WHERE user_id = 123;

            -- CP System behavior (with partition):
            -- 1. Update US-East ‚úì
            -- 2. Try to update US-West (network partition!) ‚ùå
            -- 3. Try to update Europe (network partition!) ‚ùå

            -- CP System response:
            -- "Majority not reachable, cannot guarantee consistency"
            -- REJECT the update ‚ùå
            -- System remains consistent (all still have old.jpg) ‚úì
            -- But NOT AVAILABLE for writes ‚ùå

            -- Reads also may be blocked to ensure consistency
            -- "Cannot serve read - might return stale data"

            -- Result: 
            -- Consistency maintained ‚úì
            -- Partition tolerant (system operational) ‚úì
            -- But NOT AVAILABLE (requests rejected) ‚ùå

            -- Real Examples: MongoDB, HBase, ZooKeeper
            -- Sacrifice availability to maintain consistency

            -- -----------------------------------------------------------
            -- AP System (Availability + Partition Tolerance, NO Consistency)
            -- -----------------------------------------------------------

            -- User updates profile:
            UPDATE Users SET profile_pic = 'new.jpg' WHERE user_id = 123;

            -- AP System behavior (with partition):
            -- 1. Update US-East immediately ‚úì
            -- 2. Return success to user immediately ‚úì
            -- 3. Queue updates to US-West and Europe
            -- 4. Sync when network restored

            -- Immediate results:
            -- US-East: profile_pic = 'new.jpg' ‚úì
            -- US-West: profile_pic = 'old.jpg' (not synced yet) ‚ö†
            -- Europe: profile_pic = 'old.jpg' (not synced yet) ‚ö†

            -- Different users see different data!
            -- User in US-East sees new picture ‚úì
            -- User in Europe sees old picture ‚ö†
            -- INCONSISTENT ‚ùå

            -- But:
            -- System available everywhere ‚úì
            -- Works despite partition ‚úì
            -- Eventually consistent (syncs later) ‚úì

            -- Real Examples: Cassandra, DynamoDB, Riak
            -- Sacrifice immediate consistency for availability

            -- -----------------------------------------------------------
            -- Timeline View of AP System
            -- -----------------------------------------------------------

            -- Time 0:00 - User updates in US-East
            US-East:  profile_pic = 'new.jpg' ‚úì
            US-West:  profile_pic = 'old.jpg' (stale)
            Europe:   profile_pic = 'old.jpg' (stale)

            -- Time 0:01 - US-West syncs
            US-East:  profile_pic = 'new.jpg' ‚úì
            US-West:  profile_pic = 'new.jpg' ‚úì
            Europe:   profile_pic = 'old.jpg' (still stale)

            -- Time 0:05 - Europe network restored, syncs
            US-East:  profile_pic = 'new.jpg' ‚úì
            US-West:  profile_pic = 'new.jpg' ‚úì
            Europe:   profile_pic = 'new.jpg' ‚úì

            -- Eventually Consistent! ‚úì</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Comparison Table
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">System Type</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Guarantees</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Sacrifices</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Examples</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>CA</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Consistency + Availability</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Partition Tolerance</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Single-server RDBMS</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>CP</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Consistency + Partition Tolerance</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Availability</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MongoDB, HBase, Redis</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>AP</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Availability + Partition Tolerance</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Consistency</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cassandra, DynamoDB, CouchDB</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-question-circle"></i>
                        Cross Questions
                    </div>
                    
                    <div class="cross-questions">
                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Why can't we have all three (C, A, P)?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Mathematical impossibility due to network realities:</strong></p>
                                
                                <p style="margin-top: 1rem;">Imagine two nodes separated by a network partition:</p>
                                <ul>
                                    <li><strong>Node A</strong> receives a write: SET x = 1</li>
                                    <li><strong>Node B</strong> cannot communicate with Node A</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;">If Node B receives a read request for x:</p>
                                <ol>
                                    <li><strong>To be Available:</strong> Must respond immediately</li>
                                    <li><strong>To be Consistent:</strong> Must return value from Node A (x = 1)</li>
                                    <li><strong>Problem:</strong> Node B can't reach Node A (partition!)</li>
                                </ol>
                                
                                <p style="margin-top: 1rem;"><strong>The Choice:</strong></p>
                                <ul>
                                    <li><strong>Consistent (C):</strong> Reject the read (not Available)</li>
                                    <li><strong>Available (A):</strong> Return old value (not Consistent)</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;">You MUST choose one! Cannot have both during partition.</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Isn't CA (no partition tolerance) unrealistic?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! In practice, partitions are inevitable.</strong></p>
                                
                                <p style="margin-top: 1rem;"><strong>Why partitions always happen:</strong></p>
                                <ul>
                                    <li>Network cables fail</li>
                                    <li>Switches malfunction</li>
                                    <li>Datacenter network issues</li>
                                    <li>Cloud provider outages</li>
                                    <li>Even in same datacenter: rack failures</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Reality of CAP:</strong></p>
                                <ul>
                                    <li>Modern systems assume partitions will occur</li>
                                    <li>Real choice: CP or AP</li>
                                    <li>CA only realistic for single-node systems</li>
                                    <li>Even then, hardware failures = partition</li>
                                </ul>
                                
                                <p style="margin-top: 1rem;"><strong>Updated CAP interpretation:</strong></p>
                                <p>"When partitions occur (and they will), choose between C and A"</p>
                            </div>
                        </div>

                        <div class="cross-question-item">
                            <div class="cross-question-text">
                                <i class="fas fa-arrow-right"></i>
                                <span><strong>Can a system switch between CP and AP?</strong></span>
                            </div>
                            <div class="cross-answer">
                                <p><strong>Yes! Some systems offer tunable consistency.</strong></p>
                                
                                <div class="example-box" style="margin-top: 1rem;">
                                    <pre><code>-- Cassandra: Tunable Consistency

            -- Strong Consistency (CP mode):
            SELECT * FROM users WHERE id = 123 
            USING CONSISTENCY QUORUM;
            -- Waits for majority of replicas
            -- Rejects if majority unreachable ‚ùå

            -- Weak Consistency (AP mode):
            SELECT * FROM users WHERE id = 123 
            USING CONSISTENCY ONE;
            -- Returns from any single replica ‚úì
            -- Always available, may be stale ‚ö†

            -- DynamoDB: Similar concept
            -- Read with ConsistentRead=true ‚Üí CP
            -- Read with ConsistentRead=false ‚Üí AP</code></pre>
                                </div>
                                
                                <p style="margin-top: 1rem;"><strong>Per-operation choice:</strong></p>
                                <ul>
                                    <li>Critical reads: Strong consistency (CP)</li>
                                    <li>Non-critical reads: Eventual consistency (AP)</li>
                                    <li>Best of both worlds! ‚úì</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">CAP Theorem</span>
                        <span class="keyword-tag">Brewer's Theorem</span>
                        <span class="keyword-tag">Consistency</span>
                        <span class="keyword-tag">Availability</span>
                        <span class="keyword-tag">Partition Tolerance</span>
                        <span class="keyword-tag">Distributed Systems</span>
                        <span class="keyword-tag">Trade-offs</span>
                        <span class="keyword-tag">Network Partition</span>
                        <span class="keyword-tag">Pick Two</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 168: What are the C, A, P Components in Detail? -->
            <div class="question-content" id="q168">
                <div class="question-header">
                    <h1 class="question-title">What are the C, A, P Components in CAP Theorem?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        Consistency (C)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> All nodes in the system see the same data at the same time. Every read receives the most recent write or an error.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">What Consistency Means:</h4>
                        <ul>
                            <li><strong>Single System Image:</strong> Appears as one logical database, not multiple copies</li>
                            <li><strong>Linearizability:</strong> Operations appear to execute atomically and in order</li>
                            <li><strong>No Stale Reads:</strong> Never read old data after new data written</li>
                            <li><strong>Immediate Visibility:</strong> Write visible to all readers instantly</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Consistency Example

            -- System: 3 replicas (Node A, Node B, Node C)
            -- Initial state: balance = $1000 on all nodes

            -- Time 0:00 - Write to Node A
            UPDATE Accounts SET balance = 1500 WHERE id = 123;

            -- CONSISTENT System:
            -- Time 0:00 - All nodes immediately updated
            Node A: balance = 1500 ‚úì
            Node B: balance = 1500 ‚úì
            Node C: balance = 1500 ‚úì

            -- Read from ANY node returns 1500 ‚úì
            SELECT balance FROM Accounts WHERE id = 123;
            -- Result: 1500 (from any node) ‚úì

            -- -----------------------------------------------------------
            -- INCONSISTENT System (for contrast):
            -- -----------------------------------------------------------

            -- Time 0:00 - Write to Node A
            UPDATE Accounts SET balance = 1500 WHERE id = 123;

            -- Time 0:00 - Immediate state:
            Node A: balance = 1500 ‚úì
            Node B: balance = 1000 (not updated yet) ‚ö†
            Node C: balance = 1000 (not updated yet) ‚ö†

            -- Read from Node A: 1500 ‚úì
            -- Read from Node B: 1000 ‚ö† (stale!)
            -- Read from Node C: 1000 ‚ö† (stale!)

            -- Different nodes return different values ‚ùå
            -- NOT Consistent!

            -- -----------------------------------------------------------
            -- Linearizability Example
            -- -----------------------------------------------------------

            -- Client 1: Writes x = 1
            WRITE x = 1  (completes at time T1)

            -- Client 2: Reads x (after T1)
            READ x
            -- MUST return: 1 ‚úì
            -- CANNOT return: 0 ‚ùå (old value)

            -- Client 3: Reads x (after Client 2's read)
            READ x
            -- MUST return: 1 ‚úì
            -- Consistency guarantees causality!

            -- -----------------------------------------------------------
            -- Bank Transfer Example (Consistency Critical)
            -- -----------------------------------------------------------

            -- Transfer $500 from Account A to Account B
            START TRANSACTION;
            UPDATE Accounts SET balance = balance - 500 WHERE id = 'A';
            UPDATE Accounts SET balance = balance + 500 WHERE id = 'B';
            COMMIT;

            -- Consistent System:
            -- Either both updates visible, or neither
            -- Cannot see: A debited, B not credited ‚úì
            -- Cannot see: B credited, A not debited ‚úì

            -- Read Account A balance: $500 ‚úì
            -- Read Account B balance: $1500 ‚úì
            -- Total: $2000 (conserved) ‚úì

            -- Inconsistent System:
            -- Might read: A = $500, B = $1000
            -- Total: $1500 ‚ùå (money disappeared!)
            -- Or: A = $1000, B = $1500
            -- Total: $2500 ‚ùå (money created!)</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Types of Consistency:</h4>
                        <ul>
                            <li><strong>Strong Consistency:</strong> Immediate consistency (what CAP refers to)</li>
                            <li><strong>Sequential Consistency:</strong> All operations appear in same order</li>
                            <li><strong>Causal Consistency:</strong> Causally related operations ordered</li>
                            <li><strong>Eventual Consistency:</strong> Eventually consistent (not CAP's C)</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Cost of Consistency:</h4>
                        <ul>
                            <li>‚ö† Slower writes (must sync all replicas)</li>
                            <li>‚ö† Slower reads (may need to check for latest)</li>
                            <li>‚ö† Lower throughput (coordination overhead)</li>
                            <li>‚ö† May block during network issues</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-server"></i>
                        Availability (A)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> Every request receives a (non-error) response, without guarantee that it contains the most recent write. The system is operational and responsive.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">What Availability Means:</h4>
                        <ul>
                            <li><strong>Always Responds:</strong> Every request gets an answer</li>
                            <li><strong>No Blocking:</strong> Requests never hang or timeout</li>
                            <li><strong>No Errors:</strong> Returns data, not "service unavailable"</li>
                            <li><strong>Performance:</strong> Response within reasonable time</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Availability Example

            -- System: 3 nodes (Node 1, Node 2, Node 3)
            -- Node 2 fails üí•

            -- AVAILABLE System:
            -- Client request: GET user profile
            -- System routes to Node 1 or Node 3
            -- Returns response immediately ‚úì
            -- User never knows Node 2 is down

            -- NOT AVAILABLE System:
            -- Client request: GET user profile
            -- System: "Error: Cannot reach all nodes" ‚ùå
            -- Or: Request hangs indefinitely ‚ùå
            -- User experiences downtime

            -- -----------------------------------------------------------
            -- Availability Measurement
            -- -----------------------------------------------------------

            -- SLA (Service Level Agreement) examples:

            -- 99.9% Availability ("three nines")
            -- Downtime: 43.8 minutes/month
            -- 8.76 hours/year

            -- 99.99% Availability ("four nines")
            -- Downtime: 4.38 minutes/month  
            -- 52.56 minutes/year

            -- 99.999% Availability ("five nines")
            -- Downtime: 26 seconds/month
            -- 5.26 minutes/year

            -- -----------------------------------------------------------
            -- Availability vs Partition Example
            -- -----------------------------------------------------------

            -- Normal operation (no partition):
            -- All 3 nodes available
            Node 1: ‚úì Available
            Node 2: ‚úì Available  
            Node 3: ‚úì Available

            -- Network partition: Node 3 isolated
            Node 1: ‚úì Available
            Node 2: ‚úì Available
            Node 3: ‚úì Available (but can't communicate)

            -- Available System Response:
            -- Nodes 1 & 2: Continue serving requests ‚úì
            -- Node 3: Continues serving requests ‚úì
            -- System: 100% Available ‚úì
            -- But: May return inconsistent data ‚ö†

            -- Consistent System Response:
            -- Nodes 1 & 2: "Cannot guarantee consistency" ‚ùå
            -- Node 3: "Cannot guarantee consistency" ‚ùå
            -- System: NOT Available ‚ùå
            -- But: No inconsistent data ‚úì

            -- -----------------------------------------------------------
            -- E-commerce Example
            -- -----------------------------------------------------------

            -- Black Friday: 1 million users shopping

            -- AVAILABLE System:
            -- Even with datacenter issues
            -- Every user can browse ‚úì
            -- Every user can add to cart ‚úì
            -- Every user can checkout ‚úì
            -- May show slightly stale inventory ‚ö†
            -- Better than error page! ‚úì

            -- NOT AVAILABLE System:
            -- Datacenter issue occurs
            -- Users see: "Service temporarily unavailable" ‚ùå
            -- Lost sales üí∞
            -- Angry customers üò†

            -- -----------------------------------------------------------
            -- Availability Trade-offs
            -- -----------------------------------------------------------

            -- Advantages:
            -- ‚úì Better user experience
            -- ‚úì Higher uptime
            -- ‚úì More resilient to failures
            -- ‚úì Better performance

            -- Disadvantages:
            -- ‚ö† May return stale data
            -- ‚ö† Complexity in handling conflicts
            -- ‚ö† Eventual consistency model needed</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Availability Requirements:</h4>
                        <ul>
                            <li><strong>Every non-failing node returns response</strong></li>
                            <li><strong>Response in reasonable time</strong> (not infinite wait)</li>
                            <li><strong>Response contains data</strong> (not just error message)</li>
                            <li><strong>Works despite some node failures</strong></li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-network-wired"></i>
                        Partition Tolerance (P)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> The system continues to operate despite arbitrary partitioning due to network failures. Messages between nodes may be lost or delayed.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">What Partition Tolerance Means:</h4>
                        <ul>
                            <li><strong>Network Failures OK:</strong> Works even when nodes can't communicate</li>
                            <li><strong>Split Brain Handling:</strong> Deals with cluster splits</li>
                            <li><strong>Graceful Degradation:</strong> Degrades but doesn't fail completely</li>
                            <li><strong>Recovery:</strong> Can heal when partition resolves</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Partition Tolerance Example

            -- System: 5 nodes across 2 datacenters
            -- DC1: Node A, Node B, Node C (US-East)
            -- DC2: Node D, Node E (US-West)

            -- Normal operation:
            DC1: [A] ‚Üê‚Üí [B] ‚Üê‚Üí [C]
                ‚Üï      ‚Üï      ‚Üï
            DC2: [D] ‚Üê‚Üí [E]
            -- All nodes communicate ‚úì

            -- Network partition: Link between datacenters fails
            DC1: [A] ‚Üê‚Üí [B] ‚Üê‚Üí [C]
                ‚úó      ‚úó      ‚úó    ‚Üê Partition!
            DC2: [D] ‚Üê‚Üí [E]

            -- Within DC1: Nodes can communicate ‚úì
            -- Within DC2: Nodes can communicate ‚úì
            -- Between DCs: NO communication ‚ùå

            -- PARTITION TOLERANT System:
            -- DC1 continues operating ‚úì
            -- DC2 continues operating ‚úì
            -- System functional despite partition ‚úì

            -- NOT PARTITION TOLERANT System:
            -- "Cannot reach all nodes" ‚ùå
            -- System shuts down or returns errors ‚ùå

            -- -----------------------------------------------------------
            -- Types of Partitions
            -- -----------------------------------------------------------

            -- 1. Clean Split:
            -- Group 1: [A, B, C]
            -- Group 2: [D, E]
            -- Each group internally connected

            -- 2. Isolated Node:
            -- Group 1: [A, B, C, D]
            -- Isolated: [E]
            -- One node cut off from all others

            -- 3. Complex Partition:
            -- Group 1: [A, B]
            -- Group 2: [C, D]
            -- Isolated: [E]
            -- Multiple disconnected groups

            -- -----------------------------------------------------------
            -- Partition Detection
            -- -----------------------------------------------------------

            -- Heartbeat mechanism:
            while true:
                send_heartbeat_to_peers()
                check_heartbeat_from_peers()
                
                if no_heartbeat_from(node_X) for 10 seconds:
                    mark_as_partitioned(node_X)
                    
                if heartbeat_restored(node_X):
                    mark_as_recovered(node_X)
                    sync_data(node_X)

            -- -----------------------------------------------------------
            -- Quorum-based Partition Handling
            -- -----------------------------------------------------------

            -- Cluster: 5 nodes
            -- Quorum: Majority = 3 nodes

            -- Partition scenario:
            -- Group 1: 3 nodes ‚úì (has quorum)
            -- Group 2: 2 nodes ‚ùå (no quorum)

            -- Partition Tolerant approach:
            -- Group 1: Continues accepting writes ‚úì
            -- Group 2: Rejects writes (no quorum) ‚ùå
            -- Group 2: May serve reads (stale data) ‚ö†

            -- When partition heals:
            -- Sync Group 2 from Group 1
            -- Consistency restored ‚úì

            -- -----------------------------------------------------------
            -- Real-World Partition Causes
            -- -----------------------------------------------------------

            -- Hardware failures:
            -- ‚Ä¢ Network cable cut
            -- ‚Ä¢ Switch failure
            -- ‚Ä¢ Router misconfiguration

            -- Software issues:
            -- ‚Ä¢ Firewall rule blocking traffic
            -- ‚Ä¢ DNS resolution failure
            -- ‚Ä¢ TLS certificate expiration

            -- Cloud provider issues:
            -- ‚Ä¢ Availability Zone failure
            -- ‚Ä¢ Inter-region link congestion
            -- ‚Ä¢ BGP routing problems

            -- Environmental:
            -- ‚Ä¢ Power outage in datacenter
            -- ‚Ä¢ Natural disaster affecting region
            -- ‚Ä¢ Physical damage to infrastructure

            -- -----------------------------------------------------------
            -- Partition Duration
            -- -----------------------------------------------------------

            -- Short partitions (seconds to minutes):
            -- Most common
            -- Usually hardware glitches
            -- Auto-healing

            -- Medium partitions (minutes to hours):
            -- Less common
            -- May require manual intervention
            -- Impact noticeable to users

            -- Long partitions (hours to days):
            -- Rare but serious
            -- Major infrastructure failure
            -- Significant business impact

            -- Permanent partition:
            -- Node completely failed
            -- Must be removed from cluster
            -- Data rebalanced to remaining nodes

            -- -----------------------------------------------------------
            -- Why Partition Tolerance Is Essential
            -- -----------------------------------------------------------

            -- In distributed systems, partitions are inevitable!

            -- Study by Microsoft (2016):
            -- Average datacenter: 5 network failures per month
            -- Each failure: 15 minutes average duration
            -- Some failures: Hours or longer

            -- Jeff Dean (Google) quote:
            -- "Partitions happen. Plan for them."

            -- Reality: Cannot avoid partitions
            -- Must: Design systems to tolerate them ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Partition Tolerance Strategies:</h4>
                        <ul>
                            <li><strong>Quorum-based decisions:</strong> Majority voting</li>
                            <li><strong>Vector clocks:</strong> Track causality</li>
                            <li><strong>Conflict resolution:</strong> Last-write-wins, version vectors</li>
                            <li><strong>Split-brain prevention:</strong> Fencing, STONITH</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Consistency</span>
                        <span class="keyword-tag">Availability</span>
                        <span class="keyword-tag">Partition Tolerance</span>
                        <span class="keyword-tag">Linearizability</span>
                        <span class="keyword-tag">Stale Reads</span>
                        <span class="keyword-tag">Network Partition</span>
                        <span class="keyword-tag">Quorum</span>
                        <span class="keyword-tag">Split Brain</span>
                        <span class="keyword-tag">Uptime</span>
                        <span class="keyword-tag">Heartbeat</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 169: Why Not All Three in CAP? -->
            <div class="question-content" id="q169">
                <div class="question-header">
                    <h1 class="question-title">Why Can't We Have All Three (C, A, P) in CAP Theorem?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        The Fundamental Impossibility
                    </div>
                    <div class="definition-box">
                        <p><strong>Why All Three Are Impossible:</strong> The CAP theorem proves that in the presence of a network partition, you must choose between consistency and availability. This is not a limitation of current technology‚Äîit's a mathematical impossibility imposed by the laws of distributed computing.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The Core Dilemma:</strong></p>
                        <p>When nodes cannot communicate (partition), and you receive a request:</p>
                        <ul>
                            <li>To be <strong>Consistent:</strong> Must ensure all nodes have same data ‚Üí Need to communicate ‚Üí Can't due to partition ‚Üí Must reject request</li>
                            <li>To be <strong>Available:</strong> Must respond to request ‚Üí Can't guarantee consistency ‚Üí Must accept inconsistency</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>It's Physics, Not Engineering:</strong></p>
                        <ul>
                            <li>Speed of light limits communication speed</li>
                            <li>Network messages can be lost, delayed, or reordered</li>
                            <li>Cannot distinguish between slow node and dead node</li>
                            <li>No amount of clever engineering can overcome these fundamental constraints</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        The Proof by Contradiction
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Let's prove why C + A + P is impossible:</strong></p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Proof Setup:
            -- Assume we have a system that claims to provide C + A + P
            -- Two nodes: Node 1 and Node 2
            -- Initial state: Variable X = 0 on both nodes

            -- Step 1: Network partition occurs
            Node 1: ‚úì Running
            Node 2: ‚úì Running
            Network: ‚ùå Partitioned (nodes cannot communicate)

            -- Step 2: Client writes to Node 1
            Client ‚Üí Node 1: SET X = 1
            Node 1: X = 1 ‚úì

            -- Step 3: Client reads from Node 2
            Client ‚Üí Node 2: GET X
            Node 2: Has X = 0 (hasn't received update due to partition)

            -- Now the system faces an impossible choice:

            -- Option A: Return X = 0 (Availability)
            -- ‚úì System is Available (responded)
            -- ‚úì System is Partition Tolerant (works despite partition)
            -- ‚ùå System is NOT Consistent (wrong value!)

            -- Option B: Return error (Consistency)
            -- ‚úì System is Consistent (doesn't return wrong value)
            -- ‚úì System is Partition Tolerant (aware of partition)
            -- ‚ùå System is NOT Available (rejected request)

            -- Option C: Wait indefinitely
            -- ‚ùå System hangs forever
            -- ‚ùå Not Available
            -- ‚ùå Violates reasonable time requirement

            -- Conclusion: No option provides all three! QED ‚úì

            -- -----------------------------------------------------------
            -- More Detailed Scenario
            -- -----------------------------------------------------------

            -- Bank account system: Two datacenters
            -- DC1 (New York): Has account balance = $1000
            -- DC2 (London): Has account balance = $1000

            -- Network partition: Atlantic cable cut! üîå

            -- Customer in NY: Withdraws $500
            DC1: Updates balance to $500 ‚úì
            DC2: Cannot reach, still shows $1000 ‚ùå

            -- Customer in London: Tries to check balance
            -- What should DC2 return?

            -- CONSISTENT approach:
            DC2: "Cannot verify with NY, request denied" ‚ùå
            -- Customer: "Why can't I check my balance?!" üò†
            -- NOT Available ‚ùå

            -- AVAILABLE approach:
            DC2: "Balance is $1000" ‚úì
            -- Customer sees wrong balance! üò±
            -- NOT Consistent ‚ùå
            -- Customer might try to withdraw more than available!

            -- There is NO third option that satisfies both!

            -- -----------------------------------------------------------
            -- Time-Based Analysis
            -- -----------------------------------------------------------

            -- Why "wait for sync" doesn't work:

            -- Scenario: Partition lasts unknown duration
            Time 0:00 - Partition occurs
            Time 0:01 - Write happens on Node 1
            Time 0:02 - Read request on Node 2
            Time 0:03 - Still waiting... ‚è≥
            Time 0:04 - Still waiting... ‚è≥
            Time 0:05 - Still waiting... ‚è≥
            ...
            Time 1:00 - Still waiting... ‚è≥
            Time 2:00 - Still waiting... ‚è≥

            -- Problem: Cannot know when partition will heal!
            -- Could be seconds, hours, or days
            -- Cannot wait indefinitely = Not Available ‚ùå

            -- -----------------------------------------------------------
            -- Mathematical Proof (Simplified)
            -- -----------------------------------------------------------

            -- Gilbert & Lynch formal proof (2002):

            -- Theorem: It is impossible for a distributed system to 
            -- simultaneously provide:
            -- 1. Consistency (all nodes see same data)
            -- 2. Availability (every request gets response)
            -- 3. Partition Tolerance (works despite network failure)

            -- Proof by contradiction:
            -- Assume system S provides all three.
            -- Construct scenario:
            --   - Partition network into two groups G1 and G2
            --   - Send write W to G1
            --   - Send read R to G2
            --   - G2 cannot communicate with G1 (partition)
            --   
            -- For Availability: G2 must respond to R
            -- For Consistency: G2 must return value from W
            -- But: G2 cannot know about W (partition prevents communication)
            -- Contradiction! ‚ùå
            -- Therefore: S cannot exist. QED ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-brain"></i>
                        Common Misconceptions
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">Misconception 1: "We can have all three with better technology"</h4>
                        <p><strong>Reality:</strong> No! CAP is a mathematical theorem, not an engineering limitation. Even with perfect hardware, network partitions are inevitable (cables break, routers fail, etc.).</p>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Misconception 2: "CAP means pick two permanently"</h4>
                        <p><strong>Reality:</strong> CAP really means: "When partition occurs (and it will), choose between C and A." During normal operation (no partition), you can have all three!</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Reality of CAP Trade-offs:

            -- Normal Operation (99.99% of time):
            -- All nodes communicate ‚úì
            -- System provides: Consistency ‚úì + Availability ‚úì + Partition Tolerance ‚úì
            -- Everything works perfectly!

            -- During Partition (0.01% of time):
            -- Nodes cannot communicate ‚ùå
            -- Must choose: Consistency OR Availability
            -- This is where CAP theorem applies!

            -- So CAP really means:
            -- "When partitions happen, choose between C and A"</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Misconception 3: "NoSQL databases can't be consistent"</h4>
                        <p><strong>Reality:</strong> Many NoSQL databases (MongoDB, HBase) are CP - they choose consistency over availability during partitions. NoSQL doesn't mean "no consistency"!</p>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">Misconception 4: "We can just fix the partition quickly"</h4>
                        <p><strong>Reality:</strong> You can't always fix partitions quickly. Could be hardware failure requiring replacement, datacenter network issues, or cross-region link failures lasting hours.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Why This Matters in Practice
                    </div>
                    
                    <div class="explanation-text">
                        <div class="example-box">
                            <pre><code>-- Real-World Impact of CAP

            -- Scenario 1: Banking System (Chose Consistency)
            -- ATM tries to dispense cash
            -- Cannot reach main database due to network issue
            -- Choice: Dispense cash (Available) or reject (Consistent)
            -- Decision: Reject withdrawal ‚úì
            -- Better safe than sorry (prevent double-spending)
            -- Customer annoyed but account safe ‚úì

            -- Scenario 2: Social Media (Chose Availability)
            -- User posts a photo
            -- Some servers haven't synced yet
            -- Friend in different region doesn't see it immediately
            -- Choice: Show "post failed" (Consistent) or proceed (Available)
            -- Decision: Accept post immediately ‚úì
            -- Photo visible eventually (few seconds delay)
            -- Better user experience ‚úì

            -- Scenario 3: E-commerce Inventory (Hybrid)
            -- Product stock: 1 item left
            -- Two datacenters partitioned
            -- Both receive purchase requests
            -- 
            -- Option A (Consistent): 
            -- Block both purchases until sync ‚ùå
            -- Lost sales üí∞
            -- 
            -- Option B (Available):
            -- Accept both purchases ‚ùå
            -- Oversell by 1 item
            -- Handle with backorder/apology
            -- 
            -- Smart Option (Hybrid):
            -- Reserve extra inventory for partition scenarios
            -- Accept purchases from both sides
            -- Reconcile later
            -- Usually works out ‚úì

            -- -----------------------------------------------------------
            -- Cost of Getting It Wrong
            -- -----------------------------------------------------------

            -- Banking Example (Wrong Choice):
            -- System chose Availability over Consistency
            -- During partition, allowed double-withdrawals
            -- Result: $1M in fraudulent withdrawals
            -- Lawsuit, regulatory fines
            -- Cost: $50M+ üí∞üí∞üí∞

            -- Social Media Example (Wrong Choice):
            -- System chose Consistency over Availability
            -- During partition, all posts blocked
            -- Result: Users unable to post for 2 hours
            -- Competitor gained 1M users
            -- Lost advertising revenue
            -- Cost: $10M+ üí∞üí∞

            -- The choice matters! ‚ö†</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">CAP Impossibility</span>
                        <span class="keyword-tag">Mathematical Proof</span>
                        <span class="keyword-tag">Network Partition</span>
                        <span class="keyword-tag">Trade-offs</span>
                        <span class="keyword-tag">Gilbert & Lynch</span>
                        <span class="keyword-tag">Distributed Systems</span>
                        <span class="keyword-tag">Consistency vs Availability</span>
                        <span class="keyword-tag">Physics Constraints</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 170: Consistency vs Availability Trade-off -->
            <div class="question-content" id="q170">
                <div class="question-header">
                    <h1 class="question-title">What is the Consistency vs Availability Trade-off?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        The Core Trade-off
                    </div>
                    <div class="definition-box">
                        <p><strong>Consistency vs Availability</strong> is the fundamental choice distributed systems must make during network partitions. You cannot have both simultaneously when nodes cannot communicate.</p>
                        
                        <p style="margin-top: 1rem;"><strong>The Choice:</strong></p>
                        <ul>
                            <li><strong>Prioritize Consistency:</strong> Reject requests to maintain data correctness (CP systems)</li>
                            <li><strong>Prioritize Availability:</strong> Accept requests even if data might be stale (AP systems)</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Not Binary:</strong> Modern systems often provide tunable consistency levels, allowing different choices for different operations.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Detailed Comparison
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Consistency Priority (CP)</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Availability Priority (AP)</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>During Partition</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Reject requests</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Accept requests</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Data Guarantee</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Always correct/fresh</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">May be stale</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>User Experience</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Errors/timeouts</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Always works</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Write Handling</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Requires majority</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Any node accepts</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Read Handling</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">May require quorum</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Any node responds</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Latency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Higher (coordination)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Lower (local)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Conflicts</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Prevented</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Must resolve</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Use Cases</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Banking, inventory</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Social media, caching</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Side-by-Side Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- Scenario: Shopping Cart System with 3 replicas
            -- Network partition: Replica 3 isolated

            -- Initial State (all replicas):
            Cart for User123: [Item A, Item B]

            -- User adds Item C to cart

            -- ============================================================
            -- CP APPROACH (Consistency Priority)
            -- ============================================================

            -- Write Request: Add Item C
            -- System checks: Can we reach majority (2 out of 3)?
            -- Replica 1: ‚úì Reachable
            -- Replica 2: ‚úì Reachable
            -- Replica 3: ‚ùå Partitioned
            -- Majority: YES (2/3) ‚úì

            -- Write succeeds on Replica 1 & 2:
            Replica 1: [Item A, Item B, Item C] ‚úì
            Replica 2: [Item A, Item B, Item C] ‚úì
            Replica 3: [Item A, Item B] (outdated)

            -- User tries to read from Replica 3:
            -- System checks: Is this replica in majority partition?
            -- Answer: NO ‚ùå
            -- Response: "Service temporarily unavailable" ‚ùå

            -- Result:
            -- ‚úì Data consistent across majority
            -- ‚ùå User in Replica 3's region sees error
            -- ‚ùå NOT Available for some users

            -- ============================================================
            -- AP APPROACH (Availability Priority)
            -- ============================================================

            -- Write Request: Add Item C
            -- System: Accept immediately on any replica

            -- Write to Replica 1:
            Replica 1: [Item A, Item B, Item C] ‚úì
            -- Response to user: "Item added" ‚úì

            -- Async replication (fails due to partition):
            Replica 2: [Item A, Item B, Item C] (synced)
            Replica 3: [Item A, Item B] (not synced yet)

            -- User reads from Replica 3:
            -- Response: [Item A, Item B] ‚ö†
            -- Item C is missing! (stale data)

            -- User sees: "Where's my Item C?!" üòï

            -- Eventually (when partition heals):
            -- Replica 3 syncs: [Item A, Item B, Item C] ‚úì
            -- Now consistent ‚úì

            -- Result:
            -- ‚úì System always available
            -- ‚ö† Temporary inconsistency
            -- ‚úì Eventually consistent

            -- ============================================================
            -- Detailed Comparison: E-commerce Checkout
            -- ============================================================

            -- Product: iPhone (1 unit left in stock)
            -- Replicas: US-East, US-West, Europe
            -- Partition: Europe isolated

            -- Two customers try to buy simultaneously:
            -- Customer 1 in US-East
            -- Customer 2 in Europe

            -- --- CP System (MongoDB, HBase) ---

            -- Customer 1 purchase:
            US-East: Check stock = 1 ‚úì
            US-East: Sync with US-West ‚úì
            US-East: Cannot reach Europe ‚ùå
            US-East: Have majority (2/3) ‚úì
            US-East: Proceed with purchase ‚úì
            Stock: 0

            -- Customer 2 purchase (in Europe):
            Europe: Check stock = 1 (stale, hasn't synced)
            Europe: Try to sync with other replicas ‚ùå
            Europe: No majority partition ‚ùå
            Europe: "Service temporarily unavailable" ‚ùå

            -- Result:
            -- ‚úì No overselling (correct inventory)
            -- ‚ùå Customer 2 sees error
            -- ‚úì Consistency maintained

            -- --- AP System (Cassandra, DynamoDB) ---

            -- Customer 1 purchase:
            US-East: Check stock = 1 ‚úì
            US-East: Decrement stock to 0 ‚úì
            US-East: Return success immediately ‚úì
            US-East: Queue sync to Europe (pending)

            -- Customer 2 purchase (concurrent):
            Europe: Check stock = 1 ‚úì (hasn't synced yet)
            Europe: Decrement stock to 0 ‚úì
            Europe: Return success immediately ‚úì
            Europe: Queue sync to US (pending)

            -- Result:
            -- ‚úì Both customers happy (no errors)
            -- ‚ùå Oversold by 1 unit! (inventory = -1)
            -- ‚ö† Must handle conflict

            -- Conflict Resolution (when partition heals):
            -- Option 1: Last-write-wins
            -- Option 2: Manual reconciliation
            -- Option 3: Business logic (refund/backorder)

            -- Real Solution:
            -- Reserve buffer inventory
            -- Monitor conflict rate
            -- Acceptable for most e-commerce

            -- ============================================================
            -- Banking Transfer Example
            -- ============================================================

            -- Transfer $1000 from Account A to Account B
            -- Replicas partitioned

            -- --- CP System (Traditional Banks) ---

            -- Check: Can reach all replicas?
            -- Answer: NO ‚ùå
            -- Response: "Transfer failed - try again later" ‚ùå

            -- Result:
            -- ‚úì No risk of double-spending
            -- ‚úì Accounts remain consistent
            -- ‚ùå Customer cannot transfer (annoying but safe)

            -- --- AP System (Hypothetical) ---

            -- Accept transfer on local replica
            Replica 1: A = $9000, B = $11000 ‚úì

            -- Meanwhile, another operation on different replica:
            Replica 2: A withdraws $500
            Replica 2: A = $9500, B = $10000 ‚úì

            -- When partitions heal:
            -- Conflict! Which value is correct?
            -- A = $9000 or $9500?
            -- B = $11000 or $10000?

            -- This is why banks NEVER use AP! ‚ùå
            -- Consistency is critical for financial data ‚úì

            -- ============================================================
            -- Social Media Post Example
            -- ============================================================

            -- User posts: "Just landed in Paris! üóº"
            -- Replicas: US, Europe, Asia
            -- Partition: Asia isolated

            -- --- CP System ---

            -- Post written to US ‚úì
            -- Sync to Europe ‚úì
            -- Cannot reach Asia ‚ùå
            -- No majority across all 3 regions ‚ùå
            -- Response: "Post failed" ‚ùå

            -- User experience: "Why can't I post?!" üò†
            -- Switches to competitor app üò±

            -- --- AP System (Twitter, Facebook) ---

            -- Post written to US immediately ‚úì
            -- Response: "Posted successfully" ‚úì
            -- Queue sync to Europe and Asia

            -- Users in US and Europe: See post ‚úì
            -- Users in Asia: Don't see post yet ‚ö†

            -- Few seconds later:
            -- Asia syncs: Post appears ‚úì

            -- User experience: Great! ‚úì
            -- Temporary delay acceptable for social media ‚úì

            -- ============================================================
            -- Performance Metrics
            -- ============================================================

            -- CP System during partition:
            -- Write latency: 100-200ms (wait for quorum)
            -- Write success rate: 50% (minority replicas fail)
            -- Read latency: 50-100ms (quorum reads)
            -- Read success rate: 50% (minority replicas fail)

            -- AP System during partition:
            -- Write latency: 1-5ms (local only)
            -- Write success rate: 99.9% (always succeeds)
            -- Read latency: 1-5ms (local only)
            -- Read success rate: 99.9% (always succeeds)

            -- Trade-off clear! ‚öñÔ∏è</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-chart-line"></i>
                        Impact on Business Metrics
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">CP Systems (Consistency Priority):</h4>
                        <p><strong>Advantages:</strong></p>
                        <ul>
                            <li>‚úì Data correctness guaranteed</li>
                            <li>‚úì No conflicts to resolve</li>
                            <li>‚úì Simpler application logic</li>
                            <li>‚úì Compliance-friendly (auditability)</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Disadvantages:</strong></p>
                        <ul>
                            <li>‚ùå Lower availability (failed requests)</li>
                            <li>‚ùå Higher latency (coordination overhead)</li>
                            <li>‚ùå Poor user experience during issues</li>
                            <li>‚ùå Revenue impact (unable to serve customers)</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">AP Systems (Availability Priority):</h4>
                        <p><strong>Advantages:</strong></p>
                        <ul>
                            <li>‚úì Always available (better UX)</li>
                            <li>‚úì Lower latency (local operations)</li>
                            <li>‚úì Higher throughput</li>
                            <li>‚úì Better revenue (no blocked customers)</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Disadvantages:</strong></p>
                        <ul>
                            <li>‚ùå Temporary inconsistencies</li>
                            <li>‚ùå Conflict resolution needed</li>
                            <li>‚ùå Complex application logic</li>
                            <li>‚ùå Potential data loss scenarios</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Consistency vs Availability</span>
                        <span class="keyword-tag">CP Systems</span>
                        <span class="keyword-tag">AP Systems</span>
                        <span class="keyword-tag">Trade-offs</span>
                        <span class="keyword-tag">Quorum</span>
                        <span class="keyword-tag">Eventual Consistency</span>
                        <span class="keyword-tag">Strong Consistency</span>
                        <span class="keyword-tag">Stale Reads</span>
                        <span class="keyword-tag">Conflict Resolution</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 171: What is Network Partitioning? -->
            <div class="question-content" id="q171">
                <div class="question-header">
                    <h1 class="question-title">What is Network Partitioning in Distributed Systems?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Network Partition</strong> (also called "split-brain") occurs when a distributed system is divided into multiple isolated groups that cannot communicate with each other due to network failures. Each group can still function internally, but inter-group communication is lost.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Characteristics:</strong></p>
                        <ul>
                            <li><strong>Partial Failure:</strong> Some nodes can communicate, others cannot</li>
                            <li><strong>Asymmetric:</strong> A can reach B, but B cannot reach A (or vice versa)</li>
                            <li><strong>Temporary:</strong> Usually resolves, but duration unpredictable</li>
                            <li><strong>Inevitable:</strong> Will occur in any distributed system</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Not a Complete Failure:</strong> Partition is different from total system failure. Nodes are operational, just isolated from each other.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        Types of Network Partitions
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <svg viewBox="0 0 800 600" style="max-width: 100%; height: auto;">
                            <!-- Title -->
                            <text x="400" y="30" font-size="18" font-weight="bold" fill="#1e40af" text-anchor="middle">Types of Network Partitions</text>
                            
                            <!-- Type 1: Clean Split -->
                            <text x="200" y="70" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">1. Clean Split (50-50)</text>
                            <rect x="50" y="80" width="300" height="120" fill="#f0f9ff" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            
                            <!-- Left partition -->
                            <circle cx="100" cy="120" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="100" y="125" font-size="10" fill="white" text-anchor="middle" font-weight="bold">A</text>
                            <circle cx="150" cy="120" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="150" y="125" font-size="10" fill="white" text-anchor="middle" font-weight="bold">B</text>
                            <line x1="115" y1="120" x2="135" y2="120" stroke="#10b981" stroke-width="2"/>
                            
                            <!-- Partition line -->
                            <line x1="200" y1="80" x2="200" y2="200" stroke="#dc2626" stroke-width="3" stroke-dasharray="5,5"/>
                            <text x="200" y="160" font-size="12" fill="#dc2626" text-anchor="middle" font-weight="bold">‚úó</text>
                            
                            <!-- Right partition -->
                            <circle cx="250" cy="120" r="15" fill="#f59e0b" stroke="#92400e" stroke-width="2"/>
                            <text x="250" y="125" font-size="10" fill="white" text-anchor="middle" font-weight="bold">C</text>
                            <circle cx="300" cy="120" r="15" fill="#f59e0b" stroke="#92400e" stroke-width="2"/>
                            <text x="300" y="125" font-size="10" fill="white" text-anchor="middle" font-weight="bold">D</text>
                            <line x1="265" y1="120" x2="285" y2="120" stroke="#f59e0b" stroke-width="2"/>
                            
                            <text x="200" y="220" font-size="11" fill="#475569" text-anchor="middle">Group 1 (A,B) ‚Üê‚úó‚Üí Group 2 (C,D)</text>
                            
                            <!-- Type 2: Isolated Node -->
                            <text x="200" y="270" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">2. Isolated Node</text>
                            <rect x="50" y="280" width="300" height="120" fill="#f0f9ff" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            
                            <!-- Majority partition -->
                            <circle cx="100" cy="320" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="100" y="325" font-size="10" fill="white" text-anchor="middle" font-weight="bold">A</text>
                            <circle cx="150" cy="320" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="150" y="325" font-size="10" fill="white" text-anchor="middle" font-weight="bold">B</text>
                            <circle cx="200" cy="320" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="200" y="325" font-size="10" fill="white" text-anchor="middle" font-weight="bold">C</text>
                            <line x1="115" y1="320" x2="135" y2="320" stroke="#10b981" stroke-width="2"/>
                            <line x1="165" y1="320" x2="185" y2="320" stroke="#10b981" stroke-width="2"/>
                            
                            <!-- Isolated node -->
                            <circle cx="300" cy="320" r="15" fill="#dc2626" stroke="#991b1b" stroke-width="2"/>
                            <text x="300" y="325" font-size="10" fill="white" text-anchor="middle" font-weight="bold">D</text>
                            
                            <text x="200" y="420" font-size="11" fill="#475569" text-anchor="middle">Majority (A,B,C) ‚Üê‚úó‚Üí Isolated (D)</text>
                            
                            <!-- Type 3: Complex -->
                            <text x="600" y="70" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">3. Complex Partition</text>
                            <rect x="450" y="80" width="300" height="120" fill="#f0f9ff" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            
                            <!-- Group 1 -->
                            <circle cx="500" cy="120" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="500" y="125" font-size="10" fill="white" text-anchor="middle" font-weight="bold">A</text>
                            <circle cx="550" cy="120" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="550" y="125" font-size="10" fill="white" text-anchor="middle" font-weight="bold">B</text>
                            <line x1="515" y1="120" x2="535" y2="120" stroke="#10b981" stroke-width="2"/>
                            
                            <!-- Group 2 -->
                            <circle cx="620" cy="120" r="15" fill="#f59e0b" stroke="#92400e" stroke-width="2"/>
                            <text x="620" y="125" font-size="10" fill="white" text-anchor="middle" font-weight="bold">C</text>
                            
                            <!-- Group 3 -->
                            <circle cx="680" cy="120" r="15" fill="#3b82f6" stroke="#1e40af" stroke-width="2"/>
                            <text x="680" y="125" font-size="10" fill="white" text-anchor="middle" font-weight="bold">D</text>
                            <circle cx="700" cy="150" r="15" fill="#3b82f6" stroke="#1e40af" stroke-width="2"/>
                            <text x="700" y="155" font-size="10" fill="white" text-anchor="middle" font-weight="bold">E</text>
                            <line x1="688" y1="128" x2="693" y2="143" stroke="#3b82f6" stroke-width="2"/>
                            
                            <text x="600" y="220" font-size="11" fill="#475569" text-anchor="middle">Multiple isolated groups</text>
                            
                            <!-- Type 4: Asymmetric -->
                            <text x="600" y="270" font-size="14" font-weight="bold" fill="#1e40af" text-anchor="middle">4. Asymmetric Partition</text>
                            <rect x="450" y="280" width="300" height="120" fill="#f0f9ff" stroke="#3b82f6" stroke-width="2" rx="5"/>
                            
                            <circle cx="520" cy="320" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="520" y="325" font-size="10" fill="white" text-anchor="middle" font-weight="bold">A</text>
                            <circle cx="620" cy="320" r="15" fill="#10b981" stroke="#065f46" stroke-width="2"/>
                            <text x="620" y="325" font-size="10" fill="white" text-anchor="middle" font-weight="bold">B</text>
                            
                            <!-- One-way arrow -->
                            <path d="M 535 320 L 605 320" stroke="#10b981" stroke-width="2" marker-end="url(#arrow31)"/>
                            <text x="570" y="315" font-size="10" fill="#10b981" font-weight="bold">‚úì</text>
                            
                            <path d="M 605 330 L 535 330" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow32)"/>
                            <text x="570" y="345" font-size="10" fill="#dc2626" font-weight="bold">‚úó</text>
                            
                            <text x="600" y="370" font-size="11" fill="#475569" text-anchor="middle">A can reach B, but B cannot reach A</text>
                            <text x="600" y="390" font-size="10" fill="#dc2626" text-anchor="middle">(Firewall, routing asymmetry)</text>
                            
                            <!-- Markers -->
                            <defs>
                                <marker id="arrow31" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#10b981"/>
                                </marker>
                                <marker id="arrow32" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                    <path d="M0,0 L0,6 L9,3 z" fill="#dc2626"/>
                                </marker>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Common Causes of Network Partitions
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">1. Hardware Failures</h4>
                        <ul>
                            <li><strong>Network cable cut:</strong> Physical damage to cables (construction, animals)</li>
                            <li><strong>Switch/Router failure:</strong> Hardware malfunction in network equipment</li>
                            <li><strong>NIC failure:</strong> Network interface card stops working</li>
                            <li><strong>Power supply issues:</strong> Insufficient power to network equipment</li>
                        </ul>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">2. Software/Configuration Issues</h4>
                        <ul>
                            <li><strong>Firewall misconfiguration:</strong> Rules blocking legitimate traffic</li>
                            <li><strong>Routing problems:</strong> BGP routing tables corrupted</li>
                            <li><strong>DNS failures:</strong> Cannot resolve hostnames</li>
                            <li><strong>TLS certificate expiration:</strong> HTTPS connections fail</li>
                        </ul>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">3. Cloud/Infrastructure Issues</h4>
                        <ul>
                            <li><strong>Availability Zone failure:</strong> Entire AZ becomes unreachable</li>
                            <li><strong>Region connectivity loss:</strong> Inter-region links fail</li>
                            <li><strong>Load balancer issues:</strong> Traffic routing breaks</li>
                            <li><strong>Network saturation:</strong> Too much traffic causes packet loss</li>
                        </ul>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">4. Environmental Factors</h4>
                        <ul>
                            <li><strong>Natural disasters:</strong> Earthquakes, floods, hurricanes</li>
                            <li><strong>Power outages:</strong> Datacenter loses power</li>
                            <li><strong>Temperature issues:</strong> Overheating equipment</li>
                            <li><strong>Human error:</strong> Accidental cable unplugging, wrong configuration</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        Partition Detection and Handling
                    </div>
                    <div class="example-box">
                        <pre><code>-- ============================================================
            -- Partition Detection Mechanisms
            -- ============================================================

            -- 1. Heartbeat Mechanism
            -- Nodes regularly send "I'm alive" messages

            -- Node A's heartbeat checker:
            function monitor_heartbeats():
                while true:
                    for node in cluster_nodes:
                        last_heartbeat = get_last_heartbeat(node)
                        time_since = now() - last_heartbeat
                        
                        if time_since > HEARTBEAT_TIMEOUT (e.g., 10 seconds):
                            mark_as_partitioned(node)
                            log("Node {node} appears partitioned")
                            trigger_partition_handling(node)
                        
                    sleep(1 second)

            -- 2. Gossip Protocol
            -- Nodes exchange information about who can see whom

            -- Node A gossips:
            {
                "node_id": "A",
                "can_see": ["B", "C"],
                "cannot_see": ["D", "E"],
                "timestamp": "2024-01-01T12:00:00Z"
            }

            -- Node B receives gossip and compares:
            -- B can see: ["A", "C", "D"]
            -- A cannot see: ["D", "E"]
            -- Conclusion: Partition between {A,B,C} and {D,E}

            -- ============================================================
            -- Partition Handling Strategies
            -- ============================================================

            -- Strategy 1: Quorum-Based (CP System)

            -- Cluster: 5 nodes (A, B, C, D, E)
            -- Quorum: 3 (majority)

            -- Partition: {A, B, C} vs {D, E}

            -- Group 1 (A, B, C):
            if cluster_size == 3 and quorum == 3:
                # Have quorum ‚úì
                continue_accepting_writes()
                state = "PRIMARY"

            -- Group 2 (D, E):
            if cluster_size == 2 and quorum == 3:
                # No quorum ‚ùå
                reject_writes()
                state = "SECONDARY"
                # Only accept reads (may be stale)

            -- Strategy 2: Always Available (AP System)

            -- Both groups continue operating independently

            -- Group 1 (A, B, C):
            accept_all_operations()  # ‚úì
            queue_sync_to_D_E()      # When partition heals

            -- Group 2 (D, E):
            accept_all_operations()  # ‚úì
            queue_sync_to_A_B_C()    # When partition heals

            -- Result: Potential conflicts that need resolution later

            -- ============================================================
            -- Real-World Example: Cassandra Partition Handling
            -- ============================================================

            -- Initial cluster: 6 nodes with RF=3
            -- Data replicated to 3 nodes
            -- Partition: {Node1, Node2, Node3} vs {Node4, Node5, Node6}

            -- Write operation with QUORUM consistency:
            -- Write to key 'user:123'
            -- Replicas: Node1, Node3, Node5

            -- From Group 1:
            -- Can reach: Node1 ‚úì, Node3 ‚úì, Node5 ‚ùå
            -- Have 2 out of 3 replicas ‚úì
            -- Quorum reached (2 >= ceil(3/2)) ‚úì
            -- Write succeeds ‚úì

            -- From Group 2:
            -- Can reach: Node1 ‚ùå, Node3 ‚ùå, Node5 ‚úì
            -- Have 1 out of 3 replicas ‚ùå
            -- Quorum NOT reached (1 < ceil(3/2)) ‚ùå
            -- Write fails ‚ùå

            -- Read operation with QUORUM:
            -- Similar logic applies
            -- Group 1 can read, Group 2 cannot

            -- ============================================================
            -- Partition Recovery
            -- ============================================================

            -- When partition heals:

            function on_partition_healed(previously_isolated_nodes):
                log("Partition healed, syncing data")
                
                for node in previously_isolated_nodes:
                    # Anti-entropy process
                    compare_data_versions(node)
                    
                    for key in diverged_keys:
                        local_version = get_version(key)
                        remote_version = node.get_version(key)
                        
                        if local_version > remote_version:
                            # We have newer data
                            node.update(key, local_version)
                        elif remote_version > local_version:
                            # They have newer data
                            update(key, remote_version)
                        else:
                            # Conflict! Need resolution
                            resolve_conflict(key, local_version, remote_version)
                
                log("Sync complete")

            -- ============================================================
            -- Conflict Resolution Strategies
            -- ============================================================

            -- 1. Last Write Wins (LWW)
            function resolve_conflict_lww(v1, v2):
                if v1.timestamp > v2.timestamp:
                    return v1
                else:
                    return v2
            -- Simple but can lose data

            -- 2. Vector Clocks
            -- Track causality to detect true conflicts
            {
                "value": "Hello",
                "vector_clock": {
                    "node_A": 3,
                    "node_B": 2,
                    "node_C": 1
                }
            }

            -- 3. Application-Level Resolution
            -- Let application decide based on business logic
            function resolve_shopping_cart_conflict(cart1, cart2):
                # Merge items from both carts
                merged = cart1.items + cart2.items
                return deduplicate(merged)

            -- 4. Multi-Value (Siblings)
            -- Keep both versions, let client choose
            {
                "key": "user:123:name",
                "values": [
                    {"value": "John", "version": "v1"},
                    {"value": "Johnny", "version": "v2"}
                ]
            }
            -- Client sees both and picks or merges

            -- ============================================================
            -- Testing for Partitions
            -- ============================================================

            -- Tools to simulate partitions:

            -- 1. iptables (Linux firewall)
            # Block traffic from Node B
            iptables -A INPUT -s node_b_ip -j DROP
            iptables -A OUTPUT -d node_b_ip -j DROP

            -- 2. tc (traffic control)
            # Add 50% packet loss
            tc qdisc add dev eth0 root netem loss 50%

            -- 3. Toxiproxy (testing tool)
            # Create partition between services
            toxic = proxy.add_toxic(
                type="timeout",
                attributes={"timeout": 0}  # Infinite timeout = partition
            )

            -- 4. Chaos Monkey (Netflix)
            # Randomly partition nodes in production
            chaos_monkey.enable_partition_test(
                frequency="daily",
                duration="5 minutes"
            )</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-chart-line"></i>
                        Partition Statistics
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Real-World Partition Frequency (Industry Data):</strong></p>
                        
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <tr style="background: #dbeafe;">
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Environment</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Partition Frequency</th>
                                <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Avg Duration</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Single Datacenter</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">2-5 per year</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">5-30 minutes</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Multi-Datacenter</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">10-20 per year</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">15-60 minutes</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Global Distribution</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">50+ per year</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">5-120 minutes</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cloud (Multi-AZ)</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">5-10 per year</td>
                                <td style="padding: 0.5rem; border: 1px solid #93c5fd;">10-45 minutes</td>
                            </tr>
                        </table>
                        
                        <p style="margin-top: 1rem;"><strong>Key Takeaway:</strong> Partitions are inevitable. Design for them, don't hope they won't happen!</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Network Partition</span>
                        <span class="keyword-tag">Split Brain</span>
                        <span class="keyword-tag">Quorum</span>
                        <span class="keyword-tag">Heartbeat</span>
                        <span class="keyword-tag">Gossip Protocol</span>
                        <span class="keyword-tag">Partition Tolerance</span>
                        <span class="keyword-tag">Isolated Node</span>
                        <span class="keyword-tag">Conflict Resolution</span>
                        <span class="keyword-tag">Anti-Entropy</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>


            <!-- Question 172: What are CA, CP, and AP Systems? -->
            <div class="question-content" id="q172">
                <div class="question-header">
                    <h1 class="question-title">What are CA, CP, and AP Systems in CAP Theorem?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 11 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Overview of System Types
                    </div>
                    <div class="definition-box">
                        <p>Based on CAP theorem, distributed systems fall into three categories depending on which two properties they guarantee:</p>
                        
                        <ul style="margin-top: 1rem;">
                            <li><strong>CA Systems:</strong> Consistency + Availability (sacrifice Partition tolerance)</li>
                            <li><strong>CP Systems:</strong> Consistency + Partition tolerance (sacrifice Availability)</li>
                            <li><strong>AP Systems:</strong> Availability + Partition tolerance (sacrifice Consistency)</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Important Note:</strong> In modern distributed systems, partition tolerance is non-negotiable (partitions will happen), so the real choice is between CP and AP. CA systems are essentially single-node or same-datacenter systems.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-database"></i>
                        CA Systems (Consistency + Availability)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> Systems that guarantee consistency and availability but cannot tolerate network partitions.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Characteristics:</h4>
                        <ul>
                            <li>All nodes must be reachable</li>
                            <li>Data always consistent and accessible</li>
                            <li>No partition handling mechanisms</li>
                            <li>Typically single-node or tightly-coupled clusters</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Examples:</h4>
                        <ul>
                            <li><strong>Single-server RDBMS:</strong> PostgreSQL, MySQL on one machine</li>
                            <li><strong>Traditional databases:</strong> Oracle on single instance</li>
                            <li><strong>In-memory databases:</strong> Redis (single instance)</li>
                            <li><strong>Same-rack clusters:</strong> Tightly coupled servers</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- CA System Example: Single MySQL Server

            -- Scenario: E-commerce application
            -- Single MySQL server handling all requests

            -- Normal Operation:
            -- ‚úì Consistent: All reads see latest writes
            -- ‚úì Available: Server always responds (99.9% uptime)
            -- ‚úó Partition Tolerance: N/A (no distributed nodes)

            -- Application Code:
            SELECT balance FROM accounts WHERE id = 123;
            -- Always returns correct value ‚úì
            -- Always responds (server is up) ‚úì

            UPDATE accounts SET balance = 1500 WHERE id = 123;
            -- Immediately visible to all queries ‚úì
            -- No replication lag ‚úì

            -- Problem Scenario: Network Issue
            -- Database server network cable unplugged üîå

            -- Application tries to connect:
            Connection attempt... ‚ùå
            Error: "Cannot reach database server"

            -- System behavior:
            -- ‚ùå NOT Partition Tolerant
            -- Entire system down until cable fixed
            -- No nodes to failover to

            -- Reality: CA systems are essentially non-distributed
            -- When you add distribution, you need partition tolerance

            -- -----------------------------------------------------------
            -- CA System: PostgreSQL with Synchronous Replication
            -- -----------------------------------------------------------

            -- Primary + Standby in SAME datacenter
            -- Connected via local network (very reliable)

            -- Configuration:
            synchronous_commit = on
            synchronous_standby_names = 'standby1'

            -- Write operation:
            BEGIN;
            UPDATE products SET stock = stock - 1 WHERE id = 101;
            COMMIT;

            -- Behind the scenes:
            -- 1. Write to primary ‚úì
            -- 2. Sync to standby via local network ‚úì
            -- 3. Standby confirms ‚úì
            -- 4. Commit returns ‚úì

            -- Works because:
            -- ‚úì Network very reliable (same datacenter)
            -- ‚úì If network fails, both nodes likely down (power/infrastructure)
            -- ‚ö† Cannot handle datacenter-level failures

            -- Advantages:
            -- ‚úì Strong consistency
            -- ‚úì High availability (within datacenter)
            -- ‚úì Simple operational model
            -- ‚úì ACID transactions

            -- Disadvantages:
            -- ‚ùå Single point of failure (datacenter)
            -- ‚ùå Cannot survive datacenter outage
            -- ‚ùå Not suitable for global distribution
            -- ‚ùå Limited scalability</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">When to Use CA Systems:</h4>
                        <ul>
                            <li>‚úì Small to medium applications</li>
                            <li>‚úì Single datacenter deployment</li>
                            <li>‚úì Strong consistency required</li>
                            <li>‚úì Partitions rare (same rack/datacenter)</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-shield-alt"></i>
                        CP Systems (Consistency + Partition Tolerance)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> Systems that guarantee consistency and can tolerate partitions, but sacrifice availability during partitions.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Characteristics:</h4>
                        <ul>
                            <li>Always serve correct data or error</li>
                            <li>Continue operating during partitions</li>
                            <li>May reject requests during partitions</li>
                            <li>Use quorum-based protocols</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Examples:</h4>
                        <ul>
                            <li><strong>MongoDB:</strong> Primary-secondary with strong consistency</li>
                            <li><strong>HBase:</strong> Hadoop distributed database</li>
                            <li><strong>Redis (clustered):</strong> With strong consistency mode</li>
                            <li><strong>ZooKeeper:</strong> Coordination service</li>
                            <li><strong>etcd:</strong> Distributed key-value store (Raft-based)</li>
                            <li><strong>Consul:</strong> Service mesh solution</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- CP System Example: MongoDB Replica Set

            -- Configuration:
            -- 5 nodes: Primary + 4 Secondaries
            -- Replica Set: {Node1, Node2, Node3, Node4, Node5}

            -- Normal Operation (No Partition):
            -- Write to Primary:
            db.accounts.updateOne(
                {id: 123},
                {$set: {balance: 1500}}
            )

            -- Behavior:
            -- 1. Write to Primary (Node1) ‚úì
            -- 2. Replicate to majority (3 nodes) ‚úì
            -- 3. Return success ‚úì
            -- 4. ‚úì Consistent: All reads see 1500
            -- 5. ‚úì Available: Request succeeded

            -- During Partition:
            -- Network partition: {Node1, Node2} vs {Node3, Node4, Node5}

            -- Group 1 (Node1, Node2):
            -- Primary = Node1
            -- Can reach: Node1 ‚úì, Node2 ‚úì
            -- Majority: Need 3 out of 5 ‚ùå
            -- Have only 2 nodes ‚ùå

            -- Write attempt:
            db.accounts.updateOne({id: 123}, {$set: {balance: 2000}})

            -- MongoDB behavior:
            -- Cannot reach majority ‚ùå
            -- Election triggered
            -- No node can become primary ‚ùå
            -- Response: "NotPrimaryNoSecondaryOk" ‚ùå

            -- ‚ùå NOT Available for writes
            -- ‚úì Maintains Consistency (won't accept stale writes)
            -- ‚úì Partition Tolerant (recognizes partition)

            -- Group 2 (Node3, Node4, Node5):
            -- Have majority! (3 out of 5) ‚úì
            -- Elects new primary (Node3) ‚úì

            -- Write attempt:
            db.accounts.updateOne({id: 123}, {$set: {balance: 2000}})
            -- Success! ‚úì

            -- ‚úì Available for majority partition
            -- ‚úì Consistent
            -- ‚úì Partition Tolerant

            -- -----------------------------------------------------------
            -- CP System: ZooKeeper Example
            -- -----------------------------------------------------------

            -- ZooKeeper: Distributed coordination service
            -- Used by Kafka, HBase, Hadoop

            -- Cluster: 5 nodes
            -- Quorum: 3 (majority)

            -- Create a ZNode (distributed lock):
            zkClient.create("/locks/resource1", data, ACL, EPHEMERAL)

            -- Normal operation:
            -- 1. Request sent to leader ‚úì
            -- 2. Leader proposes to followers ‚úì
            -- 3. Majority accepts ‚úì
            -- 4. Leader commits ‚úì
            -- 5. Returns success ‚úì

            -- During partition: {Leader, Node2} vs {Node3, Node4, Node5}

            -- Old leader's partition (2 nodes):
            -- No majority ‚ùå
            -- Leader steps down ‚ùå
            -- Cannot accept writes ‚ùå
            -- Response: "KeeperException: ConnectionLoss" ‚ùå

            -- ‚ùå NOT Available

            -- New majority partition (3 nodes):
            -- Elects new leader (Node3) ‚úì
            -- Accepts writes ‚úì

            -- ‚úì Available for majority
            -- ‚úì Consistent (only one leader)
            -- ‚úì Partition Tolerant

            -- -----------------------------------------------------------
            -- Real-World Example: Bank ATM System (CP)
            -- -----------------------------------------------------------

            -- ATM network with 1000 ATMs across city
            -- Backend: MongoDB cluster

            -- Customer at ATM #1: Withdraw $500
            -- Account balance: $1000

            -- Normal case:
            -- 1. ATM queries MongoDB: balance = $1000 ‚úì
            -- 2. ATM dispenses $500 ‚úì
            -- 3. MongoDB updates: balance = $500 ‚úì
            -- 4. Update replicated to majority ‚úì

            -- Partition case: ATM #1's datacenter isolated
            -- ATM #1 tries to withdraw:
            -- MongoDB cannot reach majority ‚ùå
            -- Response: "Service temporarily unavailable" ‚ùå
            -- ATM shows: "Cannot complete transaction" ‚ùå

            -- Result:
            -- ‚ùå Customer annoyed (not available)
            -- ‚úì No double-spending (consistent)
            -- ‚úì System handled partition correctly

            -- Better than alternative:
            -- ‚úó Allow withdrawal without confirmation
            -- ‚úó Customer withdraws $500
            -- ‚úó Balance not updated (partition)
            -- ‚úó Customer withdraws another $500 from ATM #2
            -- ‚úó Overdraft! ‚ùå‚ùå‚ùå

            -- CP choice: Safer for banking ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">When to Use CP Systems:</h4>
                        <ul>
                            <li>‚úì Financial transactions</li>
                            <li>‚úì Inventory management</li>
                            <li>‚úì Critical metadata</li>
                            <li>‚úì Coordination services</li>
                            <li>‚úì When correctness > availability</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i>
                        AP Systems (Availability + Partition Tolerance)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Definition:</strong> Systems that guarantee availability and can tolerate partitions, but sacrifice immediate consistency.</p>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Characteristics:</h4>
                        <ul>
                            <li>Always respond to requests</li>
                            <li>Continue operating during partitions</li>
                            <li>Accept eventual consistency</li>
                            <li>Use conflict resolution mechanisms</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1rem;">Examples:</h4>
                        <ul>
                            <li><strong>Cassandra:</strong> Wide-column NoSQL database</li>
                            <li><strong>DynamoDB:</strong> AWS managed NoSQL</li>
                            <li><strong>CouchDB:</strong> Document database</li>
                            <li><strong>Riak:</strong> Distributed key-value store</li>
                            <li><strong>DNS:</strong> Domain Name System</li>
                        </ul>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- AP System Example: Cassandra

            -- Cluster: 6 nodes across 3 datacenters
            -- DC1: {Node1, Node2}
            -- DC2: {Node3, Node4}
            -- DC3: {Node5, Node6}

            -- Replication Factor: 3
            -- Write Consistency: ONE (most available)
            -- Read Consistency: ONE

            -- Normal Operation:
            -- Write key 'user:123':
            INSERT INTO users (id, name, email) 
            VALUES (123, 'John', 'john@example.com');

            -- Behavior:
            -- 1. Write to coordinator (Node1) ‚úì
            -- 2. Coordinator writes to replicas: Node1, Node3, Node5
            -- 3. ONE replica acknowledges ‚úì
            -- 4. Return success immediately ‚ö°
            -- 5. Async replication to other replicas

            -- ‚úì Available: Returns immediately
            -- ‚ö† Consistency: Other replicas may not have data yet

            -- During Partition:
            -- Network partition: DC1+DC2 vs DC3

            -- Write from DC1:
            INSERT INTO users (id, 456, name, 'Jane') VALUES ...;

            -- Behavior:
            -- Write to Node1 ‚úì
            -- Replicate to Node3 ‚úì
            -- Cannot reach Node5 (DC3) ‚ùå
            -- But: Already have ONE acknowledgment ‚úì
            -- Return success! ‚úì

            -- ‚úì Available (write succeeded)
            -- ‚úì Partition Tolerant (handled partition)
            -- ‚ö† Inconsistent (Node5 doesn't have data)

            -- Write from DC3 (concurrent):
            UPDATE users SET name = 'Jane Smith' WHERE id = 456;

            -- Behavior:
            -- Write to Node5 ‚úì
            -- Cannot reach Node1 or Node3 ‚ùå
            -- But: Node5 is a replica ‚úì
            -- Return success! ‚úì

            -- ‚úì Available
            -- ‚úì Partition Tolerant
            -- ‚ö† Conflict! (Both partitions modified data)

            -- When Partition Heals:
            -- Anti-entropy process runs
            -- Detects conflict:
            --   DC1/DC2: name = 'Jane'
            --   DC3: name = 'Jane Smith'

            -- Resolution: Last-Write-Wins (timestamp-based)
            -- Whichever write had later timestamp wins
            -- Final value: 'Jane Smith' (assuming it was later)

            -- -----------------------------------------------------------
            -- AP System: DynamoDB Example
            -- -----------------------------------------------------------

            -- Shopping cart application
            -- Table: ShoppingCarts
            -- Partition Key: user_id

            -- Configuration:
            -- Read Consistency: Eventually Consistent (default)
            -- Write: Always succeeds

            -- User adds item to cart:
            dynamodb.put_item(
                TableName='ShoppingCarts',
                Item={'user_id': 123, 'items': ['item1', 'item2']}
            )

            -- Behavior:
            -- Write to primary region (us-east-1) ‚úì
            -- Return success immediately ‚úì
            -- Replicate to us-west-2, eu-west-1 asynchronously

            -- Time 0:00 - Write in us-east-1:
            us-east-1: {user_id: 123, items: ['item1', 'item2']} ‚úì
            us-west-2: {user_id: 123, items: ['item1']} (stale)
            eu-west-1: {user_id: 123, items: ['item1']} (stale)

            -- Time 0:01 - User reads from us-west-2:
            items = dynamodb.get_item(Key={'user_id': 123})
            -- Returns: ['item1'] ‚ö† (stale!)
            -- User: "Where's item2?!" üòï

            -- Time 0:02 - Replication completes:
            us-east-1: {user_id: 123, items: ['item1', 'item2']} ‚úì
            us-west-2: {user_id: 123, items: ['item1', 'item2']} ‚úì
            eu-west-1: {user_id: 123, items: ['item1', 'item2']} ‚úì

            -- Now consistent! ‚úì

            -- Trade-off:
            -- ‚úì Always available (no rejected requests)
            -- ‚úì Fast (local reads/writes)
            -- ‚ö† Temporary inconsistency (seconds)
            -- ‚úì Eventually consistent

            -- -----------------------------------------------------------
            -- Real-World Example: Social Media (AP)
            -- -----------------------------------------------------------

            -- Twitter-like application
            -- Cassandra backend

            -- User posts tweet:
            POST /tweets
            {
                "user_id": 123,
                "text": "Hello World!",
                "timestamp": "2024-01-01T12:00:00Z"
            }

            -- Behavior:
            -- Write to nearest datacenter ‚úì
            -- Return "Posted successfully" immediately ‚úì
            -- Replicate asynchronously to other DCs

            -- Results:
            -- Users in US: See tweet immediately ‚úì
            -- Users in Europe: See tweet in 1-2 seconds ‚ö†
            -- Users in Asia: See tweet in 3-5 seconds ‚ö†

            -- User experience:
            -- ‚úì Always can post (available)
            -- ‚úì Fast response (low latency)
            -- ‚ö† Followers may see tweet slightly delayed
            -- ‚úì Acceptable for social media!

            -- Alternative with CP:
            -- Wait for replication to all regions
            -- Post takes 200ms instead of 10ms
            -- User perceives as "slow" ‚ùå
            -- May switch to competitor üò±

            -- AP choice: Better UX for social media ‚úì</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">When to Use AP Systems:</h4>
                        <ul>
                            <li>‚úì Social media platforms</li>
                            <li>‚úì Content distribution</li>
                            <li>‚úì Analytics and logging</li>
                            <li>‚úì Shopping carts</li>
                            <li>‚úì When availability > immediate consistency</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Comparison Matrix
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">System Type</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">CA</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">CP</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">AP</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Consistency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Strong ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Strong ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Eventual ‚ö†</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Availability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">High ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">Reduced ‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">High ‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Partition Tolerance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Yes ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Yes ‚úì</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Best For</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Single datacenter</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Banking, inventory</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Social media, CDN</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Latency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Low</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Medium-High</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Low</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Examples</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Single MySQL</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MongoDB, HBase</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cassandra, DynamoDB</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">CA Systems</span>
                        <span class="keyword-tag">CP Systems</span>
                        <span class="keyword-tag">AP Systems</span>
                        <span class="keyword-tag">Quorum</span>
                        <span class="keyword-tag">Eventual Consistency</span>
                        <span class="keyword-tag">Strong Consistency</span>
                        <span class="keyword-tag">MongoDB</span>
                        <span class="keyword-tag">Cassandra</span>
                        <span class="keyword-tag">Trade-offs</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 173: How Do RDBMS Fit in CAP Terms? -->
            <div class="question-content" id="q173">
                <div class="question-header">
                    <h1 class="question-title">How Do Traditional RDBMS Fit in CAP Terms?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 9 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        RDBMS and CAP Theorem
                    </div>
                    <div class="definition-box">
                        <p><strong>Traditional RDBMS</strong> (PostgreSQL, MySQL, Oracle, SQL Server) were designed before the CAP theorem was formulated. Their CAP classification depends on their deployment architecture:</p>
                        
                        <ul style="margin-top: 1rem;">
                            <li><strong>Single Instance:</strong> CA (not distributed, no partition tolerance needed)</li>
                            <li><strong>Master-Slave Replication:</strong> CA (same datacenter) or CP (cross-datacenter with strong consistency)</li>
                            <li><strong>Multi-Master:</strong> Typically CP (sacrifice availability for consistency)</li>
                            <li><strong>Sharded:</strong> Often CP with careful configuration</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Key Insight:</strong> Traditional RDBMS prioritize consistency (ACID) over availability, making them naturally CP systems when distributed. They were NOT designed for high availability during partitions.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-server"></i>
                        Single Instance RDBMS (CA)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Single server database - the original RDBMS model</strong></p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Single PostgreSQL Server

            -- Configuration:
            -- One database server
            -- All applications connect to this server
            -- No replication, no distribution

            -- Architecture:
            [App Server 1] ‚îÄ‚îÄ‚îê
            [App Server 2] ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚Üí [PostgreSQL Server]
            [App Server 3] ‚îÄ‚îÄ‚îò

            -- CAP Analysis:
            -- Consistency (C): ‚úì Strong ACID guarantees
            --   - All reads see latest writes
            --   - Transactions isolated
            --   - No replication lag

            -- Availability (A): ‚úì Always responds (when running)
            --   - Single point of truth
            --   - No coordination needed
            --   - Fast response times

            -- Partition Tolerance (P): N/A (not applicable)
            --   - No network between nodes (only one node!)
            --   - No partitions possible
            --   - Not a distributed system

            -- Classification: CA System ‚úì

            -- -----------------------------------------------------------
            -- What Happens During Failures?
            -- -----------------------------------------------------------

            -- Network failure (app cannot reach database):
            [App] ‚îÄ‚îÄX‚îÄ‚îÄ‚Üí [Database]

            -- Result:
            -- Database itself still running ‚úì
            -- But apps cannot connect ‚ùå
            -- Effectively: System unavailable ‚ùå

            -- This is NOT a partition (no distributed nodes)
            -- This is a complete failure (cannot reach single server)

            -- Hardware failure (database server crashes):
            [App] ‚îÄ‚îÄ‚Üí [Database üí•]

            -- Result:
            -- Database down ‚ùå
            -- All operations fail ‚ùå
            -- Must restore from backup
            -- Downtime: Minutes to hours ‚è∞

            -- Limitations:
            -- ‚ùå Single point of failure
            -- ‚ùå No fault tolerance
            -- ‚ùå Downtime during maintenance
            -- ‚ùå Cannot scale horizontally
            -- ‚ùå Limited by single server capacity

            -- When This Works:
            -- ‚úì Small to medium applications
            -- ‚úì Single datacenter
            -- ‚úì Acceptable downtime windows
            -- ‚úì Vertical scaling sufficient</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-clone"></i>
                        Master-Slave Replication (CA or CP)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>One primary (master) server for writes, multiple secondary (slave) servers for reads</strong></p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- MySQL Master-Slave Replication

            -- Architecture:
                                ‚îå‚îÄ‚Üí [Slave 1] (Read)
            [Master] (Write) ‚îÄ‚îÄ‚îº‚îÄ‚Üí [Slave 2] (Read)
                                ‚îî‚îÄ‚Üí [Slave 3] (Read)

            -- Configuration:
            -- Master: Handles all writes
            -- Slaves: Replicate from master, handle reads

            -- Same Datacenter Deployment (CA):

            -- Normal Operation:
            -- Write to master:
            UPDATE accounts SET balance = 1500 WHERE id = 123;
            -- Master: balance = 1500 ‚úì
            -- Replicates to slaves (few milliseconds)
            -- Slave 1: balance = 1500 ‚úì
            -- Slave 2: balance = 1500 ‚úì
            -- Slave 3: balance = 1500 ‚úì

            -- CAP Analysis (Same DC):
            -- C: ‚úì Strong consistency (or very short replication lag)
            -- A: ‚úì High availability (read from any slave)
            -- P: N/A (same datacenter, reliable network)

            -- Classification: CA System ‚úì

            -- -----------------------------------------------------------
            -- Cross-Datacenter Deployment (CP)
            -- -----------------------------------------------------------

            -- Architecture:
            -- DC1: [Master] + [Slave 1]
            -- DC2: [Slave 2] + [Slave 3]

            -- With Synchronous Replication:
            -- Master waits for at least one slave to confirm

            -- MySQL Configuration:
            [mysqld]
            rpl_semi_sync_master_enabled = 1
            rpl_semi_sync_slave_enabled = 1

            -- Write operation:
            UPDATE accounts SET balance = 1500 WHERE id = 123;

            -- Behavior:
            -- 1. Write to master ‚úì
            -- 2. Master waits for slave confirmation ‚è≥
            -- 3. At least 1 slave confirms ‚úì
            -- 4. Master returns success ‚úì

            -- Network Partition: DC1 ‚Üê‚úó‚Üí DC2

            -- Master in DC1:
            -- Can reach Slave 1 (DC1) ‚úì
            -- Cannot reach Slave 2, Slave 3 (DC2) ‚ùå
            -- Still have 1 slave confirmation ‚úì
            -- Continue accepting writes ‚úì

            -- But if Master loses ALL slaves:
            -- Cannot get confirmation ‚ùå
            -- Blocks writes ‚ùå
            -- Sacrifices availability for consistency

            -- CAP Analysis (Cross-DC):
            -- C: ‚úì Strong consistency (synchronous replication)
            -- A: ‚ö† Reduced (blocks if no slaves reachable)
            -- P: ‚úì Tolerates some partitions

            -- Classification: CP System ‚úì

            -- -----------------------------------------------------------
            -- Asynchronous Replication (Eventually Consistent)
            -- -----------------------------------------------------------

            -- Default MySQL replication is asynchronous

            -- Write to master:
            UPDATE accounts SET balance = 1500 WHERE id = 123;
            -- Returns immediately ‚ö°
            -- Slaves replicate in background

            -- Read from slave immediately after:
            SELECT balance FROM accounts WHERE id = 123;
            -- May return: 1000 (old value!) ‚ö†
            -- Replication lag: 10ms - 1 second

            -- This is NOT strong consistency!
            -- More like AP with very short inconsistency window

            -- Replication Lag Issues:
            -- User updates profile picture
            -- Redirected to slave for next request
            -- Still sees old picture! üòï

            -- Solutions:
            -- 1. Read from master after write
            -- 2. Session affinity (stick to same slave)
            -- 3. Wait for replication (artificial delay)
            -- 4. Accept eventual consistency

            -- -----------------------------------------------------------
            -- Master Failure Scenario
            -- -----------------------------------------------------------

            -- Master crashes: üí•
            [Master üí•]
            ‚Üì
            [Slave 1] [Slave 2] [Slave 3]

            -- Manual Failover:
            -- 1. Detect master failure (30s - 2min)
            -- 2. Choose new master (usually most up-to-date slave)
            -- 3. Promote slave to master
            -- 4. Reconfigure other slaves
            -- 5. Update application connection strings

            -- Downtime: 1-5 minutes ‚è∞

            -- Automatic Failover (with tools):
            -- Tools: MySQL Router, ProxySQL, Orchestrator
            -- Automatic detection and promotion
            -- Downtime: 10-60 seconds ‚è∞

            -- Issues:
            -- ‚ö† Split-brain risk (two masters)
            -- ‚ö† Lost transactions (if async replication)
            -- ‚ö† Data inconsistency (if slaves diverged)

            -- -----------------------------------------------------------
            -- PostgreSQL Streaming Replication
            -- -----------------------------------------------------------

            -- Similar to MySQL but with better options

            -- Configuration:
            synchronous_commit = on  # Wait for replica
            synchronous_standby_names = 'standby1'

            -- Behavior:
            -- Similar to MySQL semi-sync
            -- CP system characteristics
            -- Strong consistency with availability trade-off

            -- Advantage over MySQL:
            -- ‚úì Synchronous replication more mature
            -- ‚úì Better failover tools (pg_auto_failover)
            -- ‚úì WAL shipping more reliable</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-network-wired"></i>
                        Multi-Master RDBMS (CP)
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Multiple nodes can accept writes - complex and rare in traditional RDBMS</strong></p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- MySQL Group Replication (Multi-Master)

            -- Architecture:
            [Node 1] ‚Üê‚Üí [Node 2] ‚Üê‚Üí [Node 3]
            ‚Üï            ‚Üï            ‚Üï
            All nodes can accept writes

            -- Configuration:
            -- Requires MySQL 5.7.17+
            -- Uses Paxos consensus protocol

            -- Write operation on Node 1:
            UPDATE accounts SET balance = 1500 WHERE id = 123;

            -- Behind the scenes:
            -- 1. Node 1 proposes change to group
            -- 2. Majority must approve (2 out of 3)
            -- 3. If approved, all nodes apply change
            -- 4. If not approved, rollback

            -- Network Partition: {Node 1, Node 2} vs {Node 3}

            -- Majority partition (Node 1, Node 2):
            -- Have majority (2/3) ‚úì
            -- Continue accepting writes ‚úì

            -- Minority partition (Node 3):
            -- No majority ‚ùå
            -- Rejects writes ‚ùå
            -- Read-only mode ‚ö†

            -- CAP Classification: CP ‚úì
            -- Consistency: ‚úì (consensus-based)
            -- Partition Tolerance: ‚úì (handles splits)
            -- Availability: ‚ö† (minority partition unavailable)

            -- -----------------------------------------------------------
            -- Challenges with Multi-Master
            -- -----------------------------------------------------------

            -- Conflict Detection:
            -- Concurrent writes to same row on different nodes

            -- Node 1:
            UPDATE accounts SET balance = 1500 WHERE id = 123;

            -- Node 2 (concurrent):
            UPDATE accounts SET balance = 1600 WHERE id = 123;

            -- Conflict! Which value is correct?

            -- Resolution strategies:
            -- 1. First-writer-wins (reject second write)
            -- 2. Last-write-wins (timestamp-based)
            -- 3. Application-level resolution
            -- 4. Abort both and retry

            -- Performance Issues:
            -- ‚ö† Coordination overhead (consensus protocol)
            -- ‚ö† Higher latency (inter-node communication)
            -- ‚ö† Lower throughput (serialization bottleneck)

            -- Why Rarely Used:
            -- ‚ùå Complex setup and maintenance
            -- ‚ùå Limited by slowest node
            -- ‚ùå Conflict resolution difficult
            -- ‚ùå Better alternatives exist (Cassandra, CockroachDB)

            -- When It Makes Sense:
            -- ‚úì Geographic distribution with local writes
            -- ‚úì Disaster recovery (both sites active)
            -- ‚úì Need RDBMS features + multi-master</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Summary: RDBMS in CAP
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Deployment</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">CAP Type</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Behavior</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Use Case</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Single Instance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CA</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Strong consistency, high availability (single DC)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Small apps</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Master-Slave (Async)</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CA (eventual)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Fast writes, eventual consistency</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Read-heavy apps</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Master-Slave (Sync)</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Strong consistency, may block</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Financial systems</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Multi-Master</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Consensus-based, partition-aware</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Multi-region writes</td>
                        </tr>
                    </table>
                    
                    <div style="margin-top: 1.5rem; padding: 1rem; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 4px;">
                        <p style="margin: 0; font-weight: bold; color: #92400e;">Key Takeaway:</p>
                        <p style="margin: 0.5rem 0 0 0; color: #92400e;">Traditional RDBMS were designed for CA (single datacenter, strong consistency). When distributed across datacenters, they become CP systems, sacrificing availability to maintain consistency. They were NOT designed for AP scenarios - that's why NoSQL databases emerged!</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">RDBMS CAP</span>
                        <span class="keyword-tag">Master-Slave</span>
                        <span class="keyword-tag">Synchronous Replication</span>
                        <span class="keyword-tag">Asynchronous Replication</span>
                        <span class="keyword-tag">Replication Lag</span>
                        <span class="keyword-tag">Multi-Master</span>
                        <span class="keyword-tag">Single Point of Failure</span>
                        <span class="keyword-tag">Failover</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 174: Modern Distributed SQL & CAP -->
            <div class="question-content" id="q174">
                <div class="question-header">
                    <h1 class="question-title">How Do Modern Distributed SQL Databases Handle CAP?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Modern Distributed SQL Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>Modern Distributed SQL databases</strong> (also called NewSQL) attempt to provide ACID guarantees with horizontal scalability. They handle CAP theorem by being CP systems with high availability through sophisticated consensus algorithms.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Examples:</strong></p>
                        <ul>
                            <li><strong>Google Spanner:</strong> Global distributed SQL with strong consistency</li>
                            <li><strong>CockroachDB:</strong> Open-source, Spanner-inspired</li>
                            <li><strong>YugabyteDB:</strong> PostgreSQL-compatible distributed database</li>
                            <li><strong>TiDB:</strong> MySQL-compatible distributed database</li>
                            <li><strong>Amazon Aurora:</strong> MySQL/PostgreSQL compatible with distributed storage</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>The Innovation:</strong> These systems challenge the notion that you must sacrifice consistency OR availability. They're CP but with very high availability (99.99%+) through clever engineering.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-globe"></i>
                        Google Spanner - The Pioneer
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Google Spanner</strong> is the system that proved distributed SQL with strong consistency could work at global scale.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- Google Spanner Architecture

            -- Global Distribution:
            -- Data replicated across multiple regions
            -- US-East, US-West, Europe, Asia

            -- Key Innovation: TrueTime API
            -- Uses atomic clocks and GPS to get global timestamp
            -- Uncertainty: ¬±7ms (know exact time within 7ms)

            -- Transaction Execution:

            -- Write transaction:
            START TRANSACTION;
            UPDATE accounts SET balance = 1500 WHERE id = 123;
            COMMIT;

            -- Behind the scenes:
            -- 1. Assign timestamp using TrueTime
            -- 2. Use Paxos for consensus across replicas
            -- 3. Wait for "commit wait" (uncertainty interval)
            -- 4. Commit visible globally

            -- CAP Classification: CP+
            -- C: ‚úì Strong consistency (linearizable)
            -- A: ‚úì Very high (99.999%) but not 100%
            -- P: ‚úì Partition tolerant

            -- During partition:
            -- Majority partition: Continues operating ‚úì
            -- Minority partition: Blocks writes ‚ùå
            -- But: Very rare (Google's network infrastructure)

            -- External Consistency:
            -- Transactions appear to execute in real-time order
            -- If T1 commits before T2 starts, T2 sees T1's changes
            -- Stronger than standard serializability!

            -- Performance:
            -- Local reads: 5-10ms
            -- Cross-region writes: 50-150ms
            -- Trade-off: Consistency for latency

            -- -----------------------------------------------------------
            -- Spanner Read Types
            -- -----------------------------------------------------------

            -- Strong Reads:
            SELECT * FROM accounts WHERE id = 123;
            -- Sees absolutely latest data ‚úì
            -- May require cross-region communication
            -- Latency: 10-100ms

            -- Stale Reads (optional):
            SELECT * FROM accounts WHERE id = 123
            TIMESTAMP BOUNDED BY MAX_STALENESS = '10s';
            -- Can read slightly stale data
            -- Served locally (fast) ‚ö°
            -- Latency: 1-5ms
            -- Use case: Analytics, dashboards

            -- Snapshot Reads:
            SELECT * FROM accounts 
            AS OF SYSTEM TIME TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 1 HOUR);
            -- Read historical data (time travel)
            -- Useful for auditing, debugging

            -- -----------------------------------------------------------
            -- How Spanner Achieves Both C and A
            -- -----------------------------------------------------------

            -- Not violating CAP, but maximizing both:

            -- Consistency through:
            -- ‚Ä¢ Paxos consensus (majority voting)
            -- ‚Ä¢ Synchronous replication
            -- ‚Ä¢ TrueTime for global ordering

            -- High Availability through:
            -- ‚Ä¢ 5+ replicas per region
            -- ‚Ä¢ Automatic failover (seconds)
            -- ‚Ä¢ Geographic distribution
            -- ‚Ä¢ Google's reliable network

            -- During partition:
            -- Majority partition (3/5 replicas): ‚úì Available
            -- Minority partition (2/5 replicas): ‚ùå Not available
            -- But: Network partitions rare in Google infrastructure

            -- Result: CP system with 99.999% availability ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-database"></i>
                        CockroachDB - Open Source Alternative
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>CockroachDB</strong> - Inspired by Spanner, but without TrueTime. Uses hybrid logical clocks instead.</p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- CockroachDB Architecture

            -- Cluster: Multiple nodes across regions
            -- Data sharded and replicated (3 replicas by default)

            -- Key Differences from Spanner:
            -- ‚úì No atomic clocks (uses HLC - Hybrid Logical Clocks)
            -- ‚úì Raft instead of Paxos (simpler consensus)
            -- ‚úì Open source
            -- ‚úì Can run anywhere (not just Google cloud)

            -- Transaction Example:
            START TRANSACTION;
            UPDATE accounts SET balance = balance - 500 WHERE id = 'A';
            UPDATE accounts SET balance = balance + 500 WHERE id = 'B';
            COMMIT;

            -- Behind the scenes:
            -- 1. Transaction coordinator elected
            -- 2. Lock rows across all replicas
            -- 3. Use Raft to reach consensus
            -- 4. Commit or abort based on consensus

            -- CAP Classification: CP
            -- C: ‚úì Serializable isolation by default
            -- A: ‚úì High (99.99%) but blocks minority partitions
            -- P: ‚úì Handles partitions via Raft

            -- -----------------------------------------------------------
            -- Raft Consensus in CockroachDB
            -- -----------------------------------------------------------

            -- Range (shard): Replicated across 3 nodes
            -- Range: [key_a to key_m]
            -- Replicas: Node1 (leader), Node2, Node3

            -- Write to range:
            UPDATE accounts SET balance = 1500 WHERE id = 'abc';

            -- Raft protocol:
            -- 1. Leader (Node1) receives write
            -- 2. Leader appends to its log
            -- 3. Leader replicates to followers (Node2, Node3)
            -- 4. Wait for majority (2 out of 3) ‚úì
            -- 5. Leader commits
            -- 6. Leader notifies followers to commit

            -- Network Partition: Node1, Node2 vs Node3

            -- Majority partition (Node1, Node2):
            -- Leader still has majority ‚úì
            -- Continue accepting writes ‚úì
            -- High availability maintained ‚úì

            -- Minority partition (Node3):
            -- Isolated, no majority ‚ùå
            -- Becomes read-only ‚ö†
            -- Cannot accept writes ‚ùå

            -- -----------------------------------------------------------
            -- Handling Cross-Region Latency
            -- -----------------------------------------------------------

            -- Challenge: Replicas in different regions
            -- US-East: Node1
            -- US-West: Node2  
            -- Europe: Node3

            -- Write latency:
            -- Must reach majority (2 of 3)
            -- US-East ‚Üí Europe: 100ms
            -- Total write latency: ~150ms ‚è∞

            -- Optimization: Follower reads
            -- Read from nearest replica
            -- Accept slightly stale data (bounded staleness)
            -- Much faster: 5-10ms ‚ö°

            -- Configuration:
            SET CLUSTER SETTING kv.closed_timestamp.target_duration = '3s';
            -- Reads at most 3 seconds stale

            -- -----------------------------------------------------------
            -- Multi-Region Patterns
            -- -----------------------------------------------------------

            -- 1. Global Table (replicated everywhere):
            CREATE TABLE users (
                id UUID PRIMARY KEY,
                name STRING
            ) LOCALITY GLOBAL;

            -- Behavior:
            -- ‚Ä¢ Replicated to all regions
            -- ‚Ä¢ Fast reads everywhere ‚ö°
            -- ‚Ä¢ Slow writes (global consensus) ‚è∞

            -- 2. Regional Tables:
            CREATE TABLE orders (
                id UUID PRIMARY KEY,
                user_id UUID,
                region STRING
            ) PARTITION BY LIST (region) (
                PARTITION us VALUES IN ('us-east', 'us-west'),
                PARTITION eu VALUES IN ('europe')
            );

            -- Behavior:
            -- ‚Ä¢ Data stays in region (compliance)
            -- ‚Ä¢ Fast local reads and writes ‚ö°
            -- ‚Ä¢ Cross-region queries slower ‚è∞

            -- 3. Duplicate Data Pattern:
            -- Maintain regional copies
            -- Read locally, write locally
            -- Eventual consistency between regions
            -- Best performance but more complex

            -- -----------------------------------------------------------
            -- CockroachDB vs Spanner
            -- -----------------------------------------------------------

            -- Similarities:
            -- ‚úì Both CP systems
            -- ‚úì Both support distributed SQL
            -- ‚úì Both use consensus (Raft/Paxos)
            -- ‚úì Both provide strong consistency

            -- Differences:
            -- Spanner: TrueTime (atomic clocks) ‚Üí stricter ordering
            -- CockroachDB: HLC ‚Üí slightly looser ordering
            -- 
            -- Spanner: 99.999% availability (Google infrastructure)
            -- CockroachDB: 99.99% availability (more flexible deployment)
            -- 
            -- Spanner: Proprietary
            -- CockroachDB: Open source

            -- When to use:
            -- Spanner: Need absolute strictest consistency, on GCP
            -- CockroachDB: Need open source, multi-cloud, good enough consistency</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-bolt"></i>
                        YugabyteDB and TiDB
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Other Modern Distributed SQL Databases</strong></p>
                        
                        <div class="example-box" style="margin-top: 1rem;">
                            <pre><code>-- YugabyteDB

            -- Key Features:
            -- ‚Ä¢ PostgreSQL-compatible
            -- ‚Ä¢ Raft consensus
            -- ‚Ä¢ Distributed SQL + NoSQL (YCQL)

            -- Architecture:
            -- YQL (SQL layer) ‚Üí DocDB (document store) ‚Üí Raft replication

            -- CAP: CP with high availability
            -- Similar to CockroachDB

            -- Advantage:
            -- ‚úì Drop-in PostgreSQL replacement
            -- ‚úì Dual API (SQL + Cassandra-compatible)

            -- -----------------------------------------------------------
            -- TiDB
            -- -----------------------------------------------------------

            -- Key Features:
            -- ‚Ä¢ MySQL-compatible
            -- ‚Ä¢ Raft consensus (via TiKV)
            -- ‚Ä¢ Horizontal scalability

            -- Architecture:
            TiDB (SQL layer) 
            ‚Üì
            PD (Placement Driver - metadata)
            ‚Üì
            TiKV (distributed storage - Raft)

            -- CAP: CP
            -- Strong consistency via Raft
            -- High availability via replication

            -- Advantage:
            -- ‚úì Drop-in MySQL replacement
            -- ‚úì Mature ecosystem (used by large companies)
            -- ‚úì Good performance

            -- -----------------------------------------------------------
            -- Amazon Aurora
            -- -----------------------------------------------------------

            -- Different approach: Distributed storage, single writer

            -- Architecture:
            [Aurora Writer Instance]
                    ‚Üì
            [Distributed Storage Layer]
            ‚Üì      ‚Üì      ‚Üì      ‚Üì      ‚Üì      ‚Üì
            [AZ1] [AZ2] [AZ3] [AZ4] [AZ5] [AZ6]

            -- Key Innovation:
            -- ‚Ä¢ Storage layer distributed (6 copies across 3 AZs)
            -- ‚Ä¢ Compute layer not distributed (single writer)
            -- ‚Ä¢ Separates compute from storage

            -- Write operation:
            UPDATE accounts SET balance = 1500 WHERE id = 123;

            -- Behind the scenes:
            -- 1. Writer instance processes
            -- 2. Sends to storage layer
            -- 3. Storage writes to 4 out of 6 replicas (quorum)
            -- 4. Returns success ‚úì

            -- CAP: CP+ (within region)
            -- C: ‚úì Strong consistency
            -- A: ‚úì Very high (automatic failover < 30s)
            -- P: ‚úì Within region (cross-AZ failures)

            -- Limitation:
            -- ‚ö† Single region only (not global)
            -- ‚ö† Single writer (not multi-master)
            -- ‚ö† For global, need Aurora Global Database (eventual consistency)

            -- Advantages:
            -- ‚úì MySQL/PostgreSQL compatible
            -- ‚úì 5x faster than standard MySQL
            -- ‚úì Automatic failover
            -- ‚úì Easy to use (managed service)</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Comparison Matrix
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Database</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">CAP</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Consensus</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Compatible With</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Global?</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Google Spanner</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP (99.999% A)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Paxos + TrueTime</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">SQL</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Yes</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>CockroachDB</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP (99.99% A)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Raft + HLC</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">PostgreSQL</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Yes</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>YugabyteDB</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Raft</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">PostgreSQL</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Yes</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>TiDB</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Raft</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MySQL</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Yes</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Aurora</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP (regional)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Quorum</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">MySQL/PostgreSQL</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">No</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Distributed SQL</span>
                        <span class="keyword-tag">NewSQL</span>
                        <span class="keyword-tag">Google Spanner</span>
                        <span class="keyword-tag">CockroachDB</span>
                        <span class="keyword-tag">Raft Consensus</span>
                        <span class="keyword-tag">TrueTime</span>
                        <span class="keyword-tag">Hybrid Logical Clock</span>
                        <span class="keyword-tag">Horizontal Scalability</span>
                        <span class="keyword-tag">Strong Consistency</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 175: What is Eventual Consistency? -->
            <div class="question-content" id="q175">
                <div class="question-header">
                    <h1 class="question-title">What is Eventual Consistency?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Fundamental</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 10 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Intermediate</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        Definition
                    </div>
                    <div class="definition-box">
                        <p><strong>Eventual Consistency</strong> is a consistency model where, if no new updates are made to a data item, eventually all replicas will converge to the same value. The system guarantees that all replicas will become consistent "eventually," but not immediately.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Key Characteristics:</strong></p>
                        <ul>
                            <li><strong>No Immediate Consistency:</strong> Replicas may have different values temporarily</li>
                            <li><strong>Convergence:</strong> All replicas will eventually agree on the same value</li>
                            <li><strong>Time Bound:</strong> "Eventually" typically means seconds to minutes</li>
                            <li><strong>High Availability:</strong> System remains available even during replication</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>The Trade-off:</strong></p>
                        <p>Eventual consistency sacrifices immediate correctness for availability and performance. It's the consistency model used by AP systems in CAP theorem.</p>
                        
                        <p style="margin-top: 1rem;"><strong>Real-World Analogy:</strong></p>
                        <p>Think of a company with offices in different cities. When the CEO sends an email announcement, it doesn't reach all offices instantly. Some offices receive it in seconds, others in minutes. Eventually, everyone gets the same message.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-clock"></i>
                        How Eventual Consistency Works
                    </div>
                    
                    <div class="explanation-text">
                        <div class="example-box">
                            <pre><code>-- Eventual Consistency Timeline Example

            -- System: 3 replicas (A, B, C)
            -- Initial state: counter = 10

            -- Time 0:00 - Write to Replica A
            UPDATE counter SET value = 15 WHERE id = 1;

            -- Time 0:00 (immediately after write):
            Replica A: counter = 15 ‚úì (updated)
            Replica B: counter = 10 (stale)
            Replica C: counter = 10 (stale)

            -- INCONSISTENT STATE ‚ö†

            -- Time 0:01 - Async replication to Replica B
            Replica A: counter = 15 ‚úì
            Replica B: counter = 15 ‚úì (now updated)
            Replica C: counter = 10 (still stale)

            -- STILL INCONSISTENT ‚ö†

            -- Time 0:02 - Async replication to Replica C
            Replica A: counter = 15 ‚úì
            Replica B: counter = 15 ‚úì
            Replica C: counter = 15 ‚úì (now updated)

            -- EVENTUALLY CONSISTENT! ‚úì

            -- Total convergence time: 2 seconds
            -- During those 2 seconds, different users saw different values

            -- -----------------------------------------------------------
            -- Read Behavior During Convergence
            -- -----------------------------------------------------------

            -- User 1 reads from Replica A at Time 0:00:
            SELECT value FROM counter WHERE id = 1;
            -- Result: 15 ‚úì

            -- User 2 reads from Replica B at Time 0:00:
            SELECT value FROM counter WHERE id = 1;
            -- Result: 10 ‚ö† (stale!)

            -- User 3 reads from Replica C at Time 0:00:
            SELECT value FROM counter WHERE id = 1;
            -- Result: 10 ‚ö† (stale!)

            -- Same query, different results! ‚ö†
            -- This is eventual consistency

            -- After Time 0:02, all users see 15 ‚úì

            -- -----------------------------------------------------------
            -- Multiple Concurrent Writes
            -- -----------------------------------------------------------

            -- Time 0:00 - Write to Replica A:
            UPDATE counter SET value = value + 1 WHERE id = 1;
            -- Replica A: counter = 11

            -- Time 0:00 - Write to Replica B (concurrent):
            UPDATE counter SET value = value + 2 WHERE id = 1;
            -- Replica B: counter = 12

            -- Conflict! Which value is correct?

            -- Resolution strategies:

            -- 1. Last-Write-Wins (LWW):
            -- Compare timestamps
            -- Replica A: timestamp = 2024-01-01 12:00:00.100
            -- Replica B: timestamp = 2024-01-01 12:00:00.150
            -- Winner: Replica B ‚úì
            -- Final value: 12

            -- 2. Vector Clocks:
            -- Track causality
            -- Detect true conflicts vs sequential updates
            -- May require manual resolution

            -- 3. CRDTs (Conflict-free Replicated Data Types):
            -- Mathematically defined merge rules
            -- Always can merge without conflicts
            -- E.g., counter: sum all increments

            -- -----------------------------------------------------------
            -- Cassandra Eventual Consistency Example
            -- -----------------------------------------------------------

            -- Write with consistency level ONE:
            INSERT INTO users (id, name, email) 
            VALUES (123, 'John', 'john@example.com')
            USING CONSISTENCY ONE;

            -- Behavior:
            -- Write to 1 replica immediately ‚úì
            -- Return success ‚ö°
            -- Replicate to others asynchronously

            -- Read immediately after:
            SELECT * FROM users WHERE id = 123
            USING CONSISTENCY ONE;

            -- May return:
            -- ‚Ä¢ New data (if read from write replica) ‚úì
            -- ‚Ä¢ Old data (if read from un-synced replica) ‚ö†
            -- ‚Ä¢ No data (if read from un-synced replica) ‚ö†

            -- Eventually (seconds later):
            -- All replicas have the data ‚úì

            -- -----------------------------------------------------------
            -- DynamoDB Eventual Consistency
            -- -----------------------------------------------------------

            -- Write item:
            dynamodb.put_item(
                TableName='Users',
                Item={'user_id': 123, 'name': 'John'}
            )
            -- Returns immediately ‚úì

            -- Eventual consistency read (default):
            response = dynamodb.get_item(
                TableName='Users',
                Key={'user_id': 123},
                ConsistentRead=False  # Eventually consistent
            )

            -- May return:
            -- ‚Ä¢ Latest data (if replicated)
            -- ‚Ä¢ Stale data (if not replicated yet)

            -- Typical replication time: < 1 second

            -- Strongly consistent read (optional):
            response = dynamodb.get_item(
                TableName='Users',
                Key={'user_id': 123},
                ConsistentRead=True  # Strong consistency
            )

            -- Always returns latest data ‚úì
            -- But slower (queries primary replica)</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Real-World Examples
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. DNS (Domain Name System)</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- DNS is eventually consistent!

            -- Scenario: Update website IP address
            -- Old IP: 192.168.1.1
            -- New IP: 192.168.1.2

            -- Update DNS record:
            example.com A 192.168.1.2

            -- Time 0:00 - Update authoritative DNS server ‚úì
            -- Time 0:01 - DNS propagation begins
            -- Time 0:10 - Some DNS servers have new IP
            -- Time 1:00 - Most DNS servers have new IP
            -- Time 24:00 - All DNS servers have new IP (TTL expired)

            -- During propagation:
            -- User A (queries DNS server 1): Gets 192.168.1.2 ‚úì
            -- User B (queries DNS server 2): Gets 192.168.1.1 ‚ö†

            -- Different users see different IPs!
            -- Eventually consistent ‚úì

            -- TTL (Time To Live): Controls consistency window
            -- Low TTL (5 min): Faster consistency, more queries
            -- High TTL (24 hrs): Slower consistency, fewer queries</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Social Media (Twitter/Facebook)</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- User posts a tweet/status

            -- Post written to nearest datacenter ‚úì
            -- User sees: "Posted successfully!" ‚úì

            -- Replication:
            -- US-East: Has post immediately ‚úì
            -- US-West: Gets post in 100ms ‚úì
            -- Europe: Gets post in 200ms ‚úì
            -- Asia: Gets post in 500ms ‚úì

            -- Results:
            -- Followers in US-East: See post immediately ‚úì
            -- Followers in Asia: See post 500ms later ‚ö†

            -- Acceptable trade-off:
            -- ‚úì Always available (can always post)
            -- ‚úì Fast response (immediate success)
            -- ‚ö† Slight delay in visibility (< 1 second)

            -- Users barely notice!
            -- Much better than blocking posts during replication</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Amazon Shopping Cart</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- User adds item to cart

            -- Write to local datacenter ‚úì
            -- Return success immediately ‚úì
            -- Replicate asynchronously

            -- User switches to mobile app (different datacenter):
            -- Reads from different replica
            -- May not see item initially ‚ö†

            -- Few seconds later:
            -- Replication completes ‚úì
            -- Item appears in cart ‚úì

            -- Why acceptable:
            -- ‚Ä¢ User rarely switches devices instantly
            -- ‚Ä¢ Cart is not critical (not payment)
            -- ‚Ä¢ Better than showing error ‚úì

            -- When user checks out:
            -- Use strongly consistent read ‚úì
            -- Ensure all items present ‚úì</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Problems with Eventual Consistency
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #dc2626;">1. Read-Your-Writes Consistency Violation</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- User updates profile picture

            -- Write to Replica A:
            UPDATE users SET profile_pic = 'new.jpg' WHERE id = 123;
            -- Success! ‚úì

            -- User immediately refreshes page
            -- Load balancer routes to Replica B (not synced yet)
            SELECT profile_pic FROM users WHERE id = 123;
            -- Returns: 'old.jpg' ‚ö†

            -- User: "Where's my new picture?!" üòï

            -- Solution: Session affinity
            -- Always route user to same replica (sticky sessions)
            -- Or: Read from write replica after write</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">2. Causality Violations</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Alice posts: "I'm getting married!"
            -- Bob comments: "Congratulations!"

            -- Write post to Replica A (Time 0:00)
            -- Write comment to Replica B (Time 0:01)

            -- Carol reads from Replica C (not fully synced):
            -- Sees Bob's comment but not Alice's post! ‚ö†
            -- Carol: "Congratulations for what?!" üòï

            -- Causality violated!
            -- Comment appears before post

            -- Solution: Vector clocks
            -- Track causal relationships
            -- Don't show comment until post visible</code></pre>
                        </div>
                        
                        <h4 style="color: #dc2626; margin-top: 1.5rem;">3. Monotonic Read Violations</h4>
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- User reads counter: value = 100

            -- Writes happen, counter increases to 105

            -- User reads again from different replica (stale):
            -- value = 102 ‚ö†

            -- User sees value DECREASE! (100 ‚Üí 102 but it's actually 105)
            -- Violates expectation of monotonic increase

            -- Solution: Session guarantees
            -- Track last-read version
            -- Don't return older versions to same user</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        When to Use Eventual Consistency
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Use Case</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Acceptable?</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Reason</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Social media posts</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Yes ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Delay not critical</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Product catalog</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Yes ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Stale data acceptable</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>View counts</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #d1fae5;">Yes ‚úì</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Approximate OK</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Shopping cart</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fef3c7;">Maybe ‚ö†</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Strong consistency at checkout</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Bank balance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Must be accurate</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Inventory (checkout)</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Prevent overselling</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Payment processing</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd; background: #fee2e2;">No ‚ùå</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Must be consistent</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">Eventual Consistency</span>
                        <span class="keyword-tag">Convergence</span>
                        <span class="keyword-tag">Replication Lag</span>
                        <span class="keyword-tag">Stale Reads</span>
                        <span class="keyword-tag">Async Replication</span>
                        <span class="keyword-tag">Last-Write-Wins</span>
                        <span class="keyword-tag">Vector Clocks</span>
                        <span class="keyword-tag">Read-Your-Writes</span>
                        <span class="keyword-tag">Causality</span>
                        <span class="keyword-tag">AP Systems</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Question 176: CAP Theorem and BASE Properties -->
            <div class="question-content" id="q176">
                <div class="question-header">
                    <h1 class="question-title">What is the Relationship Between CAP Theorem and BASE Properties?</h1>
                    <div class="question-meta">
                        <span class="meta-tag"><i class="fas fa-layer-group"></i> Advanced</span>
                        <span class="meta-tag"><i class="fas fa-clock"></i> 11 min read</span>
                        <span class="meta-tag"><i class="fas fa-signal"></i> Difficulty: Advanced</span>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-book"></i>
                        ACID vs BASE Overview
                    </div>
                    <div class="definition-box">
                        <p><strong>CAP Theorem led to BASE</strong> as an alternative to ACID. While ACID prioritizes consistency (CP systems), BASE embraces eventual consistency (AP systems).</p>
                        
                        <p style="margin-top: 1rem;"><strong>ACID (Traditional RDBMS):</strong></p>
                        <ul>
                            <li><strong>A</strong>tomicity - All or nothing</li>
                            <li><strong>C</strong>onsistency - Valid state to valid state</li>
                            <li><strong>I</strong>solation - Transactions don't interfere</li>
                            <li><strong>D</strong>urability - Permanent once committed</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>BASE (NoSQL/Distributed Systems):</strong></p>
                        <ul>
                            <li><strong>B</strong>asically <strong>A</strong>vailable - System available most of the time</li>
                            <li><strong>S</strong>oft state - State may change without input (due to eventual consistency)</li>
                            <li><strong>E</strong>ventual consistency - System becomes consistent over time</li>
                        </ul>
                        
                        <p style="margin-top: 1rem;"><strong>Connection to CAP:</strong></p>
                        <ul>
                            <li><strong>ACID systems:</strong> Choose CP (Consistency + Partition tolerance)</li>
                            <li><strong>BASE systems:</strong> Choose AP (Availability + Partition tolerance)</li>
                        </ul>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-layer-group"></i>
                        BASE Properties Explained
                    </div>
                    
                    <div class="explanation-text">
                        <h4 style="color: #059669;">1. Basically Available</h4>
                        <p><strong>The system guarantees availability in terms of the CAP theorem.</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Basically Available means:
            -- System responds to requests even during failures
            -- May not be 100% available, but "basically" available

            -- Example: Cassandra during network partition

            -- 5-node cluster: {A, B, C, D, E}
            -- Partition: {A, B, C} vs {D, E}

            -- Write request from Group 1:
            INSERT INTO users (id, name) VALUES (123, 'John');

            -- Cassandra behavior (with RF=3, CL=ONE):
            -- Write to node A ‚úì
            -- Return success immediately ‚úì
            -- Queue replication to D, E

            -- Result:
            -- ‚úì Available (accepted write)
            -- ‚ö† Not fully replicated (but that's OK)
            -- ‚úì Basically Available ‚úì

            -- Even if nodes D and E are unreachable:
            -- System still functions ‚úì
            -- May serve stale data from D, E ‚ö†
            -- But: Available! ‚úì

            -- Compare to CP system (MongoDB):
            -- Cannot reach majority ‚ùå
            -- Reject writes ‚ùå
            -- NOT Available ‚ùå

            -- -----------------------------------------------------------
            -- Basically vs Fully Available
            -- -----------------------------------------------------------

            -- Fully Available (impossible):
            -- 100% uptime
            -- Every request succeeds
            -- No degraded functionality
            -- Theoretical ideal ‚≠ê

            -- Basically Available (realistic):
            -- 99.9%+ uptime ‚úì
            -- Most requests succeed ‚úì
            -- May serve stale data ‚ö†
            -- May have slight delays ‚ö†
            -- Achievable in practice ‚úì

            -- Real-world example: Amazon DynamoDB
            -- Availability: 99.99% (4 nines)
            -- Downtime: ~4 minutes per month
            -- "Basically available" not "always available"</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">2. Soft State</h4>
                        <p><strong>The state of the system may change over time, even without input, due to eventual consistency.</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- Soft State Example

            -- Traditional ACID (Hard State):
            -- State only changes with explicit operations
            -- Once written, stays same until updated
            -- Deterministic behavior

            SELECT balance FROM accounts WHERE id = 123;
            -- Time 0:00: Returns 1000
            -- Time 0:01: Returns 1000 (unchanged)
            -- Time 0:02: Returns 1000 (unchanged)
            -- Stable state until explicit UPDATE

            -- BASE System (Soft State):
            -- State may change due to replication/resolution
            -- Even without explicit operations
            -- Non-deterministic from user perspective

            -- Time 0:00 - Write to Replica A:
            UPDATE accounts SET balance = 1500 WHERE id = 123;

            -- Time 0:00 - Read from Replica B:
            SELECT balance FROM accounts WHERE id = 123;
            -- Returns: 1000 (old value)

            -- Time 0:01 - Read from Replica B (no new write):
            SELECT balance FROM accounts WHERE id = 123;
            -- Returns: 1500 (changed due to replication!)
            -- State changed without user input!
            -- "Soft" state ‚úì

            -- -----------------------------------------------------------
            -- Another Example: Conflict Resolution
            -- -----------------------------------------------------------

            -- Time 0:00 - Concurrent writes to different replicas:
            -- Replica A: UPDATE counter SET value = 100
            -- Replica B: UPDATE counter SET value = 200

            -- Time 0:01 - Read from Replica A:
            SELECT value FROM counter;
            -- Returns: 100

            -- Time 0:02 - Replication + conflict resolution:
            -- Last-write-wins: 200 wins

            -- Time 0:03 - Read from Replica A (no new write!):
            SELECT value FROM counter;
            -- Returns: 200
            -- Value changed from 100 to 200
            -- Due to conflict resolution, not user input
            -- Soft state! ‚úì

            -- -----------------------------------------------------------
            -- Soft State in Practice
            -- -----------------------------------------------------------

            -- Shopping cart example:
            -- User adds item A (written to DC1)
            -- User adds item B (written to DC2)
            -- Both items eventually merge

            -- From user perspective:
            -- Cart state "softly" changes as system reconciles
            -- Without explicit user action

            -- Contrast with ACID:
            -- All cart operations atomic
            -- State always deterministic
            -- No background changes</code></pre>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">3. Eventual Consistency</h4>
                        <p><strong>The system will become consistent over time, given that no new updates are made.</strong></p>
                        
                        <div class="example-box" style="margin-top: 0.5rem;">
                            <pre><code>-- We covered this in detail in Question 104
            -- Key points:

            -- All replicas will eventually converge ‚úì
            -- Inconsistency window: typically seconds
            -- No guarantee on timing (just "eventual")

            -- Example timeline:
            Time 0:00: Write ‚Üí Replica A updated
            Time 0:01: Replica B updated
            Time 0:02: Replica C updated
            Time 0:02+: All consistent ‚úì

            -- Properties:
            -- ‚úì Liveness: Will eventually reach consistent state
            -- ‚ö† No timeliness guarantee: Could take seconds or minutes
            -- ‚úì Convergence: All replicas agree on final value</code></pre>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        ACID vs BASE Comparison
                    </div>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <tr style="background: #dbeafe;">
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">Aspect</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">ACID</th>
                            <th style="padding: 0.5rem; border: 1px solid #3b82f6;">BASE</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Consistency</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Strong (immediate)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Eventual</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Availability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">May sacrifice for consistency</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Prioritized (basically available)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>State</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Hard (deterministic)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Soft (may change)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Scalability</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Vertical (scale up)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Horizontal (scale out)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Performance</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Slower (coordination)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Faster (no coordination)</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>CAP Choice</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">CP (or CA)</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">AP</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Examples</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">PostgreSQL, MySQL</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Cassandra, DynamoDB</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;"><strong>Use Cases</strong></td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Banking, payments</td>
                            <td style="padding: 0.5rem; border: 1px solid #93c5fd;">Social media, CDN</td>
                        </tr>
                    </table>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-code"></i>
                        ACID vs BASE Code Examples
                    </div>
                    <div class="example-box">
                        <pre><code>-- ============================================================
            -- ACID Example: Banking Transfer
            -- ============================================================

            -- PostgreSQL (ACID/CP System)

            START TRANSACTION;

            -- Atomicity: Both operations or neither
            UPDATE accounts SET balance = balance - 500 WHERE id = 'A';
            UPDATE accounts SET balance = balance + 500 WHERE id = 'B';

            -- Consistency: Check constraints enforced
            -- (e.g., balance >= 0)

            -- Isolation: Other transactions don't see partial state
            -- Durability: Permanent after commit

            COMMIT;

            -- Guarantees:
            -- ‚úì Either both updates happen or neither
            -- ‚úì No negative balances (consistency)
            -- ‚úì Other transactions see before or after state (isolation)
            -- ‚úì Changes permanent (durability)

            -- During network partition:
            -- If cannot reach all replicas ‚Üí Block transaction ‚ùå
            -- Consistency over availability

            -- ============================================================
            -- BASE Example: Social Media Post
            -- ============================================================

            -- Cassandra (BASE/AP System)

            -- Write post (CL=ONE for availability)
            INSERT INTO posts (user_id, post_id, content, timestamp)
            VALUES (123, uuid(), 'Hello World!', toTimestamp(now()))
            USING CONSISTENCY ONE;

            -- Basically Available:
            -- Returns immediately ‚úì
            -- Even if some nodes unreachable ‚úì

            -- Soft State:
            -- Post may appear/disappear on different nodes
            -- As replication progresses

            -- Eventual Consistency:
            -- All nodes will eventually have the post
            -- May take seconds

            -- Behavior during partition:
            -- Write succeeds on available nodes ‚úì
            -- Other nodes sync when partition heals ‚úì
            -- Availability over consistency ‚úì

            -- Read behavior:
            SELECT * FROM posts WHERE user_id = 123
            USING CONSISTENCY ONE;

            -- May return:
            -- ‚Ä¢ Latest posts (from up-to-date node)
            -- ‚Ä¢ Slightly stale posts (from not-yet-synced node)
            -- Eventually all nodes consistent ‚úì

            -- ============================================================
            -- Hybrid Approach: E-commerce
            -- ============================================================

            -- Use ACID for critical operations:
            -- Checkout, payment processing
            START TRANSACTION;
            UPDATE inventory SET stock = stock - 1 WHERE product_id = 101;
            INSERT INTO orders (user_id, product_id, amount) VALUES (...);
            COMMIT;

            -- Use BASE for non-critical operations:
            -- Product views, recommendations
            -- Cassandra for high-volume, low-consistency data

            -- Best of both worlds! ‚úì

            -- ============================================================
            -- Decision Framework
            -- ============================================================

            -- Choose ACID when:
            -- ‚úì Correctness critical (financial data)
            -- ‚úì Cannot tolerate stale data
            -- ‚úì Small to medium scale
            -- ‚úì Single datacenter OK

            -- Choose BASE when:
            -- ‚úì Availability critical (social media)
            -- ‚úì Can tolerate stale data (seconds)
            -- ‚úì Need massive scale
            -- ‚úì Global distribution required

            -- Real-world: Most systems use BOTH!
            -- ACID for critical paths
            -- BASE for high-volume paths</code></pre>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-project-diagram"></i>
                        The Evolution: ACID ‚Üí CAP ‚Üí BASE
                    </div>
                    
                    <div class="explanation-text">
                        <div style="padding: 1rem; background: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 4px; margin-top: 1rem;">
                            <p style="margin: 0; font-weight: bold; color: #1e40af;">Historical Context:</p>
                            <ol style="margin: 0.5rem 0 0 1rem; color: #1e40af;">
                                <li><strong>1970s-1990s:</strong> ACID dominant (single-server databases)</li>
                                <li><strong>2000:</strong> CAP theorem formulated (Brewer)</li>
                                <li><strong>2000s:</strong> Web scale challenges emerge (Google, Amazon)</li>
                                <li><strong>2007:</strong> Amazon Dynamo paper (BASE principles)</li>
                                <li><strong>2008+:</strong> NoSQL movement (Cassandra, MongoDB)</li>
                                <li><strong>2010s:</strong> BASE widely adopted for web-scale systems</li>
                                <li><strong>2012+:</strong> NewSQL emerges (trying to bridge ACID and scale)</li>
                            </ol>
                        </div>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">Why BASE Emerged:</h4>
                        <ul>
                            <li><strong>Internet Scale:</strong> Billions of users, petabytes of data</li>
                            <li><strong>Global Distribution:</strong> Users worldwide need low latency</li>
                            <li><strong>Cost:</strong> Horizontal scaling cheaper than vertical</li>
                            <li><strong>Availability:</strong> Downtime = lost revenue</li>
                        </ul>
                        
                        <h4 style="color: #059669; margin-top: 1.5rem;">The Realization:</h4>
                        <p>Not all data needs ACID. Social media posts don't need the same guarantees as bank transfers. BASE provides a pragmatic alternative for web-scale applications where availability and performance matter more than immediate consistency.</p>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Interview Talking Points
                    </div>
                    
                    <div class="explanation-text">
                        <p><strong>Key Points to Explain:</strong></p>
                        <ol>
                            <li><strong>CAP Theorem Foundation:</strong> "CAP theorem states you can only have two of three: Consistency, Availability, Partition Tolerance. Since partitions are inevitable in distributed systems, the real choice is between C and A."</li>
                            
                            <li><strong>ACID for CP:</strong> "ACID properties align with CP systems - they prioritize consistency. Traditional RDBMS are ACID, making them CP when distributed."</li>
                            
                            <li><strong>BASE for AP:</strong> "BASE emerged as the AP alternative. It sacrifices immediate consistency for availability and scalability. NoSQL databases like Cassandra and DynamoDB are BASE systems."</li>
                            
                            <li><strong>Not Binary:</strong> "Modern applications often use both - ACID for critical operations (checkout, payment) and BASE for high-volume operations (posts, views)."</li>
                            
                            <li><strong>Trade-offs:</strong> "It's about choosing the right tool for the job. Banking needs ACID. Social media can use BASE. Understanding CAP helps make informed decisions."</li>
                        </ol>
                    </div>
                </div>

                <div class="content-card">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Keywords to Remember
                    </div>
                    <div class="keywords-container">
                        <span class="keyword-tag">ACID vs BASE</span>
                        <span class="keyword-tag">Basically Available</span>
                        <span class="keyword-tag">Soft State</span>
                        <span class="keyword-tag">Eventual Consistency</span>
                        <span class="keyword-tag">CP Systems</span>
                        <span class="keyword-tag">AP Systems</span>
                        <span class="keyword-tag">Strong Consistency</span>
                        <span class="keyword-tag">Trade-offs</span>
                        <span class="keyword-tag">Hybrid Approach</span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev" onclick="navigateQuestion('prev')">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="nav-btn next" onclick="navigateQuestion('next')">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

        </div>
    </main>


    <!-- Mobile Toggle Button -->
    <div class="mobile-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Scroll to Top Button -->
    <div class="scroll-top" id="scrollTop" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </div>

     <script>
        // State Management
        if (typeof window.currentQuestion === 'undefined') {
            window.currentQuestion = 'q1';
        }
        if (typeof totalQuestions === 'undefined') {
            totalQuestions = 2000;
        }
        if (typeof completedQuestions === 'undefined') {
            completedQuestions = new Set();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            setupSidebar();
            setupCrossQuestions();
            setupSearch();
            setupScrollTop();
            updateProgress();
        }

        // Sidebar Navigation
        function setupSidebar() {
            document.querySelectorAll('.difficulty-header').forEach(header => {
                header.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const questionList = this.nextElementSibling;
                    questionList.classList.toggle('active');
                });
            });

            document.querySelectorAll('.question-item').forEach(item => {
                item.addEventListener('click', function() {
                    const questionId = this.getAttribute('data-question');
                    navigateToQuestion(questionId);
                });
            });
        }

        function navigateToQuestion(questionId) {
            if (currentQuestion) {
                completedQuestions.add(currentQuestion);
                const prevItem = document.querySelector(`[data-question="${currentQuestion}"]`);
                if (prevItem) prevItem.classList.add('completed');
            }

            document.querySelectorAll('.question-content').forEach(content => {
                content.classList.remove('active');
            });

            const selectedContent = document.getElementById(questionId);
            if (selectedContent) {
                selectedContent.classList.add('active');
                currentQuestion = questionId;

                document.querySelectorAll('.question-item').forEach(item => {
                    item.classList.remove('active');
                });
                const activeItem = document.querySelector(`[data-question="${questionId}"]`);
                if (activeItem) {
                    activeItem.classList.add('active');
                    const parentList = activeItem.closest('.question-list');
                    if (parentList && !parentList.classList.contains('active')) {
                        parentList.previousElementSibling.click();
                    }
                }

                window.scrollTo({ top: 0, behavior: 'smooth' });
                updateProgress();
            }
        }

        function navigateQuestion(direction) {
            const questionNumber = parseInt(currentQuestion.substring(1));
            let newQuestionNumber;

            if (direction === 'next') {
                newQuestionNumber = questionNumber + 1;
            } else {
                newQuestionNumber = questionNumber - 1;
            }

            if (newQuestionNumber >= 1 && newQuestionNumber <= totalQuestions) {
                navigateToQuestion(`q${newQuestionNumber}`);
            }
        }

        // Cross Questions Toggle
        function setupCrossQuestions() {
            document.querySelectorAll('.cross-question-item').forEach(item => {
                item.addEventListener('click', function() {
                    this.classList.toggle('active');
                });
            });
        }

        // Search Functionality
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                
                document.querySelectorAll('.question-item').forEach(item => {
                    const text = item.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        }

        // Scroll to Top
        function setupScrollTop() {
            window.addEventListener('scroll', function() {
                const scrollTop = document.getElementById('scrollTop');
                if (window.pageYOffset > 300) {
                    scrollTop.classList.add('visible');
                } else {
                    scrollTop.classList.remove('visible');
                }
            });
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Progress Tracking
        function updateProgress() {
            const questionNum = parseInt(currentQuestion.substring(1));
            document.getElementById('progressText').textContent = `Q ${questionNum} of ${totalQuestions}`;
            const progress = (questionNum / totalQuestions) * 100;
            document.getElementById('progressBarFill').style.width = `${progress}%`;
        }

        // Mobile Sidebar Toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }

        // Keyboard Navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight') {
                navigateQuestion('next');
            } else if (e.key === 'ArrowLeft') {
                navigateQuestion('prev');
            }
        });
    </script>
</body>
</html>